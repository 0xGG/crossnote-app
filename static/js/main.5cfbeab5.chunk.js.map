{"version":3,"sources":["utilities/markdown.ts","lib/fs.ts","lib/notebook.ts","lib/crossnote.ts","utilities/utils.ts","utilities/image.ts","i18n/i18n.ts","i18n/lang/enUS.ts","i18n/lang/zhCN.ts","i18n/lang/zhTW.ts","i18n/lang/jaJP.ts","themes/theme.ts","themes/light.ts","themes/dark.ts","themes/one-dark.ts","themes/solarized-light.ts","containers/global.ts","editor/widgets/timer/index.tsx","utilities/image_uploader.ts","editor/widgets/image/index.tsx","editor/widgets/audio/index.tsx","editor/widgets/video/index.tsx","editor/widgets/bilibili/index.tsx","editor/widgets/youtube/index.tsx","editor/widgets/ocr/index.tsx","utilities/history.ts","utilities/preview.ts","components/EditImageDialog.tsx","editor/widgets/kanban/index.tsx","generated/graphql.tsx","utilities/note.ts","utilities/client.ts","editor/widgets/comment/CommentMessages.tsx","editor/widgets/comment/CommentEditor.tsx","editor/widgets/comment/CommentDialog.tsx","editor/widgets/widget/WidgetTopPanel.tsx","editor/widgets/comment/index.tsx","editor/widgets/github_gist/index.tsx","editor/index.ts","themes/manager.ts","lib/event.ts","containers/crossnote.ts","lib/keymap.ts","lib/tabNode.ts","components/AddNotebookDialog.tsx","containers/settings.ts","containers/cloud.ts","components/AuthDialog.tsx","components/NotebookCard.tsx","components/Notebooks.tsx","components/ExplorePanel.tsx","components/NotebookPanel.tsx","components/LanguageSelectorDialog.tsx","components/ConfigureNotebookDialog.tsx","components/PushNotebookDialog.tsx","components/NotebookTreeView.tsx","_git_commit.js","components/Settings.tsx","components/DeleteNoteDialog.tsx","components/NotePopover.tsx","components/NoteCard.tsx","lib/order.ts","components/Notes.tsx","components/NotesPanel.tsx","pages/Privacy.tsx","lib/editorMode.ts","editor/views/float-win.ts","components/NotePanel.tsx","editor/views/math-preview.ts","components/GraphView.tsx","lib/graphView.ts","components/MainPanel.tsx","pages/Home.tsx","components/GitHubOAuthCallback.tsx","serviceWorker.ts","components/ServiceWorkerWrapper.tsx","App.tsx","containers/notifications.ts","index.tsx"],"names":["matter","markdown","endFrontMatterOffset","frontMatter","startsWith","indexOf","frontMatterString","slice","window","parse","error","replace","data","content","matterStringify","yamlStr","stringify","trim","FileSystem","fs","readFile","writeFile","readdir","unlink","stats","mkdir","exists","rename","rmdir","mkdirp","this","setUpFSMethods","path","opts","Promise","resolve","reject","toString","encoding","files","stat","oldPath","newPath","a","isDirectory","oldPathStat","newPathStat","i","length","file","filePath","dirPath","promises","push","all","LightningFS","pfs","formatNoteConfig","noteConfig","newObject","Object","assign","createdAt","modifiedAt","Notebook","_id","dir","name","gitURL","gitBranch","gitCorsProxy","gitUsername","gitPassword","autoFetchPeriod","fetchedAt","remoteSha","localSha","notes","isLocal","loadedNotes","getNote","note","tokens","md","console","log","resolveLink","link","endsWith","traverseResults","traverse","results","level","token","type","arr","split","text","match","children","mentions","oldMentions","mentionedNote","mentionedBy","oldFilePath","newFilePath","removeNoteRelations","newDirPath","Error","git","filepath","filepaths","force","refreshNoteRelations","absFilePath","isFile","Date","ctimeMs","mtimeMs","pinned","favorited","notebookPath","title","config","processNoteMentionsAndMentionedBy","includeSubdirectories","refreshNotes","refreshNotesPromises","oMarkdown","oldNote","writeNote","Crossnote","notebookDB","PouchDB","plugin","PouchdbFind","createIndex","index","fields","corsProxy","branch","username","password","depth","rememberCredentials","cloneNotebook","randomID","notebook","put","http","url","ref","singleBranch","onAuth","auth","getGitSHA","sha","getDefaultNotebookNameFromGitURL","notebookID","get","remove","nb","oldDirName","newDirName","dirName","cache","createCache","stagedFiles","status","authorName","authorEmail","message","onProgress","onMessage","onAuthFailure","onAuthSuccess","pullNotebook","numConflicts","author","email","restoreSHA","progress","pushResult","ok","updateNotebook","logs","oid","deleteNote","dirname","markdownHasConflicts","result","generateChangesCache","localStorage","setItem","JSON","fetchHead","hardResetNotebook","restoreFilesFromCache","LINEBREAKS","markerSize","ourName","theirName","ourContent","baseContent","theirContent","baseContentBlobResult","Buffer","from","blob","theirContentBlobTresult","ours","base","theirs","diff3Merge","mergedText","hasConflict","item","join","conflict","repeat","b","removeItem","tags","m1","m2","m3","find","selector","$gt","notebooks","docs","map","n","pendingPull","getItem","filter","sort","x","y","localeCompare","lastIndexOf","UUIDNil","getGraphQLEndpoint","startGitHubOAuth","open","encodeURIComponent","s","reduce","charCodeAt","Math","abs","parseFloat","key","color","hashCode","random","substr","getTodayName","today","moment","format","momentFormat","resolveNoteImageSrc","imageSrc","loadImageAsBase64","resolveNotebookFilePath","gitURLArr","gitHost","toLowerCase","gitOwner","gitRepo","outFilePath","noteFilePath","imageFilePath","Uint8Array","base64","buffer","imageType","i18next","use","initReactI18next","init","interpolation","escapeValue","keySeparator","lng","fallbackLng","resources","translation","languageCodeToDateFNSLocale","code","zhCN","enUS","zhTW","ja","CrossnoteTheme","muiThemeOptions","muiTheme","createMuiTheme","LightTheme","palette","primary","blue","secondary","orange","DarkTheme","common","black","white","background","paper","lighten","default","light","main","dark","contrastText","divider","disabled","hint","action","active","OneDarkTheme","cyan","blueGrey","SolarizedLight","amber","globalContainers","cloudContainer","settingsContainer","crossnoteContainer","Timer","props","attributes","theme","useTheme","style","cursor","padding","backgroundColor","borderRadius","display","justifyContent","width","maxWidth","boxShadow","marginBottom","isPreview","className","toLocaleString","smmsUploadImages","FormData","append","fetch","method","mode","headers","referrer","body","then","response","json","catch","useStyles","makeStyles","createStyles","card","spacing","position","actionButtons","top","right","section","marginTop","dropArea","darken","ImageWidget","classes","t","useTranslation","useState","setURL","imageUploaderElement","setImageUploaderElement","uploadingImages","setUploadingImages","Card","elevation","clsx","Typography","variant","Box","Tooltip","IconButton","onClick","removeSelf","Input","margin","placeholder","value","onChange","event","target","onKeyDown","which","replaceSelf","fullWidth","e","preventDefault","stopPropagation","onchange","Noty","layout","timeout","show","urls","forEach","click","multiple","element","AudioWidget","source","setSource","autoplay","setAutoplay","controls","setControls","loop","setLoop","muted","setMuted","autoPlay","src","attrs","setAttributes","FormControlLabel","label","control","Switch","checked","videoWrapper","height","paddingTop","video","left","VideoWidget","poster","setPoster","border","errorMessage","BilibiliWidget","setError","scrolling","frameBorder","allowFullScreen","aid","bvid","YoutubeWidget","alt","videoID","canvasWrapper","canvas","OCRWidget","setCanvas","setLink","imageDataURL","setImageDataURL","ocrDataURL","setOCRDataURL","imageDropAreaElement","setImageDropAreaElement","isProcessing","setIsProcessing","ocrProgresses","setOCRProgresses","getInitialLanguages","selectedLanguages","setSelectedLanguages","grayscaleChecked","setGrayscaleChecked","toggleLanguage","lang","offset","splice","useEffect","imageObject","Image","context","getContext","onload","clearRect","fillStyle","fillRect","globalCompositeOperation","drawImage","toDataURL","onerror","setAttribute","List","ListItem","ListItemText","ListItemSecondaryAction","floor","FormGroup","Checkbox","ButtonGroup","Button","input","worker","createWorker","logger","m","languagesArr","load","loadLanguage","initialize","recognize","terminate","ocr","startOCRFromLink","textAlign","reader","FileReader","readAsDataURL","browserHistory","createBrowserHistory","openURL","location","origin","openNoteAtPath","getNotebookAtPath","decodeURIComponent","postprocessPreview","previewElement","isPresentationCallback","handleLinksClickEvent","preview","links","getElementsByTagName","onclick","hasAttribute","getAttribute","resolveImages","images","image","childElementCount","tagName","toUpperCase","overflow","contentDocument","imageWrapper","imagePreview","maxHeight","EditImageDialog","editor","marker","imageElement","setImageSrc","imageAlt","setImageAlt","imageTitle","setImageTitle","finalImageSrc","setFinalImageSrc","deleteImage","useCallback","pos","replaceRange","to","onClose","updateImage","Dialog","zIndex","DialogTitle","DialogContent","TextField","autoFocus","helperText","DialogActions","VickyMD","require","columnHeader","alignItems","kanbanCard","breakpoints","down","editorWrapper","textarea","KanbanColumnHeaderDisplay","column","board","refreshBoard","clickedTitle","setClickedTitle","titleValue","setTitleValue","onBlur","onKeyUp","id","now","description","cards","columns","l","KanbanCardDisplay","textAreaElement","setTextAreaElement","React","setPreviewElement","setEditor","setDescription","editorDialogOpen","setEditDialogOpen","editImageElement","setEditImageElement","editImageTextMarker","setEditImageTextMarker","editImageDialogOpen","setEditImageDialogOpen","fromTextArea","hashtag","keyMap","showCursorWhenSelecting","inputStyle","setValue","setOption","on","getValue","focus","setTheme","themeName","renderPreview","linkIconClickedHandler","args","imageClickedHandler","loadImage","off","c","minWidth","KanbanWidget","setBoard","lanes","newBoard","renderColumnHeader","renderCard","dragging","allowAddColumn","allowAddCard","renderColumnAdder","marginLeft","wip","onNewColumnConfirm","newColumn","disableCardDrag","disableColumnDrag","onCardDragEnd","destination","fromPosition","fromColumnId","toPosition","toColumnId","fromColumn","toColumn","onColumnDragEnd","NotificationEventType","WidgetType","NotebookOrderBy","PageInfoFieldsFragmentDoc","gql","CommentWidgetMessageFieldsFragmentDoc","CommentWidgetMessageConnectionFieldsFragmentDoc","CommentWidgetFieldsFragmentDoc","NotebookFieldsFragmentDoc","NotificationFieldsFragmentDoc","ViewerFieldsFragmentDoc","SignUpDocument","SignInDocument","SignUpWithGitHubAccountDocument","SignInWithGitHubAccountDocument","SendEmailVerificationCodeDocument","ResetPasswordDocument","CreateCommentWidgetDocument","PostCommentWidgetMessageDocument","UpdateCommentWidgetMessageDocument","AddReactionToCommentWidgetDocument","RemoveReactionFromCommentWidgetDocument","AddReactionToCommentWidgetMessageDocument","RemoveReactionFromCommentWidgetMessageDocument","SubscribeToCommentWidgetDocument","UnsubscribeFromCommentWidgetDocument","LinkWithGitHubAccountDocument","UnlinkGitHubAccountDocument","DeleteNotificationDocument","DeleteAllNotificationsDocument","SetUserInfoDocument","DeleteWidgetDocument","UpdateWidgetDocument","CommentWidgetDocument","CommentWidgetMessagesDocument","GitHubUserDocument","NotificationsDocument","ViewerDocument","getHeaderFromMarkdown","titleMatch","getMentionsFromMarkdown","toLocaleLowerCase","self","findIndex","username2","generateSummaryFromMarkdown","contentString","aheadString","coverMatch","coverImagesMatch","mdImage","summary","html","EmptyPageInfo","hasPreviousPage","hasNextPage","startCursor","endCursor","GraphQLClient","createClient","exchanges","defaultExchanges","fetchOptions","Authorization","chatMessage","avatarPanel","gridTemplateAreas","gridColumnGap","avatar","gridArea","time","reactions","singleTime","modifiedCaption","reactionChip","actionBtnClass","CommentMessage","previousMessage","anchorEl","setAnchorEl","emojiPickerOpen","setEmojiPickerOpen","Urql","resAddReactionToCommentWidgetMessage","executeAddReactionToCommentWidgetMessageMutation","resRemoveReactionFromCommentWidgetMessage","executeRemoveReactionFromCommentWidgetMessageMutation","forceUpdate","setForceUpdate","handleClose","openPopper","Boolean","modified","updatedAt","updateReactionSummaries","reaction","found","reactionSummaries","count","selfAuthored","Avatar","Identicon","sha256","formatRelative","locale","language","getTime","weightX","weightY","reactionSummary","Chip","size","marginRight","loggedIn","messageID","setAuthDialogOpen","emoji","Popover","anchorOrigin","vertical","horizontal","transformOrigin","mentionUser","viewer","onModifyChatMessage","showSkinTones","onSelect","colons","root","flexDirection","bottom","toolbar","toolbarLeft","sendButton","CommentEditor","updateMessageID","updateMessageMarkdown","cancelUpdatingMessage","updateMessage","updatingMessage","sendMessage","sendingMessage","topBar","row","commentWrapper","messages","CommentDialog","fullScreen","useMediaQuery","commentWidget","instance","edges","edge","node","setMessages","messagesElement","setMessagesElement","pageInfo","latestPulledMessagePageInfo","setLatestPulledMessagePageInfo","setUpdateMessageID","options","query","useCommentWidgetMessagesQuery","variables","widgetID","before","after","first","last","requestPolicy","pause","resMessagesAfter","executeMessagesAfterQuery","resPostMessage","executePostMessageMutation","resUpdateMessage","executeUpdateMessageMutation","resSubscribeToCommentWidget","executeSubscribeToCommentWidgetMutation","resUnsubscribeFromCommentWidget","executeUnsubscribeFromCommentWidgetMutation","replaceSelection","subscribeToChatGroup","subscribed","unsubscribeFromChatGroup","notifyUsers","addMessage","xC","yC","scrollMessagesToBottom","scrollTop","scrollHeight","fetchPreviousMessages","fetching","postCommentWidgetMessage","updateCommentWidgetMessage","connection","widget","paddingBottom","commentMessage","topPanel","widgetTitle","widgetSourceLink","WidgetTopPanel","resDeleteWidget","executeDeleteWidgetMutation","executeUpdateWidgetMutation","widgetSource","setWidgetSource","deleteWidget","updateWidget","closeEditDialog","err","whiteSpace","Link","href","owner","canConfigure","paddingLeft","paddingRight","interactionPanel","button","CommentWidget","commentDialogOpen","setCommentDialogOpen","resCreateCommentWidget","executeCreateCommentWidgetMutation","useCommentWidgetQuery","resCommentWidget","executeCommentWidgetQuery","executeAddReactionToCommentWidgetMutation","executeRemoveReactionFromCommentWidgetMutation","setCommentWidget","reactionsCount","createWidget","messagesCount","Badge","actionButtonsGroup","GitHubGistWidget","setGistURL","URL","host","pathname","registerWidgetCreator","el","document","createElement","ReactDOM","render","ThemeProvider","ErrorWidget","VickyMDVersion","dependencies","vickymd","VickyMDSetTheme","baseUri","_themeManager","themes","selectedTheme","selectTheme","addTheme","EventType","themeManager","SelectedSectionType","HomeSection","globalEmitter","subscriptions","eventName","cb","eventCallbacks","callback","KeyMap","CrossnoteContainer","createContainer","initialState","crossnote","initialized","setInitialized","setNotebooks","isAddingNotebook","setIsAddingNotebook","isPushingNotebook","isPullingNotebook","needsToRefreshNotes","setNeedsToRefreshNotes","isLoadingNotebook","setIsLoadingNotebook","isPerformingAutoFetch","setIsPerformingAutoFetch","Unknown","homeSection","setHomeSection","FlexLayout","Model","fromJson","global","splitterSize","tabSetEnableMaximize","tabSetHeaderHeight","tabSetTabStripHeight","borders","weight","selected","layoutModel","setLayoutModel","addTabNode","tabNode","activeTabset","getActiveTabset","modelChildren","getRoot","getChildren","needsToCreateNewTabSet","child","getType","doAction","Actions","setActiveTabset","getId","TabSetNode","_addChild","singleton","getNodeById","selectTab","component","tabs","eTabNode","eNote","_attributes","addNode","DockLocation","CENTER","closeTabNode","deleteTab","updateNoteMarkdown","newNote","emit","ModifiedMarkdown","tabId","updateNoteConfig","DeleteNote","changeNoteFilePath","createNewNote","fileName","untitled","foundToday","openTodayNote","duplicateNote","addNotebook","gitRememberCredentials","deleteNotebook","selectedNotebook","pushNotebook","checkoutNote","togglePin","newConfig","toggleFavorite","listNotebooks","selectedNotebookID","useInterval","fetchNotebook","AddNotebookDialog","useContainer","notebookName","setNotebookName","expanded","setExpanded","setGitURL","setGitBranch","setGitUsername","setGitPassword","setGitCorsProxy","rememberCredentialsChecked","setRememberCredentialsChecked","close","autoComplete","autoCorrect","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","canCancel","SettingsContainer","v","setLanguage","editorCursorColor","setEditorCursorColor","setAuthorName","setAuthorEmail","getTheme","DEFAULT","VIM","EMACS","setKeyMap","i18n","_setLanguage","changeLanguage","_setEditorCursorColor","_setAuthorName","_setAuthorEmail","_setTheme","_setKeyMap","Stage","CloudContainer","authDialogOpen","setLoggedIn","setViewer","useViewerQuery","resViewer","executeViewerQuery","resSetUserInfo","executeSetUserInfoMutation","setSelectedNotebook","displayNotebookPreview","setDisplayNotebookPreview","refetchViewer","pollInterval","setUserInfo","cover","bio","reduceNotificationsCountByOne","notifications","totalCount","max","clearNotificationsCount","logout","reload","form","header","authBtn","switchLink","AuthDialog","Signin","stage","setStage","setUsername","setEmail","setPassword","passwordConfirmation","setPasswordConfirmation","setErrorMessage","verificationCode","setVerificationCode","resSignIn","executeSignInMutation","resSignUp","executeSignUpMutation","resSendEmailVerificationCode","executeSendEmailVerificationCodeMutation","resResetPassword","executeResetPasswordMutation","signin","signup","sendEmailVerificationCode","resetPassword","signIn","signUp","setTimeout","Signup","currentTarget","ForgotPassword","icon","Divider","notebookCard","borderLeft","unselected","leftPanel","rightPanel","borderBottom","bottomPanel","wordBreak","imagesWrapper","backgroundSize","backgroundPosition","star","notebooksList","flex","overflowY","explorePanel","sectionName","search","shape","fade","up","searchIcon","pointerEvents","inputRoot","inputInput","transition","transitions","create","notebookPanel","controlBtn","controlBtnSelected","controlBtnSelectedSecondary","backBtn","previewWrapper","presentation","LanguageSelectorDialog","languages","setOpen","titleLanguage","setTitleLanguage","chooseLanguage","fontSize","ConfigureNotebookDialog","setAutoFetchPeriod","clickDeleteCount","setClickDeleteCount","clickHardResetCount","setClickHardResetCount","isNaN","endAdornment","InputAdornment","textField","PushNotebookDialog","commitMessage","setCommitMessage","treeItemRoot","treeItemContent","typography","fontWeightMedium","fontWeight","fontWeightRegular","treeItemGroup","treeItemExpanded","treeItemLabel","treeItemLabelRoot","treeItemLabelIcon","treeItemLabelText","flexGrow","NotebookTreeView","notebookConfigurationDialogOpen","setNotebookConfigurationDialogOpen","pushNotebookDialogOpen","setPushNotebookDialogOpen","favoritedNotes","setFavoritedNotes","refreshQuickAccessNotes","handleChange","nodes","refreshNotesInNotLoaded","modifiedMarkdownCallback","Notebooks","Fragment","TreeView","defaultExpandIcon","disableFocusRipple","disableRipple","defaultCollapseIcon","defaultEndIcon","onNodeToggle","TreeItem","nodeId","group","role","aria-label","settingsCard","loggedInSection","saveBtn","logoutBtn","swatch","editorText","editorCursor","borderLeftStyle","borderLeftWidth","getRGBA","inputStr","r","parseInt","g","Settings","colorPickerAnchorElement","setColorPickerAnchorElement","displayColorPicker","setAvatar","uploadingAvatar","setUploadingAvatar","useGitHubUserQuery","resGitHubUser","resUnlinkGitHubAccount","executeUnlinkGitHubAccount","widgetsCount","InputLabelProps","shrink","githubUser","login","onDelete","Select","MenuItem","borderLeftColor","cursorColor","rgb","GitCommit","DeleteNoteDialog","DialogContentText","secondaryColor","NotePopover","deleteNoteDialogOpen","setDeleteNoteDialogOpen","anchorElement","keepMounted","ListItemIcon","noteCard","duration","pin","NoteCard","setHeader","setSummary","setImages","gitStatus","popoverElement","setPopoverElement","formatDistanceStrict","imageSrcs","arrow","backgroundImage","OrderBy","OrderDirection","notesList","NoteCardWidth","updatePanel","Notes","setNotes","masonryInstance","searchValue","unpinned","regexp","RegExp","scrollElement","hack","initialHeight","initialFlex","addEventListener","removeEventListener","Skeleton","animation","once","scrollContainer","resize","notesPanel","fixedTopPanel","loading","transform","sortSelected","NotesPanel","sortMenuAnchorEl","setSortMenuAnchorEl","isCreatingNote","setIsCreatingNote","ModifiedAt","orderBy","setOrderBy","DESC","orderDirection","setOrderDirection","rawNotes","setRawNotes","initialSearchValue","setSearchValue","searchValueInputTimeout","setSearchValueInputTimeout","finalSearchValue","setFinalSearchValue","setFixedTopPanel","container","useRef","referredNote","RefreshNotes","onChangeSearchValue","clearTimeout","refreshRawNotes","notesMap","refreshNotesCallback","deleteNoteCallback","CreatedAt","Title","current","containerElement","parentElement","scrollEvent","offsetTop","InputBase","inputProps","ASC","CircularProgress","PrivacyPolicy","Hidden","smUp","implementation","toggleDrawer","EditorMode","FloatWin","win","closeBtn","visible","titlebar","querySelector","boxX","boxY","mouseX","mouseY","offsetX","offsetY","hide","ev","keyCode","offsetLeft","getMouseXY","move","test","documentElement","clientWidth","offsetWidth","clientHeight","offsetHeight","min","pageX","pageY","clientX","scrollLeft","clientLeft","clientY","clientTop","moveToCenter","moveTo","innerWidth","innerHeight","HMDFold","math","notePanel","contentPanel","floatWin","floatWinHidden","floatWinTitle","floatWinContent","floatWinClose","NotePanel","noteTitle","setNoteTitle","setNote","Preview","editorMode","setEditorMode","previewIsPresentation","setPreviewIsPresentation","line","ch","setCursorPosition","mathPreviewElement","notePopoverElement","setNotePopoverElement","confirmNoteTitle","finalNoteTitle","previewPostprocessPreview","flag","renameTab","hmdFold","hmdClick","info","cm","ctrlKey","altKey","getCursor","winElement","mathRenderer","supressed","onPreview","expr","hmd","FoldMath","createRenderer","getElementById","onChanged","cursorPos","charCoords","isReady","startRender","onPreviewEnd","initMathPreview","innerText","switchToHyperMD","getWrapperElement","refresh","SourceCode","switchToNormal","SplitView","changesHandler","getOption","keys","graphViewPanel","GraphView","graphViewData","setGraphViewData","setWidth","setHeight","mentionedFilePath","constructGraphView","svg","d3","attr","scaleExtent","zoomHandler","selectAll","enter","d","fixna","isFinite","neigh","n1","n2","note1","note2","updateLink","updateNode","graphLayout","strength","distance","call","o","sourceEvent","alphaTarget","restart","raise","drag","mainPanel","MainPanel","factory","getConfig","getName","getComponent","Layout","model","page","appBar","drawer","toolBar","displayNone","flexShrink","drawerPaper","notebooksSection","controllersSection","listItemIcon","selectedSection","menuButton","editorPanel","toolBarSpace","mixins","Home","addNotebookDialogOpen","setAddNotebookDialogOpen","addNotebookRepo","addNotebookBranch","drawerOpen","setDrawerOpen","disablePadding","disableGutters","badgeContent","Explore","CssBaseline","Drawer","ModalProps","xsDown","wrapper","boxSizing","GitHubOAuthCallback","accessToken","setAccessToken","setTitle","resLinkWithGitHubAccount","executeLinkWithGitHubAccount","resSignInWithGitHubAccount","executeSignInWithGitHubAccount","resSignUpWithGitHubAccount","executeSignUpWithGitHubAccount","signInWithGitHubAccount","user","signUpWithGitHubAccount","isLocalhost","hostname","register","navigator","process","swUrl","contentType","serviceWorker","ready","registration","unregister","registerValidSW","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","ServiceWorkerWrapper","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","reloadPage","postMessage","Snackbar","is","App","handler","prompt","userChoice","choiceResult","history","exact","queryParams","Notifications","qs","Privacy","safari","copyTitle","copyBody","copyShareButtonLabel","copyAddHomeButtonLabel","copyClosePrompt","NotificationsContainer","setPageInfo","setNotifications","needsRefetch","setNeedsRefetch","useNotificationsQuery","resNotifications","executeNotificationsQuery","resDeleteNotification","executeDeleteNotificationMutation","resDeleteAllNotifications","executeDeleteAllNotificationsMutation","fetchMoreNotifications","deleteNotification","notificationID","notification","deleteAllNotifications","ns","newNotifications","reverse","Provider"],"mappings":"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","file":"static/js/main.5cfbeab5.chunk.js","sourcesContent":["// const loadLanguages = require(\"prismjs/components/\");\n// loadLanguages([\"python\"]);\n\nexport const TagStopRegExp = /[@#,.!$%^&*()[\\]-_+=~`<>?\\\\]/g;\nexport function getTags(markdown: string): string[] {\n  const tags = new Set(\n    markdown.match(\n      /(#([^#]+?)#[\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\])|(#[^\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\]+)/g,\n    ) || [],\n  );\n  return Array.from(tags).map(\n    (tag) => tag.replace(TagStopRegExp, \"\").trim(), // Don't remove \\s here\n  );\n}\n\nexport function sanitizeTag(tagName: string): string {\n  let tag = tagName.trim() || \"\";\n  return tag\n    .replace(/\\s+/g, \" \")\n    .replace(TagStopRegExp, \"\")\n    .split(\"/\")\n    .map((t) => t.trim())\n    .filter((x) => x.length > 0)\n    .join(\"/\");\n}\n\nexport function sanitizeNoteTitle(noteTitle: string): string {\n  return sanitizeTag(noteTitle);\n}\n\nexport interface MatterOutput {\n  data: any;\n  content: string;\n}\n\nexport function matter(markdown: string): MatterOutput {\n  let endFrontMatterOffset = 0;\n  let frontMatter = {};\n  if (\n    markdown.startsWith(\"---\") &&\n    /* tslint:disable-next-line:no-conditional-assignment */\n    (endFrontMatterOffset = markdown.indexOf(\"\\n---\")) > 0\n  ) {\n    const frontMatterString = markdown.slice(3, endFrontMatterOffset);\n    try {\n      frontMatter = (window as any)[\"YAML\"].parse(frontMatterString);\n    } catch (error) {}\n    markdown = markdown\n      .slice(endFrontMatterOffset + 4)\n      .replace(/^[ \\t]*\\n/, \"\");\n  }\n  return {\n    data: frontMatter,\n    content: markdown,\n  };\n}\n\nexport function matterStringify(markdown: string, frontMatter: any) {\n  frontMatter = frontMatter || {};\n  const yamlStr = (window as any)[\"YAML\"].stringify(frontMatter).trim();\n  if (yamlStr === \"{}\" || !yamlStr) {\n    return markdown;\n  } else {\n    return `---\n${yamlStr}\n---\n${markdown}`;\n  }\n}\n","// @ts-ignore\nimport LightningFS from \"@isomorphic-git/lightning-fs\";\nimport * as path from \"path\";\nimport { Stats } from \"fs\";\n\nclass FileSystem {\n  private fs: any;\n\n  public readFile: (path: string, opts?: any) => Promise<string | Uint8Array>;\n  public writeFile: (path: string, data: string) => Promise<void>;\n  public readdir: (path: string) => Promise<string[]>;\n  public unlink: (path: string) => Promise<void>;\n  public stats: (path: string) => Promise<Stats>;\n  public mkdir: (path: string) => Promise<void>;\n  public exists: (path: string) => Promise<boolean>;\n  public rename: (oldPath: string, newPath: string) => Promise<void>;\n  public rmdir: (path: string) => Promise<void>;\n  public mkdirp: (path: string) => Promise<void>;\n\n  constructor(fs: any) {\n    this.fs = fs;\n    this.setUpFSMethods();\n  }\n\n  private setUpFSMethods() {\n    this.readFile = (path: string, opts?: any) => {\n      return new Promise((resolve, reject) => {\n        this.fs.readFile(path, opts, (error: Error, data: string) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve(data.toString());\n          }\n        });\n      });\n    };\n    this.writeFile = (path: string, data: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.writeFile(path, data, { encoding: \"utf8\" }, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.readdir = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.readdir(path, (error: Error, files: string[]) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve(files);\n          }\n        });\n      });\n    };\n    this.unlink = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.unlink(path, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.stats = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.stat(path, (error: Error, stats: Stats) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve(stats);\n          }\n        });\n      });\n    };\n    this.mkdir = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.mkdir(path, \"0777\", (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.exists = (path: string) => {\n      return new Promise((resolve, reject) => {\n        this.fs.stat(path, (error: Error, stats: Stats) => {\n          if (error) {\n            return resolve(false);\n          } else {\n            return resolve(true);\n          }\n        });\n      });\n    };\n    const rename = async (oldPath: string, newPath: string): Promise<void> => {\n      const stats = await this.stats(oldPath);\n      if (stats.isDirectory()) {\n        await this.mkdirp(newPath);\n      } else {\n        await this.mkdirp(path.dirname(newPath));\n      }\n\n      return new Promise((resolve, reject) => {\n        this.fs.rename(oldPath, newPath, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    this.rename = async (oldPath: string, newPath: string) => {\n      const oldPathStat = await this.stats(oldPath);\n      let newPathStat: Stats;\n      if (await this.exists(newPath)) {\n        newPathStat = await this.stats(newPath);\n      } else {\n        newPathStat = null;\n      }\n      if (\n        oldPathStat.isDirectory() ||\n        (newPathStat && newPathStat.isDirectory())\n      ) {\n        const files = await this.readdir(oldPath);\n        // const promises = []; // <= It seems to cause bug if run parallel\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const filePath = path.resolve(oldPath, file);\n          const stats = await this.stats(filePath);\n          if (stats.isDirectory()) {\n            await this.rename(filePath, path.resolve(newPath, file));\n          } else {\n            await rename(filePath, path.resolve(newPath, file));\n          }\n        }\n        // await Promise.all(promises);\n        await this.rmdir(oldPath);\n      } else {\n        await rename(oldPath, newPath);\n      }\n    };\n    const rmdir = (path: string): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        this.fs.rmdir(path, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    // Remove the directory recursively\n    this.rmdir = async (dirPath: string) => {\n      const files = await this.readdir(dirPath);\n      const promises = [];\n      for (let i = 0; i < files.length; i++) {\n        const file = files[i];\n        const filePath = path.resolve(dirPath, file);\n        const stats = await this.stats(filePath);\n        if (stats.isDirectory()) {\n          promises.push(this.rmdir(filePath));\n        } else {\n          promises.push(this.unlink(filePath));\n        }\n      }\n      await Promise.all(promises);\n      await rmdir(dirPath);\n    };\n\n    this.mkdirp = async (dirPath: string) => {\n      if (await this.exists(dirPath)) {\n        return;\n      } else {\n        await this.mkdirp(path.dirname(dirPath));\n        await this.mkdir(dirPath);\n      }\n    };\n  }\n}\n\nexport const fs = new LightningFS(\"fs\");\nexport const pfs = new FileSystem(fs);\n","import { md } from \"vickymd/preview\";\nimport Token from \"markdown-it/lib/token\";\nimport * as path from \"path\";\nimport { pfs, fs } from \"./fs\";\nimport * as git from \"isomorphic-git\";\n// import { isBinarySync } from \"istextorbinary\";\nimport AES from \"crypto-js/aes\";\nimport { getHeaderFromMarkdown } from \"../utilities/note\";\n// import { isFileAnImage } from \"../utilities/image\";\nimport { matter, matterStringify } from \"../utilities/markdown\";\n\nexport type FilePath = string;\n\n/**\n * Change \"createdAt\" to \"created\", and \"modifiedAt\" to \"modified\"\n * @param noteConfig\n */\nfunction formatNoteConfig(noteConfig: NoteConfig) {\n  const newObject: any = Object.assign({}, noteConfig);\n\n  newObject[\"created\"] = noteConfig.createdAt;\n  delete newObject[\"createdAt\"];\n\n  newObject[\"modified\"] = noteConfig.modifiedAt;\n  delete newObject[\"modifiedAt\"];\n\n  return newObject;\n}\n\ninterface RefreshNotesArgs {\n  dir: string;\n  includeSubdirectories?: Boolean;\n}\n\nexport class Notebook {\n  // basic info\n  public _id: string;\n  public dir: string;\n  public name: string;\n\n  // git\n  public gitURL: string;\n  public gitBranch: string;\n  public gitCorsProxy?: string;\n  public gitUsername?: string;\n  public gitPassword?: string;\n  public autoFetchPeriod: number; // in milliseconds\n  public fetchedAt: Date;\n  public remoteSha: string;\n  public localSha: string;\n\n  /**\n   * @param key: file path\n   */\n  public notes: Notes;\n\n  public isLocal: boolean;\n\n  private loadedNotes: boolean;\n\n  constructor() {\n    this.notes = {};\n    this.isLocal = false;\n    this.loadedNotes = false;\n  }\n\n  async processNoteMentionsAndMentionedBy(filePath: string) {\n    const note = await this.getNote(filePath);\n    if (!note) {\n      return;\n    }\n    // Get mentions\n    const tokens = md.parse(note.markdown, {});\n    console.log(tokens);\n    type TraverseResult = {\n      link: string;\n      text: string;\n      // start: number;\n      // end: number;\n    };\n    const resolveLink = (link: string) => {\n      if (!link.endsWith(\".md\")) {\n        link = link + \".md\";\n      }\n      if (link.startsWith(\"/\")) {\n        return path.relative(this.dir, path.join(this.dir, \".\" + link));\n      } else {\n        return path.relative(\n          this.dir,\n          path.join(path.dirname(path.join(this.dir, note.filePath)), link),\n        );\n      }\n    };\n    const traverse = function (\n      tokens: Token[],\n      results: TraverseResult[],\n      level: number,\n    ): TraverseResult[] {\n      for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i];\n        if (token.type === \"wikilink\") {\n          // TODO: Support normal links\n          const arr = token.content.split(\"|\");\n          const text = (arr.length > 1 ? arr[1] : arr[0]).trim();\n          let link = arr[0].trim();\n          if (link.match(/https?:\\/\\//)) {\n            // TODO: Ignore more protocols\n            continue;\n          }\n          results.push({\n            text,\n            link: resolveLink(link),\n          });\n        } else if (token.type === \"tag\") {\n          const text = token.content.trim();\n          const link = token.content.trim();\n          results.push({\n            text,\n            link: resolveLink(link),\n          });\n        } else if (token.children && token.children.length) {\n          traverse(token.children, results, level + 1);\n        }\n      }\n      return results;\n    };\n\n    const traverseResults = traverse(tokens, [], 0);\n    const mentions: Notes = {};\n    const oldMentions: Notes = note.mentions;\n\n    // Handle mentions and mentionedBy\n    for (let i = 0; i < traverseResults.length; i++) {\n      const { link } = traverseResults[i];\n      if (link in mentions) {\n        continue;\n      }\n      const mentionedNote = await this.getNote(link);\n      if (mentionedNote) {\n        mentions[mentionedNote.filePath] = mentionedNote;\n        mentionedNote.mentionedBy[note.filePath] = note;\n      }\n    }\n\n    // Remove old mentions\n    for (let filePath in oldMentions) {\n      if (!(filePath in mentions)) {\n        const mentionedNote = await this.getNote(filePath);\n        if (mentionedNote) {\n          delete mentionedNote.mentionedBy[note.filePath];\n        }\n      }\n    }\n\n    note.mentions = mentions;\n  }\n\n  public async changeNoteFilePath(\n    oldFilePath: string,\n    newFilePath: string,\n  ): Promise<Note> {\n    newFilePath = newFilePath.replace(/^\\/+/, \"\");\n    if (!newFilePath.endsWith(\".md\")) {\n      newFilePath = newFilePath + \".md\";\n    }\n\n    await this.removeNoteRelations(oldFilePath);\n\n    // git related works\n    const newDirPath = path.dirname(path.resolve(this.dir, newFilePath));\n    await pfs.mkdirp(newDirPath);\n\n    // TODO: Check if newFilePath already exists. If so don't overwrite\n    const exists = await pfs.exists(path.resolve(this.dir, newFilePath));\n    if (exists) {\n      throw new Error(\"error/target-file-already-exists\");\n    }\n\n    await pfs.rename(\n      path.resolve(this.dir, oldFilePath),\n      path.resolve(this.dir, newFilePath),\n    );\n    await git.remove({\n      fs: fs,\n      dir: this.dir,\n      filepath: oldFilePath,\n    });\n    await git.add({\n      fs: fs,\n      dir: this.dir,\n      filepath: newFilePath,\n    });\n\n    return await this.getNote(newFilePath, true);\n  }\n\n  public async checkoutNote(note: Note): Promise<Note> {\n    try {\n      await git.checkout({\n        fs: fs,\n        dir: this.dir,\n        // ref: \"HEAD\"\n        // ref: note.notebook.gitBranch,\n        filepaths: [note.filePath],\n        force: true,\n      });\n      if (await pfs.exists(path.resolve(this.dir, note.filePath))) {\n        await git.add({\n          // .remove is wrong\n          fs: fs,\n          dir: this.dir,\n          filepath: note.filePath,\n        });\n      }\n      return await this.getNote(note.filePath, true);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  public async getNote(\n    filePath: string,\n    refreshNoteRelations = false,\n  ): Promise<Note> {\n    if (!refreshNoteRelations && filePath in this.notes) {\n      return this.notes[filePath];\n    }\n    const absFilePath = path.resolve(this.dir, filePath);\n    let stats;\n    try {\n      stats = await pfs.stats(absFilePath);\n    } catch (error) {\n      return null;\n    }\n    if (stats.isFile() && filePath.endsWith(\".md\")) {\n      let markdown = (await pfs.readFile(absFilePath, {\n        encoding: \"utf8\",\n      })) as string;\n      // console.log(\"read: \", filePath, markdown);\n\n      // Read the noteConfig, which is like <!-- note {...} --> at the end of the markdown file\n      let noteConfig: NoteConfig = {\n        // id: \"\",\n        createdAt: new Date(stats.ctimeMs),\n        modifiedAt: new Date(stats.mtimeMs),\n      };\n\n      try {\n        const data = matter(markdown);\n        const frontMatter: any = Object.assign({}, data.data);\n\n        // New note config design in beta 3\n        if (data.data[\"created\"]) {\n          noteConfig.createdAt = new Date(data.data[\"created\"]);\n          delete frontMatter[\"created\"];\n        }\n        if (data.data[\"modified\"]) {\n          noteConfig.modifiedAt = new Date(data.data[\"modified\"]);\n          delete frontMatter[\"modified\"];\n        }\n        if (data.data[\"pinned\"]) {\n          noteConfig.pinned = data.data[\"pinned\"];\n          delete frontMatter[\"pinned\"];\n        }\n        if (data.data[\"favorited\"]) {\n          noteConfig.favorited = data.data[\"favorited\"];\n          delete frontMatter[\"favorited\"];\n        }\n\n        // markdown = matter.stringify(data.content, frontMatter); // <= NOTE: I think gray-matter has bug. Although I delete \"note\" section from front-matter, it still includes it.\n        markdown = matterStringify(data.content, frontMatter);\n      } catch (error) {\n        // Do nothing\n        markdown =\n          \"Please fix front-matter. ( Don't forget to delete this line)\\n\\n\" +\n          markdown;\n      }\n\n      // Create note\n      const note: Note = {\n        notebookPath: this.dir,\n        filePath: path.relative(this.dir, absFilePath),\n        title: path.basename(absFilePath).replace(/\\.md$/, \"\"),\n        markdown,\n        config: noteConfig,\n        mentions: {},\n        mentionedBy: {},\n      };\n\n      if (refreshNoteRelations) {\n        this.notes[note.filePath] = note;\n        await this.processNoteMentionsAndMentionedBy(note.filePath);\n      }\n\n      return note;\n    } else {\n      return null;\n    }\n  }\n\n  public async refreshNotesInNotLoaded({\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: RefreshNotesArgs): Promise<Notes> {\n    if (!this.loadedNotes) {\n      await this.refreshNotes({ dir, includeSubdirectories });\n      this.loadedNotes = true;\n    }\n    return this.notes;\n  }\n\n  public async refreshNotes({\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: RefreshNotesArgs): Promise<Notes> {\n    this.notes = {};\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(this.dir, dir));\n    } catch (error) {\n      files = [];\n    }\n    const refreshNotesPromises = [];\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const absFilePath = path.resolve(this.dir, dir, file);\n      const note = await this.getNote(path.relative(this.dir, absFilePath));\n      if (note) {\n        this.notes[note.filePath] = note;\n      }\n\n      let stats;\n      try {\n        stats = await pfs.stats(absFilePath);\n      } catch (error) {}\n      if (\n        stats &&\n        stats.isDirectory() &&\n        file !== \".git\" &&\n        includeSubdirectories\n      ) {\n        refreshNotesPromises.push(\n          this.refreshNotes({\n            dir: path.relative(this.dir, absFilePath),\n            includeSubdirectories,\n          }),\n        );\n      }\n    }\n    await Promise.all(refreshNotesPromises);\n\n    for (let filePath in this.notes) {\n      await this.processNoteMentionsAndMentionedBy(filePath);\n    }\n\n    return this.notes;\n  }\n\n  public async writeNote(\n    filePath: string,\n    markdown: string,\n    noteConfig: NoteConfig,\n  ): Promise<Note> {\n    noteConfig.modifiedAt = new Date();\n    const oMarkdown = markdown;\n    try {\n      const data = matter(markdown);\n      if (data.data[\"note\"] && data.data[\"note\"] instanceof Object) {\n        noteConfig = Object.assign({}, noteConfig, data.data[\"note\"] || {});\n      }\n      const frontMatter = Object.assign(\n        data.data || {},\n        formatNoteConfig(noteConfig),\n      );\n      delete frontMatter[\"note\"];\n      markdown = data.content;\n      markdown = matterStringify(markdown, frontMatter);\n    } catch (error) {\n      markdown = matterStringify(markdown, formatNoteConfig(noteConfig));\n    }\n\n    await pfs.writeFile(path.resolve(this.dir, filePath), markdown);\n    await git.add({\n      fs: fs,\n      dir: this.dir,\n      filepath: filePath,\n    });\n\n    const note = await this.getNote(filePath, true);\n    note.markdown = oMarkdown;\n    return note;\n  }\n\n  /**\n   * Update noteConfig only without updating markdown (excluding the front-matter)\n   * @param notebook\n   * @param filePath\n   * @param noteConfig\n   */\n  public async updateNoteConfig(filePath: string, noteConfig: NoteConfig) {\n    const note = await this.getNote(filePath);\n    const data = matter(note.markdown);\n    const frontMatter = Object.assign(\n      data.data || {},\n      formatNoteConfig(noteConfig),\n    );\n    delete frontMatter[\"note\"]; // TODO: Remove this in beta 3\n    const markdown = matterStringify(data.content, frontMatter);\n    await pfs.writeFile(path.resolve(this.dir, filePath), markdown);\n    await git.add({\n      fs: fs,\n      dir: this.dir,\n      filepath: filePath,\n    });\n  }\n\n  public async removeNoteRelations(filePath: string) {\n    const note = await this.getNote(filePath);\n    if (!note) {\n      return;\n    }\n    const mentions = note.mentions;\n    for (let filePath in mentions) {\n      const mentionedNote = await this.getNote(filePath);\n      if (mentionedNote) {\n        delete mentionedNote.mentionedBy[note.filePath];\n      }\n    }\n    delete this.notes[note.filePath];\n  }\n\n  public async deleteNote(filePath: string) {\n    if (await pfs.exists(path.resolve(this.dir, filePath))) {\n      await pfs.unlink(path.resolve(this.dir, filePath));\n      await git.remove({\n        fs: fs,\n        dir: this.dir,\n        filepath: filePath,\n      });\n\n      await this.removeNoteRelations(filePath);\n    }\n  }\n\n  public async duplicateNote(filePath: string) {\n    const oldNote = await this.getNote(filePath);\n    if (!oldNote) return;\n    const noteConfig = oldNote.config;\n    noteConfig.createdAt = new Date();\n    noteConfig.modifiedAt = new Date();\n    const newFilePath = filePath.replace(/\\.md$/, \".copy.md\");\n    await this.writeNote(newFilePath, oldNote.markdown, noteConfig);\n    return await this.getNote(newFilePath, true);\n  }\n}\n\nexport interface Note {\n  notebookPath: string;\n  filePath: FilePath;\n  title: string;\n  markdown: string;\n  config: NoteConfig;\n  mentions: Notes;\n  mentionedBy: Notes;\n}\n\nexport interface Notes {\n  [key: string]: Note;\n}\n\nexport interface NoteConfigEncryption {\n  title: string;\n  // method: string;? // Default AES256\n}\n\nexport interface NoteConfig {\n  createdAt: Date;\n  modifiedAt: Date;\n  pinned?: boolean;\n  favorited?: boolean;\n}\n\nexport interface NotebookConfig {\n  repository: string;\n  branch: string;\n  author: string;\n  contributors: string[];\n}\n","import * as git from \"isomorphic-git\";\nimport http from \"isomorphic-git/http/web\";\nimport * as path from \"path\";\nimport PouchDB from \"pouchdb\";\nimport PouchdbFind from \"pouchdb-find\";\n// @ts-ignore\nimport diff3Merge from \"diff3\";\nimport { randomID } from \"../utilities/utils\";\nimport { pfs, fs } from \"./fs\";\nimport { Notebook } from \"./notebook\";\n\n/*\nexport interface Attachment {\n  notebook: Notebook;\n  filePath: string;\n  content: string;\n  createdAt: Date;\n  modifiedAt: Date;\n}\n*/\n\ninterface CloneNotebookArgs {\n  name?: string;\n  corsProxy?: string;\n  gitURL: string;\n  branch?: string;\n  depth?: number;\n  username?: string;\n  password?: string;\n  rememberCredentials?: boolean;\n}\n\n// type ListAttachmentsArgs = ListNotesArgs;\n\nexport interface PushNotebookArgs {\n  notebook: Notebook;\n  authorName?: string;\n  authorEmail?: string;\n  username?: string;\n  password?: string;\n  message?: string;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport interface PullNotebookArgs {\n  notebook: Notebook;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport type FetchNotebookArgs = PullNotebookArgs;\n\ninterface PullNotebookResult {\n  numConflicts: number;\n  cache: Cache;\n}\n\ntype Cache = {\n  [key: string]: {\n    status: string;\n    markdown: string;\n  };\n};\n\nexport default class Crossnote {\n  private notebookDB: PouchDB.Database<Notebook>;\n\n  constructor() {\n    PouchDB.plugin(PouchdbFind);\n    this.notebookDB = new PouchDB(\"notebooks\");\n    this.notebookDB.createIndex({\n      index: {\n        fields: [\"gitURL\"],\n      },\n    });\n  }\n\n  public async addNotebook({\n    name = \"\",\n    corsProxy,\n    gitURL,\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 3,\n    rememberCredentials = false,\n  }: CloneNotebookArgs) {\n    if (gitURL) {\n      return await this.cloneNotebook({\n        name,\n        corsProxy,\n        gitURL,\n        branch,\n        username,\n        password,\n        depth,\n        rememberCredentials,\n      });\n    } else {\n      const _id = randomID();\n      const dir = `/notebooks/${_id}`;\n\n      const notebook = new Notebook();\n      notebook._id = _id;\n      notebook.dir = dir;\n      notebook.name = name.trim() || \"Unnamed\";\n      notebook.gitURL = gitURL.trim();\n      notebook.gitBranch = branch.trim() || \"master\";\n      notebook.gitCorsProxy = corsProxy.trim();\n      notebook.gitUsername = rememberCredentials ? username.trim() : \"\";\n      notebook.gitPassword = rememberCredentials ? password : \"\";\n      notebook.autoFetchPeriod = 0;\n      notebook.fetchedAt = new Date();\n      notebook.remoteSha = \"\";\n      notebook.localSha = \"\";\n\n      if (!(await pfs.exists(\"/notebooks\"))) {\n        await pfs.mkdir(\"/notebooks\");\n      }\n      if (!(await pfs.exists(dir))) {\n        await pfs.mkdir(dir);\n      }\n      await git.init({\n        fs: fs,\n        dir,\n      });\n\n      // Save to DB\n      try {\n        await this.notebookDB.put(notebook);\n      } catch (error) {\n        // Failed to save to DB\n        await pfs.rmdir(dir);\n      }\n\n      return notebook;\n    }\n  }\n\n  public async cloneNotebook({\n    name = \"\",\n    corsProxy,\n    gitURL,\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 10,\n    rememberCredentials = false,\n  }: CloneNotebookArgs): Promise<Notebook> {\n    if (!gitURL.match(/^https?:\\/\\//)) {\n      throw new Error(\"error/invalid-git-url-prefix\");\n    }\n\n    // Check if gitURL exists\n    /*\n    let exists = false;\n    try {\n      const notebooks = await this.notebookDB.find({\n        selector: {\n          gitURL: { $eq: gitURL }\n        }\n      });\n      if (notebooks.docs && notebooks.docs.length) {\n        exists = true;\n      }\n    } catch (error) {\n      exists = false;\n    }\n\n    if (exists) {\n      throw new Error(\"error/repository-already-cloned\");\n    }*/\n\n    const _id = randomID();\n    const dir = `/notebooks/${_id}`;\n\n    await git.clone({\n      fs: fs,\n      http,\n      dir,\n      corsProxy,\n      url: gitURL,\n      ref: branch.trim() || \"master\",\n      depth: depth,\n      singleBranch: true,\n      onAuth: (url, auth) => {\n        return {\n          username,\n          password,\n        };\n      },\n    });\n\n    const sha = await this.getGitSHA(\n      dir,\n      `origin/${branch.trim() || \"master\"}`,\n    );\n\n    const notebook: Notebook = new Notebook();\n    notebook._id = _id;\n    notebook.dir = dir;\n    notebook.name = name || this.getDefaultNotebookNameFromGitURL(gitURL);\n    notebook.gitURL = gitURL;\n    notebook.gitBranch = branch.trim() || \"master\";\n    notebook.gitCorsProxy = corsProxy;\n    notebook.gitUsername = rememberCredentials ? username : \"\";\n    notebook.gitPassword = rememberCredentials ? password : \"\";\n    notebook.autoFetchPeriod = 3600000; // 60 minutes\n    notebook.fetchedAt = new Date();\n    notebook.localSha = sha;\n    notebook.remoteSha = sha;\n\n    // Save to DB\n    try {\n      await this.notebookDB.put(notebook);\n    } catch (error) {\n      // Failed to save to DB\n      await pfs.rmdir(dir);\n    }\n\n    return notebook;\n  }\n\n  public async exportNotebookToJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async importNotebookFromJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async deleteNotebook(notebookID: string) {\n    const notebook = await this.notebookDB.get(notebookID);\n    await pfs.rmdir(notebook.dir);\n    await this.notebookDB.remove(notebook);\n  }\n  public async updateNotebook(notebook: Notebook) {\n    const nb = await this.notebookDB.get(notebook._id);\n    nb.dir = notebook.dir;\n    nb.name = notebook.name;\n    nb.gitURL = notebook.gitURL;\n    nb.gitBranch = notebook.gitBranch;\n    nb.gitCorsProxy = notebook.gitCorsProxy;\n    nb.gitUsername = notebook.gitUsername;\n    nb.gitPassword = notebook.gitPassword;\n    nb.autoFetchPeriod = notebook.autoFetchPeriod;\n    nb.fetchedAt = notebook.fetchedAt;\n    nb.remoteSha = notebook.remoteSha;\n    nb.localSha = notebook.localSha;\n    await this.notebookDB.put(nb, { force: true });\n  }\n\n  public async renameDirectory(\n    notebook: Notebook,\n    oldDirName: string,\n    newDirName: string,\n  ) {\n    await pfs.rename(\n      path.resolve(notebook.dir, oldDirName),\n      path.resolve(notebook.dir, newDirName),\n    );\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: oldDirName,\n    });\n    await git.add({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: newDirName || \".\",\n    });\n  }\n\n  public async deleteDirectory(notebook: Notebook, dirName: string) {\n    await pfs.rmdir(path.resolve(notebook.dir, dirName));\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: dirName,\n    });\n  }\n\n  private async generateChangesCache(notebook: Notebook): Promise<Cache> {\n    const cache: Cache = {};\n    const createCache = async (stagedFiles: string[]) => {\n      for (let i = 0; i < stagedFiles.length; i++) {\n        if (stagedFiles[i] in cache) {\n          continue;\n        }\n        const status = await git.status({\n          fs: fs,\n          dir: notebook.dir,\n          filepath: stagedFiles[i],\n        });\n        if (status.match(/^\\*?(modified|added)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: (await pfs.readFile(\n              path.resolve(notebook.dir, stagedFiles[i]),\n              { encoding: \"utf8\" },\n            )) as string,\n          };\n        } else if (status.match(/^\\*?(deleted)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: \"\",\n          };\n        }\n      }\n    };\n\n    await createCache(\n      // Check previous staged file for `delete` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n        ref: \"HEAD\",\n      }),\n    );\n\n    await createCache(\n      // Check current staged file for `add` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n      }),\n    );\n\n    return cache;\n  }\n\n  public async pushNotebook({\n    notebook,\n    authorName = \"crossnote\",\n    authorEmail = \"anonymous@crossnote.com\",\n    username,\n    password,\n    message = \"doc: Updated docs\",\n    onProgress,\n    onMessage,\n    onAuthFailure,\n    onAuthSuccess,\n  }: PushNotebookArgs): Promise<null | git.PushResult> {\n    // Pull notebook first\n    const pullNotebookResult = await this.pullNotebook({\n      notebook,\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    if (pullNotebookResult.numConflicts > 0) {\n      throw new Error(\"error/please-resolve-conflicts\");\n    }\n\n    const localSha = notebook.localSha;\n\n    const sha = await git.commit({\n      fs: fs,\n      dir: notebook.dir,\n      author: {\n        name: authorName,\n        email: authorEmail,\n      },\n      message,\n    });\n\n    const restoreSHA = async () => {\n      const gitBranch = notebook.gitBranch || \"master\";\n      // Perform a soft reset\n      await pfs.writeFile(\n        path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n        localSha,\n      );\n    };\n\n    // console.log(sha);\n    const pushResult = await git.push({\n      fs: fs,\n      http,\n      onAuth: (url, auth) => {\n        return {\n          username: username, // || notebook.gitUsername,\n          password: password, // || notebook.gitPassword\n        };\n      },\n      onProgress: (progress) => {\n        if (onProgress) {\n          onProgress(progress);\n        }\n      },\n      onMessage: (message) => {\n        if (onMessage) {\n          onMessage(message);\n        }\n      },\n      onAuthFailure: (url, auth) => {\n        if (onAuthFailure) {\n          onAuthFailure(url);\n        }\n        restoreSHA();\n      },\n      onAuthSuccess: (url, auth) => {\n        if (onAuthSuccess) {\n          onAuthSuccess(url);\n        }\n      },\n      url: notebook.gitURL,\n      dir: notebook.dir,\n      ref: notebook.gitBranch,\n      corsProxy: notebook.gitCorsProxy,\n    });\n\n    // console.log(\"pushResult: \", pushResult);\n\n    if (pushResult.error) {\n      restoreSHA();\n    }\n\n    if (pushResult.ok) {\n      // Update notebook\n      notebook.fetchedAt = new Date();\n      notebook.localSha = sha;\n      notebook.remoteSha = sha;\n      await this.updateNotebook(notebook);\n    }\n    return pushResult;\n  }\n\n  public async getGitSHA(dir: string, ref: string = \"master\"): Promise<string> {\n    try {\n      let logs = await git.log({\n        fs: fs,\n        dir: dir,\n        ref: ref,\n        depth: 5,\n      });\n      if (logs.length > 0) {\n        return (logs && logs[0]).oid;\n      } else {\n        return \"\";\n      }\n    } catch (error) {\n      return \"\";\n    }\n  }\n\n  public async hardResetNotebook(notebook: Notebook, sha: string) {\n    await pfs.writeFile(\n      path.resolve(notebook.dir, `.git/refs/heads/${notebook.gitBranch}`),\n      sha,\n    );\n    await pfs.unlink(path.resolve(notebook.dir, `.git/index`));\n    await git.checkout({\n      dir: notebook.dir,\n      fs: fs,\n      ref: notebook.gitBranch || \"master\",\n    });\n  }\n\n  private async restoreFilesFromCache(\n    cache: Cache,\n    notebook: Notebook,\n  ): Promise<number> {\n    let numConflicts = 0;\n    // console.log(\"same\");\n    for (const filePath in cache) {\n      if (cache[filePath].status === \"deleted\") {\n        await notebook.deleteNote(filePath);\n        continue;\n      }\n      const markdown = cache[filePath].markdown;\n      const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n      await pfs.mkdirp(dirname);\n      await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n      await git.add({\n        fs: fs,\n        dir: notebook.dir,\n        filepath: filePath,\n      });\n      if (this.markdownHasConflicts(markdown)) {\n        numConflicts += 1;\n      }\n    }\n    return numConflicts;\n  }\n\n  public async pullNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: PullNotebookArgs): Promise<PullNotebookResult> {\n    // Stop using git.pull as merge will cause error\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      corsProxy: notebook.gitCorsProxy,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // NOTE: Seems like diff3 not working as I expected. Therefore I might create my own type of diff\n    const cache: {\n      [key: string]: {\n        status: string;\n        markdown: string;\n      };\n    } = await this.generateChangesCache(notebook);\n    const localSha = notebook.localSha;\n\n    // Save cache in case of system crash\n    localStorage.setItem(\n      `pending/pull/${notebook._id}`,\n      JSON.stringify({\n        cache,\n        localSha,\n      }),\n    );\n\n    // Perform a hard reset\n    const remoteSha = result.fetchHead;\n    await this.hardResetNotebook(notebook, remoteSha);\n\n    let numConflicts = 0;\n    if (localSha === remoteSha) {\n      // Restore from cache\n      numConflicts = await this.restoreFilesFromCache(cache, notebook);\n    } else {\n      // Check conflicted notes\n      // console.log(\"check conflicted\");\n      const LINEBREAKS = /^.*(\\r?\\n|$)/gm;\n      const markerSize = 7;\n      const ourName = \"ours\";\n      const theirName = \"theirs\";\n      // const baseName = \"base\";\n      for (const filePath in cache) {\n        const ourContent = cache[filePath].markdown;\n        if (await pfs.exists(path.resolve(notebook.dir, filePath))) {\n          let baseContent: string = \"\";\n          let theirContent: string = \"\";\n          try {\n            const baseContentBlobResult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: localSha,\n              filepath: filePath,\n            });\n            baseContent = Buffer.from(baseContentBlobResult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          try {\n            const theirContentBlobTresult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: remoteSha,\n              filepath: filePath,\n            });\n            theirContent = Buffer.from(theirContentBlobTresult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          // console.log(\"ourContent: \", ourContent);\n          // console.log(\"theirContent: \", theirContent);\n          // console.log(\"baseContent: \", baseContent);\n\n          // TODO: clean front-matter\n\n          // Refered from https://github.com/isomorphic-git/isomorphic-git/blob/4e66704d05042624bbc78b85ee5110d5ee7ec3e2/src/utils/mergeFile.js\n          const ours = ourContent.match(LINEBREAKS);\n          const base = baseContent.match(LINEBREAKS);\n          const theirs = theirContent.match(LINEBREAKS);\n\n          // Here we let the diff3 library do the heavy lifting.\n          const result = diff3Merge(ours, base, theirs);\n\n          // Here we note whether there are conflicts and format the results\n          let mergedText = \"\";\n          let hasConflict = false;\n          for (const item of result) {\n            if (item.ok) {\n              mergedText += item.ok.join(\"\");\n            }\n            if (item.conflict) {\n              hasConflict = true;\n              mergedText += `\\\\<${\"<\".repeat(markerSize - 1)} ${ourName}\\n`;\n              mergedText += item.conflict.a.join(\"\") + \"\\n\";\n              // if (format === \"diff3\") {\n              //mergedText += `\\\\|${\"|\".repeat(markerSize - 1)} ${baseName}\\n`;\n              //mergedText += item.conflict.o.join(\"\");\n              // }\n              mergedText += `\\\\=${\"=\".repeat(markerSize - 1)}\\n`;\n              mergedText += item.conflict.b.join(\"\") + \"\\n\";\n              mergedText += `\\\\>${\">\".repeat(markerSize - 1)} ${theirName}\\n`;\n            }\n          }\n          if (hasConflict) {\n            numConflicts += 1;\n          }\n\n          // console.log(\"mergedText: \", mergedText);\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), mergedText);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        } else {\n          const markdown = cache[filePath].markdown;\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        }\n      }\n    }\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = remoteSha;\n    notebook.remoteSha = remoteSha;\n    await this.updateNotebook(notebook);\n\n    localStorage.removeItem(`pending/pull/${notebook._id}`);\n\n    return {\n      numConflicts,\n      cache,\n    };\n  }\n\n  public async fetchNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: FetchNotebookArgs): Promise<boolean> {\n    const localSha = notebook.localSha;\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      tags: false,\n      depth: 1,\n      corsProxy: notebook.gitCorsProxy,\n      url: notebook.gitURL,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = localSha;\n    notebook.remoteSha = result.fetchHead;\n    await this.updateNotebook(notebook);\n\n    return localSha !== result.fetchHead;\n  }\n\n  public markdownHasConflicts(markdown: string): boolean {\n    const m1 = markdown.match(/^\\\\<+\\s/gm);\n    const m2 = markdown.match(/^\\\\=+\\s/gm);\n    const m3 = markdown.match(/^\\\\>+\\s/gm);\n    return m1 && m1.length > 0 && m2 && m2.length > 0 && m3 && m3.length > 0;\n  }\n\n  public async listNotebooks(): Promise<Notebook[]> {\n    const notebooks = (\n      await this.notebookDB.find({\n        selector: {\n          gitURL: { $gt: null },\n        },\n      })\n    ).docs.map((n) => {\n      const notebook = new Notebook();\n      notebook._id = n._id;\n      notebook.dir = n.dir;\n      notebook.name = n.name;\n      notebook.gitURL = n.gitURL;\n      notebook.gitBranch = n.gitBranch;\n      notebook.gitCorsProxy = n.gitCorsProxy;\n      notebook.gitUsername = n.gitUsername;\n      notebook.gitPassword = n.gitPassword;\n      notebook.autoFetchPeriod = n.autoFetchPeriod;\n      notebook.fetchedAt = n.fetchedAt;\n      notebook.remoteSha = n.remoteSha;\n      notebook.localSha = n.localSha;\n      return notebook;\n    });\n    // console.log(notebooks);\n\n    const promises = notebooks.map((notebook, i) => {\n      return (async (i: number) => {\n        const notebook = notebooks[i];\n        notebook.fetchedAt = new Date(notebook.fetchedAt || 0);\n        if (notebook.gitURL.trim().length <= 0) {\n          // no remote set\n          return;\n        }\n        if (typeof notebook.autoFetchPeriod === \"undefined\") {\n          notebook.autoFetchPeriod = 3600000; // 60 minutes\n        }\n        if (typeof notebook.localSha === \"undefined\") {\n          notebook.localSha = await this.getGitSHA(\n            notebook.dir,\n            `origin/${notebook.gitBranch}`,\n          );\n        }\n        if (typeof notebook.remoteSha === \"undefined\") {\n          notebook.remoteSha = notebook.localSha;\n        }\n        const gitBranch = notebook.gitBranch || \"master\";\n        const sha = notebook.localSha || \"\";\n        try {\n          // Perform a soft reset\n          await pfs.writeFile(\n            path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n            sha,\n          );\n\n          // Restore cached files from failed `git` pull event\n          const pendingPull = localStorage.getItem(\n            `pending/pull/${notebook._id}`,\n          );\n          if (pendingPull) {\n            try {\n              await this.restoreFilesFromCache(\n                JSON.parse(pendingPull).cache,\n                notebook,\n              );\n            } catch (error) {}\n            localStorage.removeItem(`pending/pull/${notebook._id}`);\n          }\n\n          const status = await git.status({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: \".\",\n          });\n\n          // check: absent, deleted, undeleted\n          if (status.match(/(absent|deleted)/) || pendingPull) {\n            // NOTE: Seems like there is a bug somewhere that caused all files to become *undeleted\n            // So we run git.add again.\n            await git.add({\n              fs: fs,\n              dir: notebook.dir,\n              filepath: \".\",\n            });\n          }\n        } catch (error) {\n          notebooks[i] = null;\n        }\n      })(i);\n    });\n\n    await Promise.all(promises);\n\n    return notebooks\n      .filter((nb) => nb)\n      .sort((x, y) => x.name.localeCompare(y.name));\n  }\n\n  /*\n  public async listAttachments({\n    notebook,\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: ListAttachmentsArgs): Promise<Attachment[]> {\n    let attachments: Attachment[] = [];\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(notebook.dir, dir));\n    } catch (error) {\n      files = [];\n    }\n    const listAttachmentsPromises = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const absFilePath = path.resolve(notebook.dir, dir, file);\n      const stats = await pfs.stats(absFilePath);\n      if (\n        stats.isFile() &&\n        !absFilePath.endsWith(\".md\") &&\n        isFileAnImage(file) // TODO: We only support images for now. Supports other types of files in the future\n      ) {\n        const attachment: Attachment = {\n          notebook,\n          filePath: path.relative(notebook.dir, absFilePath),\n          content: isBinarySync(file)\n            ? \"\"\n            : ((await pfs.readFile(absFilePath, {\n                encoding: \"utf8\",\n              })) as string),\n          createdAt: new Date(stats.ctimeMs),\n          modifiedAt: new Date(stats.mtimeMs),\n        };\n        attachments.push(attachment);\n        if (isBinarySync(file)) {\n        } else {\n        }\n      }\n\n      if (stats.isDirectory() && file !== \".git\" && includeSubdirectories) {\n        listAttachmentsPromises.push(\n          this.listAttachments({\n            notebook,\n            dir: path.relative(notebook.dir, absFilePath),\n            includeSubdirectories,\n          }),\n        );\n      }\n    }\n\n    const res = await Promise.all(listAttachmentsPromises);\n    res.forEach((r) => {\n      attachments = attachments.concat(r);\n    });\n\n    return attachments;\n  }\n  */\n\n  private getDefaultNotebookNameFromGitURL(gitURL: string) {\n    const i = gitURL.lastIndexOf(\"/\");\n    return gitURL.slice(i + 1).replace(/\\.git/, \"\");\n  }\n\n  public async getStatus(notebook: Notebook, filePath: string) {\n    return await git.status({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: filePath,\n    });\n  }\n}\n","import { PeerJSOption } from \"peerjs\";\nimport moment from \"moment\";\n\nexport function waitForTimeout(timeout: number): Promise<void> {\n  return new Promise((resolve, reject) => {\n    return setTimeout(() => {\n      return resolve();\n    }, timeout);\n  });\n}\n\nexport const UUIDNil = \"00000000-0000-0000-0000-000000000000\";\n\nexport const OneDay = 1000 * 60 * 60 * 24;\n\nexport function getGraphQLEndpoint() {\n  if (process.env.NODE_ENV === \"production\") {\n    return `https://crossnote.app/api/graphql`;\n  } else {\n    return `http://${window.location.hostname}:9999/graphql`;\n  }\n}\n\nexport function getPeerJSEndpoint(): PeerJSOption {\n  if (process.env.NODE_ENV === \"production\") {\n    return {\n      host: `crossnote.app`,\n      path: \"/peer\",\n      secure: true,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  } else {\n    return {\n      host: window.location.hostname,\n      port: 9000,\n      path: \"/peer\",\n      secure: false,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  }\n}\n\nexport function getGitHubOAuthClientID() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"3dd81bb2c212b7749761\";\n  } else {\n    return \"c7477b9aa512785936e0\";\n  }\n}\n\nexport function getGitHubOAuthCallbackURL() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"https://crossnote.app/github_oauth_callback\";\n  } else {\n    return `http://${window.location.host}/github_oauth_callback`;\n  }\n}\n\nexport function startGitHubOAuth() {\n  window.open(\n    `https://github.com/login/oauth/authorize?client_id=${getGitHubOAuthClientID()}&redirect_uri=${encodeURIComponent(\n      getGitHubOAuthCallbackURL(),\n    )}`,\n    \"_self\",\n  );\n}\n\nexport const graphqlFetchContext = {\n  fetchOptions: {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n};\nexport function formatDate(dateString: string) {\n  if (!dateString) return \"\";\n  const date = new Date(dateString);\n  const diff = Date.now() - date.getTime();\n  const passedTime = Math.abs(diff);\n\n  if (passedTime <= 1000 * 60 * 60 * 24) {\n    // within 24h\n    if (passedTime <= 1000 * 60 * 60) {\n      // within 1 hour\n      return (\n        (diff < 0 ? \"future \" : \"\") + Math.ceil(passedTime / (1000 * 60)) + \"m\"\n      );\n    } else {\n      return (\n        (diff < 0 ? \"future \" : \"\") +\n        Math.floor(passedTime / (1000 * 60 * 60)) +\n        \"h\"\n      );\n    }\n  } else {\n    const monthNamesShort = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ];\n    return (\n      monthNamesShort[date.getMonth()] +\n      \" \" +\n      date.getDate() +\n      \" \" +\n      date.getFullYear()\n    );\n  }\n}\n\n// https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript\nexport function copyToClipboard(text: string) {\n  if (\"clipboardData\" in window && (window as any).clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    return (window as any).setData(\"Text\", text);\n  } else if (\n    document.queryCommandSupported &&\n    document.queryCommandSupported(\"copy\")\n  ) {\n    var textarea = document.createElement(\"textarea\");\n    textarea.textContent = text;\n    textarea.style.position = \"fixed\"; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand(\"copy\"); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      console.warn(\"Copy to clipboard failed.\", ex);\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n}\n\nexport function generateUUID() {\n  // Public Domain/MIT\n  var d = new Date().getTime(); //Timestamp\n  var d2 = (performance && performance.now && performance.now() * 1000) || 0; //Time in microseconds since page-load or 0 if unsupported\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16; //random number between 0 and 16\n    if (d > 0) {\n      //Use timestamp until depleted\n      r = (d + r) % 16 | 0;\n      d = Math.floor(d / 16);\n    } else {\n      //Use microseconds since page-load if supported\n      r = (d2 + r) % 16 | 0;\n      d2 = Math.floor(d2 / 16);\n    }\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\nexport class RandomColorGenerator {\n  private cache: { [key: string]: string } = {};\n  private hashCode(s: string): number {\n    let n = s.split(\"\").reduce(function (a, b) {\n      a = (a << 5) - a + b.charCodeAt(0);\n      return a & a;\n    }, 0);\n    n = Math.abs(n);\n    const x = \"0.\" + n.toString();\n    return parseFloat(x);\n  }\n  public generateColor(key: string): string {\n    if (key in this.cache) {\n      return this.cache[key];\n    } else {\n      const color =\n        \"#\" +\n        (((1 << 24) * /* Math.random() */ this.hashCode(key)) | 0).toString(16);\n      this.cache[key] = color;\n      return color;\n    }\n  }\n}\n\nexport const randomColorGenerator = new RandomColorGenerator();\n\nexport function randomID() {\n  return Math.random().toString(36).substr(2, 9);\n}\n\nexport function getTodayName() {\n  let today = moment().format(\"YYYY-MM-DD\");\n  const momentFormat = localStorage.getItem(\"settings/moment-format\");\n  if (momentFormat) {\n    try {\n      today = moment().format(momentFormat);\n    } catch (error) {\n      today = moment().format(\"YYYY-MM-DD\");\n    }\n  }\n  return today;\n}\n","import * as path from \"path\";\nimport { pfs } from \"../lib/fs\";\nimport { NotebookFieldsFragment } from \"../generated/graphql\";\nimport { Notebook, Note } from \"../lib/notebook\";\n\nexport async function resolveNoteImageSrc(note: Note, imageSrc: string) {\n  if (!note) {\n    return imageSrc;\n  }\n  if (imageSrc.startsWith(\"https://\") || imageSrc.startsWith(\"data:\")) {\n    return imageSrc;\n  } else if (imageSrc.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    return await loadImageAsBase64(note.notebookPath, note.filePath, imageSrc);\n  }\n}\n\nexport function resolveNotebookFilePath(\n  notebook: NotebookFieldsFragment,\n  filePath: string,\n) {\n  if (!notebook) {\n    return filePath;\n  }\n  if (filePath.startsWith(\"https://\") || filePath.startsWith(\"data:\")) {\n    return filePath;\n  } else if (filePath.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    const { gitURL, gitBranch } = notebook;\n    const gitURLArr = gitURL.replace(\"https://\", \"\").split(\"/\");\n    const gitHost = gitURLArr[0].toLowerCase();\n    const gitOwner = gitURLArr[1];\n    const gitRepo = gitURLArr[2].replace(/\\.git$/, \"\");\n    let outFilePath = \"\";\n    filePath = filePath.replace(/^\\/+/, \"\").replace(/^\\.\\/+/, \"\");\n    if (gitHost === \"github.com\") {\n      outFilePath = `https://github.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitlab.com\") {\n      outFilePath = `https://gitlab.com/${gitOwner}/${gitRepo}/-/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitee.com\") {\n      outFilePath = `https://gitee.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitea.com\") {\n      outFilePath = `https://gitea.com/${gitOwner}/${gitRepo}/raw/branch/${gitBranch}/${filePath}`;\n    }\n\n    return outFilePath;\n  }\n}\n\nexport async function loadImageAsBase64(\n  notebookPath: string,\n  noteFilePath: string,\n  imageSrc: string,\n): Promise<string> {\n  let imageFilePath;\n  if (imageSrc.startsWith(\"/\")) {\n    imageFilePath = path.resolve(notebookPath, \".\" + imageSrc);\n  } else {\n    imageFilePath = path.join(\n      notebookPath,\n      path.dirname(noteFilePath),\n      imageSrc,\n    );\n  }\n  if (await pfs.exists(imageFilePath)) {\n    const data: Uint8Array = new Uint8Array(\n      // @ts-ignore\n      (await pfs.readFile(imageFilePath)).split(\",\"),\n    );\n    const base64 = Buffer.from(data.buffer).toString(\"base64\");\n    let imageType = path.extname(imageSrc).slice(1);\n    if (imageType.match(/^svg$/i)) {\n      imageType = \"svg+xml\";\n    } else if (imageType.match(/^jpg$/i)) {\n      imageType = \"jpeg\";\n    }\n    return `data:image/${imageType};base64,${base64}`;\n  } else {\n    return \"\";\n  }\n}\n\nexport function isFileAnImage(fileName: string) {\n  return !!fileName.match(/\\.(jpg|jpeg|png|gif|svg)$/i);\n}\n","import i18next from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { zhCN, enUS, zhTW, ja } from \"date-fns/locale\";\nimport { enUS as enUSLanguage } from \"./lang/enUS\";\nimport { zhCN as zhCNLanguage } from \"./lang/zhCN\";\nimport { zhTW as zhTWLanguage } from \"./lang/zhTW\";\nimport { jaJP as jaJPLanguage } from \"./lang/jaJP\";\n\ni18next.use(initReactI18next).init({\n  interpolation: {\n    // React already does escaping\n    escapeValue: false,\n  },\n  keySeparator: false, // we do not use keys in form messages.welcome\n  lng: localStorage.getItem(\"settings/language\") || \"en-US\", // \"en-US\" | \"zh-CN\"\n  fallbackLng: \"en-US\",\n  resources: {\n    \"en-US\": enUSLanguage,\n    \"zh-CN\": zhCNLanguage,\n    \"zh-TW\": zhTWLanguage,\n    \"ja-JP\": jaJPLanguage,\n  },\n});\n\nexport default i18next;\n\nexport function languageCodeToLanguageName(code: string) {\n  if (code === \"zh-CN\") {\n    return \"\";\n  } else if (code === \"zh-TW\") {\n    return \"\";\n  } else if (code === \"ja-JP\") {\n    return \"\";\n  } else {\n    return \"English\";\n  }\n}\n\nexport function languageCodeToDateFNSLocale(code: string) {\n  if (code === \"zh-CN\") {\n    return zhCN;\n  } else if (code === \"en-US\") {\n    return enUS;\n  } else if (code === \"zh-HK\") {\n    return zhTW;\n  } else if (code === \"ja-JP\") {\n    return ja;\n  } else {\n    return enUS;\n  }\n}\n","export const enUS = {\n  translation: {\n    \"title/Crossnote\": \"Crossnote\",\n    \"search/notes\": \"Search Notes\",\n    \"search/notebooks\": \"Search Notebooks\",\n    \"search/attachments\": \"Search Attachments\",\n\n    // Account\n    \"account/Anonymous\": \"Anonymous\",\n    \"account/anonymous\": \"anonymous\",\n\n    // General\n    \"general/go-back\": \"Go back\",\n    \"general/sending\": \"Sending\",\n    \"general/send\": \"Send\",\n    \"general/cancel\": \"Cancel\",\n    \"general/add\": \"Add\",\n    \"general/adding\": \"Adding\",\n    \"general/backed-up-at\": \"Backed up at\",\n    \"general/created-at\": \"Created at\",\n    \"general/modified-at\": \"Modified at\",\n    \"general/interacted-at\": \"Interacted at\",\n    \"general/date-created\": \"Date created\",\n    \"general/date-modified\": \"Date modified\",\n    \"general/date-interacted\": \"Date interacted\",\n    \"general/title\": \"Title\",\n    \"general/saved-at\": \"Saved at\",\n    \"general/loading\": \"Loading ...\",\n    \"general/loading-notifications\": \"Loading notifications ...\",\n    \"general/failed-to-set\": \"Failed to set\",\n    \"general/update\": \"Update\",\n    \"general/updated\": \"Updated\",\n    \"general/updating\": \"Updating\",\n    \"general/close\": \"Close\",\n    \"general/Note\": \"Note\",\n    \"general/notes\": \"Notes\",\n    \"general/Settings\": \"Settings\",\n    \"general/Collaborators\": \"Collaborators\",\n    \"general/collaborators\": \"collaborators\",\n    \"general/Backups\": \"Backups\",\n    \"general/backups\": \"backups\",\n    \"general/Discussion\": \"Discussion\",\n    \"general/discussion\": \"discussion\",\n    \"general/Notifications\": \"Notifications\",\n    \"general/Username\": \"Username\",\n    \"general/Email\": \"Email\",\n    \"general/Password\": \"Password\",\n    \"general/confirm-password\": \"Confirm password\",\n    \"general/Continue\": \"Continue\",\n    \"general/enter-username\": \"Enter username\",\n    \"general/vickymd\": \"Edit\",\n    \"general/tags\": \"Tags\",\n    \"general/add-a-tag\": \"Add a tag\",\n    \"general/private\": \"Private\",\n    \"general/public\": \"Public\",\n    \"general/friends-only\": \"Friends only\",\n    \"general/anonymous\": \"Anonymous\",\n    \"general/onymous\": \"Onymous\",\n    \"general/Tag\": \"Tag\",\n    \"general/no-tags\": \"No tags\",\n    \"general/Directory\": \"Directory\",\n    \"general/Untitled\": \"Untitled\",\n    \"general/untitled\": \"untitled\",\n    \"general/Unknown\": \"Unknown\",\n    \"general/unknown\": \"unknown\",\n    \"general/Agree\": \"Agree\",\n    \"general/Disagree\": \"Disagree\",\n    \"general/Print\": \"Print\",\n    \"general/Share\": \"Share\",\n    \"Editor\": \"Editor\",\n    \"EDITOR\": \"EDITOR\",\n    \"Viewer\": \"Viewer\",\n    \"VIEWER\": \"VIEWER\",\n    \"Admin\": \"Admin\",\n    \"ADMIN\": \"ADMIN\",\n    \"ARCHIVED\": \"ARCHIVED\",\n    \"ATTACHED NOTES\": \"ATTACHED NOTES\",\n    \"DELETED\": \"DELETED\",\n    \"PINNED\": \"PINNED\",\n    \"OTHERS\": \"OTHERS\",\n    \"PUBLIC NOTES\": \"PUBLIC NOTES\",\n    \"FOLLOWINGS' NOTES\": \"FOLLOWINGS' NOTES\",\n    \"SHARED WITH ME\": \"SHARED WITH ME\",\n    \"BOOKMARKS\": \"BOOKMARKS\",\n    \"MY TAGS\": \"MY TAGS\",\n    \"general/enter-fullscreen-mode\": \"Enter fullscreen mode\",\n    \"general/enter-presentation-mode\": \"Enter presentation mode\",\n    \"general/math-preview\": \"Math Preview\",\n    \"general/this-note-is-empty\": \"This note is empty\",\n    \"general/this-notebook-is-empty\": \"This notebook is empty\",\n    \"general/nothing-here\": \"Nothing here\",\n    \"general/no-notes-found\": \"No more notes found\",\n    \"general/no-more-notebooks-found\": \"No more notebooks found\",\n    \"general/no-more-attachments-found\": \"No more attachments found\",\n    \"general/no-notifications-found\": \"No notifications found\",\n    \"general/clear-all\": \"Clear all\",\n    \"general/Save\": \"Save\",\n    \"general/Delete\": \"Delete\",\n    \"general/Follow\": \"Follow\",\n    \"general/Following\": \"Following\",\n    \"general/Unfollow\": \"Unfollow\",\n    \"general/my-notes\": \"My notes\",\n    \"general/public-notes\": \"Public notes\",\n    \"general/followings-notes\": \"Followings' notes\",\n    \"general/shared-with-me\": \"Shared with me\",\n    \"general/Bookmarks\": \"Bookmarks\",\n    \"general/Archive\": \"Archive\",\n    \"general/Trash\": \"Trash\",\n    \"general/new-note\": \"New note\",\n    \"general/new-attachment\": \"New attachment\",\n    \"general/profile-updated\": \"Profile updated\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"Audio\",\n    \"general/Video\": \"Video\",\n    \"general/source-url\": \"Source URL\",\n    \"general/sign-in\": \"Sign in\",\n    \"general/sign-up\": \"Sign up\",\n    \"general/Link\": \"Link\",\n    \"general/Upload\": \"Upload\",\n    \"general/Uploading\": \"Uploading\",\n    \"general/clicks\": \"clicks\",\n    \"general/Processing\": \"Processing...\",\n    \"general/please-wait\": \"Please wait...\",\n    \"general/please-sign-in-first\": \"Please sign in first\",\n    \"general/Languages\": \"Languages\",\n    \"general/track\": \"Track\",\n    \"general/Publish\": \"Publish\",\n    \"general/Unpublish\": \"Unpublish\",\n    \"general/Open\": \"Open\",\n    \"general/Download\": \"Download\",\n    \"general/Configure\": \"Configure\",\n    \"general/Update\": \"Update\",\n    \"general/empty\": \"empty\",\n    \"general/Explore\": \"Explore\",\n    \"general/Notebooks\": \"Notebooks\",\n    \"general/add-a-notebook\": \"Add a notebook\",\n    \"general/add-a-note\": \"Add a note\",\n    \"general/add-an-attachment\": \"Add an attachment\",\n    \"general/configure-the-notebook\": \"Configure the notebook\",\n    \"general/publish-your-notebook\": \"Publish your notebook\",\n    \"general/notebook-name\": \"Notebook name\",\n    \"general/git-repository\": \"git repository\",\n    \"general/optional\": \"optional\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"branch\",\n    \"general/remember-username-and-password\": \"Remember credentials\",\n    \"general/stored-locally\": \"stored locally\",\n    \"general/cors-proxy\": \"CORS proxy\",\n    \"general/why-cors-proxy\": \"Why do we need CORS proxy\",\n    \"general/today\": \"Today\",\n    \"general/todo\": \"Todo\",\n    \"general/graph-view\": \"Graph view\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"Tagged\",\n    \"general/untagged\": \"Untagged\",\n    \"general/encrypt\": \"Encrypt\",\n    \"general/encrypted\": \"Encrypted\",\n    \"general/decrypt\": \"Decrypt\",\n    \"general/conflicted\": \"Conflicted\",\n    \"general/attachments\": \"Attachments\",\n    \"general/Pin\": \"Pin\",\n    \"general/Encryption\": \"Encryption\",\n    \"general/Fullscreen\": \"Fullscreen\",\n    \"general/change-file-path\": \"Change file path\",\n    \"general/create-a-copy\": \"Create a copy\",\n    \"general/restore-checkout\": \"Restore (git checkout)\",\n    \"general/download-pull\": \"Download (git pull)\",\n    \"general/upload-push\": \"Upload (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"Disable the encryption on this note\",\n    \"general/encrypt-this-note-with-password\":\n      \"Encrypt this note with password\",\n    \"general/disable-encryption\": \"Disable encryption\",\n    \"general/decrypt-this-note\": \"Decrypt this note\",\n    \"general/upload-the-profile\": \"Upload profile\",\n    \"general/commit-message\": \"Commit message\",\n    \"general/upload-notebook\": \"Upload the notebook\",\n    \"general/Comments\": \"Comments\",\n    \"general/Source\": \"Source\",\n    \"general/Description\": \"Description\",\n    \"general/Edit\": \"Edit\",\n    \"general/Rename\": \"Rename\",\n    \"general/rename-directory\": \"Rename directory\",\n    \"general/delete-directory\": \"Delete directory\",\n    \"general/rename-tag\": \"Rename tag\",\n    \"general/delete-tag\": \"Delete tag\",\n    \"general/notebook-updates-found\": \"Notebook updates found\",\n    \"general/update-the-notebook\": \"Update the notebook\",\n    \"general/check-notebook-updates-periodically\":\n      \"Check notebook updates periodically\",\n    \"general/minutes\": \"minute(s)\",\n    \"general/hard-reset\": \"Hard reset\",\n    \"general/Default\": \"Default\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"Desc\",\n    \"general/Asc\": \"Asc\",\n    \"general/pin-the-note\": \"Pin the note\",\n    \"general/unpin-the-note\": \"Unpin the note\",\n    \"general/add-to-quick-access\": \"Add to quick access\",\n    \"general/remove-from-quick-access\": \"Remove from quick access\",\n\n    // Error\n    \"error/authentication-failed\": \"Authentication failed\",\n    \"error/failed-to-upload-notebook\": \"Failed to upload notebook\",\n    \"error/failed-to-download-notebook\": \"Failed to download notebook\",\n    \"error/notebook-already-exists\": \"Notebook already exists\",\n    \"error/invalid-git-url-prefix\": \"Invalid git URL prefix\",\n    \"error/please-resolve-conflicts\": \"Please resolve conflicts first\",\n    \"error/failed-to-disable-encryption\": \"Failed to disable encryption\",\n    \"error/decryption-failed\": \"Decryption failed\",\n    \"error/failed-to-change-file-path\": \"Failed to change file path\",\n    \"error/failed-to-create-widget\": \"Failed to create widget\",\n    \"error/failed-to-load-widget\": \"Failed to load widget\",\n    \"error/failed-to-update-the-notebook\": \"Failed to update the notebook\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"Failed to unpublish the notebook\",\n    \"error/failed-to-publish-notebook\": \"Failed to publish the notebook\",\n\n    // Success\n    \"success/notebook-uploaded\": \"Notebook uploaded\",\n    \"success/notebook-downloaded\": \"Notebook downloaded\",\n\n    // Info\n    \"info/downloading-notebook\": \"Downloading notebook\",\n\n    // Note\n    \"note/unarchive-note\": \"Unarchive note\",\n    \"note/archive-note\": \"Archive note\",\n    \"note/delete-forever\": \"Delete forever\",\n    \"note/delete-note\": \"Delete note\",\n    \"note/restore-note\": \"Restore note\",\n    \"note/report-note\": \"Report note\",\n    \"note/open-in-crossnote-website\": \"Open in Crossnote website\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"Failed to send suggestion\",\n    \"note-tags/suggestion-sent\": \"Suggestion sent\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"Suggest a tag to this note\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"Follow a tag\",\n\n    // Notifications\n    \"notifications/refresh\": \"Refresh to see new notifications\",\n    \"notifications/new-version-available\":\n      \"A new version of Crossnote is available!\",\n\n    // Settings\n    \"settings/about-this-project\": \"About this project\",\n    \"settings/issues-and-feature-requests\":\n      \"Found issues or have feature requests?\",\n    \"settings/uploading-cover-image\": \"Uploading cover image\",\n    \"settings/upload-image-failure\": \"Failed to upload image\",\n    \"settings/Cover\": \"Cover\",\n    \"settings/enter-cover-image-url\": \"Enter cover image URL\",\n    \"settings/upload-image\": \"Upload image\",\n    \"settings/Avatar\": \"Avatar\",\n    \"settings/enter-avatar-image-url\": \"Enter avatar image URL\",\n    \"settings/Name\": \"Name\",\n    \"settings/enter-name\": \"Enter your Name (this is not your username)\",\n    \"settings/editor-cursor-color\": \"Editor cursor color\",\n    \"settings/hello\": \"Hello, \",\n    \"settings/world\": \"world!\",\n    \"settings/linked-with-github-account\": \"Linked with GitHub account\",\n    \"settings/link-with-github-account\": \"Link with GitHub account\",\n    \"settings/log-out\": \"Log out\",\n    \"settings/author-name\": \"Author name\",\n    \"settings/author-email\": \"Author email\",\n    \"settings/theme\": \"Theme\",\n    \"settings/created-cloud-widgets-count\": \"Created cloud widgets count\",\n    \"settings/key-map\": \"Key Map\",\n\n    // Preview\n    \"preview/attach-a-note\": \"Attach a note\",\n    \"preview/crossnote-untitled\": \"Crossnote - Untitled\",\n    \"preview/edit-this-note\": \"Edit this note\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"followings\",\n    \"profile-card/followers\": \"followers\",\n    \"profile-card/Followings\": \"Followings\",\n    \"profile-card/Followers\": \"Followers\",\n    \"profile-card/notes\": \"notes\",\n    \"profile-card/follow-user-failure\": \"Failed to follow user\",\n    \"profile-card/followed-user\": \"Followed user\",\n    \"profile-card/unfollow-user-failure\": \"Failed to unfollow user\",\n    \"profile-card/unfollowed-user\": \"Unfollowed user\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"Show attached notes\",\n    \"interaction-panel/add-comment\": \"Add comment\",\n    \"interaction-panel/add-reaction\": \"Add reaction\",\n\n    // Editor\n    \"editor/loading-your-note\": \"Loading your note...\",\n    \"editor/sync-failure\": \"Failed to sync... Please refresh your page\",\n    \"editor/saving\": \"Saving...\",\n    \"editor/save-failure\": \"Failed to save\",\n    \"editor/saved\": \"Saved\",\n    \"editor/update-note-failure\": \"Failed to update note\",\n    \"editor/placeholder\": \"#  Hi  Type '/' for commands\",\n    \"editor/ln\": \"Ln\",\n    \"editor/col\": \"Col\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"Allow readers to suggest note tags\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"Allow readers to attach notes under this note\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"Inherit parent note collaborators list\",\n    \"editor/note-control/note-visibility-hint\":\n      \"All collaborators will be able to see this note\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"Applies to you and collaborators that can edit and admin\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"Applies to anyone that can view this note\",\n    \"editor/note-control/enter-parent-note-id\": \"Enter parent note ID\",\n    \"editor/note-control/attach-note-failure\": \"Failed to attach note\",\n    \"editor/note-control/unattach-note-failure\": \"Failed to unattach note\",\n    \"editor/collaborator-hint\": \" - note will be visible to them\",\n    \"editor/shareable-link-hint\":\n      \"people with the link can view/edit this note with no need of login\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"Create backup\",\n    \"editor/backups-control/delete-this-backup\": \"Delete this backup\",\n    \"editor/backups-control/create-backup-failure\": \"Failed to create backup\",\n    \"editor/backups-control/backup-created\": \"Backup created\",\n    \"editor/backups-control/delete-backup-failure\": \"Failed to delete backup\",\n    \"editor/backups-control/backup-deleted\": \"Backup deleted\",\n    \"editor/backups-control/cloud-version\": \"Cloud version\",\n    \"editor/backups-control/backup-name\": \"Backup name\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"Failed to set collaborator role\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"Failed to add collaborator\",\n    \"editor/collaborators-control/collaborator-removed\": \"Collaborator removed\",\n    \"editor/collaborators-control/collaborator-added\": \"Collaborator added\",\n    \"editor/collaborators-control/can-view\": \"Can view\",\n    \"editor/collaborators-control/can-edit\": \"Can edit\",\n    \"editor/collaborators-control/can-administrate\": \"Can administrate\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"Insert image\",\n    \"editor/toolbar/upload-local-images\": \"Upload local images\",\n    \"editor/toolbar/capture-webpage\": \"Capture the whole webpage\",\n    \"editor/toolbar/insert-clock\": \"Insert clock\",\n    \"editor/toolbar/insert-emoji\": \"Insert emoji\",\n    \"editor/toolbar/insert-media\": \"Insert media\",\n    \"editor/toolbar/insert-audio\": \"Insert Audio\",\n    \"editor/toolbar/netease-music\": \"Netease Music\",\n    \"editor/toolbar/insert-video\": \"Insert video\",\n    \"editor/toolbar/insert-youtube\": \"Insert Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"Insert Bilibili\",\n    \"editor/toolbar/insert-slide\": \"Insert slide\",\n    \"editor/toolbar/insert-ocr\": \"Insert OCR\",\n    \"editor/toolbar/insert-kanban\": \"Insert Kanban\",\n    \"editor/toolbar/insert-abc-notation\": \"Insert ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"Insert header 1\",\n    \"editor/toolbar/insert-header-2\": \"Insert header 2\",\n    \"editor/toolbar/insert-header-3\": \"Insert header 3\",\n    \"editor/toolbar/insert-header-4\": \"Insert header 4\",\n    \"editor/toolbar/insert-header-5\": \"Insert header 5\",\n    \"editor/toolbar/insert-header-6\": \"Insert header 6\",\n    \"editor/toolbar/bold\": \"Bold\",\n    \"editor/toolbar/italic\": \"Italic\",\n    \"editor/toolbar/strikethrough\": \"Strikethrough\",\n    \"editor/toolbar/insert-inline-code\": \"Insert inline code\",\n    \"editor/toolbar/insert-blockquote\": \"Insert blockquote\",\n    \"editor/toolbar/insert-unordered-list\": \"Insert unordered list\",\n    \"editor/toolbar/insert-ordered-list\": \"Insert ordered list\",\n    \"editor/toolbar/insert-link\": \"Insert link\",\n    \"editor/toolbar/insert-table\": \"Insert table\",\n    \"editor/toolbar/insert-comment\": \"Insert crossnote cloud comment widget\",\n    \"editor/toolbar/insert-github-gist\": \"Insert GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"Tag added\",\n    \"editor/note-control/tag-deleted\": \"Tag deleted\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"Failed to set note visibility\",\n    \"editor/note-control/note-visibility-updated\": \"Note visibility updated\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"Failed to set author visibility\",\n    \"editor/note-control/author-visibility-updated\":\n      \"Author visibility updated\",\n    \"editor/note-control/editor-mode\": \"Editor mode\",\n    \"editor/note-control/source-code\": \"Source code\",\n    \"editor/note-control/preview\": \"Preview\",\n    \"editor/note-control/split-view\": \"Split view\",\n    \"editor/note-control/pin-preview\": \"Pin preview on the side\",\n    \"editor/note-control/display-modification-records\":\n      \"Display modification records\",\n    \"editor/note-control/note-visibility\": \"Note visibility\",\n    \"editor/note-control/author-visibility\": \"Author visibility\",\n    \"editor/note-control/shareable-link\": \"Shareable link\",\n    \"editor/note-control/copy-to-clipboard\": \"Copy to clipboard\",\n    \"editor/note-control/link-to-preview\": \"Link to preview\",\n    \"editor/note-control/link-to-editor\": \"Link to editor\",\n    \"editor/note-control/attach-to-note\": \"Attach to note\",\n    \"editor/note-control/source-added\": \"URL added\",\n    \"editor/note-control/source-deleted\": \"URL deleted\",\n    \"editor/note-control/invalid-note-source\": \"Invalid URL\",\n    \"editor/note-control/add-note-source\": \"Add related URLs\",\n    \"editor/note-control/note-source-hint\":\n      \"Notes on the same URL will be grouped together\",\n    \"editor/note-control/enter-note-source\": \"Enter URL\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"This note is private\",\n    \"avatar-panel/this-note-is-public\": \"This note is visible to public\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"This note is only visible to friends\",\n    \"avatar-panel/you-are-anonymous\": \"You are anonymous\",\n\n    // FileExporter\n    \"file-exporter/name\": \"File exporter\",\n    \"file-exporter/orientation\": \"Orientation\",\n    \"file-exporter/portrait\": \"portrait\",\n    \"file-exporter/landscape\": \"landscape\",\n    \"file-exporter/paper-size\": \"Paper size\",\n    \"file-exporter/unit\": \"Unit\",\n    \"file-exporter/margin-top\": \"Margin top\",\n    \"file-exporter/margin-bottom\": \"Margin bottom\",\n    \"file-exporter/margin-left\": \"Margin left\",\n    \"file-exporter/margin-right\": \"Margin right\",\n\n    // Utils\n    \"utils/uploading-image\": \"Uploading image...\",\n    \"utils/upload-image-failure\": \"Failed to upload image\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"Replies to you in\",\n    \"notification/'s-note\": \"'s note \",\n    // * NoteReactionNotification\n    \"notification/added\": \"Added\",\n    \"notification/to-your-note\": \"to your note\",\n    \"notification/add-you-as\": \"Added you as\",\n    \"notification/of-note\": \"of note\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"Failed to add tag\",\n    \"notification/suggested-to-add-tag\": \"Suggested to add tag\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"Started following you\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"Bookmarked your note\",\n    \"notification/view-more-notifications\": \"View more notifications\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"Please wait ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"Failed to link with GitHub account\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"Failed to sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in\":\n      \"It seems to be the first time you sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in-small\":\n      \"Please finish the registeration below\",\n\n    // Widgets\n    \"widget/autoplay\": \"autoplay\",\n    \"widget/controls\": \"controls\",\n    \"widget/loop\": \"loop\",\n    \"widget/muted\": \"muted\",\n    \"widget/creating-widget\": \"Creating widget\",\n    \"widget/loading-widget\": \"Loading widget\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"Thanks sm.ms for offering free image hosting service.\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"Your browser does not support the audio element.\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"Enter audio source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"Your browser does not support the video element\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"Error: Only supported https://www.bilibili.com/video/av79126732 like URL\",\n    \"widget/crossnote.youtube/error_message\":\n      \"Error: Only supported https://www.youtube.com/watch?v=MmB9b5njVbA like URL\",\n    \"widget/crossnote.auth/welcome\": \"Welcome to Crossnote\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \"Doesn't have an account? Let's create one !\",\n    \"widget/crossnote.auth/forgot_password\": \"Forgot your password ?\",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"Failed to send verification code\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \"Verification code has been sent to \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"Failed to reset password\",\n    \"widget/crossnote.auth/password_reset\": \"Your password has been reset\",\n    \"widget/crossnote.auth/password-mismatch\": \"Passwords mismatch\",\n    \"widget/crossnote.auth/hello\": \"Hello, \",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"Enter the verification code\",\n    \"widget/crossnote.auth/get-code\": \"Get code\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"Sign in with GitHub account\",\n    \"widget/crossnote.auth/already-have-an-account\": \"Already have an account?\",\n    \"widget/crossnote.auth/reset-password\": \"Reset password\",\n    \"widget/crossnote.auth/Or\": \"Or\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili video URL\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"Enter the Bilibili video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/image-helper\": \"Image helper\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"Enter image URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"Click here to browse image file\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"Enter Netease Music song number ID.\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"Enter video source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/poster-url\": \"Poster URL (optional)\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"Enter poster URL here.\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube video URL\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"Enter the Youtube video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"Local image\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"Recognize text in languages\",\n    \"widget/crossnote.ocr/start-ocr\": \"Start OCR\",\n    \"widget/crossnote.ocr/extra-settings\": \"Extra settings\",\n    \"widget/crossnote.ocr/grayscale\": \"Grayscale\",\n    \"widget/crossnote.kanban/add-column\": \"Add new column\",\n    \"widget/crossnote.github_gist/title\": \"Embed a GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"Enter GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"Reply to this user\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"Add reaction to this comment\",\n    \"widget/crossnote.comment/edit-this-message\": \"Edit this comment\",\n    \"widget/crossnote.comment/modified-comment\": \"modified comment\",\n    \"widget/crossnote.comment/post-comment-failure\": \"Failed to post comment\",\n    \"widget/crossnote.comment/unsubscribe-info\":\n      \"Unsubscribe from the comments\",\n    \"widget/crossnote.comment/subscribe-info\": \"Subscribe to the comments\",\n    \"widget/crossnote.comment/view-more-comments\": \"View more comments\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"Are you sure to delete this note?\",\n    \"delete-note-dialog/subtitle\": \"You can't undo this action.\",\n    \"delete-directory-dialog/title\": \"Are you sure to delete this directory?\",\n    \"delete-directory-dialog/subtitle\":\n      \"All the child directories and notes will also be deleted. You can't undo this action.\",\n    \"delete-tag-dialog/title\": \"Are you sure to delete this tag?\",\n    \"delete-tag-dialog/subtitle\":\n      \"All the child tags will also be deleted. You can't undo this action.\",\n    \"add-notebook-dialog/disclaimer\":\n      \"Notebook data will only be stored locally in browser for offline uses. We won't upload any notebook data to our server.\",\n    \"edit-image-dialog/title\": \"Edit the image\",\n    \"edit-image-dialog/image-url\": \"image URL\",\n    \"edit-image-dialog/image-title\": \"image title\",\n    \"edit-image-dialog/image-alt-text\": \"image alt text\",\n    \"language-selector-dialog/subtitle\": \"Please choose the preferred language\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"Add to Home Screen\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline.\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) Press the 'Share' button\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) Press 'Add to Home Screen'\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"We currently only support publishing the notebook from a public repository on GitHub, GitLab, Gitea, or Gitea. We only collect README.md file data.\",\n    \"publish-notebook/disclaimer-2\":\n      \"Please declare the ownership of your notebook by adding the following front-matter to README.md in remote repository:\",\n\n    // git\n    \"git/status/ignored\": \"ignored\",\n    \"git/status/unmodified\": \"unmodified\",\n    \"git/status/*modified\": \"*modified\",\n    \"git/status/*deleted\": \"*deleted\",\n    \"git/status/*added\": \"*added\",\n    \"git/status/absent\": \"absent\",\n    \"git/status/modified\": \"modified\",\n    \"git/status/deleted\": \"deleted\",\n    \"git/status/added\": \"added\",\n    \"git/status/*unmodified\": \"*unmodified\",\n    \"git/status/*absent\": \"*absent\",\n    \"git/status/*undeleted\": \"*undeleted\",\n    \"git/status/*undeletemodified\": \"*undeletemodified\",\n    \"git/status/\": \"\",\n  },\n};\n","export const zhCN = {\n  translation: {\n    \"title/Crossnote\": \"\",\n    \"search/notes\": \"\",\n    \"search/notebooks\": \"\",\n    \"search/attachments\": \"\",\n\n    // Account\n    \"account/Anonymous\": \"\",\n    \"account/anonymous\": \"\",\n\n    // General\n    \"general/go-back\": \"\",\n    \"general/sending\": \"\",\n    \"general/send\": \"\",\n    \"general/cancel\": \"\",\n    \"general/add\": \"\",\n    \"general/adding\": \"\",\n    \"general/backed-up-at\": \"\",\n    \"general/created-at\": \"\",\n    \"general/modified-at\": \"\",\n    \"general/interacted-at\": \"\",\n    \"general/date-created\": \"\",\n    \"general/date-modified\": \"\",\n    \"general/date-interacted\": \"\",\n    \"general/title\": \"\",\n    \"general/saved-at\": \"\",\n    \"general/loading\": \" ...\",\n    \"general/loading-notifications\": \" ...\",\n    \"general/failed-to-set\": \"\",\n    \"general/update\": \"\",\n    \"general/updated\": \"\",\n    \"general/updating\": \"\",\n    \"general/close\": \"\",\n    \"general/Note\": \"\",\n    \"general/notes\": \"\",\n    \"general/Settings\": \"\",\n    \"general/Collaborators\": \"\",\n    \"general/collaborators\": \"\",\n    \"general/Backups\": \"\",\n    \"general/backups\": \"\",\n    \"general/Discussion\": \"\",\n    \"general/discussion\": \"\",\n    \"general/Notifications\": \"\",\n    \"general/Username\": \"\",\n    \"general/Email\": \"\",\n    \"general/Password\": \"\",\n    \"general/confirm-password\": \"\",\n    \"general/Continue\": \"\",\n    \"general/enter-username\": \"\",\n    \"general/vickymd\": \"\",\n    \"general/tags\": \"\",\n    \"general/add-a-tag\": \"\",\n    \"general/private\": \"\",\n    \"general/public\": \"\",\n    \"general/friends-only\": \"\",\n    \"general/anonymous\": \"\",\n    \"general/onymous\": \"\",\n    \"general/Tag\": \"\",\n    \"general/no-tags\": \"\",\n    \"general/Directory\": \"\",\n    \"general/Untitled\": \"\",\n    \"general/untitled\": \"\",\n    \"general/Unknown\": \"\",\n    \"general/unknown\": \"\",\n    \"general/Agree\": \"\",\n    \"general/Disagree\": \"\",\n    \"general/Print\": \"\",\n    \"general/Share\": \"\",\n    \"Editor\": \"\",\n    \"EDITOR\": \"\",\n    \"Viewer\": \"\",\n    \"VIEWER\": \"\",\n    \"Admin\": \"\",\n    \"ADMIN\": \"\",\n    \"ARCHIVED\": \"\",\n    \"ATTACHED NOTES\": \"\",\n    \"DELETED\": \"\",\n    \"PINNED\": \"\",\n    \"OTHERS\": \"\",\n    \"PUBLIC NOTES\": \"\",\n    \"FOLLOWINGS' NOTES\": \"\",\n    \"SHARED WITH ME\": \"\",\n    \"BOOKMARKS\": \"\",\n    \"MY TAGS\": \"\",\n    \"general/enter-fullscreen-mode\": \"\",\n    \"general/enter-presentation-mode\": \"\",\n    \"general/math-preview\": \"\",\n    \"general/this-note-is-empty\": \"\",\n    \"general/this-notebook-is-empty\": \"\",\n    \"general/nothing-here\": \"\",\n    \"general/no-notes-found\": \"\",\n    \"general/no-more-attachments-found\": \"\",\n    \"general/no-more-notebooks-found\": \"\",\n    \"general/no-notifications-found\": \"\",\n    \"general/clear-all\": \"\",\n    \"general/Save\": \"\",\n    \"general/Delete\": \"\",\n    \"general/Follow\": \"\",\n    \"general/Following\": \"\",\n    \"general/Unfollow\": \"\",\n    \"general/my-notes\": \"\",\n    \"general/public-notes\": \"\",\n    \"general/followings-notes\": \"\",\n    \"general/shared-with-me\": \"\",\n    \"general/Bookmarks\": \"\",\n    \"general/Archive\": \"\",\n    \"general/Trash\": \"\",\n    \"general/new-note\": \"\",\n    \"general/new-attachment\": \"\",\n    \"general/profile-updated\": \"\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"\",\n    \"general/Video\": \"\",\n    \"general/source-url\": \"\",\n    \"general/sign-in\": \"\",\n    \"general/sign-up\": \"\",\n    \"general/Link\": \"\",\n    \"general/Upload\": \"\",\n    \"general/Uploading\": \"\",\n    \"general/clicks\": \"\",\n    \"general/Processing\": \"...\",\n    \"general/please-wait\": \"...\",\n    \"general/please-sign-in-first\": \"\",\n    \"general/Languages\": \"\",\n    \"general/track\": \"\",\n    \"general/Publish\": \"\",\n    \"general/Unpublish\": \"\",\n    \"general/Open\": \"\",\n    \"general/Download\": \"\",\n    \"general/Configure\": \"\",\n    \"general/Update\": \"\",\n    \"general/empty\": \"\",\n    \"general/Explore\": \"\",\n    \"general/Notebooks\": \"\",\n    \"general/add-a-notebook\": \"\",\n    \"general/add-a-note\": \"\",\n    \"general/add-an-attachment\": \"\",\n    \"general/configure-the-notebook\": \"\",\n    \"general/publish-your-notebook\": \"\",\n    \"general/notebook-name\": \"\",\n    \"general/git-repository\": \"git \",\n    \"general/optional\": \"\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"\",\n    \"general/remember-username-and-password\": \"\",\n    \"general/stored-locally\": \"\",\n    \"general/cors-proxy\": \"CORS \",\n    \"general/why-cors-proxy\": \" CORS \",\n    \"general/today\": \"\",\n    \"general/todo\": \"\",\n    \"general/graph-view\": \"\",\n    \"general/wiki\": \"\",\n    \"general/tagged\": \"\",\n    \"general/untagged\": \"\",\n    \"general/encrypt\": \"\",\n    \"general/encrypted\": \"\",\n    \"general/decrypt\": \"\",\n    \"general/conflicted\": \"\",\n    \"general/attachments\": \"\",\n    \"general/Pin\": \"\",\n    \"general/Encryption\": \"\",\n    \"general/Fullscreen\": \"\",\n    \"general/change-file-path\": \"\",\n    \"general/create-a-copy\": \"\",\n    \"general/restore-checkout\": \" (git checkout)\",\n    \"general/download-pull\": \" (git pull)\",\n    \"general/upload-push\": \" (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"\",\n    \"general/encrypt-this-note-with-password\": \"\",\n    \"general/disable-encryption\": \"\",\n    \"general/decrypt-this-note\": \"\",\n    \"general/upload-the-profile\": \"\",\n    \"general/commit-message\": \"\",\n    \"general/upload-notebook\": \"\",\n    \"general/Comments\": \"\",\n    \"general/Source\": \"\",\n    \"general/Description\": \"\",\n    \"general/Edit\": \"\",\n    \"general/Rename\": \"\",\n    \"general/rename-directory\": \"\",\n    \"general/delete-directory\": \"\",\n    \"general/rename-tag\": \"\",\n    \"general/delete-tag\": \"\",\n    \"general/notebook-updates-found\": \"\",\n    \"general/update-the-notebook\": \"\",\n    \"general/check-notebook-updates-periodically\": \"\",\n    \"general/minutes\": \"\",\n    \"general/hard-reset\": \"\",\n    \"general/Default\": \"\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"\",\n    \"general/Asc\": \"\",\n    \"general/pin-the-note\": \"\",\n    \"general/unpin-the-note\": \"\",\n    \"general/add-to-quick-access\": \"\",\n    \"general/remove-from-quick-access\": \"\",\n\n    // Error\n    \"error/authentication-failed\": \"\",\n    \"error/failed-to-upload-notebook\": \"\",\n    \"error/failed-to-download-notebook\": \"\",\n    \"error/notebook-already-exists\": \"\",\n    \"error/invalid-git-url-prefix\": \" git URL \",\n    \"error/please-resolve-conflicts\": \"\",\n    \"error/failed-to-disable-encryption\": \"\",\n    \"error/decryption-failed\": \"\",\n    \"error/failed-to-change-file-path\": \"\",\n    \"error/failed-to-create-widget\": \"\",\n    \"error/failed-to-load-widget\": \"\",\n    \"error/failed-to-update-the-notebook\": \"\",\n    \"error/failed-to-unpublish-the-notebook\": \"\",\n    \"error/failed-to-publish-notebook\": \"\",\n\n    // Success\n    \"success/notebook-uploaded\": \"\",\n    \"success/notebook-downloaded\": \"\",\n\n    // Info\n    \"info/downloading-notebook\": \"\",\n\n    // Note\n    \"note/unarchive-note\": \"\",\n    \"note/archive-note\": \"\",\n    \"note/delete-forever\": \"\",\n    \"note/delete-note\": \"\",\n    \"note/restore-note\": \"\",\n    \"note/report-note\": \"\",\n    \"note/open-in-crossnote-website\": \"\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"\",\n    \"note-tags/suggestion-sent\": \"\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"\",\n\n    // Notifications\n    \"notifications/refresh\": \"\",\n    \"notifications/new-version-available\": \"\",\n\n    // Settings\n    \"settings/about-this-project\": \"\",\n    \"settings/issues-and-feature-requests\": \"\",\n    \"settings/uploading-cover-image\": \"\",\n    \"settings/upload-image-failure\": \"\",\n    \"settings/Cover\": \"\",\n    \"settings/enter-cover-image-url\": \"\",\n    \"settings/upload-image\": \"\",\n    \"settings/Avatar\": \"\",\n    \"settings/enter-avatar-image-url\": \"\",\n    \"settings/Name\": \"\",\n    \"settings/enter-name\": \"\",\n    \"settings/editor-cursor-color\": \"\",\n    \"settings/hello\": \"\",\n    \"settings/world\": \"\",\n    \"settings/linked-with-github-account\": \" GitHub \",\n    \"settings/link-with-github-account\": \" GitHub \",\n    \"settings/log-out\": \"\",\n    \"settings/author-name\": \"\",\n    \"settings/author-email\": \"\",\n    \"settings/theme\": \"\",\n    \"settings/created-cloud-widgets-count\": \"\",\n    \"settings/key-map\": \"\",\n\n    // Preview\n    \"preview/attach-a-note\": \"\",\n    \"preview/crossnote-untitled\": \" - \",\n    \"preview/edit-this-note\": \"\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"\",\n    \"profile-card/followers\": \"\",\n    \"profile-card/Followings\": \"\",\n    \"profile-card/Followers\": \"\",\n    \"profile-card/notes\": \"\",\n    \"profile-card/follow-user-failure\": \"\",\n    \"profile-card/followed-user\": \"\",\n    \"profile-card/unfollow-user-failure\": \"\",\n    \"profile-card/unfollowed-user\": \"\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"\",\n    \"interaction-panel/add-comment\": \"\",\n    \"interaction-panel/add-reaction\": \"\",\n\n    // Editor\n    \"editor/loading-your-note\": \"...\",\n    \"editor/sync-failure\": \"... \",\n    \"editor/saving\": \"...\",\n    \"editor/save-failure\": \"\",\n    \"editor/saved\": \"\",\n    \"editor/update-note-failure\": \"\",\n    \"editor/placeholder\": \"#     '/' \",\n    \"editor/ln\": \"\",\n    \"editor/col\": \"\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"\",\n    \"editor/note-control/note-visibility-hint\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"\",\n    \"editor/note-control/enter-parent-note-id\": \" ID\",\n    \"editor/note-control/attach-note-failure\": \"\",\n    \"editor/note-control/unattach-note-failure\": \"\",\n    \"editor/collaborator-hint\": \" - \",\n    \"editor/shareable-link-hint\":\n      \"/\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"\",\n    \"editor/backups-control/delete-this-backup\": \"\",\n    \"editor/backups-control/create-backup-failure\": \"\",\n    \"editor/backups-control/backup-created\": \"\",\n    \"editor/backups-control/delete-backup-failure\": \"\",\n    \"editor/backups-control/backup-deleted\": \"\",\n    \"editor/backups-control/cloud-version\": \"\",\n    \"editor/backups-control/backup-name\": \"\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"\",\n    \"editor/collaborators-control/collaborator-removed\": \"\",\n    \"editor/collaborators-control/collaborator-added\": \"\",\n    \"editor/collaborators-control/can-view\": \"\",\n    \"editor/collaborators-control/can-edit\": \"\",\n    \"editor/collaborators-control/can-administrate\": \"\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"\",\n    \"editor/toolbar/upload-local-images\": \"\",\n    \"editor/toolbar/capture-webpage\": \"\",\n    \"editor/toolbar/insert-clock\": \"\",\n    \"editor/toolbar/insert-emoji\": \" Emoji\",\n    \"editor/toolbar/insert-media\": \"\",\n    \"editor/toolbar/insert-audio\": \"\",\n    \"editor/toolbar/netease-music\": \"\",\n    \"editor/toolbar/insert-video\": \"\",\n    \"editor/toolbar/insert-youtube\": \" Youtube\",\n    \"editor/toolbar/insert-bilibili\": \" Bilibili\",\n    \"editor/toolbar/insert-slide\": \"\",\n    \"editor/toolbar/insert-ocr\": \" OCR\",\n    \"editor/toolbar/insert-kanban\": \"\",\n    \"editor/toolbar/insert-abc-notation\": \" ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"\",\n    \"editor/toolbar/insert-header-2\": \"\",\n    \"editor/toolbar/insert-header-3\": \"\",\n    \"editor/toolbar/insert-header-4\": \"\",\n    \"editor/toolbar/insert-header-5\": \"\",\n    \"editor/toolbar/insert-header-6\": \"\",\n    \"editor/toolbar/bold\": \"\",\n    \"editor/toolbar/italic\": \"\",\n    \"editor/toolbar/strikethrough\": \"\",\n    \"editor/toolbar/insert-inline-code\": \"\",\n    \"editor/toolbar/insert-blockquote\": \"\",\n    \"editor/toolbar/insert-unordered-list\": \"\",\n    \"editor/toolbar/insert-ordered-list\": \"\",\n    \"editor/toolbar/insert-link\": \"\",\n    \"editor/toolbar/insert-table\": \"\",\n    \"editor/toolbar/insert-comment\": \"\",\n    \"editor/toolbar/insert-github-gist\": \" GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"\",\n    \"editor/note-control/tag-deleted\": \"\",\n    \"editor/note-control/set-note-visibility-failure\": \"\",\n    \"editor/note-control/note-visibility-updated\": \"\",\n    \"editor/note-control/set-author-visibility-failure\": \"\",\n    \"editor/note-control/author-visibility-updated\": \"\",\n    \"editor/note-control/editor-mode\": \"\",\n    \"editor/note-control/source-code\": \"\",\n    \"editor/note-control/preview\": \"\",\n    \"editor/note-control/split-view\": \"\",\n    \"editor/note-control/pin-preview\": \"\",\n    \"editor/note-control/display-modification-records\": \"\",\n    \"editor/note-control/note-visibility\": \"\",\n    \"editor/note-control/author-visibility\": \"\",\n    \"editor/note-control/shareable-link\": \"\",\n    \"editor/note-control/copy-to-clipboard\": \"\",\n    \"editor/note-control/link-to-preview\": \"\",\n    \"editor/note-control/link-to-editor\": \"\",\n    \"editor/note-control/attach-to-note\": \"\",\n    \"editor/note-control/source-added\": \"\",\n    \"editor/note-control/source-deleted\": \"\",\n    \"editor/note-control/invalid-note-source\": \"\",\n    \"editor/note-control/add-note-source\": \"\",\n    \"editor/note-control/note-source-hint\":\n      \"\",\n    \"editor/note-control/enter-note-source\": \"\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"\",\n    \"avatar-panel/this-note-is-public\": \"\",\n    \"avatar-panel/this-note-is-friends-only\": \"\",\n    \"avatar-panel/you-are-anonymous\": \"\",\n\n    // FileExporter\n    \"file-exporter/name\": \"\",\n    \"file-exporter/orientation\": \"\",\n    \"file-exporter/portrait\": \"\",\n    \"file-exporter/landscape\": \"\",\n    \"file-exporter/paper-size\": \"\",\n    \"file-exporter/unit\": \"\",\n    \"file-exporter/margin-top\": \"\",\n    \"file-exporter/margin-bottom\": \"\",\n    \"file-exporter/margin-left\": \"\",\n    \"file-exporter/margin-right\": \"\",\n\n    // Utils\n    \"utils/uploading-image\": \"...\",\n    \"utils/upload-image-failure\": \"\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"\",\n    \"notification/'s-note\": \" \",\n    // * NoteReactionNotification\n    \"notification/added\": \" \",\n    \"notification/to-your-note\": \"\",\n    \"notification/add-you-as\": \"\",\n    \"notification/of-note\": \"\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"\",\n    \"notification/suggested-to-add-tag\": \"\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"\",\n    \"notification/view-more-notifications\": \"\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \" ...\",\n    \"github-oauth/link-with-github-account-failure\": \" GitHub \",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \" GitHub \",\n    \"github-oauth/first-time-sign-in\": \" GitHub \",\n    \"github-oauth/first-time-sign-in-small\": \"\",\n\n    // Widgets\n    \"widget/autoplay\": \"\",\n    \"widget/controls\": \"\",\n    \"widget/loop\": \"\",\n    \"widget/muted\": \"\",\n    \"widget/creating-widget\": \"\",\n    \"widget/loading-widget\": \"\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \" sm.ms \",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \" audio \",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/video_element_fail\":\n      \" video \",\n    \"widget/crossnote.bilibili/error_message\":\n      \" https://www.bilibili.com/video/av79126732 \",\n    \"widget/crossnote.youtube/error_message\":\n      \" https://www.youtube.com/watch?v=MmB9b5njVbA \",\n    \"widget/crossnote.auth/welcome\": \"\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"\",\n    \"widget/crossnote.auth/forgot_password\": \" \",\n    \"widget/crossnote.auth/failed_to_send_code\": \"\",\n    \"widget/crossnote.auth/verification_code_sent\": \" \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"\",\n    \"widget/crossnote.auth/password_reset\": \"\",\n    \"widget/crossnote.auth/password-mismatch\": \"\",\n    \"widget/crossnote.auth/hello\": \"\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"\",\n    \"widget/crossnote.auth/get-code\": \"\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \" GitHub \",\n    \"widget/crossnote.auth/already-have-an-account\": \"\",\n    \"widget/crossnote.auth/reset-password\": \"\",\n    \"widget/crossnote.auth/Or\": \"\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili \",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \" Bilibili  '' \",\n    \"widget/crossnote.image/image-helper\": \"\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \" ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/poster-url\": \"\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube \",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \" Youtube  '' \",\n    \"widget/crossnote.ocr/ocr\": \"OCR - \",\n    \"widget/crossnote.ocr/local-image\": \"\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"\",\n    \"widget/crossnote.ocr/start-ocr\": \"\",\n    \"widget/crossnote.ocr/extra-settings\": \"\",\n    \"widget/crossnote.ocr/grayscale\": \"\",\n    \"widget/crossnote.kanban/add-column\": \"\",\n    \"widget/crossnote.github_gist/title\": \" GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \" GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \" tesseract \",\n    \"tesseract/initializing tesseract\": \" tesseract\",\n    \"tesseract/initialized tesseract\": \" tesseract\",\n    \"tesseract/loading language traineddata\": \"\",\n    \"tesseract/loaded language traineddata\": \"\",\n    \"tesseract/initializing api\": \"\",\n    \"tesseract/initialized api\": \"\",\n    \"tesseract/recognizing text\": \"\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"\",\n    \"widget/crossnote.comment/edit-this-message\": \"\",\n    \"widget/crossnote.comment/modified-comment\": \"\",\n    \"widget/crossnote.comment/post-comment-failure\": \"\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"\",\n    \"widget/crossnote.comment/subscribe-info\": \"\",\n    \"widget/crossnote.comment/view-more-comments\": \"\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"\",\n    \"delete-note-dialog/subtitle\": \"\",\n    \"delete-directory-dialog/title\": \"\",\n    \"delete-directory-dialog/subtitle\":\n      \"\",\n    \"delete-tag-dialog/title\": \"\",\n    \"delete-tag-dialog/subtitle\": \"\",\n    \"add-notebook-dialog/disclaimer\":\n      \"\",\n    \"edit-image-dialog/title\": \"\",\n    \"edit-image-dialog/image-url\": \" URL\",\n    \"edit-image-dialog/image-title\": \"\",\n    \"edit-image-dialog/image-alt-text\": \"\",\n    \"language-selector-dialog/subtitle\": \"\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1)  '' \",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\": \"2)  ''\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \" GitHubGitLabGitea  README.md \",\n    \"publish-notebook/disclaimer-2\":\n      \" README.md  front-matter \",\n\n    // git\n    \"git/status/ignored\": \"\",\n    \"git/status/unmodified\": \"\",\n    \"git/status/*modified\": \"*\",\n    \"git/status/*deleted\": \"*\",\n    \"git/status/*added\": \"*\",\n    \"git/status/absent\": \"\",\n    \"git/status/modified\": \"\",\n    \"git/status/deleted\": \"\",\n    \"git/status/added\": \"\",\n    \"git/status/*unmodified\": \"*\",\n    \"git/status/*absent\": \"*\",\n    \"git/status/*undeleted\": \"*\",\n  },\n};\n","export const zhTW = {\n  translation: {\n    \"title/Crossnote\": \"\",\n    \"search/notes\": \"\",\n    \"search/notebooks\": \"\",\n    \"search/attachments\": \"\",\n\n    // Account\n    \"account/Anonymous\": \"\",\n    \"account/anonymous\": \"\",\n\n    // General\n    \"general/go-back\": \"\",\n    \"general/sending\": \"\",\n    \"general/send\": \"\",\n    \"general/cancel\": \"\",\n    \"general/add\": \"\",\n    \"general/adding\": \"\",\n    \"general/backed-up-at\": \"\",\n    \"general/created-at\": \"\",\n    \"general/modified-at\": \"\",\n    \"general/interacted-at\": \"\",\n    \"general/date-created\": \"\",\n    \"general/date-modified\": \"\",\n    \"general/date-interacted\": \"\",\n    \"general/title\": \"\",\n    \"general/saved-at\": \"\",\n    \"general/loading\": \" ...\",\n    \"general/loading-notifications\": \" ...\",\n    \"general/failed-to-set\": \"\",\n    \"general/update\": \"\",\n    \"general/updated\": \"\",\n    \"general/updating\": \"\",\n    \"general/close\": \"\",\n    \"general/Note\": \"\",\n    \"general/notes\": \"\",\n    \"general/Settings\": \"\",\n    \"general/Collaborators\": \"\",\n    \"general/collaborators\": \"\",\n    \"general/Backups\": \"\",\n    \"general/backups\": \"\",\n    \"general/Discussion\": \"\",\n    \"general/discussion\": \"\",\n    \"general/Notifications\": \"\",\n    \"general/Username\": \"\",\n    \"general/Email\": \"\",\n    \"general/Password\": \"\",\n    \"general/confirm-password\": \"\",\n    \"general/Continue\": \"\",\n    \"general/enter-username\": \"\",\n    \"general/vickymd\": \"\",\n    \"general/tags\": \"\",\n    \"general/add-a-tag\": \"\",\n    \"general/private\": \"\",\n    \"general/public\": \"\",\n    \"general/friends-only\": \"\",\n    \"general/anonymous\": \"\",\n    \"general/onymous\": \"\",\n    \"general/Tag\": \"\",\n    \"general/no-tags\": \"\",\n    \"general/Directory\": \"\",\n    \"general/Untitled\": \"\",\n    \"general/untitled\": \"\",\n    \"general/Unknown\": \"\",\n    \"general/unknown\": \"\",\n    \"general/Agree\": \"\",\n    \"general/Disagree\": \"\",\n    \"general/Print\": \"\",\n    \"general/Share\": \"\",\n    \"Editor\": \"\",\n    \"EDITOR\": \"\",\n    \"Viewer\": \"\",\n    \"VIEWER\": \"\",\n    \"Admin\": \"\",\n    \"ADMIN\": \"\",\n    \"ARCHIVED\": \"\",\n    \"ATTACHED NOTES\": \"\",\n    \"DELETED\": \"\",\n    \"PINNED\": \"\",\n    \"OTHERS\": \"\",\n    \"PUBLIC NOTES\": \"\",\n    \"FOLLOWINGS' NOTES\": \"\",\n    \"SHARED WITH ME\": \"\",\n    \"BOOKMARKS\": \"\",\n    \"MY TAGS\": \"\",\n    \"general/enter-fullscreen-mode\": \"\",\n    \"general/enter-presentation-mode\": \"\",\n    \"general/math-preview\": \"\",\n    \"general/this-note-is-empty\": \"\",\n    \"general/this-notebook-is-empty\": \"\",\n    \"general/nothing-here\": \"\",\n    \"general/no-notes-found\": \"\",\n    \"general/no-more-attachments-found\": \"\",\n    \"general/no-more-notebooks-found\": \"\",\n    \"general/no-notifications-found\": \"\",\n    \"general/clear-all\": \"\",\n    \"general/Save\": \"\",\n    \"general/Delete\": \"\",\n    \"general/Follow\": \"\",\n    \"general/Following\": \"\",\n    \"general/Unfollow\": \"\",\n    \"general/my-notes\": \"\",\n    \"general/public-notes\": \"\",\n    \"general/followings-notes\": \"\",\n    \"general/shared-with-me\": \"\",\n    \"general/Bookmarks\": \"\",\n    \"general/Archive\": \"\",\n    \"general/Trash\": \"\",\n    \"general/new-note\": \"\",\n    \"general/new-attachment\": \"\",\n    \"general/profile-updated\": \"\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"\",\n    \"general/Video\": \"\",\n    \"general/source-url\": \"\",\n    \"general/sign-in\": \"\",\n    \"general/sign-up\": \"\",\n    \"general/Link\": \"\",\n    \"general/Upload\": \"\",\n    \"general/Uploading\": \"\",\n    \"general/clicks\": \"\",\n    \"general/Processing\": \"...\",\n    \"general/please-wait\": \"...\",\n    \"general/please-sign-in-first\": \"\",\n    \"general/Languages\": \"\",\n    \"general/track\": \"\",\n    \"general/Publish\": \"\",\n    \"general/Unpublish\": \"\",\n    \"general/Open\": \"\",\n    \"general/Download\": \"\",\n    \"general/Configure\": \"\",\n    \"general/Update\": \"\",\n    \"general/empty\": \"\",\n    \"general/Explore\": \"\",\n    \"general/Notebooks\": \"\",\n    \"general/add-a-notebook\": \"\",\n    \"general/add-a-note\": \"\",\n    \"general/add-an-attachment\": \"\",\n    \"general/configure-the-notebook\": \"\",\n    \"general/publish-your-notebook\": \"\",\n    \"general/notebook-name\": \"\",\n    \"general/git-repository\": \"git \",\n    \"general/optional\": \"\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"\",\n    \"general/remember-username-and-password\": \"\",\n    \"general/stored-locally\": \"\",\n    \"general/cors-proxy\": \"CORS \",\n    \"general/why-cors-proxy\": \" CORS \",\n    \"general/today\": \"\",\n    \"general/todo\": \"\",\n    \"general/graph-view\": \"\",\n    \"general/wiki\": \"\",\n    \"general/tagged\": \"\",\n    \"general/untagged\": \"\",\n    \"general/encrypt\": \"\",\n    \"general/encrypted\": \"\",\n    \"general/decrypt\": \"\",\n    \"general/conflicted\": \"\",\n    \"general/attachments\": \"\",\n    \"general/Pin\": \"\",\n    \"general/Encryption\": \"\",\n    \"general/Fullscreen\": \"\",\n    \"general/change-file-path\": \"\",\n    \"general/create-a-copy\": \"\",\n    \"general/restore-checkout\": \" (git checkout)\",\n    \"general/download-pull\": \" (git pull)\",\n    \"general/upload-push\": \" (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"\",\n    \"general/encrypt-this-note-with-password\": \"\",\n    \"general/disable-encryption\": \"\",\n    \"general/decrypt-this-note\": \"\",\n    \"general/upload-the-profile\": \"\",\n    \"general/commit-message\": \"\",\n    \"general/upload-notebook\": \"\",\n    \"general/Comments\": \"\",\n    \"general/Source\": \"\",\n    \"general/Description\": \"\",\n    \"general/Edit\": \"\",\n    \"general/Rename\": \"\",\n    \"general/rename-directory\": \"\",\n    \"general/delete-directory\": \"\",\n    \"general/rename-tag\": \"\",\n    \"general/delete-tag\": \"\",\n    \"general/notebook-updates-found\": \"\",\n    \"general/update-the-notebook\": \"\",\n    \"general/check-notebook-updates-periodically\": \"\",\n    \"general/minutes\": \"\",\n    \"general/hard-reset\": \"\",\n    \"general/Default\": \"\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"\",\n    \"general/Asc\": \"\",\n    \"general/pin-the-note\": \"\",\n    \"general/unpin-the-note\": \"\",\n    \"general/add-to-quick-access\": \"\",\n    \"general/remove-from-quick-access\": \"\",\n\n    // Error\n    \"error/authentication-failed\": \"\",\n    \"error/failed-to-upload-notebook\": \"\",\n    \"error/failed-to-download-notebook\": \"\",\n    \"error/notebook-already-exists\": \"\",\n    \"error/invalid-git-url-prefix\": \" git URL \",\n    \"error/please-resolve-conflicts\": \"\",\n    \"error/failed-to-disable-encryption\": \"\",\n    \"error/decryption-failed\": \"\",\n    \"error/failed-to-change-file-path\": \"\",\n    \"error/failed-to-create-widget\": \"\",\n    \"error/failed-to-load-widget\": \"\",\n    \"error/failed-to-update-the-notebook\": \"\",\n    \"error/failed-to-unpublish-the-notebook\": \"\",\n    \"error/failed-to-publish-notebook\": \"\",\n\n    // Success\n    \"success/notebook-uploaded\": \"\",\n    \"success/notebook-downloaded\": \"\",\n\n    // Info\n    \"info/downloading-notebook\": \"\",\n\n    // Note\n    \"note/unarchive-note\": \"\",\n    \"note/archive-note\": \"\",\n    \"note/delete-forever\": \"\",\n    \"note/delete-note\": \"\",\n    \"note/restore-note\": \"\",\n    \"note/report-note\": \"\",\n    \"note/open-in-crossnote-website\": \"\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"\",\n    \"note-tags/suggestion-sent\": \"\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"\",\n\n    // Notifications\n    \"notifications/refresh\": \"\",\n    \"notifications/new-version-available\": \"!\",\n\n    // Settings\n    \"settings/about-this-project\": \"\",\n    \"settings/issues-and-feature-requests\": \"?\",\n    \"settings/uploading-cover-image\": \"\",\n    \"settings/upload-image-failure\": \"\",\n    \"settings/Cover\": \"\",\n    \"settings/enter-cover-image-url\": \"\",\n    \"settings/upload-image\": \"\",\n    \"settings/Avatar\": \"\",\n    \"settings/enter-avatar-image-url\": \"\",\n    \"settings/Name\": \"\",\n    \"settings/enter-name\": \"\",\n    \"settings/editor-cursor-color\": \"\",\n    \"settings/hello\": \"\",\n    \"settings/world\": \"\",\n    \"settings/linked-with-github-account\": \" GitHub \",\n    \"settings/link-with-github-account\": \" GitHub \",\n    \"settings/log-out\": \"\",\n    \"settings/author-name\": \"\",\n    \"settings/author-email\": \"\",\n    \"settings/theme\": \"\",\n    \"settings/created-cloud-widgets-count\": \"\",\n    \"settings/key-map\": \"\",\n\n    // Preview\n    \"preview/attach-a-note\": \"\",\n    \"preview/crossnote-untitled\": \" - \",\n    \"preview/edit-this-note\": \"\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"\",\n    \"profile-card/followers\": \"\",\n    \"profile-card/Followings\": \"\",\n    \"profile-card/Followers\": \"\",\n    \"profile-card/notes\": \"\",\n    \"profile-card/follow-user-failure\": \"\",\n    \"profile-card/followed-user\": \"\",\n    \"profile-card/unfollow-user-failure\": \"\",\n    \"profile-card/unfollowed-user\": \"\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"\",\n    \"interaction-panel/add-comment\": \"\",\n    \"interaction-panel/add-reaction\": \"\",\n\n    // Editor\n    \"editor/loading-your-note\": \"...\",\n    \"editor/sync-failure\": \"... \",\n    \"editor/saving\": \"...\",\n    \"editor/save-failure\": \"\",\n    \"editor/saved\": \"\",\n    \"editor/update-note-failure\": \"\",\n    \"editor/placeholder\": \"#     '/' \",\n    \"editor/ln\": \"\",\n    \"editor/col\": \"\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"\",\n    \"editor/note-control/note-visibility-hint\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"\",\n    \"editor/note-control/enter-parent-note-id\": \" ID\",\n    \"editor/note-control/attach-note-failure\": \"\",\n    \"editor/note-control/unattach-note-failure\": \"\",\n    \"editor/collaborator-hint\": \" - \",\n    \"editor/shareable-link-hint\":\n      \"/\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"\",\n    \"editor/backups-control/delete-this-backup\": \"\",\n    \"editor/backups-control/create-backup-failure\": \"\",\n    \"editor/backups-control/backup-created\": \"\",\n    \"editor/backups-control/delete-backup-failure\": \"\",\n    \"editor/backups-control/backup-deleted\": \"\",\n    \"editor/backups-control/cloud-version\": \"\",\n    \"editor/backups-control/backup-name\": \"\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"\",\n    \"editor/collaborators-control/collaborator-removed\": \"\",\n    \"editor/collaborators-control/collaborator-added\": \"\",\n    \"editor/collaborators-control/can-view\": \"\",\n    \"editor/collaborators-control/can-edit\": \"\",\n    \"editor/collaborators-control/can-administrate\": \"\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"\",\n    \"editor/toolbar/upload-local-images\": \"\",\n    \"editor/toolbar/capture-webpage\": \"\",\n    \"editor/toolbar/insert-clock\": \"\",\n    \"editor/toolbar/insert-emoji\": \" Emoji\",\n    \"editor/toolbar/insert-media\": \"\",\n    \"editor/toolbar/insert-audio\": \"\",\n    \"editor/toolbar/netease-music\": \"\",\n    \"editor/toolbar/insert-video\": \"\",\n    \"editor/toolbar/insert-youtube\": \" Youtube\",\n    \"editor/toolbar/insert-bilibili\": \" Bilibili\",\n    \"editor/toolbar/insert-slide\": \"\",\n    \"editor/toolbar/insert-ocr\": \" OCR\",\n    \"editor/toolbar/insert-kanban\": \"\",\n    \"editor/toolbar/insert-abc-notation\": \" ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"\",\n    \"editor/toolbar/insert-header-2\": \"\",\n    \"editor/toolbar/insert-header-3\": \"\",\n    \"editor/toolbar/insert-header-4\": \"\",\n    \"editor/toolbar/insert-header-5\": \"\",\n    \"editor/toolbar/insert-header-6\": \"\",\n    \"editor/toolbar/bold\": \"\",\n    \"editor/toolbar/italic\": \"\",\n    \"editor/toolbar/strikethrough\": \"\",\n    \"editor/toolbar/insert-inline-code\": \"\",\n    \"editor/toolbar/insert-blockquote\": \"\",\n    \"editor/toolbar/insert-unordered-list\": \"\",\n    \"editor/toolbar/insert-ordered-list\": \"\",\n    \"editor/toolbar/insert-link\": \"\",\n    \"editor/toolbar/insert-table\": \"\",\n    \"editor/toolbar/insert-comment\": \"\",\n    \"editor/toolbar/insert-github-gist\": \" GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"\",\n    \"editor/note-control/tag-deleted\": \"\",\n    \"editor/note-control/set-note-visibility-failure\": \"\",\n    \"editor/note-control/note-visibility-updated\": \"\",\n    \"editor/note-control/set-author-visibility-failure\": \"\",\n    \"editor/note-control/author-visibility-updated\": \"\",\n    \"editor/note-control/editor-mode\": \"\",\n    \"editor/note-control/source-code\": \"\",\n    \"editor/note-control/preview\": \"\",\n    \"editor/note-control/split-view\": \"\",\n    \"editor/note-control/pin-preview\": \"\",\n    \"editor/note-control/display-modification-records\": \"\",\n    \"editor/note-control/note-visibility\": \"\",\n    \"editor/note-control/author-visibility\": \"\",\n    \"editor/note-control/shareable-link\": \"\",\n    \"editor/note-control/copy-to-clipboard\": \"\",\n    \"editor/note-control/link-to-preview\": \"\",\n    \"editor/note-control/link-to-editor\": \"\",\n    \"editor/note-control/attach-to-note\": \"\",\n    \"editor/note-control/source-added\": \"\",\n    \"editor/note-control/source-deleted\": \"\",\n    \"editor/note-control/invalid-note-source\": \"\",\n    \"editor/note-control/add-note-source\": \"\",\n    \"editor/note-control/note-source-hint\":\n      \"\",\n    \"editor/note-control/enter-note-source\": \"\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"\",\n    \"avatar-panel/this-note-is-public\": \"\",\n    \"avatar-panel/this-note-is-friends-only\": \"\",\n    \"avatar-panel/you-are-anonymous\": \"\",\n\n    // FileExporter\n    \"file-exporter/name\": \"\",\n    \"file-exporter/orientation\": \"\",\n    \"file-exporter/portrait\": \"\",\n    \"file-exporter/landscape\": \"\",\n    \"file-exporter/paper-size\": \"\",\n    \"file-exporter/unit\": \"\",\n    \"file-exporter/margin-top\": \"\",\n    \"file-exporter/margin-bottom\": \"\",\n    \"file-exporter/margin-left\": \"\",\n    \"file-exporter/margin-right\": \"\",\n\n    // Utils\n    \"utils/uploading-image\": \"...\",\n    \"utils/upload-image-failure\": \"\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"\",\n    \"notification/'s-note\": \" \",\n    // * NoteReactionNotification\n    \"notification/added\": \" \",\n    \"notification/to-your-note\": \"\",\n    \"notification/add-you-as\": \"\",\n    \"notification/of-note\": \"\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"\",\n    \"notification/suggested-to-add-tag\": \"\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"\",\n    \"notification/view-more-notifications\": \"\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \" ...\",\n    \"github-oauth/link-with-github-account-failure\": \" GitHub \",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \" GitHub \",\n    \"github-oauth/first-time-sign-in\": \" GitHub \",\n    \"github-oauth/first-time-sign-in-small\": \"\",\n\n    // Widgets\n    \"widget/autoplay\": \"\",\n    \"widget/controls\": \"\",\n    \"widget/loop\": \"\",\n    \"widget/muted\": \"\",\n    \"widget/creating-widget\": \"\",\n    \"widget/loading-widget\": \"\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \" sm.ms \",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \" audio \",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/video_element_fail\":\n      \" video \",\n    \"widget/crossnote.bilibili/error_message\":\n      \" https://www.bilibili.com/video/av79126732 \",\n    \"widget/crossnote.youtube/error_message\":\n      \" https://www.youtube.com/watch?v=MmB9b5njVbA \",\n    \"widget/crossnote.auth/welcome\": \"\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"\",\n    \"widget/crossnote.auth/forgot_password\": \" \",\n    \"widget/crossnote.auth/failed_to_send_code\": \"\",\n    \"widget/crossnote.auth/verification_code_sent\": \" \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"\",\n    \"widget/crossnote.auth/password_reset\": \"\",\n    \"widget/crossnote.auth/password-mismatch\": \"\",\n    \"widget/crossnote.auth/hello\": \"\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"\",\n    \"widget/crossnote.auth/get-code\": \"\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \" GitHub \",\n    \"widget/crossnote.auth/already-have-an-account\": \"\",\n    \"widget/crossnote.auth/reset-password\": \"\",\n    \"widget/crossnote.auth/Or\": \"\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili \",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \" Bilibili  '' \",\n    \"widget/crossnote.image/image-helper\": \"\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \" ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/poster-url\": \"\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube \",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \" Youtube  '' \",\n    \"widget/crossnote.ocr/ocr\": \"OCR - \",\n    \"widget/crossnote.ocr/local-image\": \"\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"\",\n    \"widget/crossnote.ocr/start-ocr\": \"\",\n    \"widget/crossnote.ocr/extra-settings\": \"\",\n    \"widget/crossnote.ocr/grayscale\": \"\",\n    \"widget/crossnote.kanban/add-column\": \"\",\n    \"widget/crossnote.github_gist/title\": \" GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \" GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \" tesseract \",\n    \"tesseract/initializing tesseract\": \" tesseract\",\n    \"tesseract/initialized tesseract\": \" tesseract\",\n    \"tesseract/loading language traineddata\": \"\",\n    \"tesseract/loaded language traineddata\": \"\",\n    \"tesseract/initializing api\": \"\",\n    \"tesseract/initialized api\": \"\",\n    \"tesseract/recognizing text\": \"\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"\",\n    \"widget/crossnote.comment/edit-this-message\": \"\",\n    \"widget/crossnote.comment/modified-comment\": \"\",\n    \"widget/crossnote.comment/post-comment-failure\": \"\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"\",\n    \"widget/crossnote.comment/subscribe-info\": \"\",\n    \"widget/crossnote.comment/view-more-comments\": \"\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"?\",\n    \"delete-note-dialog/subtitle\": \"\",\n    \"delete-directory-dialog/title\": \"?\",\n    \"delete-directory-dialog/subtitle\":\n      \"\",\n    \"delete-tag-dialog/title\": \"?\",\n    \"delete-tag-dialog/subtitle\": \"\",\n    \"add-notebook-dialog/disclaimer\":\n      \"\",\n    \"edit-image-dialog/title\": \"\",\n    \"edit-image-dialog/image-url\": \" URL\",\n    \"edit-image-dialog/image-title\": \"\",\n    \"edit-image-dialog/image-alt-text\": \"\",\n    \"language-selector-dialog/subtitle\": \"\",\n\n    \"react-ios-pwa-prompt/copy-title\": \"\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \",\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1) \",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) \",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \" GitHubGitLabGitea   README.md \",\n    \"publish-notebook/disclaimer-2\":\n      \" README.md  front-matter :\",\n\n    // git\n    \"git/status/ignored\": \"\",\n    \"git/status/unmodified\": \"\",\n    \"git/status/*modified\": \"*\",\n    \"git/status/*deleted\": \"*\",\n    \"git/status/*added\": \"*\",\n    \"git/status/absent\": \"\",\n    \"git/status/modified\": \"\",\n    \"git/status/deleted\": \"\",\n    \"git/status/added\": \"\",\n    \"git/status/*unmodified\": \"*\",\n    \"git/status/*absent\": \"*\",\n    \"git/status/*undeleted\": \"*\",\n  },\n};\n","export const jaJP = {\n  translation: {\n    \"title/Crossnote\": \"\",\n    \"search/notes\": \"\",\n    \"search/notebooks\": \"\",\n    \"search/attachments\": \"\",\n\n    // Account\n    \"account/Anonymous\": \"\",\n    \"account/anonymous\": \"\",\n\n    // General\n    \"general/go-back\": \"\",\n    \"general/sending\": \"\",\n    \"general/send\": \"\",\n    \"general/cancel\": \"\",\n    \"general/add\": \"\",\n    \"general/adding\": \"\",\n    \"general/backed-up-at\": \"\",\n    \"general/created-at\": \"\",\n    \"general/modified-at\": \"\",\n    \"general/interacted-at\": \"\",\n    \"general/date-created\": \"\",\n    \"general/date-modified\": \"\",\n    \"general/date-interacted\": \"\",\n    \"general/title\": \"\",\n    \"general/saved-at\": \"\",\n    \"general/loading\": \" ...\",\n    \"general/loading-notifications\": \" ...\",\n    \"general/failed-to-set\": \"\",\n    \"general/update\": \"\",\n    \"general/updated\": \"\",\n    \"general/updating\": \"\",\n    \"general/close\": \"\",\n    \"general/Note\": \"\",\n    \"general/notes\": \"\",\n    \"general/Settings\": \"\",\n    \"general/Collaborators\": \"\",\n    \"general/collaborators\": \"\",\n    \"general/Backups\": \"\",\n    \"general/backups\": \"\",\n    \"general/Discussion\": \"\",\n    \"general/discussion\": \"\",\n    \"general/Notifications\": \"\",\n    \"general/Username\": \"\",\n    \"general/Email\": \"E\",\n    \"general/Password\": \"\",\n    \"general/confirm-password\": \"\",\n    \"general/Continue\": \"\",\n    \"general/enter-username\": \"\",\n    \"general/vickymd\": \"\",\n    \"general/tags\": \"\",\n    \"general/add-a-tag\": \"\",\n    \"general/private\": \"\",\n    \"general/public\": \"\",\n    \"general/friends-only\": \"\",\n    \"general/anonymous\": \"\",\n    \"general/onymous\": \"\",\n    \"general/Tag\": \"\",\n    \"general/no-tags\": \"\",\n    \"general/Directory\": \"\",\n    \"general/Untitled\": \"\",\n    \"general/untitled\": \"\",\n    \"general/Unknown\": \"\",\n    \"general/unknown\": \"\",\n    \"general/Agree\": \"\",\n    \"general/Disagree\": \"\",\n    \"general/Print\": \"\",\n    \"general/Share\": \"\",\n    \"Editor\": \"\",\n    \"EDITOR\": \"\",\n    \"Viewer\": \"\",\n    \"VIEWER\": \"\",\n    \"Admin\": \"\",\n    \"ADMIN\": \"\",\n    \"ARCHIVED\": \"\",\n    \"ATTACHED NOTES\": \"\",\n    \"DELETED\": \"\",\n    \"PINNED\": \"\",\n    \"OTHERS\": \"\",\n    \"PUBLIC NOTES\": \"\",\n    \"FOLLOWINGS' NOTES\": \"\",\n    \"SHARED WITH ME\": \"\",\n    \"BOOKMARKS\": \"\",\n    \"MY TAGS\": \"\",\n    \"general/enter-fullscreen-mode\": \"\",\n    \"general/enter-presentation-mode\": \"\",\n    \"general/math-preview\": \"\",\n    \"general/this-note-is-empty\": \"\",\n    \"general/this-notebook-is-empty\": \"\",\n    \"general/nothing-here\": \"\",\n    \"general/no-notes-found\": \"\",\n    \"general/no-more-attachments-found\": \"\",\n    \"general/no-more-notebooks-found\": \"\",\n    \"general/no-notifications-found\": \"\",\n    \"general/clear-all\": \"\",\n    \"general/Save\": \"\",\n    \"general/Delete\": \"\",\n    \"general/Follow\": \"\",\n    \"general/Following\": \"\",\n    \"general/Unfollow\": \"\",\n    \"general/my-notes\": \"\",\n    \"general/public-notes\": \"\",\n    \"general/followings-notes\": \"\",\n    \"general/shared-with-me\": \"\",\n    \"general/Bookmarks\": \"\",\n    \"general/Archive\": \"\",\n    \"general/Trash\": \"\",\n    \"general/new-note\": \"\",\n    \"general/new-attachment\": \"\",\n    \"general/profile-updated\": \"\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"\",\n    \"general/Video\": \"\",\n    \"general/source-url\": \"\",\n    \"general/sign-in\": \"\",\n    \"general/sign-up\": \"\",\n    \"general/Link\": \"\",\n    \"general/Upload\": \"\",\n    \"general/Uploading\": \"\",\n    \"general/clicks\": \"\",\n    \"general/Processing\": \"...\",\n    \"general/please-wait\": \"...\",\n    \"general/please-sign-in-first\": \"\",\n    \"general/Languages\": \"\",\n    \"general/track\": \"\",\n    \"general/Publish\": \"\",\n    \"general/Unpublish\": \"\",\n    \"general/Open\": \"\",\n    \"general/Download\": \"\",\n    \"general/Configure\": \"\",\n    \"general/Update\": \"\",\n    \"general/empty\": \"\",\n    \"general/Explore\": \"\",\n    \"general/Notebooks\": \"\",\n    \"general/add-a-notebook\": \"\",\n    \"general/add-a-note\": \"\",\n    \"general/add-an-attachment\": \"\",\n    \"general/configure-the-notebook\": \"\",\n    \"general/publish-your-notebook\": \"\",\n    \"general/notebook-name\": \"\",\n    \"general/git-repository\": \"git \",\n    \"general/optional\": \"\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"\",\n    \"general/remember-username-and-password\": \"\",\n    \"general/stored-locally\": \"\",\n    \"general/cors-proxy\": \"CORS \",\n    \"general/why-cors-proxy\": \" CORS ?\",\n    \"general/today\": \"\",\n    \"general/todo\": \"Todo\",\n    \"general/graph-view\": \"\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"\",\n    \"general/untagged\": \"\",\n    \"general/encrypt\": \"\",\n    \"general/encrypted\": \"\",\n    \"general/decrypt\": \"\",\n    \"general/conflicted\": \"\",\n    \"general/attachments\": \"\",\n    \"general/Pin\": \"\",\n    \"general/Encryption\": \"\",\n    \"general/Fullscreen\": \"\",\n    \"general/change-file-path\": \" \",\n    \"general/create-a-copy\": \"\",\n    \"general/restore-checkout\": \" (git checkout)\",\n    \"general/download-pull\": \" (git pull)\",\n    \"general/upload-push\": \" (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"\",\n    \"general/encrypt-this-note-with-password\":\n      \"\",\n    \"general/disable-encryption\": \"\",\n    \"general/decrypt-this-note\": \"\",\n    \"general/upload-the-profile\": \"\",\n    \"general/commit-message\": \" \",\n    \"general/upload-notebook\": \"\",\n    \"general/Comments\": \"\",\n    \"general/Source\": \"\",\n    \"general/Description\": \"\",\n    \"general/Edit\": \"\",\n    \"general/Rename\": \"\",\n    \"general/rename-directory\": \"\",\n    \"general/delete-directory\": \"\",\n    \"general/rename-tag\": \"\",\n    \"general/delete-tag\": \"\",\n    \"general/notebook-updates-found\": \"\",\n    \"general/update-the-notebook\": \"\",\n    \"general/check-notebook-updates-periodically\":\n      \"\",\n    \"general/minutes\": \"\",\n    \"general/hard-reset\": \"\",\n    \"general/Default\": \"\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"\",\n    \"general/Asc\": \"\",\n    \"general/pin-the-note\": \"\",\n    \"general/unpin-the-note\": \"\",\n    \"general/add-to-quick-access\": \" \",\n    \"general/remove-from-quick-access\": \" \",\n\n    // Error\n    \"error/authentication-failed\": \"\",\n    \"error/failed-to-upload-notebook\":\n      \"\",\n    \"error/failed-to-download-notebook\":\n      \" ...\",\n    \"error/notebook-already-exists\": \"\",\n    \"error/invalid-git-url-prefix\": \" git URL \",\n    \"error/please-resolve-conflicts\": \"\",\n    \"error/failed-to-disable-encryption\": \"\",\n    \"error/decryption-failed\": \"\",\n    \"error/failed-to-change-file-path\": \" \",\n    \"error/failed-to-create-widget\": \"\",\n    \"error/failed-to-load-widget\": \"\",\n    \"error/failed-to-update-the-notebook\": \"\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"\",\n    \"error/failed-to-publish-notebook\": \"\",\n\n    // Success\n    \"success/notebook-uploaded\": \"\",\n    \"success/notebook-downloaded\": \"\",\n\n    // Info\n    \"info/downloading-notebook\": \"\",\n\n    // Note\n    \"note/unarchive-note\": \"\",\n    \"note/archive-note\": \"\",\n    \"note/delete-forever\": \"\",\n    \"note/delete-note\": \"\",\n    \"note/restore-note\": \"\",\n    \"note/report-note\": \"\",\n    \"note/open-in-crossnote-website\": \"\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"\",\n    \"note-tags/suggestion-sent\": \"\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"\",\n\n    // Notifications\n    \"notifications/refresh\": \"\",\n    \"notifications/new-version-available\":\n      \"!\",\n\n    // Settings\n    \"settings/about-this-project\": \"\",\n    \"settings/issues-and-feature-requests\":\n      \"\",\n    \"settings/uploading-cover-image\": \"\",\n    \"settings/upload-image-failure\": \"\",\n    \"settings/Cover\": \"\",\n    \"settings/enter-cover-image-url\": \"\",\n    \"settings/upload-image\": \"\",\n    \"settings/Avatar\": \"\",\n    \"settings/enter-avatar-image-url\": \"\",\n    \"settings/Name\": \"\",\n    \"settings/enter-name\":\n      \"\",\n    \"settings/editor-cursor-color\": \"\",\n    \"settings/hello\": \"\",\n    \"settings/world\": \"\",\n    \"settings/linked-with-github-account\":\n      \"GitHub \",\n    \"settings/link-with-github-account\": \"GitHub \",\n    \"settings/log-out\": \"\",\n    \"settings/author-name\": \"\",\n    \"settings/author-email\": \"\",\n    \"settings/theme\": \"\",\n    \"settings/created-cloud-widgets-count\": \"\",\n    \"settings/key-map\": \"\",\n\n    // Preview\n    \"preview/attach-a-note\": \"\",\n    \"preview/crossnote-untitled\": \" - \",\n    \"preview/edit-this-note\": \"\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"\",\n    \"profile-card/followers\": \"\",\n    \"profile-card/Followings\": \"\",\n    \"profile-card/Followers\": \"\",\n    \"profile-card/notes\": \"\",\n    \"profile-card/follow-user-failure\": \"\",\n    \"profile-card/followed-user\": \"\",\n    \"profile-card/unfollow-user-failure\":\n      \"\",\n    \"profile-card/unfollowed-user\": \"\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"\",\n    \"interaction-panel/add-comment\": \"\",\n    \"interaction-panel/add-reaction\": \"\",\n\n    // Editor\n    \"editor/loading-your-note\": \"...\",\n    \"editor/sync-failure\":\n      \"... Web\",\n    \"editor/saving\": \"...\",\n    \"editor/save-failure\": \"\",\n    \"editor/saved\": \"\",\n    \"editor/update-note-failure\": \"\",\n    \"editor/placeholder\": \"#     / \",\n    \"editor/ln\": \"\",\n    \"editor/col\": \"\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"\",\n    \"editor/note-control/note-visibility-hint\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"\",\n    \"editor/note-control/enter-parent-note-id\":\n      \"ID\",\n    \"editor/note-control/attach-note-failure\": \"\",\n    \"editor/note-control/unattach-note-failure\":\n      \"\",\n    \"editor/collaborator-hint\": \" - \",\n    \"editor/shareable-link-hint\":\n      \"/\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"\",\n    \"editor/backups-control/delete-this-backup\": \"\",\n    \"editor/backups-control/create-backup-failure\":\n      \"\",\n    \"editor/backups-control/backup-created\": \"\",\n    \"editor/backups-control/delete-backup-failure\":\n      \"\",\n    \"editor/backups-control/backup-deleted\": \"\",\n    \"editor/backups-control/cloud-version\": \"\",\n    \"editor/backups-control/backup-name\": \"\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"\",\n    \"editor/collaborators-control/collaborator-removed\":\n      \"\",\n    \"editor/collaborators-control/collaborator-added\":\n      \"\",\n    \"editor/collaborators-control/can-view\": \"\",\n    \"editor/collaborators-control/can-edit\": \"\",\n    \"editor/collaborators-control/can-administrate\": \"\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"\",\n    \"editor/toolbar/upload-local-images\": \"\",\n    \"editor/toolbar/capture-webpage\": \"\",\n    \"editor/toolbar/insert-clock\": \"\",\n    \"editor/toolbar/insert-emoji\": \"\",\n    \"editor/toolbar/insert-media\": \"\",\n    \"editor/toolbar/insert-audio\": \"\",\n    \"editor/toolbar/netease-music\": \"Netease Cloud Music\",\n    \"editor/toolbar/insert-video\": \"\",\n    \"editor/toolbar/insert-youtube\": \"Youtube \",\n    \"editor/toolbar/insert-bilibili\": \"Bilibili \",\n    \"editor/toolbar/insert-slide\": \"\",\n    \"editor/toolbar/insert-ocr\": \"OCR\",\n    \"editor/toolbar/insert-kanban\": \"\",\n    \"editor/toolbar/insert-abc-notation\": \"ABC notation \",\n    \"editor/toolbar/insert-header-1\": \"1\",\n    \"editor/toolbar/insert-header-2\": \"2\",\n    \"editor/toolbar/insert-header-3\": \"3\",\n    \"editor/toolbar/insert-header-4\": \"4\",\n    \"editor/toolbar/insert-header-5\": \"5\",\n    \"editor/toolbar/insert-header-6\": \"6\",\n    \"editor/toolbar/bold\": \"\",\n    \"editor/toolbar/italic\": \"\",\n    \"editor/toolbar/strikethrough\": \" \",\n    \"editor/toolbar/insert-inline-code\": \"\",\n    \"editor/toolbar/insert-blockquote\": \"\",\n    \"editor/toolbar/insert-unordered-list\": \"\",\n    \"editor/toolbar/insert-ordered-list\": \"\",\n    \"editor/toolbar/insert-link\": \"\",\n    \"editor/toolbar/insert-table\": \"\",\n    \"editor/toolbar/insert-comment\":\n      \"\",\n    \"editor/toolbar/insert-github-gist\": \"GitHub Gist \",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"\",\n    \"editor/note-control/tag-deleted\": \"\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"\",\n    \"editor/note-control/note-visibility-updated\":\n      \"\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"\",\n    \"editor/note-control/author-visibility-updated\":\n      \"\",\n    \"editor/note-control/editor-mode\": \"\",\n    \"editor/note-control/source-code\": \"\",\n    \"editor/note-control/preview\": \"\",\n    \"editor/note-control/split-view\": \"\",\n    \"editor/note-control/pin-preview\": \"\",\n    \"editor/note-control/display-modification-records\": \"\",\n    \"editor/note-control/note-visibility\": \"\",\n    \"editor/note-control/author-visibility\": \"\",\n    \"editor/note-control/shareable-link\": \"\",\n    \"editor/note-control/copy-to-clipboard\": \"\",\n    \"editor/note-control/link-to-preview\": \"\",\n    \"editor/note-control/link-to-editor\": \"\",\n    \"editor/note-control/attach-to-note\": \"\",\n    \"editor/note-control/source-added\": \"URL \",\n    \"editor/note-control/source-deleted\": \"URL \",\n    \"editor/note-control/invalid-note-source\": \" URL\",\n    \"editor/note-control/add-note-source\": \" URL \",\n    \"editor/note-control/note-source-hint\":\n      \" URL \",\n    \"editor/note-control/enter-note-source\": \"URL \",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"\",\n    \"avatar-panel/this-note-is-public\": \"\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"\",\n    \"avatar-panel/you-are-anonymous\": \"\",\n\n    // FileExporter\n    \"file-exporter/name\": \"\",\n    \"file-exporter/orientation\": \"\",\n    \"file-exporter/portrait\": \"\",\n    \"file-exporter/landscape\": \"\",\n    \"file-exporter/paper-size\": \"\",\n    \"file-exporter/unit\": \"\",\n    \"file-exporter/margin-top\": \"\",\n    \"file-exporter/margin-bottom\": \"\",\n    \"file-exporter/margin-left\": \"\",\n    \"file-exporter/margin-right\": \"\",\n\n    // Utils\n    \"utils/uploading-image\": \"...\",\n    \"utils/upload-image-failure\": \"\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"\",\n    // somone's\n    \"notification/'s-note\": \" \",\n    // * NoteReactionNotification\n    \"notification/added\": \" \",\n    // some reaction\n    \"notification/to-your-note\": \"\",\n    \"notification/add-you-as\": \"\",\n    // some role\n    \"notification/of-note\": \"\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"\",\n    \"notification/suggested-to-add-tag\": \"\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"\",\n    \"notification/view-more-notifications\": \"\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \" ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"GitHub \",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"GitHub \",\n    \"github-oauth/first-time-sign-in\":\n      \"GitHub \",\n    \"github-oauth/first-time-sign-in-small\": \"\",\n\n    // Widgets\n    \"widget/autoplay\": \"\",\n    \"widget/controls\": \"\",\n    \"widget/loop\": \"\",\n    \"widget/muted\": \"\",\n    \"widget/creating-widget\": \"\",\n    \"widget/loading-widget\": \"\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"sm.ms\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"https://www.bilibili.com/video/av79126732\",\n    \"widget/crossnote.youtube/error_message\":\n      \"https://www.youtube.com/watch?v=MmB9b5njVbA\",\n    \"widget/crossnote.auth/welcome\": \"\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \" \",\n    \"widget/crossnote.auth/forgot_password\": \" \",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \" \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"\",\n    \"widget/crossnote.auth/password_reset\": \"\",\n    \"widget/crossnote.auth/password-mismatch\": \"\",\n    \"widget/crossnote.auth/hello\": \"\",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"\",\n    \"widget/crossnote.auth/get-code\": \"\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"GitHub \",\n    \"widget/crossnote.auth/already-have-an-account\":\n      \"\",\n    \"widget/crossnote.auth/reset-password\": \"\",\n    \"widget/crossnote.auth/Or\": \"\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili \",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.image/image-helper\": \"\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"NetEase Cloud Music SongID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.video/poster-url\": \"\",\n    \"widget/crossnote.video/poster-url-placeholder\":\n      \"\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube \",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"YoutubeEnter\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"\",\n    \"widget/crossnote.ocr/start-ocr\": \"\",\n    \"widget/crossnote.ocr/extra-settings\": \"\",\n    \"widget/crossnote.ocr/grayscale\": \"\",\n    \"widget/crossnote.kanban/add-column\": \"\",\n    \"widget/crossnote.github_gist/title\": \"GitHub Gist \",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"GitHub Gist URL \",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"\",\n    \"widget/crossnote.comment/edit-this-message\": \"\",\n    \"widget/crossnote.comment/modified-comment\": \"\",\n    \"widget/crossnote.comment/post-comment-failure\":\n      \"\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"\",\n    \"widget/crossnote.comment/subscribe-info\": \"\",\n    \"widget/crossnote.comment/view-more-comments\": \"\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"?\",\n    \"delete-note-dialog/subtitle\": \"\",\n    \"delete-directory-dialog/title\": \"\",\n    \"delete-directory-dialog/subtitle\":\n      \"\",\n    \"delete-tag-dialog/title\": \"\",\n    \"delete-tag-dialog/subtitle\":\n      \"\",\n    \"add-notebook-dialog/disclaimer\":\n      \"\",\n    \"edit-image-dialog/title\": \"\",\n    \"edit-image-dialog/image-url\": \" URL\",\n    \"edit-image-dialog/image-title\": \"\",\n    \"edit-image-dialog/image-alt-text\": \"\",\n    \"language-selector-dialog/subtitle\": \"\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) [] \",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) \",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"GitHubGitLabGitea README.md  \",\n    \"publish-notebook/disclaimer-2\":\n      \"  front-matter  README.md \",\n\n    // git\n    \"git/status/ignored\": \"\",\n    \"git/status/unmodified\": \"\",\n    \"git/status/*modified\": \"*\",\n    \"git/status/*deleted\": \"*\",\n    \"git/status/*added\": \"*\",\n    \"git/status/absent\": \"\",\n    \"git/status/modified\": \"\",\n    \"git/status/deleted\": \"\",\n    \"git/status/added\": \"\",\n    \"git/status/*unmodified\": \"*\",\n    \"git/status/*absent\": \"*\",\n    \"git/status/*undeleted\": \"*\",\n  },\n};\n","import { ThemeOptions, Theme, createMuiTheme } from \"@material-ui/core\";\nimport { ThemeName } from \"vickymd/theme\";\n\ninterface CrossnoteThemeProps {\n  name: ThemeName;\n  muiThemeOptions: ThemeOptions;\n}\n\nexport class CrossnoteTheme {\n  public name: ThemeName;\n  public muiTheme: Theme;\n  constructor({ name, muiThemeOptions }: CrossnoteThemeProps) {\n    this.name = name;\n    this.muiTheme = createMuiTheme(muiThemeOptions);\n  }\n}\n","import { CrossnoteTheme } from \"./theme\";\nimport { blue, orange } from \"@material-ui/core/colors\";\n\nexport const LightTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"light\",\n  muiThemeOptions: {\n    palette: {\n      primary: blue,\n      secondary: orange,\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { lighten } from \"@material-ui/core\";\n\nexport const DarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"dark\",\n  muiThemeOptions: {\n    palette: {\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#1e1e1e\", 0.05),\n        default: \"#1e1e1e\",\n      },\n      primary: {\n        light: \"#7986cb\",\n        main: \"rgba(144, 19, 254, 1)\",\n        dark: \"#303f9f\",\n        contrastText: \"#fff\",\n      },\n      secondary: {\n        light: \"#ff4081\",\n        main: \"#f50057\",\n        dark: \"#c51162\",\n        contrastText: \"#fff\",\n      },\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      divider: \"#222\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n        disabled: \"rgba(121, 7, 7, 0.38)\",\n        hint: \"rgba(0, 0, 0, 0.38)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n        disabled: \"#353535\",\n      },\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { lighten } from \"@material-ui/core\";\nimport { blueGrey, cyan } from \"@material-ui/core/colors\";\n\nexport const OneDarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"one-dark\",\n  muiThemeOptions: {\n    palette: {\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#282c34\", 0.05),\n        default: \"#282c34\",\n      },\n      primary: cyan,\n      secondary: blueGrey,\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      divider: \"#222\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n        disabled: \"rgba(121, 7, 7, 0.38)\",\n        hint: \"rgba(0, 0, 0, 0.38)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n        disabled: \"#353535\",\n      },\n    },\n  },\n});\n","import { CrossnoteTheme } from \"./theme\";\nimport { orange, amber } from \"@material-ui/core/colors\";\nimport { lighten } from \"@material-ui/core\";\n\nexport const SolarizedLight: CrossnoteTheme = new CrossnoteTheme({\n  name: \"solarized-light\",\n  muiThemeOptions: {\n    palette: {\n      primary: orange,\n      secondary: amber,\n      background: {\n        paper: lighten(\"#fdf6e3\", 0.05),\n        default: \"#fdf6e3\",\n      },\n    },\n  },\n});\n","import { CloudContainer } from \"./cloud\";\nimport { SettingsContainer } from \"./settings\";\nimport { CrossnoteContainer } from \"./crossnote\";\n\ninterface GlobalContainers {\n  cloudContainer: ReturnType<typeof CloudContainer.useContainer>;\n  settingsContainer: ReturnType<typeof SettingsContainer.useContainer>;\n  crossnoteContainer: ReturnType<typeof CrossnoteContainer.useContainer>;\n}\n\nexport const globalContainers: GlobalContainers = {\n  cloudContainer: null,\n  settingsContainer: null,\n  crossnoteContainer: null,\n};\n","// 0xGG Team\n// Distributed under AGPL3\n//\n// DESCRIPTION: This widget displays time related information\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { WidgetArgs, WidgetCreator } from \"vickymd/widget\";\nimport { ErrorWidget } from \"vickymd/widget/error/error\";\nimport { useTheme, ThemeProvider } from \"@material-ui/core\";\nimport { themeManager } from \"../../../themes/manager\";\nimport { globalContainers } from \"../../../containers/global\";\n\nfunction Timer(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const theme = useTheme();\n\n  return (\n    <div\n      style={{\n        cursor: \"default\",\n        padding: \"4px 12px\",\n        backgroundColor:\n          attributes[\"backgroundColor\"] ||\n          theme.palette.secondary.main ||\n          \"rgb(250, 145, 1)\",\n        color:\n          attributes[\"color\"] || theme.palette.secondary.contrastText || \"#fff\",\n        borderRadius: \"16px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        width: \"375px\",\n        maxWidth: \"100%\",\n        boxShadow: \"0 1px 3px 1px #aaa\",\n        marginBottom: props.isPreview ? \"16px\" : \"0\",\n      }}\n    >\n      <div className={\"widget-timer-date\"}>\n        {\" \" + new Date(attributes[\"date\"]).toLocaleString()}\n      </div>\n      <div className={\"widget-timer-duration\"}>\n        {attributes[\"duration\"] ? \" \" + attributes[\"duration\"] : \"\"}\n      </div>\n    </div>\n  );\n}\n\nexport const TimerWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  if (!args.attributes[\"date\"]) {\n    return ErrorWidget({\n      ...args,\n      ...{\n        attributes: {\n          message: \"Field 'date' is missing\",\n        },\n      },\n    });\n  }\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <Timer attributes={args.attributes} isPreview={args.isPreview}></Timer>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","/**\n * Upload image to sm.ms\n * @param filePath\n */\nexport async function smmsUploadImages(files: File[] = []): Promise<string[]> {\n  const promises = [];\n  for (let i = 0; i < files.length; i++) {\n    const file = files[i];\n    if (!file.type.match(\"image.*\")) {\n      continue;\n    }\n    promises.push(\n      new Promise<string>((resolve, reject) => {\n        const headers = {\n          // \"Content-Type\": \"multipart/form-data\" // <= Adding this will cause problem.\n        };\n        const data = new FormData();\n        data.append(\"smfile\", file);\n        data.append(\"format\", \"json\");\n        fetch(\"https://sm.ms/api/v2/upload\", {\n          method: \"POST\",\n          mode: \"cors\",\n          headers,\n          referrer: \"\",\n          body: data,\n        })\n          .then((response) => response.json())\n          .then((json) => {\n            if (json[\"success\"]) {\n              return resolve(json[\"data\"][\"url\"]);\n            } else if (\n              json[\"code\"] === \"image_repeated\" ||\n              (json[\"code\"] === \"exception\" &&\n                json[\"message\"].match(/this image exists at:/))\n            ) {\n              return resolve(json[\"message\"].match(/https:\\/\\/.+$/)[0]);\n            } else {\n              return reject(json[\"message\"]);\n            }\n          })\n          .catch((error) => {\n            return reject(\"Failed to connect to sm.ms host\");\n          });\n      }),\n    );\n  }\n  return await Promise.all(promises);\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { smmsUploadImages } from \"../../../utilities/image_uploader\";\nimport Noty from \"noty\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction ImageWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [imageUploaderElement, setImageUploaderElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [uploadingImages, setUploadingImages] = useState<boolean>(false);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageUploaderElement || uploadingImages) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: t(\"utils/uploading-image\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setUploadingImages(true);\n      smmsUploadImages(files)\n        .then((urls) => {\n          let markdown = ``;\n          urls.forEach((url) => {\n            markdown = markdown + `![](${url})  \\n`;\n          });\n          props.replaceSelf(markdown);\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          setUploadingImages(false);\n          new Noty({\n            type: \"error\",\n            text: t(\"utils/upload-image-failure\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n        });\n    };\n    imageUploaderElement.click();\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.image/image-helper\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      {!uploadingImages && (\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {\"URL\"}\n          </Typography>\n          <Input\n            margin={\"dense\"}\n            placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n            value={url}\n            onChange={(event) => {\n              setURL(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                props.replaceSelf(`![](${url})\\n`);\n              }\n            }}\n            fullWidth={true}\n          ></Input>\n        </Box>\n      )}\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Upload\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            uploadingImages ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {uploadingImages\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"caption\"}>\n          {t(\"widget/crossnote.image/thanks_sm_ms\")}\n        </Typography>\n      </Box>\n      <input\n        type=\"file\"\n        multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageUploaderElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const ImageWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <ImageWidget {...args}></ImageWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  fade,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction AudioWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <audio\n          autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n          controls={attributes[\"controls\"]}\n          loop={attributes[\"loop\"]}\n          muted={attributes[\"muted\"]}\n          style={attributes[\"style\"]}\n        >\n          {t(\"widget/crossnote.audio/audio_element_fail\")}\n          <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n        </audio>\n        {!props.isPreview && !attributes[\"controls\"] && \"\"}\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Audio\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.audio/source-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const AudioWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <AudioWidget {...args}></AudioWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n  }),\n);\n\nfunction VideoWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n  const [poster, setPoster] = useState<string>(attributes[\"poster\"] || \"\");\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <video\n            className={clsx(classes.video)}\n            autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n            controls={attributes[\"controls\"]}\n            loop={attributes[\"loop\"]}\n            muted={attributes[\"muted\"]}\n            style={attributes[\"style\"]}\n            poster={attributes[\"poster\"]}\n          >\n            {t(\"widget/crossnote.video/video_element_fail\")}\n            <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n          </video>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Video\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/video-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                  poster,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.video/poster-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/poster-url-placeholder\")}\n          value={poster}\n          onChange={(event) => {\n            setPoster(event.target.value);\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const VideoWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <VideoWidget {...args}></VideoWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction BilibiliWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"aid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?aid=${attributes[\"aid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n  if (attributes[\"bvid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?bvid=BV${attributes[\"bvid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.bilibili/Bilibili\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.bilibili/bilibili-video-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.bilibili/url-placeholder\")}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\/av(\\d+)/)) {\n                const aid = url.match(/\\/av(\\d+)/)[1];\n                const attrs = {\n                  aid,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/BV(.+?)($|\\/|\\?)/)) {\n                const bvid = url.match(/\\/BV(.+?)($|\\/|\\?)/)[1];\n                const attrs = {\n                  bvid,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.bilibili/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const BilibiliWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <BilibiliWidget {...args}></BilibiliWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction YoutubeWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"videoID\"]) {\n    if (!props.isPreview) {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <img\n            alt={\"Youtube: \" + attributes[\"videoID\"]}\n            src={`https://img.youtube.com/vi/${attributes[\"videoID\"]}/0.jpg`}\n            onClick={() => {\n              window.open(\n                `https://www.youtube.com/watch?v=${attributes[\"videoID\"]}`,\n                \"_blank\",\n              );\n            }}\n            style={{\n              cursor: \"pointer\",\n              width: \"100%\",\n            }}\n          ></img>\n        </span>\n      );\n    } else {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <Box className={clsx(classes.videoWrapper)}>\n            <iframe\n              title={\"youtube_\" + attributes[\"videoID\"]}\n              className={clsx(classes.video)}\n              src={`https://www.youtube.com/embed/${attributes[\"videoID\"]}`}\n              scrolling={\"no\"}\n              frameBorder={\"no\"}\n              allowFullScreen={true}\n            ></iframe>\n          </Box>\n        </span>\n      );\n    }\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"Youtube\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"Youtube video URL\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\n            \"widget/crossnote.youtube/youtube-video-url-placeholder\",\n          )}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\?v=(.+?)(&|$)/)) {\n                const videoID = url.match(/\\?v=(.+?)(&|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)) {\n                const videoID = url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.youtube/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const YoutubeWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <YoutubeWidget {...args}></YoutubeWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  Input,\n  Tooltip,\n  Switch,\n  FormControlLabel,\n  ListItem,\n  ListItemText,\n  List,\n  ListItemSecondaryAction,\n  FormGroup,\n  Checkbox,\n  ButtonGroup,\n  Button,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { createWorker } from \"tesseract.js\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    canvasWrapper: {\n      marginTop: theme.spacing(2),\n      // height: 0,\n      // paddingTop: \"56.25%\" // 16:9\n    },\n    canvas: {\n      maxWidth: \"100%\",\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\ninterface OCRProgress {\n  status: string;\n  progress: number;\n  workerId?: string;\n}\n\nfunction getInitialLanguages() {\n  try {\n    return JSON.parse(\n      localStorage.getItem(\"widget/crossnote.ocr/languages\") || '[\"eng\"]',\n    );\n  } catch (error) {\n    return [\"eng\"];\n  }\n}\n\nfunction OCRWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [canvas, setCanvas] = useState<HTMLCanvasElement>(null);\n  // https://github.com/tesseract-ocr/tesseract/wiki/Data-Files#data-files-for-version-400-november-29-2016\n  const [link, setLink] = useState<string>(\"\");\n  const [imageDataURL, setImageDataURL] = useState<string>(\"\");\n  const [ocrDataURL, setOCRDataURL] = useState<string>(\"\");\n  const [imageDropAreaElement, setImageDropAreaElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n  const [ocrProgresses, setOCRProgresses] = useState<OCRProgress[]>([]);\n  const [selectedLanguages, setSelectedLanguages] = useState<string[]>(\n    getInitialLanguages(),\n  );\n  const [grayscaleChecked, setGrayscaleChecked] = useState<boolean>(\n    !!localStorage.getItem(\"widget/crossnote.ocr/grayscale\") || true,\n  );\n\n  useEffect(() => {\n    if (canvas && imageDataURL) {\n      const imageObject = new Image();\n      const context = canvas.getContext(\"2d\");\n      imageObject.onload = function () {\n        canvas.width = imageObject.width;\n        canvas.height = imageObject.height;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        if (grayscaleChecked) {\n          context.fillStyle = \"#FFF\";\n          context.fillRect(0, 0, canvas.width, canvas.height);\n          context.globalCompositeOperation = \"luminosity\";\n        }\n        context.drawImage(imageObject, 0, 0);\n        setOCRDataURL(canvas.toDataURL());\n      };\n      imageObject.onerror = (error) => {\n        throw error;\n      };\n      imageObject.setAttribute(\"crossOrigin\", \"anonymous\");\n      imageObject.src = imageDataURL;\n    }\n  }, [canvas, imageDataURL, grayscaleChecked]);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageDropAreaElement || isProcessing) return;\n    imageDropAreaElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      if (files.length) {\n        try {\n          const file = files[0] as File;\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => {\n            setImageDataURL(reader.result as string);\n          };\n          reader.onerror = (error) => {\n            throw error;\n          };\n        } catch (error) {}\n      }\n    };\n    imageDropAreaElement.click();\n  }\n\n  function startOCRFromLink() {\n    try {\n      setImageDataURL(link);\n    } catch (error) {}\n  }\n\n  function ocr(input: File | string | HTMLCanvasElement) {\n    const worker = createWorker({\n      logger: (m: OCRProgress) => {\n        setOCRProgresses((ocrProgresses) => {\n          if (\n            ocrProgresses.length &&\n            ocrProgresses[ocrProgresses.length - 1].status === m.status\n          ) {\n            return [...ocrProgresses.slice(0, ocrProgresses.length - 1), m];\n          } else {\n            return [...ocrProgresses, m];\n          }\n        });\n      },\n    });\n\n    (async () => {\n      setIsProcessing(true);\n      let languagesArr = selectedLanguages;\n      if (languagesArr.length === 0) {\n        languagesArr = [\"eng\"];\n      }\n\n      await worker.load();\n      await worker.loadLanguage(languagesArr.join(\"+\"));\n      await worker.initialize(languagesArr.join(\"+\"));\n      const {\n        data: { text },\n      } = await worker.recognize(input);\n      props.replaceSelf(\"\\n\" + text);\n      await worker.terminate();\n      setIsProcessing(false);\n    })();\n  }\n\n  function toggleLanguage(lang: string) {\n    setSelectedLanguages((selectedLanguages) => {\n      const offset = selectedLanguages.indexOf(lang);\n      if (offset >= 0) {\n        selectedLanguages.splice(offset, 1);\n        selectedLanguages = [...selectedLanguages];\n      } else {\n        selectedLanguages = [...selectedLanguages, lang];\n      }\n      localStorage.setItem(\n        \"widget/crossnote.ocr/languages\",\n        JSON.stringify(selectedLanguages),\n      );\n      return selectedLanguages;\n    });\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  if (isProcessing) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Typography variant={\"h5\"}>{t(\"general/Processing\")}</Typography>\n        {/*<Typography variant={\"body1\"}>{t(\"general/please-wait\")}</Typography>*/}\n        <List>\n          {ocrProgresses.length > 0 && (\n            <ListItem>\n              <ListItemText>\n                {t(\n                  \"tesseract/\" + ocrProgresses[ocrProgresses.length - 1].status,\n                )}\n              </ListItemText>\n              <ListItemSecondaryAction>\n                {Math.floor(\n                  ocrProgresses[ocrProgresses.length - 1].progress * 100,\n                ).toString() + \"%\"}\n              </ListItemSecondaryAction>\n            </ListItem>\n          )}\n        </List>\n      </Card>\n    );\n  }\n\n  if (imageDataURL) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/recognize-text-in-languages\")}\n          </Typography>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"eng\") >= 0}\n                  onChange={() => toggleLanguage(\"eng\")}\n                  value=\"eng\"\n                />\n              }\n              label=\"English\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_sim\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_sim\")}\n                  value=\"chi_sim\"\n                />\n              }\n              label=\"\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_tra\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_tra\")}\n                  value=\"chi_tra\"\n                />\n              }\n              label=\"\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"jpn\") >= 0}\n                  onChange={() => toggleLanguage(\"jpn\")}\n                  value=\"jpn\"\n                />\n              }\n              label=\"\"\n            />\n          </FormGroup>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/extra-settings\")}\n          </Typography>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={grayscaleChecked}\n                onChange={() => {\n                  if (grayscaleChecked) {\n                    localStorage.removeItem(\"widget/crossnote.ocr/grayscale\");\n                  } else {\n                    localStorage.setItem(\n                      \"widget/crossnote.ocr/grayscale\",\n                      \"true\",\n                    );\n                  }\n                  setGrayscaleChecked(!grayscaleChecked);\n                }}\n                color={\"primary\"}\n              ></Switch>\n            }\n            label={t(\"widget/crossnote.ocr/grayscale\")}\n          ></FormControlLabel>\n        </Box>\n        <Box className={clsx(classes.canvasWrapper)}>\n          <canvas\n            className={clsx(classes.canvas)}\n            ref={(element) => setCanvas(element)}\n          ></canvas>\n        </Box>\n        <ButtonGroup>\n          <Button\n            onClick={() => {\n              setImageDataURL(\"\");\n              setOCRDataURL(\"\");\n            }}\n          >\n            {t(\"general/go-back\")}\n          </Button>\n          <Button\n            color={\"primary\"}\n            onClick={() => ocr(ocrDataURL)}\n            disabled={!ocrDataURL}\n          >\n            {t(\"widget/crossnote.ocr/start-ocr\")}\n          </Button>\n        </ButtonGroup>\n      </Card>\n    );\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"widget/crossnote.ocr/ocr\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Link\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n          value={link}\n          onChange={(event) => {\n            setLink(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              startOCRFromLink();\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Typography\n        variant={\"subtitle1\"}\n        style={{ marginTop: \"16px\", textAlign: \"center\" }}\n      >\n        {t(\"widget/crossnote.auth/Or\")}\n      </Typography>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.ocr/local-image\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            isProcessing ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {isProcessing\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <input\n        type=\"file\"\n        // multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageDropAreaElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const OCRWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <OCRWidget {...args}></OCRWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { createHashHistory, createBrowserHistory } from \"history\";\n\n// const hashHistory = createHashHistory();\n// export default hashHistory;\n\nexport const browserHistory = createBrowserHistory();\n","import { printPreview as VickyMDPrintPreview } from \"vickymd/preview\";\nimport * as path from \"path\";\nimport { resolveNoteImageSrc } from \"./image\";\nimport { SelectedSection, SelectedSectionType } from \"../containers/crossnote\";\nimport { globalContainers } from \"../containers/global\";\nimport { browserHistory } from \"./history\";\nimport { Note } from \"../lib/notebook\";\n\nexport function printPreview(\n  previewElement: HTMLElement,\n  bannerElement?: HTMLElement,\n  timeout = 2000,\n) {\n  return VickyMDPrintPreview(\n    previewElement,\n    bannerElement,\n    [\"body\"],\n    `\n  #notes-panel,\n  .editor-bottom-panel,\n  .drawer,\n  .CodeMirror,\n  .editor-textarea,\n  .editor-toolbar,\n  .Pane.vertical.Pane1,\n  .control-panel-wrapper {\n    display: none;\n  }\n`,\n    timeout,\n  );\n}\n\nexport function openURL(url: string = \"\", note: Note) {\n  if (!note || !url) {\n    return;\n  }\n  if (url.match(/https?:\\/\\//)) {\n    if (url.startsWith(window.location.origin)) {\n      browserHistory.push(url.replace(window.location.origin, \"\"));\n    } else {\n      window.open(url, \"_blank\"); // TODO: opener bug, check zhihu\n    }\n  } else if (url.startsWith(\"/\")) {\n    let filePath = path.relative(\n      note.notebookPath,\n      path.resolve(note.notebookPath, url.replace(/^\\//, \"\")),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      globalContainers.crossnoteContainer.getNotebookAtPath(note.notebookPath),\n      decodeURIComponent(filePath),\n    );\n  } else {\n    let filePath = path.relative(\n      note.notebookPath,\n      path.resolve(\n        path.dirname(path.resolve(note.notebookPath, note.filePath)),\n        url,\n      ),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      globalContainers.crossnoteContainer.getNotebookAtPath(note.notebookPath),\n      decodeURIComponent(filePath),\n    );\n  }\n}\n\nexport function postprocessPreview(\n  previewElement: HTMLElement,\n  note: Note,\n  isPresentationCallback?: (isPresentation: boolean) => void,\n) {\n  if (!previewElement) {\n    return;\n  }\n  const handleLinksClickEvent = (preview: HTMLElement) => {\n    // Handle link click event\n    const links = preview.getElementsByTagName(\"A\");\n    for (let i = 0; i < links.length; i++) {\n      const link = links[i] as HTMLAnchorElement;\n      link.onclick = (event) => {\n        event.preventDefault();\n        if (link.hasAttribute(\"data-topic\")) {\n          const tag = link.getAttribute(\"data-topic\");\n          if (tag.length) {\n            /*\n            globalContainers.crossnoteContainer.setSelectedSection({\n              type: SelectedSectionType.Tag,\n              path: tag,\n            });\n            */\n          }\n        } else {\n          openURL(link.getAttribute(\"href\"), note);\n        }\n      };\n    }\n  };\n  const resolveImages = async (preview: HTMLElement) => {\n    const images = preview.getElementsByTagName(\"IMG\");\n    for (let i = 0; i < images.length; i++) {\n      const image = images[i] as HTMLImageElement;\n      const imageSrc = image.getAttribute(\"src\");\n      image.setAttribute(\n        \"src\",\n        await resolveNoteImageSrc(note, decodeURIComponent(imageSrc)),\n      );\n    }\n  };\n\n  if (\n    previewElement.childElementCount &&\n    previewElement.children[0].tagName.toUpperCase() === \"IFRAME\"\n  ) {\n    // presentation\n    previewElement.style.maxWidth = \"100%\";\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    resolveImages(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    if (isPresentationCallback) {\n      isPresentationCallback(true);\n    }\n  } else {\n    // normal\n    // previewElement.style.maxWidth = `${EditorPreviewMaxWidth}px`;\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(previewElement);\n    resolveImages(previewElement);\n    if (isPresentationCallback) {\n      isPresentationCallback(false);\n    }\n  }\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  Box,\n  TextField,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport { useTranslation } from \"react-i18next\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport { Note } from \"../lib/notebook\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  editor: CodeMirrorEditor;\n  marker: TextMarker;\n  imageElement: HTMLImageElement;\n  note: Note;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    imageWrapper: {\n      textAlign: \"center\",\n    },\n    imagePreview: {\n      maxWidth: \"100%\",\n      maxHeight: \"400px\",\n    },\n  }),\n);\n\nexport default function EditImageDialog(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const editor = props.editor;\n  const marker = props.marker;\n  const imageElement = props.imageElement;\n  const [imageSrc, setImageSrc] = useState<string>(\"\");\n  const [imageAlt, setImageAlt] = useState<string>(\"\");\n  const [imageTitle, setImageTitle] = useState<string>(\"\");\n  const [finalImageSrc, setFinalImageSrc] = useState<string>(\"\");\n\n  const deleteImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    editor.replaceRange(\"\", pos.from, pos.to);\n    props.onClose();\n  }, [imageElement, editor, marker, props]);\n\n  const updateImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    if (!pos) return;\n    if (imageTitle.trim().length) {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()} ${JSON.stringify(\n          imageTitle,\n        )})`,\n        pos.from,\n        pos.to,\n      );\n    } else {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()})`,\n        pos.from,\n        pos.to,\n      );\n    }\n    props.onClose();\n  }, [imageElement, editor, marker, props, imageAlt, imageSrc, imageTitle]);\n\n  useEffect(() => {\n    if (imageElement && marker && editor) {\n      setFinalImageSrc(\"\");\n      setImageSrc(\n        imageElement.getAttribute(\"data-src\") || imageElement.src || \"\",\n      );\n      setImageTitle(imageElement.title || \"\");\n      setImageAlt(imageElement.alt || \"\");\n    }\n  }, [imageElement, marker, editor]);\n\n  useEffect(() => {\n    if (!props.note) {\n      return;\n    }\n    resolveNoteImageSrc(props.note, imageSrc)\n      .then((finalImageSrc) => {\n        setFinalImageSrc(finalImageSrc);\n      })\n      .catch((error) => {\n        setFinalImageSrc(\"\");\n      });\n  }, [imageSrc, props.note]);\n\n  if (!editor || !marker || !imageElement) {\n    return null;\n  }\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose} style={{ zIndex: 3001 }}>\n      <DialogTitle>{t(\"edit-image-dialog/title\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        <Box className={clsx(classes.imageWrapper)}>\n          <img\n            className={clsx(classes.imagePreview)}\n            src={finalImageSrc}\n            alt={imageAlt}\n            title={imageTitle}\n          ></img>{\" \"}\n        </Box>\n        <TextField\n          autoFocus={true}\n          value={imageSrc}\n          helperText={t(\"edit-image-dialog/image-url\")}\n          fullWidth={true}\n          onChange={(event) => setImageSrc(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageTitle}\n          helperText={t(\"edit-image-dialog/image-title\")}\n          fullWidth={true}\n          onChange={(event) => setImageTitle(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageAlt}\n          helperText={t(\"edit-image-dialog/image-alt-text\")}\n          fullWidth={true}\n          onChange={(event) => setImageAlt(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button variant={\"contained\"} color={\"primary\"} onClick={updateImage}>\n          {t(\"general/update\")}\n        </Button>\n        <Button variant={\"contained\"} color={\"secondary\"} onClick={deleteImage}>\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}> {t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  TextField,\n  Button,\n  Dialog,\n  DialogContent,\n  DialogActions,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  CardPlus,\n  Close,\n  ContentSave,\n  Cancel,\n  Plus,\n  TrashCan,\n  Pencil,\n} from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\n\n// @ts-ignore\nimport Board from \"@lourenci/react-kanban\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { openURL, postprocessPreview } from \"../../../utilities/preview\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nimport { Note } from \"../../../lib/notebook\";\nconst VickyMD = require(\"vickymd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    columnHeader: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      color: \"#000\", // BUG: TODO: Wait for react-kanban styling support\n    },\n    kanbanCard: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      [theme.breakpoints.down(\"sm\")]: {\n        marginTop: \"4px\",\n        marginBottom: \"4px\",\n      },\n    },\n    editorWrapper: {\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      padding: theme.spacing(2),\n    },\n  }),\n);\n\ninterface KanbanCard {\n  id: number;\n  title: string;\n  description: string;\n}\n\ninterface kanbanColumn {\n  id: number;\n  title: string;\n  wip: boolean;\n  cards: KanbanCard[];\n}\n\ninterface KanbanBoard {\n  columns: kanbanColumn[];\n}\n\ninterface KanbanColumnHeaderProps {\n  column: kanbanColumn;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\n\nfunction KanbanColumnHeaderDisplay(props: KanbanColumnHeaderProps) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const column = props.column;\n  const board = props.board;\n  const isPreview = props.isPreview;\n  const refreshBoard = props.refreshBoard;\n  const [clickedTitle, setClickedTitle] = useState<boolean>(false);\n  const [titleValue, setTitleValue] = useState<string>(column.title);\n\n  useEffect(() => {\n    if (!clickedTitle && titleValue !== column.title) {\n      column.title = titleValue || t(\"general/Untitled\");\n      setTitleValue(column.title);\n      refreshBoard(board);\n    }\n  }, [clickedTitle, board, column.title, titleValue, t, refreshBoard]);\n\n  return (\n    <Box className={clsx(classes.columnHeader)}>\n      <Box>\n        {clickedTitle ? (\n          <TextField\n            value={titleValue}\n            onChange={(event) => {\n              setTitleValue(event.target.value);\n            }}\n            onBlur={() => {\n              setClickedTitle(false);\n            }}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                setClickedTitle(false);\n              }\n            }}\n          ></TextField>\n        ) : (\n          <Typography\n            variant={\"body1\"}\n            style={{ cursor: \"text\" }}\n            onClick={() => {\n              if (!isPreview) {\n                setClickedTitle(true);\n              }\n            }}\n          >\n            {titleValue}\n          </Typography>\n        )}\n      </Box>\n      {!isPreview && (\n        <Box>\n          <IconButton\n            onClick={() => {\n              const card: KanbanCard = {\n                id: Date.now(),\n                title: \"\", //\"Card \" + column.cards.length,\n                description: t(\"general/empty\"),\n              };\n              if (column) {\n                column.cards.push(card);\n              }\n              props.refreshBoard(board);\n            }}\n          >\n            <CardPlus></CardPlus>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns = board.columns.filter((l) => column.id !== l.id);\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface KanbanCardProps {\n  card: KanbanCard;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\nfunction KanbanCardDisplay(props: KanbanCardProps) {\n  const classes = useStyles(props);\n  const board = props.board;\n  const card = props.card;\n  const isPreview = props.isPreview;\n  const note: Note = null; // = globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [description, setDescription] = useState<string>(card.description);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    setDescription(card.description);\n  }, [card.description]);\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(card.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      if (isPreview) {\n        editor.setOption(\"readOnly\", \"nocursor\");\n      }\n      editor.on(\"changes\", () => {\n        setDescription(editor.getValue());\n      });\n      editor.focus();\n      /*\n      // Cause save not working\n      editor.on(\"blur\", () => {\n        setClickedPreview(false);\n        setEditor(null);\n      });\n      */\n      // editor.display.input.blur();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, card.description);\n      postprocessPreview(\n        previewElement,\n        null, // globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, card.description]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  return (\n    <Card className={clsx(classes.kanbanCard)}>\n      <div\n        className={clsx(\"preview\", classes.preview)}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      {!isPreview && (\n        <Box style={{ position: \"absolute\", top: \"0\", right: \"0\", zIndex: 99 }}>\n          <IconButton onClick={() => setEditDialogOpen(true)}>\n            <Pencil></Pencil>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns.forEach((column) => {\n                column.cards = column.cards.filter((c) => c.id !== card.id);\n              });\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n      <Dialog\n        open={editorDialogOpen}\n        onClose={() => setEditDialogOpen(false)}\n        style={{ zIndex: 3000 }}\n      >\n        <DialogContent>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton\n            onClick={() => {\n              card.description = description;\n              props.refreshBoard(props.board);\n              setEditDialogOpen(false);\n            }}\n          >\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              if (editor) {\n                editor.setValue(card.description);\n              }\n              setDescription(card.description);\n              setEditDialogOpen(false);\n            }}\n          >\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Card>\n  );\n}\n\nfunction KanbanWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [board, setBoard] = useState<KanbanBoard>(\n    props.attributes[\"board\"] || {\n      columns: [],\n    },\n  );\n\n  if (\"lanes\" in (board as any)) {\n    board.columns = (board as any).lanes;\n  }\n\n  const refreshBoard = (board: KanbanBoard) => {\n    const newBoard = Object.assign({}, board);\n    props.setAttributes({ board: newBoard });\n    setBoard(newBoard as KanbanBoard);\n  };\n\n  return (\n    <div>\n      <Board\n        renderColumnHeader={(column: kanbanColumn) => (\n          <KanbanColumnHeaderDisplay\n            column={column}\n            board={board}\n            refreshBoard={refreshBoard}\n            isPreview={props.isPreview}\n          ></KanbanColumnHeaderDisplay>\n        )}\n        renderCard={(card: KanbanCard, { dragging }: { dragging: boolean }) => {\n          return (\n            <KanbanCardDisplay\n              card={card}\n              board={board}\n              refreshBoard={refreshBoard}\n              isPreview={props.isPreview}\n            ></KanbanCardDisplay>\n          );\n        }}\n        allowAddColumn={!props.isPreview}\n        allowAddCard={!props.isPreview}\n        renderColumnAdder={(): any => {\n          return (\n            <Box style={{ marginLeft: \"16px\", marginTop: \"16px\" }}>\n              <Button\n                color={\"primary\"}\n                variant={\"outlined\"}\n                onClick={() => {\n                  board.columns.push({\n                    id: Date.now(),\n                    title: t(\"general/untitled\"),\n                    cards: [],\n                    wip: false,\n                  });\n                  refreshBoard(board);\n                }}\n              >\n                <Plus></Plus>\n                {t(\"widget/crossnote.kanban/add-column\")}\n              </Button>\n              <Button color={\"primary\"} onClick={() => props.removeSelf()}>\n                <TrashCan></TrashCan>\n              </Button>\n            </Box>\n          );\n          // return <ColumnAdder addColumn={addColumn} />;\n        }}\n        onNewColumnConfirm={(newColumn: any) => {\n          board.columns.push({ id: Date.now(), ...newColumn });\n          refreshBoard(board);\n        }}\n        disableCardDrag={props.isPreview}\n        disableColumnDrag={props.isPreview}\n        onCardDragEnd={(\n          card: KanbanCard,\n          source: { fromPosition: number; fromColumnId: number },\n          destination: { toPosition: number; toColumnId: number },\n        ) => {\n          const { fromPosition, fromColumnId } = source;\n          let { toPosition, toColumnId } = destination;\n          const fromColumn = board.columns.filter(\n            (l) => l.id === fromColumnId,\n          )[0];\n          const toColumn = board.columns.filter((l) => l.id === toColumnId)[0];\n          fromColumn.cards.splice(fromPosition, 1);\n          toColumn.cards = [\n            ...toColumn.cards.slice(0, toPosition),\n            card,\n            ...toColumn.cards.slice(toPosition, toColumn.cards.length),\n          ];\n\n          refreshBoard(board);\n        }}\n        onColumnDragEnd={(\n          b: KanbanBoard,\n          source: { fromPosition: number },\n          destination: { toPosition: number },\n        ) => {\n          const fromPosition: number = source.fromPosition;\n          const toPosition: number = destination.toPosition;\n          const fromColumn = board.columns[fromPosition];\n          const toColumn = board.columns[toPosition];\n          board.columns[toPosition] = fromColumn;\n          board.columns[fromPosition] = toColumn;\n          refreshBoard(board);\n        }}\n      >\n        {board}\n      </Board>\n    </div>\n  );\n}\n\nexport const KanbanWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <KanbanWidget {...args}></KanbanWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import gql from 'graphql-tag';\nimport * as React from 'react';\nimport * as Urql from 'urql';\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n/** All built-in and custom scalars, mapped to their actual values */\nexport interface Scalars {\n  ID: string;\n  String: string;\n  Boolean: boolean;\n  Int: number;\n  Float: number;\n  Time: any;\n  UUID: any;\n  Upload: any;\n}\n\nexport interface NotificationEventCommentWidgetMessagePosting  extends NotificationEvent {\n   __typename?: 'NotificationEventCommentWidgetMessagePosting';\n  type: NotificationEventType;\n  message: CommentWidgetMessage;\n}\n\nexport interface LinkWithGitHubAccount {\n  code: Scalars['String'];\n}\n\nexport interface GitHubUser {\n   __typename?: 'GitHubUser';\n  login: Scalars['String'];\n  avatar: Scalars['String'];\n  email: Scalars['String'];\n}\n\nexport interface WidgetInstance {\n  type: WidgetType;\n}\n\nexport interface AuthReturn {\n   __typename?: 'AuthReturn';\n  /** JSON Web Token */\n  token: Scalars['String'];\n  /** User */\n  user: User;\n}\n\nexport interface SendEmailVerificationCode {\n  email: Scalars['String'];\n}\n\nexport interface UnsubscribeFromCommentWidget {\n  widgetID: Scalars['UUID'];\n}\n\nexport interface NotificationEvent {\n  type: NotificationEventType;\n}\n\nexport interface Widget {\n   __typename?: 'Widget';\n  id: Scalars['UUID'];\n  instance: WidgetInstance;\n  owner: User;\n  description: Scalars['String'];\n  source: Scalars['String'];\n  canConfigure: Scalars['Boolean'];\n}\n\nexport interface NotificationConnection {\n   __typename?: 'NotificationConnection';\n  totalCount: Scalars['Int'];\n  pageInfo: PageInfo;\n  edges: Array<NotificationEdge>;\n}\n\nexport interface ResetPassword {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n  password: Scalars['String'];\n}\n\nexport interface UpdateCommentWidgetMessage {\n  messageID: Scalars['UUID'];\n  markdown: Scalars['String'];\n}\n\nexport interface StarNotebook {\n  notebookID: Scalars['UUID'];\n}\n\nexport enum NotificationEventType {\n  UserFollowing = 'USER_FOLLOWING',\n  CommentWidgetMessagePosting = 'COMMENT_WIDGET_MESSAGE_POSTING'\n}\n\nexport interface UserWidget {\n   __typename?: 'UserWidget';\n  type: WidgetType;\n  count: Scalars['Int'];\n}\n\nexport interface SignUpWithGitHubAccount {\n  username: Scalars['String'];\n  email: Scalars['String'];\n  accessToken: Scalars['String'];\n}\n\nexport interface Query {\n   __typename?: 'Query';\n  test: Scalars['String'];\n  widget: Widget;\n  notebooks: Array<Notebook>;\n  viewer: User;\n  user: User;\n  stats: Stats;\n}\n\n\nexport interface QueryWidgetArgs {\n  id: Scalars['UUID'];\n}\n\n\nexport interface QueryNotebooksArgs {\n  orderBy?: Maybe<NotebookOrderBy>;\n  query?: Maybe<Scalars['String']>;\n  page?: Maybe<Scalars['Int']>;\n  perPage?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface QueryUserArgs {\n  id?: Maybe<Scalars['UUID']>;\n  username?: Maybe<Scalars['String']>;\n}\n\nexport enum WidgetType {\n  Comment = 'COMMENT'\n}\n\nexport interface PublishNotebook {\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n}\n\nexport interface PageInfo {\n   __typename?: 'PageInfo';\n  startCursor: Scalars['UUID'];\n  endCursor: Scalars['UUID'];\n  hasPreviousPage: Scalars['Boolean'];\n  hasNextPage: Scalars['Boolean'];\n}\n\nexport interface WidgetConnection {\n   __typename?: 'WidgetConnection';\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars['Int'];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<WidgetEdge>;\n}\n\nexport interface CommentWidgetMessageReaction {\n   __typename?: 'CommentWidgetMessageReaction';\n  message: CommentWidgetMessage;\n  user: User;\n  reaction: Scalars['String'];\n}\n\nexport interface CommentWidgetMessage {\n   __typename?: 'CommentWidgetMessage';\n  /** Comment message ID */\n  id: Scalars['UUID'];\n  /** The comment widget that this comment belongs to */\n  widget: Widget;\n  /** Author of this comment message */\n  author: User;\n  /** Comment message (markdown content) */\n  markdown: Scalars['String'];\n  /** Created At */\n  createdAt: Scalars['Time'];\n  /** updatedAt at */\n  updatedAt: Scalars['Time'];\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\n\nexport interface CommentWidgetMessageReactionSummariesArgs {\n  size?: Maybe<Scalars['Int']>;\n}\n\nexport interface Notification {\n   __typename?: 'Notification';\n  id: Scalars['UUID'];\n  createdAt: Scalars['Time'];\n  event: NotificationEvent;\n  meta: Scalars['String'];\n  receiver: User;\n  origin: User;\n}\n\nexport interface SetUserInfo {\n  name: Scalars['String'];\n  avatar: Scalars['String'];\n  cover: Scalars['String'];\n  bio: Scalars['String'];\n  location: Scalars['String'];\n  language: Scalars['String'];\n  editorCursorColor: Scalars['String'];\n}\n\nexport interface FollowUser {\n  userID: Scalars['UUID'];\n}\n\nexport interface SignInWithGitHubAccount {\n  code: Scalars['String'];\n}\n\nexport interface UpdateNotebook {\n  notebookID: Scalars['UUID'];\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n}\n\nexport interface NotificationEventUserFollowing  extends NotificationEvent {\n   __typename?: 'NotificationEventUserFollowing';\n  type: NotificationEventType;\n}\n\nexport interface NotificationEdge {\n   __typename?: 'NotificationEdge';\n  cursor: Scalars['UUID'];\n  node: Notification;\n}\n\nexport interface Stats {\n   __typename?: 'Stats';\n  numUsers: Scalars['Int'];\n  numNotebooks: Scalars['Int'];\n}\n\nexport enum NotebookOrderBy {\n  TotalStarsCount = 'TOTAL_STARS_COUNT',\n  DailyStarsCount = 'DAILY_STARS_COUNT',\n  WeeklyStarsCount = 'WEEKLY_STARS_COUNT',\n  MonthlyStarsCount = 'MONTHLY_STARS_COUNT'\n}\n\nexport interface CommentWidgetMessageEdge {\n   __typename?: 'CommentWidgetMessageEdge';\n  /** A cursor for use in pagination. */\n  cursor: Scalars['UUID'];\n  /** The item at the end of the edge. */\n  node: CommentWidgetMessage;\n}\n\nexport interface CommentWidgetMessageConnection {\n   __typename?: 'CommentWidgetMessageConnection';\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars['Int'];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<CommentWidgetMessageEdge>;\n}\n\nexport interface AddReactionToCommentWidget {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface NotebookConnection {\n   __typename?: 'NotebookConnection';\n  totalCount: Scalars['Int'];\n  pageInfo: PageInfo;\n  edges: Array<NotebookEdge>;\n}\n\nexport interface DeleteNotification {\n  notificationID: Scalars['UUID'];\n}\n\nexport interface ReactionSummary {\n   __typename?: 'ReactionSummary';\n  count: Scalars['Int'];\n  reaction: Scalars['String'];\n  selfAuthored: Scalars['Boolean'];\n}\n\nexport interface CommentWidget {\n   __typename?: 'CommentWidget';\n  /** Widget ID */\n  id: Scalars['UUID'];\n  /** Widget creation time */\n  createdAt: Scalars['Time'];\n  /** Widget update time */\n  updatedAt: Scalars['Time'];\n  /** Count of messages in this comment widget */\n  messagesCount: Scalars['Int'];\n  /** Count of reactions in this comment widget */\n  reactionsCount: Scalars['Int'];\n  /** Check if the viewer subscribed to the comment widget */\n  subscribed: Scalars['Boolean'];\n  /** Comment messages */\n  messages: CommentWidgetMessageConnection;\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\n\nexport interface CommentWidgetMessagesArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface CommentWidgetReactionSummariesArgs {\n  size?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface SignInInput {\n  /** Email */\n  email: Scalars['String'];\n  /** Password */\n  password: Scalars['String'];\n}\n\nexport interface PostCommentWidgetMessage {\n  widgetID: Scalars['UUID'];\n  markdown: Scalars['String'];\n  notifyUsers: Array<Maybe<Scalars['String']>>;\n}\n\nexport interface NotebookEdge {\n   __typename?: 'NotebookEdge';\n  cursor: Scalars['UUID'];\n  node: Notebook;\n}\n\nexport interface UpdateWidget {\n  id: Scalars['UUID'];\n  description: Scalars['String'];\n  source: Scalars['String'];\n}\n\nexport interface SignUpInput {\n  /** Username */\n  username: Scalars['String'];\n  /** Email */\n  email: Scalars['String'];\n  /** Password */\n  password: Scalars['String'];\n}\n\nexport interface RemoveReactionFromCommentWidgetMessage {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface UnpublishNotebook {\n  notebookID: Scalars['UUID'];\n}\n\n\nexport interface CommentWidgetInstance  extends WidgetInstance {\n   __typename?: 'CommentWidgetInstance';\n  type: WidgetType;\n  commentWidget: CommentWidget;\n}\n\nexport interface WidgetEdge {\n   __typename?: 'WidgetEdge';\n  /** A cursor for use in pagination. */\n  cursor: Scalars['UUID'];\n  /** The item at the end of the edge. */\n  node: Widget;\n}\n\nexport interface CommentWidgetReaction {\n   __typename?: 'CommentWidgetReaction';\n  widget: Widget;\n  user: User;\n  reaction: Scalars['String'];\n}\n\nexport interface Notebook {\n   __typename?: 'Notebook';\n  id: Scalars['UUID'];\n  createdAt: Scalars['Time'];\n  updatedAt: Scalars['Time'];\n  owner: User;\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n  markdown: Scalars['String'];\n  starsCount: Scalars['Int'];\n  dailyStarsCount: Maybe<Scalars['Int']>;\n  weeklyStarsCount: Maybe<Scalars['Int']>;\n  monthlyStarsCount: Maybe<Scalars['Int']>;\n  isStarred: Scalars['Boolean'];\n}\n\n\nexport interface VerifyEmail {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n}\n\nexport interface User {\n   __typename?: 'User';\n  id: Scalars['UUID'];\n  name: Maybe<Scalars['String']>;\n  username: Maybe<Scalars['String']>;\n  email: Maybe<Scalars['String']>;\n  verifiedEmail: Maybe<Scalars['String']>;\n  avatar: Maybe<Scalars['String']>;\n  cover: Maybe<Scalars['String']>;\n  bio: Maybe<Scalars['String']>;\n  location: Maybe<Scalars['String']>;\n  language: Maybe<Scalars['String']>;\n  createdAt: Maybe<Scalars['Time']>;\n  updatedAt: Maybe<Scalars['Time']>;\n  deletedAt: Maybe<Scalars['Time']>;\n  followingsCount: Maybe<Scalars['Int']>;\n  followersCount: Maybe<Scalars['Int']>;\n  widgetsCount: Maybe<Scalars['Int']>;\n  notebooksCount: Maybe<Scalars['Int']>;\n  starredNotebooksCount: Maybe<Scalars['Int']>;\n  isFollowing: Maybe<Scalars['Boolean']>;\n  areFriends: Maybe<Scalars['Boolean']>;\n  followings: Maybe<Array<User>>;\n  followers: Maybe<Array<User>>;\n  widgetSummaries: Array<UserWidget>;\n  widgets: WidgetConnection;\n  notifications: NotificationConnection;\n  /** Get user owned notebooks */\n  notebooks: NotebookConnection;\n  /** Get user starred notebooks */\n  starredNotebooks: NotebookConnection;\n  editorCursorColor: Maybe<Scalars['String']>;\n  githubUser: Maybe<GitHubUser>;\n}\n\n\nexport interface UserWidgetsArgs {\n  type: WidgetType;\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface UserNotificationsArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface UserNotebooksArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\n\nexport interface UserStarredNotebooksArgs {\n  before?: Maybe<Scalars['UUID']>;\n  after?: Maybe<Scalars['UUID']>;\n  first?: Maybe<Scalars['Int']>;\n  last?: Maybe<Scalars['Int']>;\n}\n\nexport interface CreateWidget {\n  type: WidgetType;\n  description: Scalars['String'];\n  source: Scalars['String'];\n}\n\nexport interface DeleteWidget {\n  id: Scalars['UUID'];\n}\n\nexport interface RemoveReactionFromCommentWidget {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface AddReactionToCommentWidgetMessage {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n}\n\nexport interface SubscribeToCommentWidget {\n  widgetID: Scalars['UUID'];\n}\n\nexport interface Mutation {\n   __typename?: 'Mutation';\n  signUp: AuthReturn;\n  signIn: AuthReturn;\n  signUpWithGitHubAccount: AuthReturn;\n  signInWithGitHubAccount: AuthReturn;\n  deleteNotification: Scalars['Boolean'];\n  deleteAllNotifications: Scalars['Boolean'];\n  setUserInfo: User;\n  followUser: Scalars['Boolean'];\n  unfollowUser: Scalars['Boolean'];\n  sendEmailVerificationCode: Scalars['Boolean'];\n  resetPassword: Scalars['Boolean'];\n  verifyEmail: Scalars['Boolean'];\n  linkWithGitHubAccount: Scalars['Boolean'];\n  unlinkGitHubAccount: Scalars['Boolean'];\n  publishNotebook: Notebook;\n  unpublishNotebook: Scalars['Boolean'];\n  updateNotebook: Notebook;\n  starNotebook: Scalars['Boolean'];\n  unstarNotebook: Scalars['Boolean'];\n  createWidget: Widget;\n  updateWidget: Scalars['Boolean'];\n  deleteWidget: Scalars['Boolean'];\n  postCommentWidgetMessage: CommentWidgetMessage;\n  updateCommentWidgetMessage: CommentWidgetMessage;\n  addReactionToCommentWidget: Scalars['Boolean'];\n  removeReactionFromCommentWidget: Scalars['Boolean'];\n  addReactionToCommentWidgetMessage: Scalars['Boolean'];\n  removeReactionFromCommentWidgetMessage: Scalars['Boolean'];\n  subscribeToCommentWidget: Scalars['Boolean'];\n  unsubscribeFromCommentWidget: Scalars['Boolean'];\n}\n\n\nexport interface MutationSignUpArgs {\n  input: SignUpInput;\n}\n\n\nexport interface MutationSignInArgs {\n  input: SignInInput;\n}\n\n\nexport interface MutationSignUpWithGitHubAccountArgs {\n  input: SignUpWithGitHubAccount;\n}\n\n\nexport interface MutationSignInWithGitHubAccountArgs {\n  input: SignInWithGitHubAccount;\n}\n\n\nexport interface MutationDeleteNotificationArgs {\n  input: DeleteNotification;\n}\n\n\nexport interface MutationSetUserInfoArgs {\n  input: SetUserInfo;\n}\n\n\nexport interface MutationFollowUserArgs {\n  input: FollowUser;\n}\n\n\nexport interface MutationUnfollowUserArgs {\n  input: UnfollowUser;\n}\n\n\nexport interface MutationSendEmailVerificationCodeArgs {\n  input: Maybe<SendEmailVerificationCode>;\n}\n\n\nexport interface MutationResetPasswordArgs {\n  input: Maybe<ResetPassword>;\n}\n\n\nexport interface MutationVerifyEmailArgs {\n  input: Maybe<VerifyEmail>;\n}\n\n\nexport interface MutationLinkWithGitHubAccountArgs {\n  input: Maybe<LinkWithGitHubAccount>;\n}\n\n\nexport interface MutationPublishNotebookArgs {\n  input: PublishNotebook;\n}\n\n\nexport interface MutationUnpublishNotebookArgs {\n  input: UnpublishNotebook;\n}\n\n\nexport interface MutationUpdateNotebookArgs {\n  input: UpdateNotebook;\n}\n\n\nexport interface MutationStarNotebookArgs {\n  input: StarNotebook;\n}\n\n\nexport interface MutationUnstarNotebookArgs {\n  input: UnstarNotebook;\n}\n\n\nexport interface MutationCreateWidgetArgs {\n  input: Maybe<CreateWidget>;\n}\n\n\nexport interface MutationUpdateWidgetArgs {\n  input: Maybe<UpdateWidget>;\n}\n\n\nexport interface MutationDeleteWidgetArgs {\n  input: Maybe<DeleteWidget>;\n}\n\n\nexport interface MutationPostCommentWidgetMessageArgs {\n  input: PostCommentWidgetMessage;\n}\n\n\nexport interface MutationUpdateCommentWidgetMessageArgs {\n  input: UpdateCommentWidgetMessage;\n}\n\n\nexport interface MutationAddReactionToCommentWidgetArgs {\n  input: Maybe<AddReactionToCommentWidget>;\n}\n\n\nexport interface MutationRemoveReactionFromCommentWidgetArgs {\n  input: Maybe<RemoveReactionFromCommentWidget>;\n}\n\n\nexport interface MutationAddReactionToCommentWidgetMessageArgs {\n  input: Maybe<AddReactionToCommentWidgetMessage>;\n}\n\n\nexport interface MutationRemoveReactionFromCommentWidgetMessageArgs {\n  input: Maybe<RemoveReactionFromCommentWidgetMessage>;\n}\n\n\nexport interface MutationSubscribeToCommentWidgetArgs {\n  input: Maybe<SubscribeToCommentWidget>;\n}\n\n\nexport interface MutationUnsubscribeFromCommentWidgetArgs {\n  input: Maybe<UnsubscribeFromCommentWidget>;\n}\n\nexport interface UnfollowUser {\n  userID: Scalars['UUID'];\n}\n\nexport interface UnstarNotebook {\n  notebookID: Scalars['UUID'];\n}\n\nexport type SignUpMutationVariables = {\n  username: Scalars['String'];\n  email: Scalars['String'];\n  password: Scalars['String'];\n};\n\n\nexport type SignUpMutation = (\n  { __typename?: 'Mutation' }\n  & { signUp: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id'>\n    ) }\n  ) }\n);\n\nexport type SignInMutationVariables = {\n  email: Scalars['String'];\n  password: Scalars['String'];\n};\n\n\nexport type SignInMutation = (\n  { __typename?: 'Mutation' }\n  & { signIn: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id'>\n    ) }\n  ) }\n);\n\nexport type SignUpWithGitHubAccountMutationVariables = {\n  username: Scalars['String'];\n  email: Scalars['String'];\n  accessToken: Scalars['String'];\n};\n\n\nexport type SignUpWithGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & { signUpWithGitHubAccount: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id'>\n    ) }\n  ) }\n);\n\nexport type SignInWithGitHubAccountMutationVariables = {\n  code: Scalars['String'];\n};\n\n\nexport type SignInWithGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & { signInWithGitHubAccount: (\n    { __typename?: 'AuthReturn' }\n    & Pick<AuthReturn, 'token'>\n    & { user: (\n      { __typename?: 'User' }\n      & Pick<User, 'id' | 'username' | 'email'>\n    ) }\n  ) }\n);\n\nexport type SendEmailVerificationCodeMutationVariables = {\n  email: Scalars['String'];\n};\n\n\nexport type SendEmailVerificationCodeMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'sendEmailVerificationCode'>\n);\n\nexport type ResetPasswordMutationVariables = {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n  password: Scalars['String'];\n};\n\n\nexport type ResetPasswordMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'resetPassword'>\n);\n\nexport type VerifyEmailMutationVariables = {\n  email: Scalars['String'];\n  verificationCode: Scalars['String'];\n};\n\n\nexport type VerifyEmailMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'verifyEmail'>\n);\n\nexport type CreateCommentWidgetMutationVariables = {\n  description: Scalars['String'];\n  source: Scalars['String'];\n};\n\n\nexport type CreateCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & { createWidget: (\n    { __typename?: 'Widget' }\n    & Pick<Widget, 'id'>\n  ) }\n);\n\nexport type PostCommentWidgetMessageMutationVariables = {\n  widgetID: Scalars['UUID'];\n  markdown: Scalars['String'];\n  notifyUsers: Array<Scalars['String']>;\n};\n\n\nexport type PostCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & { postCommentWidgetMessage: (\n    { __typename?: 'CommentWidgetMessage' }\n    & CommentWidgetMessageFieldsFragment\n  ) }\n);\n\nexport type UpdateCommentWidgetMessageMutationVariables = {\n  messageID: Scalars['UUID'];\n  markdown: Scalars['String'];\n};\n\n\nexport type UpdateCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & { updateCommentWidgetMessage: (\n    { __typename?: 'CommentWidgetMessage' }\n    & CommentWidgetMessageFieldsFragment\n  ) }\n);\n\nexport type AddReactionToCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type AddReactionToCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'addReactionToCommentWidget'>\n);\n\nexport type RemoveReactionFromCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type RemoveReactionFromCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'removeReactionFromCommentWidget'>\n);\n\nexport type AddReactionToCommentWidgetMessageMutationVariables = {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type AddReactionToCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'addReactionToCommentWidgetMessage'>\n);\n\nexport type RemoveReactionFromCommentWidgetMessageMutationVariables = {\n  messageID: Scalars['UUID'];\n  reaction: Scalars['String'];\n};\n\n\nexport type RemoveReactionFromCommentWidgetMessageMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'removeReactionFromCommentWidgetMessage'>\n);\n\nexport type SubscribeToCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n};\n\n\nexport type SubscribeToCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'subscribeToCommentWidget'>\n);\n\nexport type UnsubscribeFromCommentWidgetMutationVariables = {\n  widgetID: Scalars['UUID'];\n};\n\n\nexport type UnsubscribeFromCommentWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unsubscribeFromCommentWidget'>\n);\n\nexport type LinkWithGitHubAccountMutationVariables = {\n  code: Scalars['String'];\n};\n\n\nexport type LinkWithGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'linkWithGitHubAccount'>\n);\n\nexport type UnlinkGitHubAccountMutationVariables = {};\n\n\nexport type UnlinkGitHubAccountMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unlinkGitHubAccount'>\n);\n\nexport type PublishNotebookMutationVariables = {\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n};\n\n\nexport type PublishNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & { publishNotebook: (\n    { __typename?: 'Notebook' }\n    & NotebookFieldsFragment\n  ) }\n);\n\nexport type UnpublishNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n};\n\n\nexport type UnpublishNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unpublishNotebook'>\n);\n\nexport type UpdateNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n  gitURL: Scalars['String'];\n  gitBranch: Scalars['String'];\n};\n\n\nexport type UpdateNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & { updateNotebook: (\n    { __typename?: 'Notebook' }\n    & NotebookFieldsFragment\n  ) }\n);\n\nexport type StarNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n};\n\n\nexport type StarNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'starNotebook'>\n);\n\nexport type UnstarNotebookMutationVariables = {\n  notebookID: Scalars['UUID'];\n};\n\n\nexport type UnstarNotebookMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'unstarNotebook'>\n);\n\nexport type DeleteNotificationMutationVariables = {\n  notificationID: Scalars['UUID'];\n};\n\n\nexport type DeleteNotificationMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'deleteNotification'>\n);\n\nexport type DeleteAllNotificationsMutationVariables = {};\n\n\nexport type DeleteAllNotificationsMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'deleteAllNotifications'>\n);\n\nexport type SetUserInfoMutationVariables = {\n  cover: Scalars['String'];\n  bio: Scalars['String'];\n  location: Scalars['String'];\n  language: Scalars['String'];\n  name: Scalars['String'];\n  avatar: Scalars['String'];\n  editorCursorColor: Scalars['String'];\n};\n\n\nexport type SetUserInfoMutation = (\n  { __typename?: 'Mutation' }\n  & { setUserInfo: (\n    { __typename?: 'User' }\n    & ViewerFieldsFragment\n  ) }\n);\n\nexport type DeleteWidgetMutationVariables = {\n  id: Scalars['UUID'];\n};\n\n\nexport type DeleteWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'deleteWidget'>\n);\n\nexport type UpdateWidgetMutationVariables = {\n  id: Scalars['UUID'];\n  description: Scalars['String'];\n  source: Scalars['String'];\n};\n\n\nexport type UpdateWidgetMutation = (\n  { __typename?: 'Mutation' }\n  & Pick<Mutation, 'updateWidget'>\n);\n\nexport type CommentWidgetMessageFieldsFragment = (\n  { __typename?: 'CommentWidgetMessage' }\n  & Pick<CommentWidgetMessage, 'id' | 'markdown' | 'createdAt' | 'updatedAt'>\n  & { author: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), reactionSummaries: Array<(\n    { __typename?: 'ReactionSummary' }\n    & Pick<ReactionSummary, 'count' | 'reaction' | 'selfAuthored'>\n  )> }\n);\n\nexport type CommentWidgetMessageConnectionFieldsFragment = (\n  { __typename?: 'CommentWidgetMessageConnection' }\n  & { pageInfo: (\n    { __typename?: 'PageInfo' }\n    & PageInfoFieldsFragment\n  ), edges: Array<(\n    { __typename?: 'CommentWidgetMessageEdge' }\n    & Pick<CommentWidgetMessageEdge, 'cursor'>\n    & { node: (\n      { __typename?: 'CommentWidgetMessage' }\n      & CommentWidgetMessageFieldsFragment\n    ) }\n  )> }\n);\n\nexport type CommentWidgetFieldsFragment = (\n  { __typename?: 'Widget' }\n  & Pick<Widget, 'id' | 'description' | 'source' | 'canConfigure'>\n  & { owner: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), instance: (\n    { __typename?: 'CommentWidgetInstance' }\n    & Pick<CommentWidgetInstance, 'type'>\n    & { commentWidget: (\n      { __typename?: 'CommentWidget' }\n      & Pick<CommentWidget, 'id' | 'createdAt' | 'updatedAt' | 'messagesCount' | 'reactionsCount' | 'subscribed'>\n      & { reactionSummaries: Array<(\n        { __typename?: 'ReactionSummary' }\n        & Pick<ReactionSummary, 'count' | 'reaction' | 'selfAuthored'>\n      )>, messages: (\n        { __typename?: 'CommentWidgetMessageConnection' }\n        & CommentWidgetMessageConnectionFieldsFragment\n      ) }\n    ) }\n  ) }\n);\n\nexport type CommentWidgetQueryVariables = {\n  widgetID: Scalars['UUID'];\n};\n\n\nexport type CommentWidgetQuery = (\n  { __typename?: 'Query' }\n  & { widget: (\n    { __typename?: 'Widget' }\n    & CommentWidgetFieldsFragment\n  ) }\n);\n\nexport type CommentWidgetMessagesQueryVariables = {\n  widgetID: Scalars['UUID'];\n  before: Scalars['UUID'];\n  after: Scalars['UUID'];\n  first: Scalars['Int'];\n  last: Scalars['Int'];\n};\n\n\nexport type CommentWidgetMessagesQuery = (\n  { __typename?: 'Query' }\n  & { widget: (\n    { __typename?: 'Widget' }\n    & { instance: (\n      { __typename?: 'CommentWidgetInstance' }\n      & Pick<CommentWidgetInstance, 'type'>\n      & { commentWidget: (\n        { __typename?: 'CommentWidget' }\n        & { messages: (\n          { __typename?: 'CommentWidgetMessageConnection' }\n          & CommentWidgetMessageConnectionFieldsFragment\n        ) }\n      ) }\n    ) }\n  ) }\n);\n\nexport type GitHubUserQueryVariables = {};\n\n\nexport type GitHubUserQuery = (\n  { __typename?: 'Query' }\n  & { viewer: (\n    { __typename?: 'User' }\n    & { githubUser: Maybe<(\n      { __typename?: 'GitHubUser' }\n      & Pick<GitHubUser, 'login' | 'avatar' | 'email'>\n    )> }\n  ) }\n);\n\nexport type NotebookFieldsFragment = (\n  { __typename?: 'Notebook' }\n  & Pick<Notebook, 'id' | 'createdAt' | 'updatedAt' | 'gitURL' | 'gitBranch' | 'markdown' | 'starsCount' | 'isStarred'>\n  & { owner: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'avatar' | 'username'>\n  ) }\n);\n\nexport type NotebooksQueryVariables = {\n  query?: Maybe<Scalars['String']>;\n  orderBy?: Maybe<NotebookOrderBy>;\n  page?: Maybe<Scalars['Int']>;\n  perPage?: Maybe<Scalars['Int']>;\n};\n\n\nexport type NotebooksQuery = (\n  { __typename?: 'Query' }\n  & { notebooks: Array<(\n    { __typename?: 'Notebook' }\n    & NotebookFieldsFragment\n  )> }\n);\n\nexport type NotificationFieldsFragment = (\n  { __typename?: 'Notification' }\n  & Pick<Notification, 'id' | 'createdAt' | 'meta'>\n  & { origin: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), receiver: (\n    { __typename?: 'User' }\n    & Pick<User, 'id' | 'username' | 'avatar'>\n  ), event: (\n    { __typename?: 'NotificationEventCommentWidgetMessagePosting' }\n    & Pick<NotificationEventCommentWidgetMessagePosting, 'type'>\n    & { message: (\n      { __typename?: 'CommentWidgetMessage' }\n      & Pick<CommentWidgetMessage, 'id' | 'markdown' | 'createdAt'>\n      & { widget: (\n        { __typename?: 'Widget' }\n        & Pick<Widget, 'description' | 'source'>\n        & { owner: (\n          { __typename?: 'User' }\n          & Pick<User, 'id' | 'username' | 'avatar'>\n        ) }\n      ) }\n    ) }\n  ) | (\n    { __typename?: 'NotificationEventUserFollowing' }\n    & Pick<NotificationEventUserFollowing, 'type'>\n  ) }\n);\n\nexport type NotificationsQueryVariables = {\n  before: Scalars['UUID'];\n  after: Scalars['UUID'];\n  first: Maybe<Scalars['Int']>;\n  last: Maybe<Scalars['Int']>;\n};\n\n\nexport type NotificationsQuery = (\n  { __typename?: 'Query' }\n  & { viewer: (\n    { __typename?: 'User' }\n    & { notifications: (\n      { __typename?: 'NotificationConnection' }\n      & { pageInfo: (\n        { __typename?: 'PageInfo' }\n        & PageInfoFieldsFragment\n      ), edges: Array<(\n        { __typename?: 'NotificationEdge' }\n        & Pick<NotificationEdge, 'cursor'>\n        & { node: (\n          { __typename?: 'Notification' }\n          & NotificationFieldsFragment\n        ) }\n      )> }\n    ) }\n  ) }\n);\n\nexport type PageInfoFieldsFragment = (\n  { __typename?: 'PageInfo' }\n  & Pick<PageInfo, 'startCursor' | 'endCursor' | 'hasNextPage' | 'hasPreviousPage'>\n);\n\nexport type ViewerFieldsFragment = (\n  { __typename?: 'User' }\n  & Pick<User, 'avatar' | 'bio' | 'cover' | 'createdAt' | 'deletedAt' | 'id' | 'language' | 'name' | 'username' | 'email' | 'verifiedEmail' | 'updatedAt' | 'widgetsCount' | 'notebooksCount' | 'starredNotebooksCount' | 'editorCursorColor'>\n  & { notifications: (\n    { __typename?: 'NotificationConnection' }\n    & Pick<NotificationConnection, 'totalCount'>\n  ) }\n);\n\nexport type ViewerQueryVariables = {};\n\n\nexport type ViewerQuery = (\n  { __typename?: 'Query' }\n  & { viewer: (\n    { __typename?: 'User' }\n    & ViewerFieldsFragment\n  ) }\n);\n\nexport const PageInfoFieldsFragmentDoc = gql`\n    fragment PageInfoFields on PageInfo {\n  startCursor\n  endCursor\n  hasNextPage\n  hasPreviousPage\n}\n    `;\nexport const CommentWidgetMessageFieldsFragmentDoc = gql`\n    fragment CommentWidgetMessageFields on CommentWidgetMessage {\n  id\n  author {\n    id\n    username\n    avatar\n  }\n  markdown\n  createdAt\n  updatedAt\n  reactionSummaries {\n    count\n    reaction\n    selfAuthored\n  }\n}\n    `;\nexport const CommentWidgetMessageConnectionFieldsFragmentDoc = gql`\n    fragment CommentWidgetMessageConnectionFields on CommentWidgetMessageConnection {\n  pageInfo {\n    ...PageInfoFields\n  }\n  edges {\n    cursor\n    node {\n      ...CommentWidgetMessageFields\n    }\n  }\n}\n    ${PageInfoFieldsFragmentDoc}\n${CommentWidgetMessageFieldsFragmentDoc}`;\nexport const CommentWidgetFieldsFragmentDoc = gql`\n    fragment CommentWidgetFields on Widget {\n  id\n  owner {\n    id\n    username\n    avatar\n  }\n  description\n  source\n  canConfigure\n  instance {\n    type\n    ... on CommentWidgetInstance {\n      type\n      commentWidget {\n        id\n        createdAt\n        updatedAt\n        messagesCount\n        reactionsCount\n        subscribed\n        reactionSummaries {\n          count\n          reaction\n          selfAuthored\n        }\n        messages(first: 20) {\n          ...CommentWidgetMessageConnectionFields\n        }\n      }\n    }\n  }\n}\n    ${CommentWidgetMessageConnectionFieldsFragmentDoc}`;\nexport const NotebookFieldsFragmentDoc = gql`\n    fragment NotebookFields on Notebook {\n  id\n  createdAt\n  updatedAt\n  owner {\n    id\n    avatar\n    username\n  }\n  gitURL\n  gitBranch\n  markdown\n  starsCount\n  isStarred\n}\n    `;\nexport const NotificationFieldsFragmentDoc = gql`\n    fragment NotificationFields on Notification {\n  id\n  createdAt\n  origin {\n    id\n    username\n    avatar\n  }\n  receiver {\n    id\n    username\n    avatar\n  }\n  meta\n  event {\n    type\n    ... on NotificationEventUserFollowing {\n      type\n    }\n    ... on NotificationEventCommentWidgetMessagePosting {\n      type\n      message {\n        id\n        markdown\n        createdAt\n        widget {\n          owner {\n            id\n            username\n            avatar\n          }\n          description\n          source\n        }\n      }\n    }\n  }\n}\n    `;\nexport const ViewerFieldsFragmentDoc = gql`\n    fragment ViewerFields on User {\n  avatar\n  bio\n  cover\n  createdAt\n  deletedAt\n  id\n  language\n  name\n  username\n  email\n  verifiedEmail\n  updatedAt\n  widgetsCount\n  notebooksCount\n  starredNotebooksCount\n  notifications(last: 1) {\n    totalCount\n  }\n  editorCursorColor\n}\n    `;\nexport const SignUpDocument = gql`\n    mutation SignUp($username: String!, $email: String!, $password: String!) {\n  signUp(input: {username: $username, email: $email, password: $password}) {\n    token\n    user {\n      id\n    }\n  }\n}\n    `;\n\nexport const SignUpComponent = (props: Omit<Urql.MutationProps<SignUpMutation, SignUpMutationVariables>, 'query'> & { variables?: SignUpMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignUpDocument} />\n);\n\n\nexport function useSignUpMutation() {\n  return Urql.useMutation<SignUpMutation, SignUpMutationVariables>(SignUpDocument);\n};\nexport const SignInDocument = gql`\n    mutation SignIn($email: String!, $password: String!) {\n  signIn(input: {email: $email, password: $password}) {\n    token\n    user {\n      id\n    }\n  }\n}\n    `;\n\nexport const SignInComponent = (props: Omit<Urql.MutationProps<SignInMutation, SignInMutationVariables>, 'query'> & { variables?: SignInMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignInDocument} />\n);\n\n\nexport function useSignInMutation() {\n  return Urql.useMutation<SignInMutation, SignInMutationVariables>(SignInDocument);\n};\nexport const SignUpWithGitHubAccountDocument = gql`\n    mutation SignUpWithGitHubAccount($username: String!, $email: String!, $accessToken: String!) {\n  signUpWithGitHubAccount(input: {username: $username, email: $email, accessToken: $accessToken}) {\n    token\n    user {\n      id\n    }\n  }\n}\n    `;\n\nexport const SignUpWithGitHubAccountComponent = (props: Omit<Urql.MutationProps<SignUpWithGitHubAccountMutation, SignUpWithGitHubAccountMutationVariables>, 'query'> & { variables?: SignUpWithGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignUpWithGitHubAccountDocument} />\n);\n\n\nexport function useSignUpWithGitHubAccountMutation() {\n  return Urql.useMutation<SignUpWithGitHubAccountMutation, SignUpWithGitHubAccountMutationVariables>(SignUpWithGitHubAccountDocument);\n};\nexport const SignInWithGitHubAccountDocument = gql`\n    mutation SignInWithGitHubAccount($code: String!) {\n  signInWithGitHubAccount(input: {code: $code}) {\n    token\n    user {\n      id\n      username\n      email\n    }\n  }\n}\n    `;\n\nexport const SignInWithGitHubAccountComponent = (props: Omit<Urql.MutationProps<SignInWithGitHubAccountMutation, SignInWithGitHubAccountMutationVariables>, 'query'> & { variables?: SignInWithGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={SignInWithGitHubAccountDocument} />\n);\n\n\nexport function useSignInWithGitHubAccountMutation() {\n  return Urql.useMutation<SignInWithGitHubAccountMutation, SignInWithGitHubAccountMutationVariables>(SignInWithGitHubAccountDocument);\n};\nexport const SendEmailVerificationCodeDocument = gql`\n    mutation SendEmailVerificationCode($email: String!) {\n  sendEmailVerificationCode(input: {email: $email})\n}\n    `;\n\nexport const SendEmailVerificationCodeComponent = (props: Omit<Urql.MutationProps<SendEmailVerificationCodeMutation, SendEmailVerificationCodeMutationVariables>, 'query'> & { variables?: SendEmailVerificationCodeMutationVariables }) => (\n  <Urql.Mutation {...props} query={SendEmailVerificationCodeDocument} />\n);\n\n\nexport function useSendEmailVerificationCodeMutation() {\n  return Urql.useMutation<SendEmailVerificationCodeMutation, SendEmailVerificationCodeMutationVariables>(SendEmailVerificationCodeDocument);\n};\nexport const ResetPasswordDocument = gql`\n    mutation ResetPassword($email: String!, $verificationCode: String!, $password: String!) {\n  resetPassword(input: {email: $email, verificationCode: $verificationCode, password: $password})\n}\n    `;\n\nexport const ResetPasswordComponent = (props: Omit<Urql.MutationProps<ResetPasswordMutation, ResetPasswordMutationVariables>, 'query'> & { variables?: ResetPasswordMutationVariables }) => (\n  <Urql.Mutation {...props} query={ResetPasswordDocument} />\n);\n\n\nexport function useResetPasswordMutation() {\n  return Urql.useMutation<ResetPasswordMutation, ResetPasswordMutationVariables>(ResetPasswordDocument);\n};\nexport const VerifyEmailDocument = gql`\n    mutation VerifyEmail($email: String!, $verificationCode: String!) {\n  verifyEmail(input: {email: $email, verificationCode: $verificationCode})\n}\n    `;\n\nexport const VerifyEmailComponent = (props: Omit<Urql.MutationProps<VerifyEmailMutation, VerifyEmailMutationVariables>, 'query'> & { variables?: VerifyEmailMutationVariables }) => (\n  <Urql.Mutation {...props} query={VerifyEmailDocument} />\n);\n\n\nexport function useVerifyEmailMutation() {\n  return Urql.useMutation<VerifyEmailMutation, VerifyEmailMutationVariables>(VerifyEmailDocument);\n};\nexport const CreateCommentWidgetDocument = gql`\n    mutation CreateCommentWidget($description: String!, $source: String!) {\n  createWidget(input: {description: $description, source: $source, type: COMMENT}) {\n    id\n  }\n}\n    `;\n\nexport const CreateCommentWidgetComponent = (props: Omit<Urql.MutationProps<CreateCommentWidgetMutation, CreateCommentWidgetMutationVariables>, 'query'> & { variables?: CreateCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={CreateCommentWidgetDocument} />\n);\n\n\nexport function useCreateCommentWidgetMutation() {\n  return Urql.useMutation<CreateCommentWidgetMutation, CreateCommentWidgetMutationVariables>(CreateCommentWidgetDocument);\n};\nexport const PostCommentWidgetMessageDocument = gql`\n    mutation PostCommentWidgetMessage($widgetID: UUID!, $markdown: String!, $notifyUsers: [String!]!) {\n  postCommentWidgetMessage(input: {widgetID: $widgetID, markdown: $markdown, notifyUsers: $notifyUsers}) {\n    ...CommentWidgetMessageFields\n  }\n}\n    ${CommentWidgetMessageFieldsFragmentDoc}`;\n\nexport const PostCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<PostCommentWidgetMessageMutation, PostCommentWidgetMessageMutationVariables>, 'query'> & { variables?: PostCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={PostCommentWidgetMessageDocument} />\n);\n\n\nexport function usePostCommentWidgetMessageMutation() {\n  return Urql.useMutation<PostCommentWidgetMessageMutation, PostCommentWidgetMessageMutationVariables>(PostCommentWidgetMessageDocument);\n};\nexport const UpdateCommentWidgetMessageDocument = gql`\n    mutation UpdateCommentWidgetMessage($messageID: UUID!, $markdown: String!) {\n  updateCommentWidgetMessage(input: {messageID: $messageID, markdown: $markdown}) {\n    ...CommentWidgetMessageFields\n  }\n}\n    ${CommentWidgetMessageFieldsFragmentDoc}`;\n\nexport const UpdateCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<UpdateCommentWidgetMessageMutation, UpdateCommentWidgetMessageMutationVariables>, 'query'> & { variables?: UpdateCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={UpdateCommentWidgetMessageDocument} />\n);\n\n\nexport function useUpdateCommentWidgetMessageMutation() {\n  return Urql.useMutation<UpdateCommentWidgetMessageMutation, UpdateCommentWidgetMessageMutationVariables>(UpdateCommentWidgetMessageDocument);\n};\nexport const AddReactionToCommentWidgetDocument = gql`\n    mutation AddReactionToCommentWidget($widgetID: UUID!, $reaction: String!) {\n  addReactionToCommentWidget(input: {widgetID: $widgetID, reaction: $reaction})\n}\n    `;\n\nexport const AddReactionToCommentWidgetComponent = (props: Omit<Urql.MutationProps<AddReactionToCommentWidgetMutation, AddReactionToCommentWidgetMutationVariables>, 'query'> & { variables?: AddReactionToCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={AddReactionToCommentWidgetDocument} />\n);\n\n\nexport function useAddReactionToCommentWidgetMutation() {\n  return Urql.useMutation<AddReactionToCommentWidgetMutation, AddReactionToCommentWidgetMutationVariables>(AddReactionToCommentWidgetDocument);\n};\nexport const RemoveReactionFromCommentWidgetDocument = gql`\n    mutation RemoveReactionFromCommentWidget($widgetID: UUID!, $reaction: String!) {\n  removeReactionFromCommentWidget(input: {widgetID: $widgetID, reaction: $reaction})\n}\n    `;\n\nexport const RemoveReactionFromCommentWidgetComponent = (props: Omit<Urql.MutationProps<RemoveReactionFromCommentWidgetMutation, RemoveReactionFromCommentWidgetMutationVariables>, 'query'> & { variables?: RemoveReactionFromCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={RemoveReactionFromCommentWidgetDocument} />\n);\n\n\nexport function useRemoveReactionFromCommentWidgetMutation() {\n  return Urql.useMutation<RemoveReactionFromCommentWidgetMutation, RemoveReactionFromCommentWidgetMutationVariables>(RemoveReactionFromCommentWidgetDocument);\n};\nexport const AddReactionToCommentWidgetMessageDocument = gql`\n    mutation AddReactionToCommentWidgetMessage($messageID: UUID!, $reaction: String!) {\n  addReactionToCommentWidgetMessage(input: {messageID: $messageID, reaction: $reaction})\n}\n    `;\n\nexport const AddReactionToCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<AddReactionToCommentWidgetMessageMutation, AddReactionToCommentWidgetMessageMutationVariables>, 'query'> & { variables?: AddReactionToCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={AddReactionToCommentWidgetMessageDocument} />\n);\n\n\nexport function useAddReactionToCommentWidgetMessageMutation() {\n  return Urql.useMutation<AddReactionToCommentWidgetMessageMutation, AddReactionToCommentWidgetMessageMutationVariables>(AddReactionToCommentWidgetMessageDocument);\n};\nexport const RemoveReactionFromCommentWidgetMessageDocument = gql`\n    mutation RemoveReactionFromCommentWidgetMessage($messageID: UUID!, $reaction: String!) {\n  removeReactionFromCommentWidgetMessage(input: {messageID: $messageID, reaction: $reaction})\n}\n    `;\n\nexport const RemoveReactionFromCommentWidgetMessageComponent = (props: Omit<Urql.MutationProps<RemoveReactionFromCommentWidgetMessageMutation, RemoveReactionFromCommentWidgetMessageMutationVariables>, 'query'> & { variables?: RemoveReactionFromCommentWidgetMessageMutationVariables }) => (\n  <Urql.Mutation {...props} query={RemoveReactionFromCommentWidgetMessageDocument} />\n);\n\n\nexport function useRemoveReactionFromCommentWidgetMessageMutation() {\n  return Urql.useMutation<RemoveReactionFromCommentWidgetMessageMutation, RemoveReactionFromCommentWidgetMessageMutationVariables>(RemoveReactionFromCommentWidgetMessageDocument);\n};\nexport const SubscribeToCommentWidgetDocument = gql`\n    mutation SubscribeToCommentWidget($widgetID: UUID!) {\n  subscribeToCommentWidget(input: {widgetID: $widgetID})\n}\n    `;\n\nexport const SubscribeToCommentWidgetComponent = (props: Omit<Urql.MutationProps<SubscribeToCommentWidgetMutation, SubscribeToCommentWidgetMutationVariables>, 'query'> & { variables?: SubscribeToCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={SubscribeToCommentWidgetDocument} />\n);\n\n\nexport function useSubscribeToCommentWidgetMutation() {\n  return Urql.useMutation<SubscribeToCommentWidgetMutation, SubscribeToCommentWidgetMutationVariables>(SubscribeToCommentWidgetDocument);\n};\nexport const UnsubscribeFromCommentWidgetDocument = gql`\n    mutation UnsubscribeFromCommentWidget($widgetID: UUID!) {\n  unsubscribeFromCommentWidget(input: {widgetID: $widgetID})\n}\n    `;\n\nexport const UnsubscribeFromCommentWidgetComponent = (props: Omit<Urql.MutationProps<UnsubscribeFromCommentWidgetMutation, UnsubscribeFromCommentWidgetMutationVariables>, 'query'> & { variables?: UnsubscribeFromCommentWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnsubscribeFromCommentWidgetDocument} />\n);\n\n\nexport function useUnsubscribeFromCommentWidgetMutation() {\n  return Urql.useMutation<UnsubscribeFromCommentWidgetMutation, UnsubscribeFromCommentWidgetMutationVariables>(UnsubscribeFromCommentWidgetDocument);\n};\nexport const LinkWithGitHubAccountDocument = gql`\n    mutation LinkWithGitHubAccount($code: String!) {\n  linkWithGitHubAccount(input: {code: $code})\n}\n    `;\n\nexport const LinkWithGitHubAccountComponent = (props: Omit<Urql.MutationProps<LinkWithGitHubAccountMutation, LinkWithGitHubAccountMutationVariables>, 'query'> & { variables?: LinkWithGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={LinkWithGitHubAccountDocument} />\n);\n\n\nexport function useLinkWithGitHubAccountMutation() {\n  return Urql.useMutation<LinkWithGitHubAccountMutation, LinkWithGitHubAccountMutationVariables>(LinkWithGitHubAccountDocument);\n};\nexport const UnlinkGitHubAccountDocument = gql`\n    mutation UnlinkGitHubAccount {\n  unlinkGitHubAccount\n}\n    `;\n\nexport const UnlinkGitHubAccountComponent = (props: Omit<Urql.MutationProps<UnlinkGitHubAccountMutation, UnlinkGitHubAccountMutationVariables>, 'query'> & { variables?: UnlinkGitHubAccountMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnlinkGitHubAccountDocument} />\n);\n\n\nexport function useUnlinkGitHubAccountMutation() {\n  return Urql.useMutation<UnlinkGitHubAccountMutation, UnlinkGitHubAccountMutationVariables>(UnlinkGitHubAccountDocument);\n};\nexport const PublishNotebookDocument = gql`\n    mutation PublishNotebook($gitURL: String!, $gitBranch: String!) {\n  publishNotebook(input: {gitURL: $gitURL, gitBranch: $gitBranch}) {\n    ...NotebookFields\n  }\n}\n    ${NotebookFieldsFragmentDoc}`;\n\nexport const PublishNotebookComponent = (props: Omit<Urql.MutationProps<PublishNotebookMutation, PublishNotebookMutationVariables>, 'query'> & { variables?: PublishNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={PublishNotebookDocument} />\n);\n\n\nexport function usePublishNotebookMutation() {\n  return Urql.useMutation<PublishNotebookMutation, PublishNotebookMutationVariables>(PublishNotebookDocument);\n};\nexport const UnpublishNotebookDocument = gql`\n    mutation UnpublishNotebook($notebookID: UUID!) {\n  unpublishNotebook(input: {notebookID: $notebookID})\n}\n    `;\n\nexport const UnpublishNotebookComponent = (props: Omit<Urql.MutationProps<UnpublishNotebookMutation, UnpublishNotebookMutationVariables>, 'query'> & { variables?: UnpublishNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnpublishNotebookDocument} />\n);\n\n\nexport function useUnpublishNotebookMutation() {\n  return Urql.useMutation<UnpublishNotebookMutation, UnpublishNotebookMutationVariables>(UnpublishNotebookDocument);\n};\nexport const UpdateNotebookDocument = gql`\n    mutation UpdateNotebook($notebookID: UUID!, $gitURL: String!, $gitBranch: String!) {\n  updateNotebook(input: {notebookID: $notebookID, gitURL: $gitURL, gitBranch: $gitBranch}) {\n    ...NotebookFields\n  }\n}\n    ${NotebookFieldsFragmentDoc}`;\n\nexport const UpdateNotebookComponent = (props: Omit<Urql.MutationProps<UpdateNotebookMutation, UpdateNotebookMutationVariables>, 'query'> & { variables?: UpdateNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={UpdateNotebookDocument} />\n);\n\n\nexport function useUpdateNotebookMutation() {\n  return Urql.useMutation<UpdateNotebookMutation, UpdateNotebookMutationVariables>(UpdateNotebookDocument);\n};\nexport const StarNotebookDocument = gql`\n    mutation StarNotebook($notebookID: UUID!) {\n  starNotebook(input: {notebookID: $notebookID})\n}\n    `;\n\nexport const StarNotebookComponent = (props: Omit<Urql.MutationProps<StarNotebookMutation, StarNotebookMutationVariables>, 'query'> & { variables?: StarNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={StarNotebookDocument} />\n);\n\n\nexport function useStarNotebookMutation() {\n  return Urql.useMutation<StarNotebookMutation, StarNotebookMutationVariables>(StarNotebookDocument);\n};\nexport const UnstarNotebookDocument = gql`\n    mutation UnstarNotebook($notebookID: UUID!) {\n  unstarNotebook(input: {notebookID: $notebookID})\n}\n    `;\n\nexport const UnstarNotebookComponent = (props: Omit<Urql.MutationProps<UnstarNotebookMutation, UnstarNotebookMutationVariables>, 'query'> & { variables?: UnstarNotebookMutationVariables }) => (\n  <Urql.Mutation {...props} query={UnstarNotebookDocument} />\n);\n\n\nexport function useUnstarNotebookMutation() {\n  return Urql.useMutation<UnstarNotebookMutation, UnstarNotebookMutationVariables>(UnstarNotebookDocument);\n};\nexport const DeleteNotificationDocument = gql`\n    mutation DeleteNotification($notificationID: UUID!) {\n  deleteNotification(input: {notificationID: $notificationID})\n}\n    `;\n\nexport const DeleteNotificationComponent = (props: Omit<Urql.MutationProps<DeleteNotificationMutation, DeleteNotificationMutationVariables>, 'query'> & { variables?: DeleteNotificationMutationVariables }) => (\n  <Urql.Mutation {...props} query={DeleteNotificationDocument} />\n);\n\n\nexport function useDeleteNotificationMutation() {\n  return Urql.useMutation<DeleteNotificationMutation, DeleteNotificationMutationVariables>(DeleteNotificationDocument);\n};\nexport const DeleteAllNotificationsDocument = gql`\n    mutation DeleteAllNotifications {\n  deleteAllNotifications\n}\n    `;\n\nexport const DeleteAllNotificationsComponent = (props: Omit<Urql.MutationProps<DeleteAllNotificationsMutation, DeleteAllNotificationsMutationVariables>, 'query'> & { variables?: DeleteAllNotificationsMutationVariables }) => (\n  <Urql.Mutation {...props} query={DeleteAllNotificationsDocument} />\n);\n\n\nexport function useDeleteAllNotificationsMutation() {\n  return Urql.useMutation<DeleteAllNotificationsMutation, DeleteAllNotificationsMutationVariables>(DeleteAllNotificationsDocument);\n};\nexport const SetUserInfoDocument = gql`\n    mutation SetUserInfo($cover: String!, $bio: String!, $location: String!, $language: String!, $name: String!, $avatar: String!, $editorCursorColor: String!) {\n  setUserInfo(input: {cover: $cover, bio: $bio, location: $location, language: $language, name: $name, avatar: $avatar, editorCursorColor: $editorCursorColor}) {\n    ...ViewerFields\n  }\n}\n    ${ViewerFieldsFragmentDoc}`;\n\nexport const SetUserInfoComponent = (props: Omit<Urql.MutationProps<SetUserInfoMutation, SetUserInfoMutationVariables>, 'query'> & { variables?: SetUserInfoMutationVariables }) => (\n  <Urql.Mutation {...props} query={SetUserInfoDocument} />\n);\n\n\nexport function useSetUserInfoMutation() {\n  return Urql.useMutation<SetUserInfoMutation, SetUserInfoMutationVariables>(SetUserInfoDocument);\n};\nexport const DeleteWidgetDocument = gql`\n    mutation DeleteWidget($id: UUID!) {\n  deleteWidget(input: {id: $id})\n}\n    `;\n\nexport const DeleteWidgetComponent = (props: Omit<Urql.MutationProps<DeleteWidgetMutation, DeleteWidgetMutationVariables>, 'query'> & { variables?: DeleteWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={DeleteWidgetDocument} />\n);\n\n\nexport function useDeleteWidgetMutation() {\n  return Urql.useMutation<DeleteWidgetMutation, DeleteWidgetMutationVariables>(DeleteWidgetDocument);\n};\nexport const UpdateWidgetDocument = gql`\n    mutation UpdateWidget($id: UUID!, $description: String!, $source: String!) {\n  updateWidget(input: {id: $id, description: $description, source: $source})\n}\n    `;\n\nexport const UpdateWidgetComponent = (props: Omit<Urql.MutationProps<UpdateWidgetMutation, UpdateWidgetMutationVariables>, 'query'> & { variables?: UpdateWidgetMutationVariables }) => (\n  <Urql.Mutation {...props} query={UpdateWidgetDocument} />\n);\n\n\nexport function useUpdateWidgetMutation() {\n  return Urql.useMutation<UpdateWidgetMutation, UpdateWidgetMutationVariables>(UpdateWidgetDocument);\n};\nexport const CommentWidgetDocument = gql`\n    query CommentWidget($widgetID: UUID!) {\n  widget(id: $widgetID) {\n    ...CommentWidgetFields\n  }\n}\n    ${CommentWidgetFieldsFragmentDoc}`;\n\nexport const CommentWidgetComponent = (props: Omit<Urql.QueryProps<CommentWidgetQuery, CommentWidgetQueryVariables>, 'query'> & { variables: CommentWidgetQueryVariables }) => (\n  <Urql.Query {...props} query={CommentWidgetDocument} />\n);\n\n\nexport function useCommentWidgetQuery(options: Omit<Urql.UseQueryArgs<CommentWidgetQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<CommentWidgetQuery>({ query: CommentWidgetDocument, ...options });\n};\nexport const CommentWidgetMessagesDocument = gql`\n    query CommentWidgetMessages($widgetID: UUID!, $before: UUID!, $after: UUID!, $first: Int!, $last: Int!) {\n  widget(id: $widgetID) {\n    instance {\n      type\n      ... on CommentWidgetInstance {\n        type\n        commentWidget {\n          messages(before: $before, after: $after, first: $first, last: $last) {\n            ...CommentWidgetMessageConnectionFields\n          }\n        }\n      }\n    }\n  }\n}\n    ${CommentWidgetMessageConnectionFieldsFragmentDoc}`;\n\nexport const CommentWidgetMessagesComponent = (props: Omit<Urql.QueryProps<CommentWidgetMessagesQuery, CommentWidgetMessagesQueryVariables>, 'query'> & { variables: CommentWidgetMessagesQueryVariables }) => (\n  <Urql.Query {...props} query={CommentWidgetMessagesDocument} />\n);\n\n\nexport function useCommentWidgetMessagesQuery(options: Omit<Urql.UseQueryArgs<CommentWidgetMessagesQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<CommentWidgetMessagesQuery>({ query: CommentWidgetMessagesDocument, ...options });\n};\nexport const GitHubUserDocument = gql`\n    query GitHubUser {\n  viewer {\n    githubUser {\n      login\n      avatar\n      email\n    }\n  }\n}\n    `;\n\nexport const GitHubUserComponent = (props: Omit<Urql.QueryProps<GitHubUserQuery, GitHubUserQueryVariables>, 'query'> & { variables?: GitHubUserQueryVariables }) => (\n  <Urql.Query {...props} query={GitHubUserDocument} />\n);\n\n\nexport function useGitHubUserQuery(options: Omit<Urql.UseQueryArgs<GitHubUserQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<GitHubUserQuery>({ query: GitHubUserDocument, ...options });\n};\nexport const NotebooksDocument = gql`\n    query Notebooks($query: String = \"\", $orderBy: NotebookOrderBy = TOTAL_STARS_COUNT, $page: Int = 0, $perPage: Int = 10) {\n  notebooks(query: $query, orderBy: $orderBy, page: $page, perPage: $perPage) {\n    ...NotebookFields\n  }\n}\n    ${NotebookFieldsFragmentDoc}`;\n\nexport const NotebooksComponent = (props: Omit<Urql.QueryProps<NotebooksQuery, NotebooksQueryVariables>, 'query'> & { variables?: NotebooksQueryVariables }) => (\n  <Urql.Query {...props} query={NotebooksDocument} />\n);\n\n\nexport function useNotebooksQuery(options: Omit<Urql.UseQueryArgs<NotebooksQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<NotebooksQuery>({ query: NotebooksDocument, ...options });\n};\nexport const NotificationsDocument = gql`\n    query Notifications($before: UUID!, $after: UUID!, $first: Int, $last: Int) {\n  viewer {\n    notifications(before: $before, after: $after, first: $first, last: $last) {\n      pageInfo {\n        ...PageInfoFields\n      }\n      edges {\n        cursor\n        node {\n          ...NotificationFields\n        }\n      }\n    }\n  }\n}\n    ${PageInfoFieldsFragmentDoc}\n${NotificationFieldsFragmentDoc}`;\n\nexport const NotificationsComponent = (props: Omit<Urql.QueryProps<NotificationsQuery, NotificationsQueryVariables>, 'query'> & { variables: NotificationsQueryVariables }) => (\n  <Urql.Query {...props} query={NotificationsDocument} />\n);\n\n\nexport function useNotificationsQuery(options: Omit<Urql.UseQueryArgs<NotificationsQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<NotificationsQuery>({ query: NotificationsDocument, ...options });\n};\nexport const ViewerDocument = gql`\n    query Viewer {\n  viewer {\n    ...ViewerFields\n  }\n}\n    ${ViewerFieldsFragmentDoc}`;\n\nexport const ViewerComponent = (props: Omit<Urql.QueryProps<ViewerQuery, ViewerQueryVariables>, 'query'> & { variables?: ViewerQueryVariables }) => (\n  <Urql.Query {...props} query={ViewerDocument} />\n);\n\n\nexport function useViewerQuery(options: Omit<Urql.UseQueryArgs<ViewerQueryVariables>, 'query'> = {}) {\n  return Urql.useQuery<ViewerQuery>({ query: ViewerDocument, ...options });\n};","import { UUIDNil } from \"./utils\";\n\nexport interface Summary {\n  title: string;\n  summary: string;\n  images: string[]; // If has `title`, then images[0] is cover.\n  tags: string[]; // TODO: support tags\n  html: string; // original html\n}\n\n/*\nexport async function getTopicsAndMentionsFromHTML(\n  html: string,\n  ribbit: Ribbit\n): Promise<{\n  topics: string[];\n  mentions: { name: string; address: string }[];\n}> {\n  const div = document.createElement(\"div\");\n  const topics = [];\n  const mentions = [];\n  div.innerHTML = html;\n\n  const tagElems = div.getElementsByClassName(\"tag\");\n  for (let i = 0; i < tagElems.length; i++) {\n    const tagElem = tagElems[i] as HTMLAnchorElement;\n    if (tagElem.classList.contains(\"tag-mention\")) {\n      const mention = tagElem.getAttribute(\"data-mention\");\n      const userInfo = await ribbit.getUserInfoFromUsername(mention);\n      mentions.push({\n        name: userInfo.username,\n        address: userInfo.address\n      });\n    } else if (tagElem.classList.contains(\"tag-topic\")) {\n      const topic = tagElem.getAttribute(\"data-topic\");\n      topics.push(topic);\n    }\n  }\n  div.remove();\n\n  return {\n    topics: Array.from(new Set(topics)),\n    mentions\n  };\n}\n*/\n\nexport function getHeaderFromMarkdown(markdown: string): string {\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    return titleMatch[0].replace(/^#/, \"\").trim();\n  }\n  return \"\";\n}\n\nexport function getMentionsFromMarkdown(markdown: string): string[] {\n  return (markdown.match(/@(?:[a-zA-Z\\d]+-)*[a-zA-Z\\d]+/g) || [])\n    .map((username) => username.replace(/^@/, \"\").toLocaleLowerCase())\n    .filter(\n      (username, index, self) =>\n        index === self.findIndex((username2) => username === username2),\n    );\n}\n\nexport async function generateSummaryFromMarkdown(\n  markdown: string,\n): Promise<Summary> {\n  let title = \"\",\n    summary = \"\",\n    images: string[] = [];\n  markdown = markdown.replace(/^---([\\w\\W]+?\\n---)/, \"\").trim(); // Remove front matter\n  let contentString = markdown;\n\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    title = titleMatch[0].replace(/^#/, \"\").trim();\n    const aheadString = markdown\n      .slice(0, markdown.indexOf(titleMatch[0]))\n      .trim();\n    contentString = markdown.slice(\n      markdown.indexOf(titleMatch[0]) + titleMatch[0].length,\n      markdown.length,\n    );\n    const coverMatch = aheadString.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n    if (coverMatch && coverMatch.length) {\n      images.push(coverMatch[0].match(/\\(([^)\"]+?)\\)/)[1].trim());\n    }\n  }\n\n  const coverImagesMatch = markdown.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n  if (coverImagesMatch && coverImagesMatch.length) {\n    coverImagesMatch.forEach((mdImage) => {\n      images.push(mdImage.match(/\\(([^)\"]+?)\\)/)[1].trim());\n    });\n    images = images.filter(\n      (image, index, self) => index === self.findIndex((m) => m === image),\n    );\n  }\n\n  summary = contentString\n    .split(\"\\n\")\n    .filter(\n      (x) =>\n        x.trim().length > 0 &&\n        !x.match(/!\\[.*?\\]\\(.+?\\)/) && // Remove image\n        !x.match(/<!--\\s*@.+?-->/), // Remove widget\n    )\n    .map((x) => x.replace(/#+\\s(.+)\\s*$/, \"**$1**\").trim()) // Replace headers to bold\n    .slice(0, 10)\n    .join(\"  \\n\");\n\n  return {\n    title,\n    summary,\n    images,\n    tags: [],\n    html: \"\",\n  };\n}\n\nexport const EmptyPageInfo = {\n  hasPreviousPage: false,\n  hasNextPage: false,\n  startCursor: UUIDNil,\n  endCursor: UUIDNil,\n};\n","import { createClient, defaultExchanges, subscriptionExchange } from \"urql\";\nimport { getGraphQLEndpoint } from \"./utils\";\n// import { SubscriptionClient } from \"subscriptions-transport-ws\";\n\n/*\nconst subscriptionClient = new SubscriptionClient(\n  getGraphQLEndpoint().replace(/^http/, \"ws\"),\n  {\n    connectionParams: () => {\n      const auth = { Authorization: `Bearer ${localStorage.getItem(\"token\")}` };\n      return auth;\n    },\n    reconnect: true\n  }\n);\n*/\n\nexport const GraphQLClient = createClient({\n  url: getGraphQLEndpoint(),\n  exchanges: [\n    ...defaultExchanges,\n    // Disable subscriptions for now\n    /*\n    subscriptionExchange({\n      forwardSubscription: operation => subscriptionClient.request(operation)\n    })*/\n  ],\n  fetchOptions: {\n    cache: \"no-cache\",\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n});\n","import {\n  Avatar,\n  Box,\n  Typography,\n  Card,\n  IconButton,\n  Popover,\n  Chip,\n  Dialog,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { formatRelative } from \"date-fns/esm\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport React, { useState, useEffect } from \"react\";\nimport { Emoji, Picker as EmojiPicker } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { Reply, StickerEmoji, FileEditOutline } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { languageCodeToDateFNSLocale } from \"../../../i18n/i18n\";\nimport {\n  useAddReactionToCommentWidgetMessageMutation,\n  useRemoveReactionFromCommentWidgetMessageMutation,\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n} from \"../../../generated/graphql\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { postprocessPreview } from \"../../../utilities/preview\";\n\nconst messageMarginLeft = 48;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    chatMessage: {\n      \"width\": \"100%\",\n      \"paddingLeft\": theme.spacing(2),\n      \"paddingRight\": theme.spacing(2),\n      \"boxSizing\": \"border-box\",\n      \"cursor\": \"pointer\",\n      \"&:first-child\": {\n        marginTop: theme.spacing(2),\n      },\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6\",\n      },\n      \"&:hover .preview\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    avatarPanel: {\n      display: \"grid\",\n      gridTemplateAreas: `\"avatar username\"\n                          \"avatar time\"`,\n      justifyContent: \"start\",\n      alignItems: \"center\",\n      gridColumnGap: theme.spacing(2),\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n    },\n    username: {\n      gridArea: \"username\",\n    },\n    time: {\n      gridArea: \"time\",\n    },\n    message: {\n      marginLeft: `${messageMarginLeft}px`,\n      cursor: \"pointer\",\n      backgroundColor: \"inherit !important\",\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    reactions: {\n      marginLeft: `${messageMarginLeft}px`,\n      marginBottom: theme.spacing(2),\n    },\n    singleTime: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    modifiedCaption: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nconst actionBtnClass = {\n  width: \"20px\",\n  height: \"20px\",\n};\n\ninterface Props {\n  commentWidget: CommentWidgetFieldsFragment;\n  message: CommentWidgetMessageFieldsFragment;\n  previousMessage?: CommentWidgetMessageFieldsFragment;\n  mentionUser: (username: string) => void;\n  onModifyChatMessage: (chatMessageID: string) => void;\n}\nexport function CommentMessage(props: Props) {\n  const classes = useStyles(props);\n  const message = props.message;\n  const previousMessage = props.previousMessage;\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [\n    resAddReactionToCommentWidgetMessage,\n    executeAddReactionToCommentWidgetMessageMutation,\n  ] = useAddReactionToCommentWidgetMessageMutation();\n  const [\n    resRemoveReactionFromCommentWidgetMessage,\n    executeRemoveReactionFromCommentWidgetMessageMutation,\n  ] = useRemoveReactionFromCommentWidgetMessageMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  useEffect(() => {\n    if (resAddReactionToCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resAddReactionToCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resAddReactionToCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (resRemoveReactionFromCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resRemoveReactionFromCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resRemoveReactionFromCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, message.markdown);\n      postprocessPreview(\n        previewElement,\n        null, // globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, message.markdown]);\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(anchorEl ? null : (event.target as any));\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleReply = () => {\n    props.mentionUser(message.author.username);\n    handleClose();\n  };\n  const openPopper = Boolean(anchorEl);\n  const modified = message.createdAt !== message.updatedAt;\n\n  function updateReactionSummaries(reaction: string) {\n    let found = false;\n    for (let i = 0; i < message.reactionSummaries.length; i++) {\n      if (message.reactionSummaries[i].reaction === reaction) {\n        found = true;\n        message.reactionSummaries[i].count += 1;\n        message.reactionSummaries[i].selfAuthored = true;\n        break;\n      }\n    }\n    if (!found) {\n      message.reactionSummaries = [\n        {\n          reaction: reaction,\n          count: 1,\n          selfAuthored: true,\n        },\n        ...message.reactionSummaries,\n      ];\n    }\n    setForceUpdate(Date.now());\n  }\n  return (\n    <Box className={clsx(classes.chatMessage)} onClick={handleClick}>\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username ? null : (\n        <Box className={clsx(classes.avatarPanel)}>\n          <Avatar\n            onClick={() => {\n              /*\n              if (message.authorVisibility !== AuthorVisibility.Anonymous) {\n                window.open(\n                  `${CROSSNOTE_CONFIG.homePage}/user/${chatMessage.author.username}`\n                );\n              }\n              */\n            }}\n            variant={\"rounded\"}\n            className={clsx(classes.avatar)}\n            src={\n              message.author.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(message.author.username), 80).toString()\n            }\n          ></Avatar>\n          <Typography className={clsx(classes.username)}>\n            {message.author.username}\n          </Typography>\n          <Typography\n            className={clsx(classes.time)}\n            variant=\"body2\"\n            color={\"textSecondary\"}\n          >\n            {formatRelative(new Date(message.createdAt), new Date(), {\n              locale: languageCodeToDateFNSLocale(\n                globalContainers.settingsContainer.language,\n              ),\n            })}\n          </Typography>\n        </Box>\n      )}\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username &&\n      new Date(message.createdAt).getTime() -\n        new Date(previousMessage.createdAt).getTime() >=\n        1000 * 60 ? (\n        <Typography\n          className={clsx(classes.time, classes.singleTime)}\n          variant=\"body2\"\n          color={\"textSecondary\"}\n        >\n          {formatRelative(new Date(message.createdAt), new Date(), {\n            locale: languageCodeToDateFNSLocale(\n              globalContainers.settingsContainer.language,\n            ),\n          })}\n        </Typography>\n      ) : null}\n      {modified && (\n        <Typography\n          variant={\"caption\"}\n          color={\"textSecondary\"}\n          className={clsx(classes.modifiedCaption)}\n        >\n          {t(\"widget/crossnote.comment/modified-comment\")}\n        </Typography>\n      )}\n      <div\n        className={clsx(classes.message) + \" preview\"}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      <Box className={clsx(classes.reactions)}>\n        {message.reactionSummaries\n          .sort((x, y) => {\n            let weightX = 1;\n            let weightY = 1;\n            if (x.selfAuthored) {\n              weightX = 100;\n            }\n            if (y.selfAuthored) {\n              weightY = 100;\n            }\n            return x.count * weightX - y.count * weightY;\n          })\n          .map((reactionSummary) => {\n            return (\n              <Chip\n                variant={reactionSummary.selfAuthored ? \"default\" : \"outlined\"}\n                size=\"medium\"\n                label={reactionSummary.count.toString()}\n                color={\"primary\"}\n                key={reactionSummary.reaction}\n                style={{ marginRight: \"8px\" }}\n                className={clsx(classes.reactionChip)}\n                onClick={() => {\n                  if (!globalContainers.cloudContainer.loggedIn) {\n                    globalContainers.cloudContainer.setAuthDialogOpen(true);\n                  } else if (reactionSummary.selfAuthored) {\n                    executeRemoveReactionFromCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    reactionSummary.selfAuthored = false;\n                    reactionSummary.count -= 1; // TODO: Should we remove the reaction if it reaches 0?\n                    setForceUpdate(Date.now());\n                  } else {\n                    executeAddReactionToCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    updateReactionSummaries(reactionSummary.reaction);\n                  }\n                }}\n                avatar={\n                  <Avatar>\n                    <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                  </Avatar>\n                }\n              />\n            );\n          })}\n      </Box>\n\n      <Popover\n        open={openPopper}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Card>\n          <Tooltip title={t(\"widget/crossnote.comment/reply-to-this-user\")}>\n            <IconButton onClick={handleReply}>\n              <Reply style={actionBtnClass}></Reply>\n            </IconButton>\n          </Tooltip>\n          <Tooltip\n            title={t(\"widget/crossnote.comment/add-reaction-to-this-comment\")}\n          >\n            <IconButton onClick={() => setEmojiPickerOpen(true)}>\n              <StickerEmoji style={actionBtnClass}></StickerEmoji>\n            </IconButton>\n          </Tooltip>\n          {globalContainers.cloudContainer.loggedIn &&\n            message.author.id === globalContainers.cloudContainer.viewer.id && (\n              <Tooltip title={t(\"widget/crossnote.comment/edit-this-message\")}>\n                <IconButton\n                  onClick={() => props.onModifyChatMessage(message.id)}\n                >\n                  <FileEditOutline style={actionBtnClass}></FileEditOutline>\n                </IconButton>\n              </Tooltip>\n            )}\n        </Card>\n      </Popover>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          emoji={\"\"}\n          showSkinTones={false /* Disable skin for now */}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMessageMutation({\n                messageID: message.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n              handleClose();\n            }\n          }}\n        />\n      </Dialog>\n      <Box style={{ display: \"none\" }}>{forceUpdate}</Box>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  makeStyles,\n  createStyles,\n  Theme,\n  Button,\n  Box,\n  Card,\n  Typography,\n  darken,\n} from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nimport { openURL } from \"../../../utilities/preview\";\nimport { Note } from \"../../../lib/notebook\";\nconst VickyMD = require(\"vickymd/core\");\n\nexport const ChatMessageEditorHeight = \"150\";\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: \"100%\",\n      height: `${ChatMessageEditorHeight}px`,\n      display: \"flex\",\n      flexDirection: \"column\",\n      // position: \"absolute\",\n      bottom: \"0\",\n    },\n    toolbar: {\n      display: \"flex\",\n      overflow: \"hidden\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n      justifyContent: \"flex-end\",\n      padding: \"1px 4px 1px 4px\",\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    toolbarLeft: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"height\": \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    sendButton: {\n      width: \"100px\",\n    },\n  }),\n);\ninterface Props {\n  sendMessage: (message: string) => void;\n  sendingMessage?: boolean;\n  updateMessage: (chatMessageID: string, message: string) => void;\n  updateMessageID?: string;\n  updateMessageMarkdown?: string;\n  cancelUpdatingMessage: () => void;\n  updatingMessage?: boolean;\n  setEditor: (editor: CodeMirrorEditor) => void;\n}\n\nexport function CommentEditor(props: Props) {\n  const classes = useStyles(props);\n  const note: Note = null; // globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(\"\");\n      editor.setOption(\"lineNumbers\", false);\n      editor.focus();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    props.setEditor(editor);\n  }, [editor, props]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  useEffect(() => {\n    if (props.updateMessageID && props.updateMessageMarkdown) {\n      editor.setValue(props.updateMessageMarkdown);\n    }\n  }, [props.updateMessageID, props.updateMessageMarkdown, editor]);\n\n  return (\n    <Box className={clsx(classes.root)}>\n      <Box className={clsx(classes.toolbar)}>\n        {props.updateMessageID ? (\n          <Box>\n            <Button\n              variant={\"contained\"}\n              color={\"secondary\"}\n              onClick={() => {\n                props.cancelUpdatingMessage();\n              }}\n            >\n              {t(\"general/cancel\")}\n            </Button>\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              onClick={() => {\n                if (editor) {\n                  props.updateMessage(\n                    props.updateMessageID,\n                    editor.getValue() || \"\",\n                  );\n                }\n              }}\n              disabled={props.updatingMessage}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {props.updatingMessage\n                ? t(\"general/updating\")\n                : t(\"general/update\")}\n            </Button>\n          </Box>\n        ) : (\n          <Box>\n            {globalContainers.cloudContainer.loggedIn ? (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  if (editor) {\n                    props.sendMessage(editor.getValue() || \"\");\n                    editor.setValue(\"\");\n                  }\n                }}\n                disabled={props.sendingMessage}\n                className={clsx(classes.sendButton)}\n              >\n                {props.sendingMessage\n                  ? t(\"general/sending\")\n                  : t(\"general/send\")}\n              </Button>\n            ) : (\n              <Button\n                variant={\"contained\"}\n                color={\"primary\"}\n                onClick={() => {\n                  globalContainers.cloudContainer.setAuthDialogOpen(true);\n                }}\n              >\n                <Typography variant={\"body2\"}>{\"Log in\"}</Typography>\n              </Button>\n            )}\n          </Box>\n        )}\n      </Box>\n      <Card className={clsx(classes.editorWrapper)} elevation={4}>\n        <textarea\n          id=\"outlined-multiline-flexible\"\n          className={classes.textarea}\n          ref={(element: HTMLTextAreaElement) => {\n            setTextAreaElement(element);\n          }}\n        />\n      </Card>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  Typography,\n  DialogTitle,\n  Box,\n  IconButton,\n  DialogActions,\n  Button,\n  useMediaQuery,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n  PageInfo,\n  useCommentWidgetMessagesQuery,\n  usePostCommentWidgetMessageMutation,\n  useUpdateCommentWidgetMessageMutation,\n  useSubscribeToCommentWidgetMutation,\n  useUnsubscribeFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  EmptyPageInfo,\n  getMentionsFromMarkdown,\n} from \"../../../utilities/note\";\nimport { UUIDNil } from \"../../../utilities/utils\";\nimport { BellOutline, Bell, Close } from \"mdi-material-ui\";\nimport { CommentMessage } from \"./CommentMessages\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport { CommentEditor } from \"./CommentEditor\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    commentWrapper: {\n      padding: \"0\",\n    },\n    messages: {},\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  commentWidget: CommentWidgetFieldsFragment;\n}\nexport function CommentDialog(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const commentWidget = props.commentWidget;\n  const { t } = useTranslation();\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [messages, setMessages] = useState<\n    CommentWidgetMessageFieldsFragment[]\n  >(\n    commentWidget.instance.commentWidget.messages.edges.map(\n      (edge) => edge.node,\n    ),\n  );\n  const [messagesElement, setMessagesElement] = useState<HTMLDivElement>(null);\n  const [\n    latestPulledMessagePageInfo,\n    setLatestPulledMessagePageInfo,\n  ] = useState<PageInfo>(\n    commentWidget.instance.commentWidget.messages.pageInfo,\n  );\n  const [updateMessageID, setUpdateMessageID] = useState<string>(\"\");\n  const [\n    resMessagesAfter,\n    executeMessagesAfterQuery,\n  ] = useCommentWidgetMessagesQuery({\n    variables: {\n      widgetID: commentWidget.id,\n      before: UUIDNil,\n      after: latestPulledMessagePageInfo.endCursor,\n      first: 20,\n      last: 0,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resPostMessage,\n    executePostMessageMutation,\n  ] = usePostCommentWidgetMessageMutation();\n  const [\n    resUpdateMessage,\n    executeUpdateMessageMutation,\n  ] = useUpdateCommentWidgetMessageMutation();\n  const [\n    resSubscribeToCommentWidget,\n    executeSubscribeToCommentWidgetMutation,\n  ] = useSubscribeToCommentWidgetMutation();\n  const [\n    resUnsubscribeFromCommentWidget,\n    executeUnsubscribeFromCommentWidgetMutation,\n  ] = useUnsubscribeFromCommentWidgetMutation();\n\n  const mentionUser = useCallback(\n    (username: string) => {\n      if (editor) {\n        editor.focus();\n        editor.replaceSelection(`@${username} `);\n        editor.focus();\n      }\n    },\n    [editor],\n  );\n\n  const subscribeToChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = true;\n      executeSubscribeToCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeSubscribeToCommentWidgetMutation]);\n\n  const unsubscribeFromChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = false;\n      executeUnsubscribeFromCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeUnsubscribeFromCommentWidgetMutation]);\n\n  const sendMessage = useCallback(\n    (message: string = \"\") => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executePostMessageMutation({\n        widgetID: commentWidget.id,\n        markdown: message,\n        notifyUsers: getMentionsFromMarkdown(message),\n      });\n    },\n    [commentWidget, executePostMessageMutation],\n  );\n\n  const updateMessage = useCallback(\n    (messageID: string, message: string) => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executeUpdateMessageMutation({\n        messageID: messageID,\n        markdown: message,\n      });\n    },\n    [commentWidget, executeUpdateMessageMutation],\n  );\n\n  const addMessage = useCallback(\n    (message: CommentWidgetMessageFieldsFragment) => {\n      setMessages((messages) =>\n        [message, ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    },\n    [],\n  );\n\n  const scrollMessagesToBottom = useCallback(() => {\n    if (messagesElement) {\n      messagesElement.scrollTop = messagesElement.scrollHeight * 10;\n    }\n  }, [messagesElement]);\n\n  const fetchPreviousMessages = useCallback(() => {\n    if (latestPulledMessagePageInfo.hasNextPage) {\n      executeMessagesAfterQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [executeMessagesAfterQuery, latestPulledMessagePageInfo]);\n\n  useEffect(() => {\n    if (resSubscribeToCommentWidget.error) {\n      // console.log(resSubscribeToCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-subscribe-to-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resSubscribeToCommentWidget, t]);\n\n  useEffect(() => {\n    if (resUnsubscribeFromCommentWidget.error) {\n      // console.log(resUnsubscribeFromCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-unsubscribe-from-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resUnsubscribeFromCommentWidget, t]);\n\n  useEffect(() => {\n    if (resPostMessage.fetching) {\n    } else if (resPostMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"widget/crossnote.comment/post-comment-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resPostMessage.data) {\n      const message = resPostMessage.data.postCommentWidgetMessage;\n      addMessage(message);\n      scrollMessagesToBottom();\n    }\n  }, [resPostMessage, addMessage, scrollMessagesToBottom, t]);\n\n  useEffect(() => {\n    if (resUpdateMessage.data) {\n      const message = resUpdateMessage.data.updateCommentWidgetMessage;\n      addMessage(message);\n      setUpdateMessageID(\"\");\n      if (editor) {\n        editor.setValue(\"\");\n      }\n    }\n  }, [resUpdateMessage, addMessage, editor]);\n\n  useEffect(() => {\n    if (resMessagesAfter.fetching) {\n    } else if (resMessagesAfter.error) {\n    } else if (resMessagesAfter.data) {\n      const connection =\n        resMessagesAfter.data.widget.instance.commentWidget.messages;\n      setLatestPulledMessagePageInfo(connection.pageInfo);\n      if (!connection.edges.length) {\n        return;\n      }\n      setMessages((messages) =>\n        [...connection.edges.map((edge) => edge.node), ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    }\n  }, [resMessagesAfter]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={props.onClose}\n      fullWidth={true}\n      fullScreen={fullScreen}\n    >\n      <DialogTitle style={{ paddingBottom: \"0\" }}>\n        <Box className={classes.topBar}>\n          <Box className={classes.row}>\n            {fullScreen && (\n              <IconButton onClick={() => props.onClose()}>\n                <Close></Close>\n              </IconButton>\n            )}\n            <Typography>{t(\"general/Comments\")}</Typography>\n          </Box>\n          <Tooltip\n            title={\n              commentWidget.instance.commentWidget.subscribed\n                ? t(\"widget/crossnote.comment/unsubscribe-info\")\n                : t(\"widget/crossnote.comment/subscribe-info\")\n            }\n          >\n            <IconButton\n              color={\"primary\"}\n              onClick={() => {\n                if (commentWidget.instance.commentWidget.subscribed) {\n                  unsubscribeFromChatGroup();\n                } else {\n                  subscribeToChatGroup();\n                }\n              }}\n            >\n              {commentWidget.instance.commentWidget.subscribed ? (\n                <Bell></Bell>\n              ) : (\n                <BellOutline></BellOutline>\n              )}\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </DialogTitle>\n      <DialogContent className={clsx(classes.commentWrapper)}>\n        <div\n          className={clsx(classes.messages)}\n          ref={(element: HTMLDivElement) => {\n            setMessagesElement(element);\n          }}\n        >\n          {messages.map((message, index) => {\n            const commentMessage = (\n              <CommentMessage\n                commentWidget={commentWidget}\n                message={message}\n                previousMessage={index > 0 ? messages[index - 1] : null}\n                mentionUser={mentionUser}\n                key={message.id}\n                onModifyChatMessage={(messageID: string) => {\n                  setUpdateMessageID(messageID);\n                }}\n              ></CommentMessage>\n            );\n            if (\n              latestPulledMessagePageInfo.hasNextPage &&\n              latestPulledMessagePageInfo.endCursor === message.id\n            ) {\n              return (\n                <Box key={message.id}>\n                  {commentMessage}\n                  <Box\n                    style={{\n                      textAlign: \"center\",\n                      padding: \"16px\",\n                      marginBottom: \"16px\",\n                    }}\n                  >\n                    <Button\n                      variant={\"outlined\"}\n                      color={\"secondary\"}\n                      onClick={fetchPreviousMessages}\n                      disabled={resMessagesAfter.fetching}\n                    >\n                      {t(\"widget/crossnote.comment/view-more-comments\")}\n                    </Button>\n                  </Box>\n                </Box>\n              );\n            } else {\n              return commentMessage;\n            }\n          })}\n        </div>\n      </DialogContent>\n      <DialogActions style={{ padding: \"0\" }}>\n        <CommentEditor\n          sendMessage={(message) => {\n            sendMessage(message);\n          }}\n          sendingMessage={resPostMessage.fetching}\n          updateMessage={(messageID, message) => {\n            updateMessage(messageID, message);\n          }}\n          cancelUpdatingMessage={() => {\n            setUpdateMessageID(\"\");\n          }}\n          updateMessageID={updateMessageID}\n          updateMessageMarkdown={\n            updateMessageID\n              ? messages.filter((message) => message.id === updateMessageID)[0]\n                  .markdown\n              : \"\"\n          }\n          updatingMessage={resUpdateMessage.fetching}\n          setEditor={setEditor}\n        ></CommentEditor>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  useDeleteWidgetMutation,\n  useUpdateWidgetMutation,\n} from \"../../../generated/graphql\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport {\n  Box,\n  Avatar,\n  Tooltip,\n  IconButton,\n  Dialog,\n  DialogContent,\n  DialogActions,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  TrashCanOutline,\n  Pencil,\n  ContentSave,\n  Cancel,\n  LinkVariant,\n} from \"mdi-material-ui\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { Widget } from \"../../../generated/graphql\";\nimport { browserHistory } from \"../../../utilities/history\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { setTheme } from \"../../../themes/manager\";\nconst VickyMD = require(\"vickymd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      width: \"100%\",\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    widgetTitle: {\n      marginLeft: `${theme.spacing(1)}px !important`,\n    },\n    widgetSourceLink: {\n      marginTop: `8px`,\n      marginLeft: theme.spacing(0.5),\n    },\n    actionButtons: {\n      position: \"absolute\",\n      right: \"0\",\n      top: \"0\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"marginTop\": theme.spacing(2),\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      \"backgroundColor\": \"inherit !important\",\n      \"paddingTop\": theme.spacing(1),\n      \"paddingBottom\": theme.spacing(1),\n      \"& p:last-child\": {\n        marginBottom: \"0 !important\",\n      },\n      \"& br\": {\n        // display: \"none\"\n      },\n    },\n  }),\n);\n\ninterface Props {\n  widget: Widget;\n  removeSelf?: () => void;\n  isPreview: Boolean;\n}\n\nexport function WidgetTopPanel(props: Props) {\n  const classes = useStyles(props);\n  const widget = props.widget;\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n\n  const [\n    resDeleteWidget,\n    executeDeleteWidgetMutation,\n  ] = useDeleteWidgetMutation();\n  const [\n    resUpdateWidget,\n    executeUpdateWidgetMutation,\n  ] = useUpdateWidgetMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [widgetSource, setWidgetSource] = useState<string>(\"\");\n\n  const deleteWidget = useCallback(() => {\n    if (widget && widget.id) {\n      executeDeleteWidgetMutation({\n        id: widget.id,\n      });\n    }\n  }, [widget, executeDeleteWidgetMutation]);\n\n  const updateWidget = useCallback(() => {\n    if (editor && widget) {\n      const description = editor.getValue() || widget.description;\n      executeUpdateWidgetMutation({\n        id: widget.id,\n        description,\n        source: widgetSource,\n      });\n      widget.description = description;\n      widget.source = widgetSource;\n      setForceUpdate(Date.now());\n    }\n    setEditDialogOpen(false);\n  }, [editor, widget, executeUpdateWidgetMutation, widgetSource]);\n\n  const closeEditDialog = useCallback(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    }\n    setEditDialogOpen(false);\n  }, [widget]);\n\n  // Delete widget\n  useEffect(() => {\n    if (!widget.id) {\n      return;\n    }\n    const err = () => {\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-delete-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n    };\n    if (resDeleteWidget.error) {\n      err();\n    } else if (resDeleteWidget.data) {\n      if (resDeleteWidget.data.deleteWidget) {\n        resDeleteWidget.data = null;\n        if (props.removeSelf) {\n          props.removeSelf();\n        }\n      } else {\n        err();\n      }\n    }\n  }, [resDeleteWidget, t, widget, props]);\n\n  useEffect(() => {\n    if (widget && previewElement) {\n      renderPreview(previewElement, widget.description);\n    }\n  }, [widget, previewElement, forceUpdate]);\n\n  useEffect(() => {\n    if (!widget) {\n      return;\n    }\n\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(widget.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      editor.focus();\n      setEditor(editor);\n\n      return () => {\n        setEditor(null);\n        setTextAreaElement(null);\n      };\n    }\n  }, [textAreaElement, widget]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    } else {\n      setWidgetSource(\"\");\n    }\n  }, [widget]);\n\n  return (\n    <Box className={clsx(classes.topPanel)}>\n      <div\n        className={clsx(classes.preview, \"preview\")}\n        style={{ whiteSpace: \"normal\" }}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n\n      <Box className={clsx(classes.actionButtons)}>\n        {widget.source && (\n          <Tooltip title={t(\"general/Source\")}>\n            <Link\n              href={widget.source}\n              onClick={(event: any) => {\n                event.preventDefault();\n                if (widget.source.startsWith(window.location.origin)) {\n                  browserHistory.push(\n                    widget.source.replace(window.location.origin, \"\"),\n                  );\n                } else {\n                  window.open(widget.source, \"_blank\");\n                }\n              }}\n            >\n              <IconButton>\n                <LinkVariant></LinkVariant>\n              </IconButton>\n            </Link>\n          </Tooltip>\n        )}\n        <Tooltip title={widget.owner.username}>\n          <IconButton>\n            <Avatar\n              className={clsx(classes.avatar)}\n              variant={\"rounded\"}\n              src={\n                widget.owner.avatar ||\n                \"data:image/png;base64,\" +\n                  new Identicon(sha256(widget.owner.username), 80).toString()\n              }\n            ></Avatar>\n          </IconButton>\n        </Tooltip>\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Edit\")}>\n            <IconButton onClick={() => setEditDialogOpen(true)}>\n              <Pencil></Pencil>\n            </IconButton>\n          </Tooltip>\n        )}\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Delete\")}>\n            <IconButton onClick={deleteWidget}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Tooltip>\n        )}\n      </Box>\n      <Dialog open={editorDialogOpen} onClose={closeEditDialog}>\n        <DialogContent>\n          <TextField\n            label={t(\"general/Source\")}\n            value={widgetSource}\n            onChange={(event) => setWidgetSource(event.target.value)}\n            fullWidth={true}\n          ></TextField>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <Typography variant={\"caption\"} color={\"textSecondary\"}>\n              {t(\"general/Description\")}\n            </Typography>\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton onClick={updateWidget}>\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton onClick={closeEditDialog}>\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  darken,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  useCreateCommentWidgetMutation,\n  useCommentWidgetQuery,\n  CommentWidgetFieldsFragment,\n  useAddReactionToCommentWidgetMutation,\n  useRemoveReactionFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { getHeaderFromMarkdown } from \"../../../utilities/note\";\nimport { Provider } from \"urql\";\nimport { GraphQLClient } from \"../../../utilities/client\";\nimport {\n  Button,\n  Box,\n  Typography,\n  Avatar,\n  Tooltip,\n  Badge,\n  Dialog,\n  Chip,\n} from \"@material-ui/core\";\nimport { CommentOutline, StickerEmoji } from \"mdi-material-ui\";\nimport { Emoji, Picker as EmojiPicker } from \"emoji-mart\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { CommentDialog } from \"./CommentDialog\";\nimport { WidgetTopPanel } from \"../widget/WidgetTopPanel\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    commentWidget: {\n      position: \"relative\",\n      // backgroundColor: theme.palette.grey[100],\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    topPanel: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n    },\n    interactionPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    button: {},\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nfunction CommentWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const widgetID = props.attributes[\"id\"];\n  const editor = props.editor;\n  const { t } = useTranslation();\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [commentDialogOpen, setCommentDialogOpen] = useState<boolean>(false);\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [\n    resCreateCommentWidget,\n    executeCreateCommentWidgetMutation,\n  ] = useCreateCommentWidgetMutation();\n  const [resCommentWidget, executeCommentWidgetQuery] = useCommentWidgetQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n    variables: {\n      widgetID,\n    },\n  });\n  const [\n    resAddReactionToCommentWidget,\n    executeAddReactionToCommentWidgetMutation,\n  ] = useAddReactionToCommentWidgetMutation();\n  const [\n    resRemoveReactionFromCommentWidget,\n    executeRemoveReactionFromCommentWidgetMutation,\n  ] = useRemoveReactionFromCommentWidgetMutation();\n  const [commentWidget, setCommentWidget] = useState<\n    CommentWidgetFieldsFragment\n  >(null);\n\n  const updateReactionSummaries = useCallback(\n    (reaction: string) => {\n      if (!commentWidget) {\n        return;\n      }\n      let found = false;\n      for (\n        let i = 0;\n        i < commentWidget.instance.commentWidget.reactionSummaries.length;\n        i++\n      ) {\n        if (\n          commentWidget.instance.commentWidget.reactionSummaries[i].reaction ===\n          reaction\n        ) {\n          found = true;\n          commentWidget.instance.commentWidget.reactionSummaries[i].count += 1;\n          commentWidget.instance.commentWidget.reactionSummaries[\n            i\n          ].selfAuthored = true;\n          break;\n        }\n      }\n      if (!found) {\n        commentWidget.instance.commentWidget.reactionSummaries = [\n          {\n            reaction: reaction,\n            count: 1,\n            selfAuthored: true,\n          },\n          ...commentWidget.instance.commentWidget.reactionSummaries,\n        ];\n        commentWidget.instance.commentWidget.reactionsCount += 1;\n      }\n      setForceUpdate(Date.now());\n    },\n    [commentWidget],\n  );\n\n  // Create comment widget\n  useEffect(() => {\n    if (widgetID || props.isPreview) {\n      return;\n    }\n    if (resCreateCommentWidget.error) {\n      // TODO: Either user not logged in or server failed to create the widget\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-create-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n\n      if (!globalContainers.cloudContainer.loggedIn) {\n        new Noty({\n          type: \"info\",\n          text: t(\"general/please-sign-in-first\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 5000,\n        }).show();\n        globalContainers.cloudContainer.setAuthDialogOpen(true);\n      }\n\n      props.removeSelf();\n    } else if (resCreateCommentWidget.data) {\n      const id = resCreateCommentWidget.data.createWidget.id;\n      props.setAttributes(Object.assign(props.attributes, { id }));\n    }\n  }, [resCreateCommentWidget, t, props, widgetID]);\n\n  useEffect(() => {\n    if (resCommentWidget.error) {\n      // TODO: This part has issue if we delete a widget and create a new one. The error will repeatly occur.\n      /*\n      console.log(resCommentWidget.error);\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-fetch-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000\n      }).show();\n      */\n      setCommentWidget(null);\n    } else if (resCommentWidget.data) {\n      setCommentWidget(resCommentWidget.data.widget);\n      resCommentWidget.data = null;\n    }\n  }, [resCommentWidget, t]);\n\n  // Create widget\n  useEffect(() => {\n    if (\n      !widgetID &&\n      !resCreateCommentWidget.fetching &&\n      !resCreateCommentWidget.error &&\n      !resCreateCommentWidget.data &&\n      editor\n    ) {\n      const title =\n        getHeaderFromMarkdown(editor.getValue()) || t(\"general/Untitled\");\n      const source = window.location.href;\n      const description = `  **${title}**`;\n      executeCreateCommentWidgetMutation({\n        description,\n        source,\n      });\n    }\n  }, [\n    widgetID,\n    resCreateCommentWidget,\n    editor,\n    t,\n    executeCreateCommentWidgetMutation,\n  ]);\n\n  // Query created widget\n  useEffect(() => {\n    if (widgetID && executeCommentWidgetQuery) {\n      executeCommentWidgetQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [widgetID, executeCommentWidgetQuery]);\n\n  if (resCommentWidget.error) {\n    return <Box>{t(\"error/failed-to-load-widget\")}</Box>;\n  }\n\n  if (!widgetID) {\n    return <Box>{t(\"widget/creating-widget\")}</Box>;\n  }\n\n  if (!commentWidget) {\n    return <Box>{t(\"widget/loading-widget\")}</Box>;\n  }\n\n  return (\n    <Box\n      className={clsx(classes.commentWidget)}\n      style={{ marginBottom: props.isPreview ? \"16px\" : \"0\" }}\n    >\n      <Box className={clsx(classes.topPanel)}>\n        <WidgetTopPanel\n          widget={commentWidget as any}\n          removeSelf={props.removeSelf}\n          isPreview={props.isPreview}\n        ></WidgetTopPanel>\n      </Box>\n      <Box className={clsx(classes.interactionPanel)}>\n        <Tooltip title={t(\"interaction-panel/add-comment\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => {\n              setCommentDialogOpen(true);\n            }}\n          >\n            <CommentOutline></CommentOutline>\n            {commentWidget.instance.commentWidget.messagesCount > 0 ? (\n              <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                {commentWidget.instance.commentWidget.messagesCount}\n              </Typography>\n            ) : null}\n          </Button>\n        </Tooltip>\n        <Tooltip title={t(\"interaction-panel/add-reaction\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => setEmojiPickerOpen(true)}\n          >\n            <Badge style={{ zIndex: 0 }} color={\"secondary\"}>\n              {/* badgeContent={(note.reactions || \"+\").toString()} */}\n              <StickerEmoji />\n              {commentWidget.instance.commentWidget.reactionsCount > 0 ? (\n                <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                  {commentWidget.instance.commentWidget.reactionsCount}\n                </Typography>\n              ) : null}\n            </Badge>\n          </Button>\n        </Tooltip>\n        <Box>\n          {commentWidget.instance.commentWidget.reactionSummaries\n            .sort((x, y) => {\n              let weightX = 1;\n              let weightY = 1;\n              if (x.selfAuthored) {\n                weightX = 100;\n              }\n              if (y.selfAuthored) {\n                weightY = 100;\n              }\n              return x.count * weightX - y.count * weightY;\n            })\n            .map((reactionSummary) => {\n              return (\n                <Chip\n                  variant={\n                    reactionSummary.selfAuthored ? \"default\" : \"outlined\"\n                  }\n                  size=\"medium\"\n                  label={reactionSummary.count.toString()}\n                  color={\"primary\"}\n                  key={reactionSummary.reaction}\n                  style={{ marginRight: \"8px\" }}\n                  className={clsx(classes.reactionChip)}\n                  onClick={() => {\n                    if (!globalContainers.cloudContainer.loggedIn) {\n                      globalContainers.cloudContainer.setAuthDialogOpen(true);\n                    } else if (reactionSummary.selfAuthored) {\n                      executeRemoveReactionFromCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      reactionSummary.selfAuthored = false;\n                      reactionSummary.count -= 1;\n                      commentWidget.instance.commentWidget.reactionsCount -= 1;\n                      if (reactionSummary.count <= 0) {\n                        commentWidget.instance.commentWidget.reactionSummaries = commentWidget.instance.commentWidget.reactionSummaries.filter(\n                          (summary) =>\n                            summary.reaction !== reactionSummary.reaction,\n                        );\n                        setForceUpdate(Date.now());\n                      }\n                    } else {\n                      executeAddReactionToCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      updateReactionSummaries(reactionSummary.reaction);\n                    }\n                  }}\n                  avatar={\n                    <Avatar>\n                      <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                    </Avatar>\n                  }\n                />\n              );\n            })}\n        </Box>\n      </Box>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          emoji={\"\"}\n          showSkinTones={false}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMutation({\n                widgetID: commentWidget.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n            }\n          }}\n        ></EmojiPicker>\n      </Dialog>\n      <CommentDialog\n        open={commentDialogOpen}\n        onClose={() => setCommentDialogOpen(false)}\n        commentWidget={commentWidget}\n      ></CommentDialog>\n    </Box>\n  );\n}\n\nexport const CommentWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n        <CommentWidget {...args}></CommentWidget>\n      </ThemeProvider>\n    </Provider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetCreator, WidgetArgs } from \"vickymd/widget\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  Card,\n  Typography,\n  IconButton,\n  Box,\n  TextField,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\n// @ts-ignore\nimport Gist from \"super-react-gist\"; // <-- import the library\nimport { TrashCanOutline, TrashCan } from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtonsGroup: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\nfunction GitHubGistWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n\n  const setGistURL = useCallback(\n    (url: string) => {\n      try {\n        const location = new URL(url);\n        if (location.host !== \"gist.github.com\") {\n          return;\n        } else {\n          props.setAttributes({\n            url: location.origin + location.pathname,\n          });\n        }\n      } catch (error) {}\n    },\n    [props],\n  );\n\n  if (props.attributes[\"url\"]) {\n    return (\n      <Box className={\"preview github-gist\"} style={{ whiteSpace: \"normal\" }}>\n        <Gist url={props.attributes[\"url\"]}></Gist>\n        {!props.isPreview && (\n          <Box className={clsx(classes.actionButtonsGroup)}>\n            <IconButton onClick={() => props.removeSelf()}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  if (props.isPreview) {\n    return null;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.github_gist/title\")}\n      </Typography>\n      <TextField\n        label={t(\"widget/crossnote/github_gist/enter-github-gist-url\")}\n        placeholder={\"https://gist.github.com/...\"}\n        value={url}\n        onChange={(event) => setURL(event.target.value)}\n        fullWidth={true}\n        onKeyUp={(event) => {\n          if (event.which === 13) {\n            setGistURL(url);\n          }\n        }}\n      ></TextField>\n      <Box className={clsx(classes.actionButtonsGroup)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n    </Card>\n  );\n}\n\nexport const GitHubGistWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <GitHubGistWidget {...args}></GitHubGistWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","// Import VickyMD related modules\n// VickyMD\nimport \"codemirror\";\n// Load these modes if you want highlighting ...\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/addon/dialog/dialog.css\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\"; // for embedded HTML\nimport \"codemirror/mode/markdown/markdown\";\nimport \"codemirror/mode/stex/stex\"; // for Math TeX Formular\nimport \"codemirror/mode/yaml/yaml\"; // for Front Matters\nimport \"codemirror/mode/javascript/javascript\"; // eg. javascript\nimport \"codemirror/mode/python/python\";\nimport \"codemirror/addon/display/placeholder\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/keymap/vim\";\nimport \"codemirror/keymap/emacs\";\n\n// Essential\nimport \"vickymd\"; // ESSENTIAL\n// Widgets\n// Load PowerPacks if you want to utilize 3rd-party libs\nimport \"vickymd/powerpack/fold-math-with-katex\";\nimport \"vickymd/powerpack/fold-code-with-mermaid\";\nimport \"vickymd/powerpack/fold-code-with-plantuml\";\nimport \"vickymd/powerpack/fold-code-with-echarts\";\nimport \"vickymd/powerpack/fold-code-with-wavedrom\";\nimport \"vickymd/powerpack/hover-with-marked\";\nimport { registerWidgetCreator } from \"vickymd/widget\";\nimport { TimerWidgetCreator } from \"./widgets/timer\";\nimport { ImageWidgetCreator } from \"./widgets/image\";\nimport { AudioWidgetCreator } from \"./widgets/audio\";\n// import { NeteaseMusicWidgetCreator } from \"./widgets/netease_music\";\nimport { VideoWidgetCreator } from \"./widgets/video\";\nimport { BilibiliWidgetCreator } from \"./widgets/bilibili\";\nimport { YoutubeWidgetCreator } from \"./widgets/youtube\";\nimport { OCRWidgetCreator } from \"./widgets/ocr\";\nimport { KanbanWidgetCreator } from \"./widgets/kanban\";\n// import { ABCWidgetCreator } from \"./widgets/abc\";\nimport { CommentWidgetCreator } from \"./widgets/comment\";\nimport { GitHubGistWidgetCreator } from \"./widgets/github_gist\";\n\n// Set necessary window scope variables\nwindow[\"CodeMirror\"] = require(\"codemirror\");\n\n// Register widget creators\nregisterWidgetCreator(\"timer\", TimerWidgetCreator);\nregisterWidgetCreator(\"crossnote.image\", ImageWidgetCreator);\nregisterWidgetCreator(\"crossnote.audio\", AudioWidgetCreator);\n// registerWidgetCreator(\"crossnote.netease_music\", NeteaseMusicWidgetCreator);\nregisterWidgetCreator(\"crossnote.video\", VideoWidgetCreator);\nregisterWidgetCreator(\"crossnote.bilibili\", BilibiliWidgetCreator);\nregisterWidgetCreator(\"crossnote.youtube\", YoutubeWidgetCreator);\nregisterWidgetCreator(\"crossnote.ocr\", OCRWidgetCreator);\nregisterWidgetCreator(\"crossnote.kanban\", KanbanWidgetCreator);\n// registerWidgetCreator(\"crossnote.abc\", ABCWidgetCreator);\nregisterWidgetCreator(\"crossnote.comment\", CommentWidgetCreator);\nregisterWidgetCreator(\"crossnote.github_gist\", GitHubGistWidgetCreator);\n\nconst packageJSON = require(\"../../package.json\");\nexport const VickyMDVersion: string = packageJSON.dependencies.vickymd;\n","import { CrossnoteTheme } from \"./theme\";\nimport { LightTheme } from \"./light\";\nimport { DarkTheme } from \"./dark\";\nimport { OneDarkTheme } from \"./one-dark\";\nimport { SolarizedLight } from \"./solarized-light\";\nimport { setTheme as VickyMDSetTheme, ThemeName } from \"vickymd/theme\";\nimport { Editor } from \"codemirror\";\nimport { VickyMDVersion } from \"../editor\";\n\nexport function setTheme({\n  editor,\n  themeName,\n}: {\n  editor?: Editor;\n  themeName: ThemeName;\n}) {\n  return VickyMDSetTheme({\n    editor,\n    themeName,\n    baseUri: `${\n      window.location.origin.match(/0xgg\\./i) ? \"/crossnote\" : \"\"\n    }/styles/vickymd@${VickyMDVersion}/`,\n  });\n}\n\nexport class ThemeManager {\n  public themes: CrossnoteTheme[] = [];\n  public selectedTheme: CrossnoteTheme = null;\n  public addTheme(theme: CrossnoteTheme) {\n    this.themes.push(theme);\n    if (!this.selectedTheme) {\n      this.selectTheme(theme.name);\n    }\n  }\n\n  public getTheme(name: string) {\n    return this.themes.find((theme) => theme.name === name);\n  }\n\n  public selectTheme(name: string) {\n    if (!name) {\n      return;\n    }\n    const theme = this.themes.find((t) => t.name === name);\n    if (!theme) {\n      return;\n    }\n    this.selectedTheme = theme;\n    setTheme({\n      themeName: theme.name,\n    });\n  }\n}\n\nconst _themeManager = new ThemeManager();\n_themeManager.addTheme(LightTheme);\n_themeManager.addTheme(DarkTheme);\n_themeManager.addTheme(OneDarkTheme);\n_themeManager.addTheme(SolarizedLight);\n\nexport const themeManager = _themeManager;\n","import { NoteConfig } from \"./notebook\";\n\nexport enum EventType {\n  ModifiedMarkdown = \"ModifiedMarkdown\",\n  RefreshNotes = \"RefreshNotes\",\n  DeleteNote = \"DeleteNote\",\n}\n\nexport interface ModifiedMarkdownEventData {\n  tabId: string;\n  noteFilePath: string;\n  markdown: string;\n  noteConfig: NoteConfig;\n}\n\nexport interface RefreshNotesEventData {\n  notebookPath: string;\n}\n\nexport interface DeleteNoteEventData {\n  tabId: string;\n  notebookPath: string;\n  noteFilePath: string;\n}\n\nexport type EventData =\n  | ModifiedMarkdownEventData\n  | RefreshNotesEventData\n  | DeleteNoteEventData;\n\nexport type EventCallback = (data: any) => void;\n\nexport class Emitter {\n  private subscriptions: { [key: string]: EventCallback[] } = {};\n  constructor() {\n    this.subscriptions = {};\n  }\n\n  public on(eventName: EventType, cb: EventCallback) {\n    if (eventName in this.subscriptions) {\n      this.subscriptions[eventName].push(cb);\n    } else {\n      this.subscriptions[eventName] = [cb];\n    }\n  }\n\n  public off(eventName: EventType, cb: EventCallback) {\n    const eventCallbacks = this.subscriptions[eventName] || [];\n    const index = eventCallbacks.findIndex((x) => x === cb);\n    if (index >= 0) {\n      eventCallbacks.splice(index, 1);\n    }\n  }\n\n  public emit(eventName: EventType, data: EventData) {\n    const eventCallbacks = this.subscriptions[eventName].slice() || [];\n    eventCallbacks.forEach((callback, offset) => {\n      console.log(\"emit callback: \", offset);\n      callback(data);\n    });\n  }\n}\n\nexport const globalEmitter = new Emitter();\n\n(window as any)[\"globalEmitter\"] = globalEmitter;\n","import { useState, useEffect, useCallback } from \"react\";\nimport { createContainer } from \"unstated-next\";\nimport * as path from \"path\";\nimport Noty from \"noty\";\nimport useInterval from \"@use-it/interval\";\nimport FlexLayout, {\n  Model,\n  Actions,\n  DockLocation,\n  TabSetNode,\n  TabNode,\n} from \"flexlayout-react\";\nimport { getTodayName } from \"../utilities/utils\";\nimport { useTranslation } from \"react-i18next\";\nimport Crossnote, {\n  PushNotebookArgs,\n  PullNotebookArgs,\n} from \"../lib/crossnote\";\nimport { browserHistory } from \"../utilities/history\";\nimport * as qs from \"qs\";\nimport moment from \"moment\";\nimport { pfs } from \"../lib/fs\";\nimport { sanitizeTag } from \"../utilities/markdown\";\nimport { Notebook, Note, NoteConfig } from \"../lib/notebook\";\nimport { TabHeight, CrossnoteTabNode } from \"../lib/tabNode\";\nimport { Emitter, globalEmitter, EventType } from \"../lib/event\";\n\nexport enum SelectedSectionType {\n  Notes = \"Notes\",\n  Today = \"Today\",\n  Todo = \"Todo\",\n  Tagged = \"Tagged\",\n  Untagged = \"Untagged\",\n  Directory = \"Directory\",\n  Tag = \"Tag\",\n  Conflicted = \"Conflicted\",\n  Encrypted = \"Encrypted\",\n  Wiki = \"Wiki\",\n  Attachments = \"Attachments\",\n}\n\nexport interface SelectedSection {\n  type: SelectedSectionType;\n  path?: string;\n}\n\nexport enum HomeSection {\n  Notebooks = \"Notebooks\",\n  Explore = \"Explore\",\n  Settings = \"Settings\",\n  Notifications = \"Notifications\",\n  Privacy = \"Privacy\",\n  Unknown = \"Unknown\",\n}\n\n/**\n * The note to open\n */\nexport interface PendingNote {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath: string;\n}\n\ninterface InitialState {\n  crossnote: Crossnote;\n}\n\nfunction useCrossnoteContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n  const crossnote = initialState.crossnote;\n  const [initialized, setInitialized] = useState<boolean>(false);\n  const [notebooks, setNotebooks] = useState<Notebook[]>([]);\n  const [isAddingNotebook, setIsAddingNotebook] = useState<boolean>(false);\n  const [isPushingNotebook, setIsPushingNotebook] = useState<boolean>(false);\n  const [isPullingNotebook, setIsPullingNotebook] = useState<boolean>(false);\n  const [needsToRefreshNotes, setNeedsToRefreshNotes] = useState<boolean>(\n    false,\n  );\n  const [isLoadingNotebook, setIsLoadingNotebook] = useState<boolean>(false);\n  const [isPerformingAutoFetch, setIsPerformingAutoFetch] = useState<boolean>(\n    false,\n  );\n  const [homeSection, setHomeSection] = useState<HomeSection>(\n    HomeSection.Unknown,\n  );\n  const [layoutModel, setLayoutModel] = useState<Model>(\n    FlexLayout.Model.fromJson({\n      global: {\n        splitterSize: 4,\n        tabSetEnableMaximize: false,\n        tabSetHeaderHeight: TabHeight,\n        tabSetTabStripHeight: TabHeight,\n      },\n      borders: [],\n      layout: {\n        type: \"row\",\n        weight: 100,\n        children: [\n          {\n            type: \"tabset\",\n            weight: 50,\n            selected: 0,\n            children: [],\n          },\n        ],\n      },\n    }),\n  );\n\n  const getNotebookAtPath = useCallback(\n    (notebookPath: string) => {\n      return notebooks.find((x) => x.dir === notebookPath);\n    },\n    [notebooks],\n  );\n\n  const addTabNode = useCallback(\n    (tabNode: CrossnoteTabNode) => {\n      if (!layoutModel) {\n        return;\n      }\n      let activeTabset: TabSetNode = layoutModel.getActiveTabset();\n      if (!activeTabset) {\n        const modelChildren = layoutModel.getRoot().getChildren();\n        let needsToCreateNewTabSet = true;\n        if (modelChildren.length) {\n          modelChildren.forEach((child) => {\n            if (child.getType() === \"tabset\") {\n              needsToCreateNewTabSet = false;\n              layoutModel.doAction(Actions.setActiveTabset(child.getId()));\n            }\n          });\n        }\n\n        if (needsToCreateNewTabSet) {\n          activeTabset = new FlexLayout.TabSetNode();\n          (layoutModel.getRoot() as any)._addChild(activeTabset);\n          layoutModel.doAction(Actions.setActiveTabset(activeTabset.getId()));\n        }\n      }\n\n      if (tabNode.config.singleton) {\n        const node = layoutModel.getNodeById(tabNode.id);\n        if (node) {\n          return layoutModel.doAction(Actions.selectTab(node.getId()));\n        }\n      }\n      if (tabNode.component === \"Note\") {\n        const note = tabNode.config.note;\n        const tabs = activeTabset.getChildren();\n        for (let i = 0; i < tabs.length; i++) {\n          const eTabNode: any = tabs[i];\n          const eNote: Note = eTabNode._attributes.config.note;\n          if (\n            eNote &&\n            note &&\n            eNote.notebookPath === note.notebookPath &&\n            eNote.filePath === note.filePath\n          ) {\n            return layoutModel.doAction(Actions.selectTab(eTabNode.getId()));\n          }\n        }\n      }\n      layoutModel.doAction(\n        Actions.addNode(tabNode, activeTabset.getId(), DockLocation.CENTER, 0),\n      );\n    },\n    [layoutModel],\n  );\n\n  const closeTabNode = useCallback(\n    (id: string) => {\n      if (!layoutModel) {\n        return;\n      }\n      layoutModel.doAction(Actions.deleteTab(id));\n    },\n    [layoutModel],\n  );\n\n  const updateNoteMarkdown = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      filePath: string,\n      markdown: string,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      const note = await notebook.getNote(filePath);\n      if (!notebook) {\n        return;\n      }\n      if (note.markdown !== markdown) {\n        const newNote = await notebook.writeNote(\n          note.filePath,\n          markdown,\n          note.config,\n        );\n        globalEmitter.emit(EventType.ModifiedMarkdown, {\n          tabId: tabNode.getId(),\n          markdown: newNote.markdown,\n          noteFilePath: note.filePath,\n          noteConfig: newNote.config,\n        });\n        /*\n          if (newNote !== note) {\n            console.log(\"new note created\");\n          }\n          */\n      }\n    },\n    [getNotebookAtPath],\n  );\n\n  const updateNoteConfig = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      filePath: string,\n      noteConfig: NoteConfig,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(filePath);\n      if (JSON.stringify(note.config) !== JSON.stringify(noteConfig)) {\n        console.log(\"updateNoteConfig 2: \", noteConfig);\n        const newNote = await notebook.writeNote(\n          note.filePath,\n          note.markdown,\n          noteConfig,\n        );\n        globalEmitter.emit(EventType.ModifiedMarkdown, {\n          tabId: tabNode.getId(),\n          markdown: newNote.markdown,\n          noteFilePath: note.filePath,\n          noteConfig: newNote.config,\n        });\n        /*\n          globalEmitter.emit(EventType.ModifiedMarkdown, {\n            tabId: tabNode.getId(),\n          })\n          */\n      }\n    },\n    [getNotebookAtPath],\n  );\n\n  const deleteNote = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      await notebook.deleteNote(noteFilePath);\n      globalEmitter.emit(EventType.DeleteNote, {\n        tabId: tabNode.getId(),\n        notebookPath: notebookPath,\n        noteFilePath: noteFilePath,\n      });\n    },\n    [getNotebookAtPath],\n  );\n\n  const changeNoteFilePath = useCallback(\n    async (note: Note, newFilePath: string) => {\n      const notebook = notebooks.find((x) => x.dir === note.notebookPath);\n      if (notebook) {\n        return await notebook.changeNoteFilePath(note.filePath, newFilePath);\n      } else {\n        throw new Error(\"Notebook \" + note.notebookPath + \" not found\");\n      }\n    },\n    [notebooks],\n  );\n\n  const createNewNote = useCallback(\n    async (\n      notebook: Notebook,\n      fileName: string = \"\",\n      markdown: string = \"\",\n    ) => {\n      if (!notebook) {\n        return null;\n      }\n      if (!fileName) {\n        let today = moment().format(\"YYYY-MM-DD\"); // TODO: Allow user to customize this\n        let untitled = t(\"general/Untitled\");\n\n        let foundToday = false;\n        let count = 0;\n        for (let key in notebook.notes) {\n          const note = notebook.notes[key];\n          if (note.title === today) {\n            foundToday = true;\n          }\n          if (note.title.startsWith(untitled)) {\n            count++;\n          }\n        }\n        if (foundToday) {\n          if (count === 0) {\n            fileName = `${untitled}.md`;\n          } else {\n            fileName = `${untitled} ${count}.md`;\n          }\n        } else {\n          fileName = `${today}.md`;\n        }\n      }\n      if (!fileName.endsWith(\".md\")) {\n        fileName = fileName + \".md\";\n      }\n      let filePath = path.relative(\n        notebook.dir,\n        path.resolve(notebook.dir, fileName),\n      );\n\n      const noteConfig: NoteConfig = {\n        modifiedAt: new Date(),\n        createdAt: new Date(),\n      };\n      return await notebook.writeNote(filePath, markdown, noteConfig);\n    },\n    [t],\n  );\n\n  const openNoteAtPath = useCallback(\n    async (notebook: Notebook, filePath: string) => {\n      if (!filePath.endsWith(\".md\")) {\n        filePath += \".md\";\n      }\n      let note: Note;\n      if (filePath in notebook.notes) {\n        note = notebook.notes[filePath];\n      } else {\n        note = await createNewNote(notebook, filePath, \"\");\n      }\n      addTabNode({\n        type: \"tab\",\n        component: \"Note\",\n        name: ` ` + note.title,\n        config: {\n          singleton: false,\n          note,\n        },\n      });\n    },\n    [createNewNote, addTabNode],\n  );\n\n  const openTodayNote = useCallback(\n    (notebook: Notebook) => {\n      const today = getTodayName();\n      return openNoteAtPath(notebook, `${today}.md`);\n    },\n    [openNoteAtPath],\n  );\n\n  const duplicateNote = useCallback(\n    async (note: Note) => {\n      /*\n      if (!crossnote) return;\n      const duplicatedNote = await crossnote.duplicateNote(\n        note.notebook,\n        note.filePath,\n      );\n      setNotebookNotes((notes) => [duplicatedNote, ...notes]);\n      setSelectedNote(duplicatedNote);\n      */\n    },\n    [crossnote],\n  );\n\n  const addNotebook = useCallback(\n    async (\n      name: string,\n      gitURL: string,\n      gitBranch: string,\n      gitUsername: string,\n      gitPassword: string,\n      gitRememberCredentials: boolean,\n      gitCorsProxy: string,\n    ) => {\n      setIsAddingNotebook(true);\n      try {\n        if (\n          gitURL.length &&\n          notebooks.find(\n            (nb) => nb.gitBranch === gitBranch && nb.gitURL === gitURL,\n          )\n        ) {\n          setIsAddingNotebook(false);\n          throw new Error(\"error/notebook-already-exists\");\n        }\n        const notebook = await crossnote.addNotebook({\n          name,\n          gitURL,\n          branch: gitBranch,\n          username: gitUsername,\n          password: gitPassword,\n          corsProxy: gitCorsProxy,\n          rememberCredentials: gitRememberCredentials,\n        });\n        setNotebooks((notebooks) => [notebook, ...notebooks]);\n        setIsAddingNotebook(false);\n      } catch (error) {\n        setIsAddingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote, notebooks],\n  );\n\n  const updateNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.updateNotebook(notebook);\n        setNotebooks((notebooks) => [...notebooks]);\n      } catch (error) {}\n    },\n    [crossnote],\n  );\n\n  const deleteNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.deleteNotebook(notebook._id);\n      } catch (error) {}\n      let selectedNotebook: Notebook = null;\n      setNotebooks((notebooks) =>\n        notebooks.filter((n) => {\n          if (!selectedNotebook && n._id !== notebook._id) {\n            selectedNotebook = n;\n          }\n          return n._id !== notebook._id;\n        }),\n      );\n    },\n    [crossnote],\n  );\n\n  const hardResetNotebook = useCallback(\n    async (notebook: Notebook) => {\n      /*\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.hardResetNotebook(notebook, notebook.localSha);\n\n        // TODO: Refactor\n        setIsLoadingNotebook(true);\n        const notes = await crossnote.listNotes({\n          notebook: notebook,\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        setSelectedNote(null);\n        setNotebookNotes(notes);\n        setNotebookDirectories(\n          await crossnote.getNotebookDirectoriesFromNotes(notes),\n        );\n        setHasSummaryMD(await crossnote.hasSummaryMD(notebook));\n        setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notes));\n        setIsLoadingNotebook(false);\n      } catch (error) {}\n      */\n    },\n    [crossnote],\n  );\n\n  const pushNotebook = useCallback(\n    async (args: PushNotebookArgs) => {\n      /*\n      if (!crossnote) {\n        return;\n      }\n      setIsPushingNotebook(true);\n      try {\n        await crossnote.pushNotebook(args);\n        setIsPushingNotebook(false);\n        // TODO: Refactor. The code below is the same as pullNotebook\n        const notes = await crossnote.listNotes({\n          notebook: args.notebook,\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        setNotebookNotes(notes);\n        setNotebookDirectories(\n          await crossnote.getNotebookDirectoriesFromNotes(notes),\n        );\n        setHasSummaryMD(await crossnote.hasSummaryMD(args.notebook));\n        setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notes));\n\n        if (selectedNote) {\n          const newNote = notes.find(\n            (n) => n.filePath === selectedNote.filePath,\n          );\n          if (!newNote) {\n            setSelectedNote(notes[0]); // TODO: pull might remove currently selectedNote\n          } else {\n            setSelectedNote(newNote);\n          }\n        } else {\n          setSelectedNote(notes[0]);\n        }\n        setNeedsToRefreshNotes(true);\n      } catch (error) {\n        setIsPushingNotebook(false);\n        throw error;\n      }\n      */\n    },\n    [crossnote],\n  );\n\n  const pullNotebook = useCallback(\n    async (args: PullNotebookArgs) => {\n      /*\n      if (!crossnote) {\n        return;\n      }\n      setIsPullingNotebook(true);\n      try {\n        // NOTE: Code here might have bug\n        await crossnote.pullNotebook(args);\n        setIsPullingNotebook(false);\n        const notes = await crossnote.listNotes({\n          notebook: args.notebook,\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        setNotebookNotes(notes);\n        setNotebookDirectories(\n          await crossnote.getNotebookDirectoriesFromNotes(notes),\n        );\n        setHasSummaryMD(await crossnote.hasSummaryMD(args.notebook));\n        setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(notes));\n\n        if (selectedNote) {\n          const newNote = notes.find(\n            (n) => n.filePath === selectedNote.filePath,\n          );\n          if (!newNote) {\n            setSelectedNote(notes[0]); // TODO: pull might remove currently selectedNote\n          } else {\n            setSelectedNote(newNote);\n          }\n        } else {\n          setSelectedNote(notes[0]);\n        }\n        setNeedsToRefreshNotes(true);\n      } catch (error) {\n        setIsPullingNotebook(false);\n        throw error;\n      }\n      */\n    },\n    [crossnote],\n  );\n\n  const checkoutNote = useCallback(\n    async (note: Note) => {\n      /*\n      if (!crossnote) {\n        return;\n      }\n      const newNote = await crossnote.checkoutNote(note);\n      if (newNote) {\n        setNotebookNotes((notes) =>\n          notes.map((n) => {\n            if (n.filePath === newNote.filePath) {\n              return newNote;\n            } else {\n              return n;\n            }\n          }),\n        );\n        setNotes((notes) =>\n          notes.map((n) => {\n            if (n.filePath === newNote.filePath) {\n              return newNote;\n            } else {\n              return n;\n            }\n          }),\n        );\n        setSelectedNote(newNote);\n      } else {\n        // The note is deleted after checkout\n        setNotebookNotes((notes) => {\n          const newNotes = notes.filter((n) => n.filePath !== note.filePath);\n          crossnote\n            .getNotebookDirectoriesFromNotes(newNotes)\n            .then((directories) => {\n              setNotebookDirectories(directories);\n            });\n          crossnote\n            .hasSummaryMD(selectedNotebook)\n            .then((exists) => setHasSummaryMD(exists));\n          setNotebookTagNode(crossnote.getNotebookTagNodeFromNotes(newNotes));\n          return newNotes;\n        });\n        setNotes((notes) => {\n          const newNotes = notes.filter((n) => n.filePath !== note.filePath);\n          setSelectedNote(newNotes[0]);\n          return newNotes;\n        });\n      }\n      */\n    },\n    [crossnote],\n  );\n\n  const getNote = useCallback(\n    async (notebook: Notebook, filePath: string) => {\n      /*\n      if (!crossnote) {\n        return;\n      }\n      return await crossnote.getNote(notebook, filePath);\n      */\n    },\n    [crossnote],\n  );\n\n  const togglePin = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const newConfig = Object.assign({}, note.config, {\n        pinned: !note.config.pinned,\n      });\n      if (!newConfig.pinned) {\n        delete newConfig.pinned;\n      }\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const toggleFavorite = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const newConfig = Object.assign({}, note.config, {\n        favorited: !note.config.favorited,\n      });\n      if (!newConfig.favorited) {\n        delete newConfig.favorited;\n      }\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  useEffect(() => {\n    if (!crossnote || initialized) {\n      return;\n    }\n\n    (async () => {\n      console.log(\"start listNotebooks\");\n      const notebooks = await crossnote.listNotebooks();\n      console.log(\"end listNotebooks\");\n      let notebook: Notebook = null;\n      if (notebooks.length) {\n        setNotebooks(notebooks);\n        const selectedNotebookID = localStorage.getItem(\"selectedNotebookID\");\n        notebook = notebooks.find((n) => n._id === selectedNotebookID);\n        if (!notebook) {\n          notebook = notebooks[0];\n        }\n        setInitialized(true);\n        console.log(\"selectedNotebook: \", notebook);\n      } else {\n        /*\n        notebook = await crossnote.cloneNotebook({\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"https://github.com/0xGG/crossnote-doc.git\"\n        });\n        */\n        notebook = await crossnote.addNotebook({\n          name: \"Drafts\",\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"\",\n        });\n        await pfs.writeFile(\n          path.resolve(notebook.dir, \"README.md\"),\n          `# Welcome to Crossnote \n\nIf you want to know more about this project,  \nplease download and read the [Welcome notebook](https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md).\n\nPlease also check the [Explore](https://crossnote.app/explore) section to discover the public notebooks shared by other users ;)\n`,\n        );\n        setNotebooks([notebook]);\n        setInitialized(true);\n        // TODO: create empty note and add `We suggest you to add [Welcome to crossnote]() notebook ;)`\n      }\n    })();\n  }, [crossnote, initialized]);\n\n  useEffect(() => {\n    if (!crossnote) {\n      return;\n    }\n    (async () => {\n      setIsLoadingNotebook(true);\n      /*\n      await selectedNotebook.refreshNotes({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      console.log(\"end loading notes: \", selectedNotebook);\n      */\n      setIsLoadingNotebook(false);\n    })();\n  }, [crossnote]);\n\n  /*\n  useEffect(() => {\n    if (crossnote && selectedNotebook) {\n      setSelectedSection({ type: SelectedSectionType.Notes });\n    }\n  }, [crossnote, selectedNotebook]);\n\n  useEffect(() => {\n    if (crossnote && selectedNotebook && notebookNotes) {\n      if (\n        notebookNotes.length &&\n        notebookNotes[0].notebook._id !== selectedNotebook._id\n      ) {\n        return;\n      }\n\n      let notes: Note[] = [];\n      if (selectedSection.type === SelectedSectionType.Notes) {\n        notes = [...notebookNotes];\n      } else if (selectedSection.type === SelectedSectionType.Todo) {\n        notes = notebookNotes.filter((note) =>\n          note.markdown.match(/(\\*|-|\\d+\\.)\\s\\[(\\s+|x|X)\\]\\s/gm),\n        );\n      } else if (selectedSection.type === SelectedSectionType.Today) {\n        notes = notebookNotes.filter(\n          (note) => Date.now() - note.config.modifiedAt.getTime() <= OneDay,\n        );\n      } else if (selectedSection.type === SelectedSectionType.Tagged) {\n        notes = notebookNotes.filter((note) => note.config.tags.length > 0);\n      } else if (selectedSection.type === SelectedSectionType.Untagged) {\n        notes = notebookNotes.filter((note) => note.config.tags.length === 0);\n      } else if (selectedSection.type === SelectedSectionType.Tag) {\n        notes = notebookNotes.filter((note) => {\n          const tags = note.config.tags;\n          return tags.find(\n            (tag) =>\n              (tag.toLocaleLowerCase() + \"/\").indexOf(\n                selectedSection.path + \"/\",\n              ) === 0,\n          );\n        });\n      } else if (selectedSection.type === SelectedSectionType.Conflicted) {\n        notes = notebookNotes.filter((note) => {\n          return crossnote.markdownHasConflicts(note.markdown);\n        });\n      } else if (selectedSection.type === SelectedSectionType.Encrypted) {\n        notes = notebookNotes.filter((note) => {\n          return note.config.encryption;\n        });\n      } else if (selectedSection.type === SelectedSectionType.Wiki) {\n        // Do nothing here\n      } else {\n        // SelectedSectionType.Directory\n        if (includeSubdirectories) {\n          notes = notebookNotes.filter(\n            (note) => note.filePath.indexOf(selectedSection.path + \"/\") === 0,\n          );\n        } else {\n          notes = notebookNotes.filter(\n            (note) => path.dirname(note.filePath) === selectedSection.path,\n          );\n        }\n      }\n\n      if (orderBy === OrderBy.ModifiedAt) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort(\n            (a, b) =>\n              b.config.modifiedAt.getTime() - a.config.modifiedAt.getTime(),\n          );\n        } else {\n          notes.sort(\n            (a, b) =>\n              a.config.modifiedAt.getTime() - b.config.modifiedAt.getTime(),\n          );\n        }\n      } else if (orderBy === OrderBy.CreatedAt) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort(\n            (a, b) =>\n              b.config.createdAt.getTime() - a.config.createdAt.getTime(),\n          );\n        } else {\n          notes.sort(\n            (a, b) =>\n              a.config.createdAt.getTime() - b.config.createdAt.getTime(),\n          );\n        }\n      } else if (orderBy === OrderBy.Title) {\n        if (orderDirection === OrderDirection.DESC) {\n          notes.sort((a, b) => b.title.localeCompare(a.title));\n        } else {\n          notes.sort((a, b) => a.title.localeCompare(b.title));\n        }\n      }\n\n      setNotes(notes);\n    }\n  }, [\n    selectedSection,\n    crossnote,\n    selectedNotebook,\n    includeSubdirectories,\n    notebookNotes,\n    orderBy,\n    orderDirection,\n  ]);\n\n  useEffect(() => {\n    if (\n      notes.length &&\n      !selectedNote &&\n      !pendingNote &&\n      homeSection === HomeSection.Notebooks\n    ) {\n      _setSelectedNote(notes[0]);\n    }\n  }, [notes, selectedNote, pendingNote, _setSelectedNote, homeSection]);\n\n  useEffect(() => {\n    if (selectedNote) {\n      if (selectedNote.markdown.length) {\n        setEditorMode(EditorMode.Preview);\n      } else {\n        setEditorMode(EditorMode.VickyMD);\n      }\n    } else {\n      setEditorMode(EditorMode.Preview);\n    }\n  }, [selectedNote]);\n\n  // Find and select the pending note\n  useEffect(() => {\n    if (!pendingNote || !initialized || isLoadingNotebook) {\n      return;\n    }\n    if (selectedNote && selectedNote.filePath === pendingNote.filePath) {\n      setPendingNote(null);\n      return;\n    }\n\n    // TODO: Also check if the notebook matches\n    const note = notebookNotes.find((n) => n.filePath === pendingNote.filePath);\n    if (note) {\n      setSelectedNote(note);\n    }\n    setPendingNote(null); // note doesn't exist\n  }, [\n    initialized,\n    isLoadingNotebook,\n    pendingNote,\n    selectedNote,\n    notebookNotes,\n  ]);\n  */\n\n  // TODO: This script should be moved to background (serviceWorker?)\n  useInterval(async () => {\n    if (isPerformingAutoFetch) {\n      return;\n    }\n    setIsPerformingAutoFetch(true);\n    for (let i = 0; i < notebooks.length; i++) {\n      const notebook = notebooks[i];\n      if (\n        notebook.autoFetchPeriod >= 1000 &&\n        Date.now() - notebook.fetchedAt.getTime() >= notebook.autoFetchPeriod &&\n        notebook.gitURL.length > 0 &&\n        notebook.localSha === notebook.remoteSha\n      ) {\n        // TODO:  Run tasks in parallel instead of running one by one\n        try {\n          const changed = await crossnote.fetchNotebook({ notebook });\n          if (changed) {\n            setNeedsToRefreshNotes(true);\n          }\n        } catch (error) {\n          console.log(error);\n        }\n      }\n    }\n    setIsPerformingAutoFetch(false);\n  }, 60000); // Check every 1 minute\n\n  return {\n    crossnote,\n    initialized,\n    notebooks,\n    updateNoteMarkdown,\n    updateNoteConfig,\n    createNewNote,\n    deleteNote,\n    changeNoteFilePath,\n    duplicateNote,\n    addNotebook,\n    togglePin,\n    toggleFavorite,\n    isAddingNotebook,\n    isPushingNotebook,\n    isPullingNotebook,\n    updateNotebook,\n    deleteNotebook,\n    hardResetNotebook,\n    pushNotebook,\n    pullNotebook,\n    checkoutNote,\n    getNote,\n    isLoadingNotebook,\n    openNoteAtPath,\n    openTodayNote,\n    needsToRefreshNotes,\n    setNeedsToRefreshNotes,\n    homeSection,\n    setHomeSection,\n    layoutModel,\n    setLayoutModel,\n    addTabNode,\n    closeTabNode,\n    getNotebookAtPath,\n  };\n}\n\nexport const CrossnoteContainer = createContainer(useCrossnoteContainer);\n","export enum KeyMap {\n  \"DEFAULT\" = \"hypermd\",\n  \"VIM\" = \"vim\",\n  \"EMACS\" = \"emacs\",\n}\n\nexport function getKeyMap(v: string): KeyMap {\n  if (v === \"hypermd\") {\n    return KeyMap.DEFAULT;\n  } else if (v === \"vim\") {\n    return KeyMap.VIM;\n  } else if (v === \"emacs\") {\n    return KeyMap.EMACS;\n  } else {\n    return KeyMap.DEFAULT;\n  }\n}\n","import { Note, Notebook } from \"./notebook\";\n\nexport type TabNodeComponent =\n  | \"Settings\"\n  | \"Note\"\n  | \"Notes\"\n  | \"Today\"\n  | \"Todo\"\n  | \"Conflicted\"\n  | \"Privacy\"\n  | \"Graph\";\n\nexport interface TabNodeConfig {\n  singleton: boolean;\n  note?: Note;\n  notebook?: Notebook;\n}\n\nexport interface CrossnoteTabNode {\n  type: \"tab\";\n  name: string;\n  component: TabNodeComponent;\n  config: TabNodeConfig;\n  id?: string;\n}\n\nexport const TabHeight = 24;\n","import React, { useState, useCallback, useEffect } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  Box,\n  Typography,\n  DialogActions,\n  Button,\n  Link,\n  FormControlLabel,\n  Checkbox,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n} from \"@material-ui/core\";\nimport { ChevronDown } from \"mdi-material-ui\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  canCancel: boolean;\n\n  notebookName?: string;\n  gitURL?: string;\n  gitBranch?: string;\n}\n\nexport default function AddNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [gitURL, setGitURL] = useState<string>(props.gitURL || \"\");\n  const [gitBranch, setGitBranch] = useState<string>(props.gitBranch || \"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [rememberCredentialsChecked, setRememberCredentialsChecked] = useState<\n    boolean\n  >(false);\n  const { t } = useTranslation();\n\n  const close = useCallback(() => {\n    setNotebookName(\"\");\n    setGitURL(\"\");\n    setGitBranch(\"\");\n    setGitUsername(\"\");\n    setGitPassword(\"\");\n    setExpanded(false);\n    props.onClose();\n  }, [props]);\n\n  const addNotebook = useCallback(async () => {\n    try {\n      if (gitURL.trim().length) {\n        new Noty({\n          type: \"info\",\n          text: t(\"info/downloading-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n      close();\n      await crossnoteContainer.addNotebook(\n        notebookName,\n        gitURL.trim(),\n        gitBranch.trim() || \"master\",\n        gitUsername,\n        gitPassword,\n        rememberCredentialsChecked,\n        gitCorsProxy,\n      );\n    } catch (error) {\n      new Noty({\n        type: \"error\",\n        text: error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      close();\n    }\n  }, [\n    props,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    rememberCredentialsChecked,\n    gitCorsProxy,\n  ]);\n\n  useEffect(() => {\n    const i = props.gitURL.lastIndexOf(\"/\");\n    const name = props.gitURL.slice(i + 1).replace(/\\.git/, \"\");\n\n    setNotebookName(props.notebookName || name);\n    setGitURL(props.gitURL);\n    setGitBranch(props.gitBranch);\n    setExpanded(true);\n  }, [props.gitURL, props.gitBranch, props.notebookName]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isAddingNotebook) {\n          props.onClose();\n        }\n      }}\n    >\n      <DialogTitle>{t(\"general/add-a-notebook\")}</DialogTitle>\n      <DialogContent>\n        <Typography variant={\"caption\"}>\n          {\"* \" + t(\"add-notebook-dialog/disclaimer\")}\n        </Typography>\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        <ExpansionPanel\n          elevation={2}\n          expanded={expanded}\n          onChange={() => setExpanded(!expanded)}\n        >\n          <ExpansionPanelSummary expandIcon={<ChevronDown></ChevronDown>}>\n            <Typography>{`${t(\"general/git-repository\")} (${t(\n              \"general/optional\",\n            )})`}</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <Box>\n              <TextField\n                label={t(\"general/url\")}\n                placeholder={\"https://github.com/0xGG/crossnote.git\"}\n                fullWidth={true}\n                value={gitURL}\n                onChange={(event) => setGitURL(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/branch\")}\n                placeholder={\"master\"}\n                fullWidth={true}\n                value={gitBranch}\n                onChange={(event) => setGitBranch(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Username\")} (${t(\n                  \"general/optional\",\n                )})`}\n                fullWidth={true}\n                value={gitUsername}\n                onChange={(event) => setGitUsername(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Password\")} (${t(\n                  \"general/optional\",\n                )})`}\n                type={\"password\"}\n                fullWidth={true}\n                value={gitPassword}\n                onChange={(event) => setGitPassword(event.target.value)}\n              ></TextField>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={rememberCredentialsChecked}\n                    onChange={() =>\n                      setRememberCredentialsChecked(!rememberCredentialsChecked)\n                    }\n                    value={rememberCredentialsChecked}\n                  />\n                }\n                label={\n                  <Typography>\n                    {t(\"general/remember-username-and-password\") +\n                      \" \" +\n                      (rememberCredentialsChecked\n                        ? `(${t(\"general/stored-locally\")})`\n                        : \"\")}\n                  </Typography>\n                }\n              />\n              <TextField\n                label={t(\"general/cors-proxy\")}\n                placeholder={\"https://crossnote.app/cors/\"}\n                fullWidth={true}\n                value={gitCorsProxy}\n                onChange={(event) => setGitCorsProxy(event.target.value)}\n              ></TextField>\n              <Link\n                href={\n                  \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                }\n                target={\"_blank\"}\n              >\n                {t(\"general/why-cors-proxy\")}\n              </Link>\n            </Box>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={addNotebook}\n          disabled={crossnoteContainer.isAddingNotebook}\n        >\n          {crossnoteContainer.isAddingNotebook\n            ? `${t(\"general/adding\")}...`\n            : t(\"general/add\")}\n        </Button>\n        {props.canCancel && (\n          <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { createContainer } from \"unstated-next\";\nimport { useState, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteTheme } from \"../themes/theme\";\nimport { themeManager } from \"../themes/manager\";\nimport { ThemeName } from \"vickymd/theme\";\nimport { KeyMap, getKeyMap } from \"../lib/keymap\";\n\ninterface InitialState {}\n\nfunction useSettingsContainer(initialState: InitialState) {\n  const [language, setLanguage] = useState<string>(\n    localStorage.getItem(\"settings/language\") || \"en-US\",\n  );\n  const [editorCursorColor, setEditorCursorColor] = useState<string>(\n    localStorage.getItem(\"settings/editorCursorColor\") ||\n      \"rgba(74, 144, 226, 1)\",\n  );\n  const [authorName, setAuthorName] = useState<string>(\n    localStorage.getItem(\"settings/authorName\") || \"Anonymous\",\n  );\n  const [authorEmail, setAuthorEmail] = useState<string>(\n    localStorage.getItem(\"settings/authorEmail\") || \"anonymous@crossnote.app\",\n  );\n  const [theme, setTheme] = useState<CrossnoteTheme>(\n    themeManager.getTheme(localStorage.getItem(\"settings/theme\")) ||\n      themeManager.selectedTheme,\n  );\n  const [keyMap, setKeyMap] = useState<KeyMap>(\n    getKeyMap(localStorage.getItem(\"settings/keyMap\")) || KeyMap.DEFAULT,\n  );\n\n  const { t, i18n } = useTranslation();\n\n  const _setLanguage = useCallback(\n    (language: string) => {\n      if (\n        language === \"en-US\" ||\n        language === \"zh-CN\" ||\n        language === \"zh-TW\" ||\n        language === \"ja-JP\"\n      ) {\n        localStorage.setItem(\"settings/language\", language);\n        setLanguage(language);\n        i18n.changeLanguage(language);\n      } else {\n        localStorage.setItem(\"settings/language\", \"en-US\");\n        setLanguage(\"en-US\");\n        i18n.changeLanguage(\"en-US\");\n      }\n    },\n    [i18n],\n  );\n\n  const _setEditorCursorColor = useCallback((editorCursorColor: string) => {\n    editorCursorColor = editorCursorColor || \"rgba(74, 144, 226, 1)\";\n    localStorage.setItem(\"settings/editorCursorColor\", editorCursorColor);\n    setEditorCursorColor(editorCursorColor);\n  }, []);\n\n  const _setAuthorName = useCallback((authorName: string) => {\n    localStorage.setItem(\"settings/authorName\", authorName);\n    setAuthorName(authorName);\n  }, []);\n\n  const _setAuthorEmail = useCallback((authorEmail: string) => {\n    localStorage.setItem(\"settings/authorEmail\", authorEmail);\n    setAuthorEmail(authorEmail);\n  }, []);\n\n  const _setTheme = useCallback((themeName: string) => {\n    themeManager.selectTheme(themeName);\n    localStorage.setItem(\"settings/theme\", themeManager.selectedTheme.name);\n    setTheme(themeManager.selectedTheme);\n  }, []);\n\n  const _setKeyMap = useCallback((keyMap: KeyMap) => {\n    localStorage.setItem(\"settings/keyMap\", keyMap);\n    setKeyMap(keyMap);\n  }, []);\n\n  useEffect(() => {\n    const themeName = localStorage.getItem(\"settings/theme\") as ThemeName;\n    if (themeName) {\n      _setTheme(themeName);\n    }\n  }, [_setTheme]);\n\n  return {\n    language,\n    setLanguage: _setLanguage,\n    editorCursorColor,\n    setEditorCursorColor: _setEditorCursorColor,\n    authorName,\n    setAuthorName: _setAuthorName,\n    authorEmail,\n    setAuthorEmail: _setAuthorEmail,\n    theme,\n    setTheme: _setTheme,\n    keyMap,\n    setKeyMap: _setKeyMap,\n  };\n}\n\nexport const SettingsContainer = createContainer(useSettingsContainer);\n","import { createContainer } from \"unstated-next\";\nimport { useState, useEffect, useCallback } from \"react\";\nimport {\n  User,\n  useViewerQuery,\n  useSetUserInfoMutation,\n  NotebookFieldsFragment,\n} from \"../generated/graphql\";\nimport Noty from \"noty\";\nimport { SettingsContainer } from \"./settings\";\nimport { useTranslation } from \"react-i18next\";\n\ninterface InitialState {}\n\nfunction useCloudContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n\n  const [authDialogOpen, setAuthDialogOpen] = useState<boolean>(false);\n  const [loggedIn, setLoggedIn] = useState<boolean>(false);\n  const [viewer, setViewer] = useState<User>(null);\n  const [resViewer, executeViewerQuery] = useViewerQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [resSetUserInfo, executeSetUserInfoMutation] = useSetUserInfoMutation();\n  const [token, setToken] = useState<string>(\n    localStorage.getItem(\"token\") || \"\",\n  );\n  const [selectedNotebook, setSelectedNotebook] = useState<\n    NotebookFieldsFragment\n  >(null);\n  const [displayNotebookPreview, setDisplayNotebookPreview] = useState<boolean>(\n    false,\n  );\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const refetchViewer = useCallback(() => {\n    if (token) {\n      executeViewerQuery({\n        requestPolicy: \"network-only\",\n        pollInterval: 60 * 1000, // Refetch the viewer every 60 seconds for checking notifications\n      });\n    }\n  }, [executeViewerQuery, token]);\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  const setUserInfo = useCallback(\n    ({\n      name = \"\",\n      cover = \"\",\n      avatar = \"\",\n      language = \"en-US\",\n      editorCursorColor = \"rgba(74, 144, 226, 1)\",\n    }) => {\n      executeSetUserInfoMutation({\n        cover,\n        name,\n        avatar,\n        bio: \"\",\n        language,\n        location: \"\",\n        editorCursorColor,\n      });\n    },\n    [executeSetUserInfoMutation],\n  );\n\n  const reduceNotificationsCountByOne = useCallback(() => {\n    if (viewer) {\n      viewer.notifications.totalCount = Math.max(\n        0,\n        viewer.notifications.totalCount - 1,\n      );\n      setViewer(Object.assign({}, viewer) as User);\n    }\n  }, [viewer]);\n\n  const clearNotificationsCount = useCallback(() => {\n    viewer.notifications.totalCount = 0;\n    setViewer(Object.assign({}, viewer) as User);\n  }, [viewer]);\n\n  useEffect(() => {\n    if (resViewer.fetching) {\n    } else if (resViewer.error) {\n      /*\n      // Don't display error message here\n      // because the application might be offline now\n      new Noty({\n        type: \"error\",\n        text: resViewer.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n      // logout(); // <= Cause mobile device login failure.\n    } else if (resViewer.data && resViewer.data.viewer) {\n      const viewer = resViewer.data.viewer as User;\n      setViewer(viewer);\n    }\n  }, [resViewer]);\n\n  useEffect(() => {\n    if (viewer) {\n      setLoggedIn(true);\n      if (!loggedIn) {\n        // NOTE: Stop syncing properties below from the cloud\n        // settingsContainer.setLanguage(viewer.language);\n        // settingsContainer.setAuthorName(viewer.name);\n        // settingsContainer.setAuthorEmail(viewer.email);\n        // settingsContainer.setEditorCursorColor(viewer.editorCursorColor);\n      }\n    }\n  }, [loggedIn, viewer]);\n\n  useEffect(() => {\n    if (token && refetchViewer) {\n      refetchViewer();\n    }\n  }, [token, refetchViewer]);\n\n  useEffect(() => {\n    if (resSetUserInfo.fetching) {\n    } else if (resSetUserInfo.error) {\n      new Noty({\n        type: \"error\",\n        text: resSetUserInfo.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resSetUserInfo.data && resSetUserInfo.data.setUserInfo) {\n      setViewer(resSetUserInfo.data.setUserInfo as User);\n      new Noty({\n        type: \"success\",\n        text: t(\"general/profile-updated\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [\n    resSetUserInfo,\n    /*\n    t // TODO: Will cause repeated run\n    */\n  ]);\n\n  return {\n    loggedIn,\n    logout,\n    authDialogOpen,\n    setAuthDialogOpen,\n    viewer,\n    refetchViewer,\n    resSetUserInfo,\n    setUserInfo,\n    reduceNotificationsCountByOne,\n    clearNotificationsCount,\n    selectedNotebook,\n    setSelectedNotebook,\n    displayNotebookPreview,\n    setDisplayNotebookPreview,\n  };\n}\n\nexport const CloudContainer = createContainer(useCloudContainer);\n","import React, { useEffect, useState, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  Box,\n  Button,\n  Typography,\n  Chip,\n  Divider,\n  Link,\n  Avatar,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { browserHistory } from \"../utilities/history\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { useTranslation } from \"react-i18next\";\nimport { Github } from \"mdi-material-ui\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  useSignInMutation,\n  useSignUpMutation,\n  useSendEmailVerificationCodeMutation,\n  useResetPasswordMutation,\n} from \"../generated/graphql\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    form: {\n      position: \"relative\",\n      width: \"400px\",\n      // height: \"360px\",\n      maxWidth: \"90%\",\n      margin: \"0 auto\",\n      padding: \"24px 12px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n    },\n    header: {\n      marginBottom: \"24px\",\n    },\n    username: {\n      marginBottom: \"24px\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    authBtn: {\n      marginBottom: \"16px\",\n    },\n    switchLink: {\n      \"marginTop\": \"16px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n  }),\n);\n\nenum Stage {\n  Signin,\n  Signup,\n  ForgotPassword,\n}\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n}\nexport function AuthDialog(props: Props) {\n  const classes = useStyles(props);\n  const [stage, setStage] = useState<Stage>(Stage.Signin);\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [passwordConfirmation, setPasswordConfirmation] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [verificationCode, setVerificationCode] = useState<string>(\"\");\n  const cloudContainer = CloudContainer.useContainer();\n\n  const [resSignIn, executeSignInMutation] = useSignInMutation();\n  const [resSignUp, executeSignUpMutation] = useSignUpMutation();\n  const [\n    resSendEmailVerificationCode,\n    executeSendEmailVerificationCodeMutation,\n  ] = useSendEmailVerificationCodeMutation();\n  const [\n    resResetPassword,\n    executeResetPasswordMutation,\n  ] = useResetPasswordMutation();\n\n  const { t } = useTranslation();\n  const [loggedIn, setLoggedIn] = useState<boolean>(cloudContainer.loggedIn);\n\n  const signin = useCallback(() => {\n    executeSignInMutation({\n      email: email.trim(),\n      password,\n    });\n  }, [email, password, executeSignInMutation]);\n\n  const signup = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeSignUpMutation({\n        username: username.trim(),\n        email: email.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    username,\n    email,\n    password,\n    passwordConfirmation,\n    t,\n    executeSignUpMutation,\n  ]);\n\n  const sendEmailVerificationCode = useCallback(() => {\n    if (email.trim().length > 0) {\n      executeSendEmailVerificationCodeMutation({\n        email: email.trim(),\n      });\n    }\n  }, [email, executeSendEmailVerificationCodeMutation]);\n\n  const resetPassword = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeResetPasswordMutation({\n        email: email.trim(),\n        verificationCode: verificationCode.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    email,\n    password,\n    passwordConfirmation,\n    executeResetPasswordMutation,\n    verificationCode,\n    t,\n  ]);\n\n  const close = useCallback(() => {\n    setStage(Stage.Signin);\n    setErrorMessage(\"\");\n    props.onClose();\n  }, [props]);\n\n  useEffect(() => {\n    if (resSignIn.error) {\n      setErrorMessage(\n        resSignIn.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignIn.data && resSignIn.data.signIn) {\n      localStorage.setItem(\"token\", resSignIn.data.signIn.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignIn]);\n\n  useEffect(() => {\n    if (resSignUp.error) {\n      setErrorMessage(\n        resSignUp.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignUp.data && resSignUp.data.signUp) {\n      localStorage.setItem(\"token\", resSignUp.data.signUp.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUp]);\n\n  useEffect(() => {\n    if (resSendEmailVerificationCode.error) {\n      setErrorMessage(\n        resSendEmailVerificationCode.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSendEmailVerificationCode.data) {\n      if (!resSendEmailVerificationCode.data.sendEmailVerificationCode) {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_send_code\"));\n      } else {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/verification_code_sent\") + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n    }\n  }, [resSendEmailVerificationCode, email, t]);\n\n  useEffect(() => {\n    if (resResetPassword.error) {\n      setErrorMessage(\n        resResetPassword.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resResetPassword.data) {\n      if (resResetPassword.data.resetPassword) {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/password_reset\") + \" \" + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n        setTimeout(() => {\n          window.location.reload();\n        }, 4000);\n      } else {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_reset_password\"));\n      }\n    }\n  }, [resResetPassword, email, t]);\n\n  useEffect(() => {\n    setLoggedIn(cloudContainer.loggedIn);\n  }, [cloudContainer.loggedIn]);\n\n  if (cloudContainer.loggedIn) {\n    return (\n      <Dialog open={props.open} onClose={close}>\n        <DialogContent>\n          <Box\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Box\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                alignItems: \"center\",\n              }}\n            >\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {t(\"widget/crossnote.auth/hello\")}\n              </Typography>\n              <Avatar\n                className={clsx(classes.avatar)}\n                src={\n                  cloudContainer.viewer.avatar ||\n                  \"data:image/png;base64,\" +\n                    new Identicon(\n                      sha256(cloudContainer.viewer.username),\n                      80,\n                    ).toString()\n                }\n              ></Avatar>\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {\"  \" + cloudContainer.viewer.username}!\n              </Typography>\n            </Box>\n            <Button\n              variant={\"outlined\"}\n              color={\"secondary\"}\n              onClick={() => {\n                cloudContainer.logout();\n              }}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {t(\"settings/log-out\")}\n            </Button>\n          </Box>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={props.open} onClose={close}>\n      <DialogTitle>{t(\"widget/crossnote.auth/welcome\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        {stage === Stage.Signup ? (\n          <TextField\n            className={clsx(classes.email)}\n            label={t(\"general/Username\")}\n            variant=\"outlined\"\n            value={username}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setUsername(event.target.value);\n            }}\n          ></TextField>\n        ) : null}\n        <TextField\n          className={clsx(classes.email)}\n          label={t(\"general/Email\")}\n          variant=\"outlined\"\n          value={email}\n          fullWidth={true}\n          onChange={(event) => {\n            setErrorMessage(\"\");\n            setEmail(event.target.value);\n          }}\n          onClick={(event) => {\n            event.currentTarget.focus();\n          }}\n        ></TextField>\n        {stage === Stage.ForgotPassword && email.trim().length > 0 ? (\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"space-evenly\",\n            }}\n          >\n            <TextField\n              className={clsx(classes.password)}\n              label={t(\"widget/crossnote.auth/enter-the-verification-code\")}\n              variant=\"outlined\"\n              value={verificationCode}\n              fullWidth={true}\n              onChange={(event) => {\n                setErrorMessage(\"\");\n                setVerificationCode(event.target.value);\n              }}\n            ></TextField>\n            <Button\n              variant={\"outlined\"}\n              color={\"primary\"}\n              style={{ marginBottom: \"24px\" }}\n              onClick={() => sendEmailVerificationCode()}\n              disabled={resSendEmailVerificationCode.fetching}\n            >\n              {resSendEmailVerificationCode.fetching\n                ? t(\"general/sending\")\n                : t(\"widget/crossnote.auth/get-code\")}\n            </Button>\n          </Box>\n        ) : null}\n        {(stage === Stage.Signin ||\n          stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/Password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={password}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPassword(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                if (stage === Stage.Signin) {\n                  signin();\n                } /* else {\n              signup();\n            }*/\n              }\n            }}\n          ></TextField>\n        )}\n        {(stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/confirm-password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={passwordConfirmation}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPasswordConfirmation(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                signup();\n              }\n            }}\n          ></TextField>\n        )}\n        {stage === Stage.Signin ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signin()}\n              disabled={resSignIn.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-in\")}\n            </Button>\n            <Typography style={{ textAlign: \"center\" }}>\n              {t(\"widget/crossnote.auth/Or\")}\n            </Typography>\n            <Chip\n              label={t(\"widget/crossnote.auth/sign-in-with-github-account\")}\n              icon={<Github></Github>}\n              style={{ marginBottom: \"16px\", marginTop: \"16px\", width: \"100%\" }}\n              onClick={() => startGitHubOAuth()}\n            ></Chip>\n            <Divider></Divider>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signup)}\n            >\n              {t(\"widget/crossnote.auth/doesnt-have-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : stage === Stage.Signup ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signup()}\n              disabled={resSignUp.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-up\")}\n            </Button>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signin)}\n            >\n              {t(\"widget/crossnote.auth/already-have-an-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : (\n          verificationCode.length > 0 && (\n            <>\n              <Button\n                className={clsx(classes.authBtn)}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => resetPassword()}\n                disabled={resResetPassword.fetching}\n                fullWidth={true}\n              >\n                {t(\"widget/crossnote.auth/reset-password\")}\n              </Button>\n              <Link\n                className={clsx(classes.switchLink)}\n                onClick={() => setStage(Stage.Signin)}\n              >\n                {t(\"widget/crossnote.auth/already-have-an-account\")}\n              </Link>\n            </>\n          )\n        )}\n        {errorMessage.length ? (\n          <Typography className={clsx(classes.errorMessage)}>\n            {errorMessage}\n          </Typography>\n        ) : null}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { NotebookFieldsFragment } from \"../generated/graphql\";\nimport {\n  Box,\n  ButtonBase,\n  Typography,\n  useTheme,\n  Avatar,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Summary,\n  getHeaderFromMarkdown,\n  generateSummaryFromMarkdown,\n} from \"../utilities/note\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { Star, StarOutline } from \"mdi-material-ui\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { resolveNotebookFilePath } from \"../utilities/image\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notebookCard: {\n      width: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"flex-start\",\n      padding: theme.spacing(2, 0.5, 0),\n      textAlign: \"left\",\n      cursor: \"default\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    selected: {\n      borderLeft: `4px solid ${theme.palette.primary.main}`,\n    },\n    unselected: {\n      borderLeft: `4px solid rgba(0, 0, 0, 0)`,\n    },\n    leftPanel: {\n      width: \"48px\",\n      paddingLeft: theme.spacing(0.5),\n    },\n    rightPanel: {\n      width: \"calc(100% - 48px)\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    bottomPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      color: theme.palette.text.secondary,\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    header: {\n      marginBottom: theme.spacing(1),\n      wordBreak: \"break-all\",\n    },\n    summary: {\n      \"color\": theme.palette.text.secondary,\n      \"marginBottom\": theme.spacing(1),\n      \"paddingRight\": theme.spacing(2),\n      \"display\": \"-webkit-box\",\n      \"lineHeight\": \"1.3rem !important\",\n      \"textOverflow\": \"ellipsis !important\",\n      \"overflow\": \"hidden !important\",\n      \"maxWidth\": \"100%\",\n      \"maxHeight\": \"2.6rem\", // lineHeight x -website-line-clamp\n      \"-webkit-line-clamp\": 2,\n      \"-webkit-box-orient\": \"vertical\",\n      \"wordBreak\": \"break-all\",\n    },\n    images: {\n      display: \"flex\",\n      width: \"100%\",\n      overflow: \"hidden\",\n      position: \"relative\",\n      marginBottom: theme.spacing(1),\n    },\n    imagesWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n    },\n    image: {\n      width: \"128px\",\n      height: \"80px\",\n      marginRight: theme.spacing(1),\n      position: \"relative\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      display: \"block\",\n      borderRadius: \"6px\",\n    },\n    star: {\n      color: theme.palette.secondary.main,\n      marginRight: theme.spacing(0.5),\n    },\n  }),\n);\ninterface Props {\n  notebook: NotebookFieldsFragment;\n}\nexport function NotebookCard(props: Props) {\n  const theme = useTheme();\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const cloudContainer = CloudContainer.useContainer();\n  const notebook = props.notebook;\n  const [header, setHeader] = useState<string>(\"\");\n  const [summary, setSummary] = useState<Summary>(null);\n  const [images, setImages] = useState<string[]>([]);\n\n  useEffect(() => {\n    setHeader(getHeaderFromMarkdown(notebook.markdown));\n    generateSummaryFromMarkdown(\n      notebook.markdown.trim() || t(\"general/this-notebook-is-empty\"),\n    )\n      .then((summary) => {\n        setSummary(summary);\n\n        // render images\n        setImages(\n          summary.images\n            .map((image) => resolveNotebookFilePath(notebook, image))\n            .filter((x) => x.length > 0)\n            .slice(0, 3) || [],\n        );\n      })\n      .catch((error) => {});\n  }, [notebook, t]);\n\n  return (\n    <ButtonBase\n      className={clsx(\n        classes.notebookCard,\n        cloudContainer.selectedNotebook &&\n          cloudContainer.selectedNotebook.id === notebook.id\n          ? classes.selected\n          : classes.unselected,\n      )}\n      onClick={() => {\n        cloudContainer.setSelectedNotebook(notebook);\n        cloudContainer.setDisplayNotebookPreview(true);\n      }}\n    >\n      <Box className={clsx(classes.leftPanel)}>\n        <Tooltip title={notebook.owner.username}>\n          <Avatar\n            className={clsx(classes.avatar)}\n            variant={\"rounded\"}\n            src={\n              notebook.owner.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(notebook.owner.username), 80).toString()\n            }\n          ></Avatar>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.rightPanel)}>\n        {header && (\n          <Typography\n            style={{ fontWeight: \"bold\" }}\n            variant={\"body1\"}\n            className={clsx(classes.header)}\n          >\n            {header}\n          </Typography>\n        )}\n        {summary && summary.summary.trim().length > 0 && (\n          <Typography className={clsx(classes.summary)}>\n            {summary && summary.summary}\n          </Typography>\n        )}\n        {images.length > 0 && (\n          <Box className={clsx(classes.images)}>\n            <Box className={clsx(classes.imagesWrapper)}>\n              {images.map((image) => (\n                <div\n                  key={image}\n                  className={clsx(classes.image)}\n                  style={{\n                    backgroundImage: `url(${image})`,\n                  }}\n                ></div>\n              ))}\n            </Box>\n          </Box>\n        )}\n        <Box className={clsx(classes.bottomPanel)}>\n          {notebook.isStarred ? (\n            <Star className={clsx(classes.star)}></Star>\n          ) : (\n            <StarOutline\n              className={clsx(classes.star)}\n              style={{ color: theme.palette.text.secondary }}\n            ></StarOutline>\n          )}\n          {\" \" + notebook.starsCount}\n        </Box>\n      </Box>\n    </ButtonBase>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Box, Typography, CircularProgress, Button } from \"@material-ui/core\";\nimport {\n  NotebookFieldsFragment,\n  useNotebooksQuery,\n  NotebookOrderBy,\n} from \"../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport { NotebookCard } from \"./NotebookCard\";\nimport { CloudContainer } from \"../containers/cloud\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notebooksList: {\n      position: \"relative\",\n      flex: \"1\",\n      overflowY: \"auto\",\n      paddingBottom: theme.spacing(12),\n      marginTop: theme.spacing(0.5),\n    },\n  }),\n);\n\ninterface Props {\n  searchValue: string;\n}\n\nconst perPage = 20;\nexport function Notebooks(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const cloudContainer = CloudContainer.useContainer();\n  const [notebooksListElement, setNotebooksListElement] = useState<\n    HTMLDivElement\n  >(null);\n  const [notebooks, setNotebooks] = useState<NotebookFieldsFragment[]>([]);\n  const [page, setPage] = useState<number>(0);\n  const [resNotebooks, executeNotebooksQuery] = useNotebooksQuery({\n    variables: {\n      page: page,\n      perPage,\n      orderBy: NotebookOrderBy.TotalStarsCount,\n      query: props.searchValue,\n    },\n    pause: true,\n  });\n  const [finishedLoadingAll, setFinishedLoadingAll] = useState<boolean>(false);\n\n  useEffect(() => {\n    return () => {\n      cloudContainer.setSelectedNotebook(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    setNotebooks([]);\n    setPage(0);\n    setFinishedLoadingAll(false);\n  }, [props.searchValue]);\n\n  useEffect(() => {\n    // Init\n    if (notebooks.length === 0 && page === 0 && finishedLoadingAll === false) {\n      executeNotebooksQuery();\n    }\n  }, [notebooks, page, finishedLoadingAll, executeNotebooksQuery]);\n\n  useEffect(() => {\n    if (!finishedLoadingAll && page !== 0) {\n      executeNotebooksQuery();\n    }\n  }, [page, finishedLoadingAll]);\n\n  useEffect(() => {\n    if (resNotebooks.error) {\n    } else if (resNotebooks.data) {\n      const newNotebooks = resNotebooks.data.notebooks;\n      setNotebooks((notebooks) => {\n        const pendingNotebooks = [...notebooks, ...newNotebooks]\n          .reverse()\n          .filter(\n            (notebook, offset, self) =>\n              self.findIndex((n) => n.id === notebook.id) === offset,\n          )\n          .reverse();\n        return pendingNotebooks;\n      });\n      if (newNotebooks.length < perPage) {\n        setFinishedLoadingAll(true);\n      }\n      resNotebooks.data = null;\n    }\n  }, [resNotebooks]);\n\n  useEffect(() => {\n    if (!cloudContainer.selectedNotebook) {\n      cloudContainer.setSelectedNotebook(notebooks[0]);\n    }\n  }, [notebooks]);\n\n  return (\n    <div\n      className={clsx(classes.notebooksList)}\n      ref={(element: HTMLElement) => {\n        setNotebooksListElement(element as HTMLDivElement);\n      }}\n    >\n      {notebooks.map((notebook) => {\n        return (\n          <NotebookCard notebook={notebook} key={notebook.id}></NotebookCard>\n        );\n      })}\n      {!finishedLoadingAll &&\n        (resNotebooks.fetching ? (\n          <Box style={{ marginTop: theme.spacing(2), textAlign: \"center\" }}>\n            <CircularProgress></CircularProgress>\n          </Box>\n        ) : (\n          <Box style={{ textAlign: \"center\", margin: theme.spacing(2) }}>\n            <Button\n              color={\"primary\"}\n              variant={\"outlined\"}\n              onClick={() => {\n                console.log(\"clicked\");\n                setPage((page) => page + 1);\n              }}\n            >\n              {\"View more notebooks\"}\n            </Button>\n          </Box>\n        ))}\n      {finishedLoadingAll ? (\n        <Typography\n          style={{\n            textAlign: \"center\",\n            marginTop: \"32px\",\n          }}\n          variant={\"body2\"}\n        >\n          {\" \" + t(\"general/no-more-notebooks-found\")}\n        </Typography>\n      ) : null}\n    </div>\n  );\n}\n","import React, { useState, useCallback } from \"react\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  Magnify,\n  Cog,\n  Menu as MenuIcon,\n  SortVariant,\n  SortDescending,\n  SortAscending,\n  Publish,\n} from \"mdi-material-ui\";\nimport {\n  Box,\n  Button,\n  Card,\n  Hidden,\n  IconButton,\n  InputBase,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport PublishNotebookDialog from \"./PublishNotebookDialog\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { Notebooks } from \"./Notebooks\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    explorePanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      height: \"100%\",\n      backgroundColor: theme.palette.background.default,\n    },\n    topPanel: {\n      padding: theme.spacing(1),\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.paper,\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": 0, // theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        // marginLeft: theme.spacing(3),\n        // width: \"auto\"\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n      border: \"1px solid #bbb\",\n      borderRadius: \"4px\",\n      width: \"100%\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        // width: 200\n      },\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport default function ExplorePanel(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const cloudContainer = CloudContainer.useContainer();\n\n  const [publishNotebookDialogOpen, setPublishNotebookDialogOpen] = useState<\n    boolean\n  >(false);\n\n  // Search\n  const [searchValue, setSearchValue] = useState<string>(\"\");\n  const [searchValueInputTimeout, setSearchValueInputTimeout] = useState<\n    NodeJS.Timeout\n  >(null);\n  const [finalSearchValue, setFinalSearchValue] = useState<string>(\"\");\n\n  const onChangeSearchValue = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n      const value = event.target.value;\n      setSearchValue(value);\n      if (searchValueInputTimeout) {\n        clearTimeout(searchValueInputTimeout);\n      }\n      const timeout = setTimeout(() => {\n        setFinalSearchValue(value);\n      }, 600);\n      setSearchValueInputTimeout(timeout);\n    },\n    [searchValueInputTimeout],\n  );\n\n  return (\n    <Box className={clsx(classes.explorePanel)}>\n      <Card className={clsx(classes.topPanel)}>\n        <Box className={clsx(classes.row)}>\n          <Hidden smUp implementation=\"css\">\n            <IconButton onClick={props.toggleDrawer}>\n              <MenuIcon></MenuIcon>\n            </IconButton>\n          </Hidden>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <Magnify />\n            </div>\n            <InputBase\n              placeholder={t(\"search/notebooks\")}\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              value={searchValue}\n              inputProps={{ \"aria-label\": \"search\" }}\n              onChange={onChangeSearchValue}\n              autoComplete={\"off\"}\n              autoCorrect={\"off\"}\n            />\n          </div>\n        </Box>\n        <Box\n          className={clsx(classes.row)}\n          style={{ justifyContent: \"space-between\", marginTop: \"8px\" }}\n        >\n          <Box className={clsx(classes.row)}>\n            <span role=\"img\" aria-label=\"folder\">\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"28px\", height: \"28px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n            </span>\n            <Typography className={clsx(classes.sectionName)}>\n              {t(\"general/Explore\")}\n            </Typography>\n          </Box>\n          <Box>\n            {/* TODO: Support OrderBy */}\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              onClick={() => {\n                if (cloudContainer.loggedIn) {\n                  setPublishNotebookDialogOpen(true);\n                } else {\n                  cloudContainer.setAuthDialogOpen(true);\n                }\n              }}\n            >\n              <Publish></Publish>\n              {t(\"general/Publish\")}\n            </Button>\n          </Box>\n        </Box>\n      </Card>\n      <PublishNotebookDialog\n        open={publishNotebookDialogOpen}\n        onClose={() => setPublishNotebookDialogOpen(false)}\n      ></PublishNotebookDialog>\n\n      <Notebooks searchValue={finalSearchValue}></Notebooks>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Box,\n  Hidden,\n  ButtonGroup,\n  Button,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  NotebookFieldsFragment,\n  useStarNotebookMutation,\n  useUnstarNotebookMutation,\n} from \"../generated/graphql\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport {\n  ChevronLeft,\n  Git,\n  Star,\n  StarOutline,\n  CloudDownloadOutline,\n  Cog,\n  BookOpenPageVariant,\n} from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { renderPreview } from \"vickymd/preview\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport AddNotebookDialog from \"./AddNotebookDialog\";\nimport ConfigurePublishedNotebookDialog from \"./ConfigurePublishedNotebookDialog\";\nimport { resolveNotebookFilePath } from \"../utilities/image\";\nimport { browserHistory } from \"../utilities/history\";\nimport { matter } from \"../utilities/markdown\";\n\nconst previewZIndex = 99;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notebookPanel: {\n      width: \"100%\",\n      height: \"100%\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      borderRadius: 0,\n    },\n    topPanel: {\n      position: \"relative\",\n      padding: theme.spacing(0.5, 1), // theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      // borderBottom: \"1px solid #eee\",\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    bottomPanel: {\n      position: \"relative\",\n      padding: theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      backgroundColor: theme.palette.background.paper,\n      // borderTop: \"1px solid #eee\",\n      // color: theme.palette.primary.contrastText,\n      // backgroundColor: theme.palette.primary.main\n    },\n    controlBtn: {\n      padding: theme.spacing(0.5, 1.5),\n      color: theme.palette.text.secondary,\n    },\n    controlBtnSelected: {\n      color: theme.palette.primary.main,\n    },\n    controlBtnSelectedSecondary: {\n      color: theme.palette.secondary.main,\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    backBtn: {\n      marginRight: \"8px\",\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\",\n      },\n    },\n    previewWrapper: {\n      flex: 1,\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.paper,\n    },\n    preview: {\n      position: \"relative\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n      border: \"none\",\n      overflow: \"auto !important\",\n      padding: theme.spacing(2),\n      zIndex: previewZIndex,\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      // gridArea: \"2 / 2 / 3 / 3\"\n    },\n    presentation: {\n      padding: \"0 !important\",\n    },\n    star: {\n      color: theme.palette.secondary.main,\n      marginRight: theme.spacing(0.5),\n    },\n  }),\n);\n\ninterface Props {\n  notebook: NotebookFieldsFragment;\n}\n\nexport function NotebookPanel(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const notebook = props.notebook;\n  const cloudContainer = CloudContainer.useContainer();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [previewIsPresentation, setPreviewIsPresentation] = useState<boolean>(\n    false,\n  );\n  const [alreadyDownloadedNotebook, setAlreadyDownloadedNotebook] = useState<\n    boolean\n  >(false);\n  const [addNotebookDialogOpen, setAddNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [\n    configureNotebookDialogOpen,\n    setConfigureNotebookDialogOpen,\n  ] = useState<boolean>(false);\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [\n    resStarNotebook,\n    executeStarNotebookMutation,\n  ] = useStarNotebookMutation();\n  const [\n    resUnstarNotebook,\n    executeUnstarNotebookMutation,\n  ] = useUnstarNotebookMutation();\n\n  const openGitURLWithBranch = useCallback(() => {\n    if (!notebook) {\n      return;\n    }\n    const { gitURL, gitBranch } = notebook;\n    const gitURLArr = gitURL.replace(\"https://\", \"\").split(\"/\");\n    const gitHost = gitURLArr[0].toLowerCase();\n    const gitOwner = gitURLArr[1];\n    const gitRepo = gitURLArr[2].replace(/\\.git$/, \"\");\n    let url = \"\";\n    if (gitHost === \"github.com\") {\n      url = `https://github.com/${gitOwner}/${gitRepo}/tree/${gitBranch}`;\n    } else if (gitHost === \"gitlab.com\") {\n      url = `https://gitlab.com/${gitOwner}/${gitRepo}/-/tree/${gitBranch}`;\n    } else if (gitHost === \"gitee.com\") {\n      url = `https://gitee.com/${gitOwner}/${gitRepo}/tree/${gitBranch}`;\n    } else if (gitHost === \"gitea.com\") {\n      url = `https://gitea.com/${gitOwner}/${gitRepo}/src/branch/${gitBranch}`;\n    }\n    if (url.length) {\n      window.open(url, \"_blank\");\n    }\n  }, [notebook]);\n\n  const starOrUnstarTheNotebook = useCallback(() => {\n    if (!notebook) {\n      return;\n    }\n    if (!cloudContainer.loggedIn) {\n      cloudContainer.setAuthDialogOpen(true);\n      return;\n    }\n    const starred = notebook.isStarred;\n    notebook.isStarred = !notebook.isStarred;\n    if (starred) {\n      notebook.starsCount = Math.max(0, notebook.starsCount - 1);\n      executeUnstarNotebookMutation({\n        notebookID: notebook.id,\n      });\n    } else {\n      notebook.starsCount += 1;\n      executeStarNotebookMutation({\n        notebookID: notebook.id,\n      });\n    }\n    setForceUpdate(Date.now());\n  }, [\n    notebook,\n    executeStarNotebookMutation,\n    executeUnstarNotebookMutation,\n    cloudContainer.loggedIn,\n  ]);\n\n  const openNotebook = useCallback(() => {\n    if (!notebook || !crossnoteContainer.notebooks.length) {\n      return;\n    }\n    const nb = crossnoteContainer.notebooks.find(\n      (n) => n.gitURL === notebook.gitURL && n.gitBranch === notebook.gitBranch,\n    );\n    if (nb) {\n      // TODO: Fix this\n      // crossnoteContainer.setSelectedNotebook(nb);\n    }\n  }, [notebook, crossnoteContainer.notebooks]);\n\n  useEffect(() => {\n    return () => {\n      setPreviewElement(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!notebook || !previewElement) {\n      return;\n    }\n    const handleLinksClickEvent = (preview: HTMLElement) => {\n      // Handle link click event\n      const links = preview.getElementsByTagName(\"A\");\n      for (let i = 0; i < links.length; i++) {\n        const link = links[i] as HTMLAnchorElement;\n        link.onclick = (event) => {\n          event.preventDefault();\n          const href = link.getAttribute(\"href\");\n          if (!href.match(/^(https?|data):/)) {\n            const alreadyDownloaded = !!crossnoteContainer.notebooks.find(\n              (nb) =>\n                nb.gitURL === notebook.gitURL &&\n                nb.gitBranch === notebook.gitBranch,\n            );\n            if (alreadyDownloaded) {\n              const filePath = href.replace(/^\\/+/, \"\").replace(/^\\.\\/+/, \"\");\n              browserHistory.push(\n                `/?repo=${encodeURIComponent(\n                  notebook.gitURL,\n                )}&branch=${encodeURIComponent(\n                  notebook.gitBranch || \"master\",\n                )}&filePath=${encodeURIComponent(filePath)}`,\n              );\n            } else {\n              setAddNotebookDialogOpen(true);\n            }\n          } else {\n            const url = resolveNotebookFilePath(notebook, href);\n            if (url.startsWith(\"https://\") || url.startsWith(\"http://\")) {\n              window.open(url, \"_blank\");\n            }\n          }\n        };\n      }\n    };\n    const resolveImages = (preview: HTMLElement) => {\n      const images = preview.getElementsByTagName(\"IMG\");\n      for (let i = 0; i < images.length; i++) {\n        const image = images[i] as HTMLImageElement;\n        const imageSrc = image.getAttribute(\"src\");\n        image.setAttribute(\"src\", resolveNotebookFilePath(notebook, imageSrc));\n      }\n    };\n    renderPreview(previewElement, notebook.markdown);\n    if (\n      previewElement.childElementCount &&\n      previewElement.children[0].tagName.toUpperCase() === \"IFRAME\"\n    ) {\n      // presentation\n      previewElement.style.maxWidth = \"100%\";\n      previewElement.style.height = \"100%\";\n      previewElement.style.overflow = \"hidden !important\";\n      handleLinksClickEvent(\n        (previewElement.children[0] as HTMLIFrameElement).contentDocument\n          .body as HTMLElement,\n      );\n      resolveImages(\n        (previewElement.children[0] as HTMLIFrameElement).contentDocument\n          .body as HTMLElement,\n      );\n      setPreviewIsPresentation(true);\n    } else {\n      // normal\n      // previewElement.style.maxWidth = `${EditorPreviewMaxWidth}px`;\n      previewElement.style.height = \"100%\";\n      previewElement.style.overflow = \"hidden !important\";\n      handleLinksClickEvent(previewElement);\n      resolveImages(previewElement);\n      setPreviewIsPresentation(false);\n    }\n  }, [notebook, previewElement, crossnoteContainer.notebooks]);\n\n  useEffect(() => {\n    if (!notebook) {\n      setAlreadyDownloadedNotebook(false);\n    } else {\n      const index = crossnoteContainer.notebooks.findIndex(\n        (n) =>\n          n.gitURL === notebook.gitURL && n.gitBranch === notebook.gitBranch,\n      );\n      setAlreadyDownloadedNotebook(index >= 0);\n    }\n  }, [notebook, crossnoteContainer.notebooks]);\n\n  if (!notebook) {\n    return (\n      <Box className={clsx(classes.notebookPanel)}>\n        <Hidden smUp>\n          <Box className={clsx(classes.topPanel)}>\n            <Box className={clsx(classes.row)}>\n              <ButtonGroup className={clsx(classes.backBtn)}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => {\n                    cloudContainer.setDisplayNotebookPreview(false);\n                  }}\n                >\n                  <ChevronLeft></ChevronLeft>\n                </Button>\n              </ButtonGroup>\n            </Box>\n          </Box>\n        </Hidden>\n        <Box\n          style={{\n            margin: \"0 auto\",\n            top: \"50%\",\n            position: \"relative\",\n          }}\n        >\n          <Typography>{` ${t(\"general/nothing-here\")}`}</Typography>\n        </Box>\n      </Box>\n    );\n  }\n  return (\n    <Box className={clsx(classes.notebookPanel)}>\n      <Box className={clsx(classes.topPanel, \"editor-toolbar\")}>\n        <Box className={clsx(classes.row)}>\n          <ButtonGroup className={clsx(classes.backBtn)}>\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={() => {\n                cloudContainer.setDisplayNotebookPreview(false);\n              }}\n            >\n              <ChevronLeft></ChevronLeft>\n            </Button>\n          </ButtonGroup>\n          <ButtonGroup>\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={starOrUnstarTheNotebook}\n            >\n              {notebook.isStarred ? (\n                <Star className={clsx(classes.star)}></Star>\n              ) : (\n                <StarOutline\n                  className={clsx(classes.star)}\n                  style={{ color: theme.palette.text.secondary }}\n                ></StarOutline>\n              )}\n              {notebook.starsCount}\n            </Button>\n          </ButtonGroup>\n          {alreadyDownloadedNotebook ? (\n            <ButtonGroup style={{ marginLeft: theme.spacing(1) }}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                onClick={openNotebook}\n              >\n                <BookOpenPageVariant\n                  style={{ marginRight: theme.spacing(0.5) }}\n                ></BookOpenPageVariant>\n                {t(\"general/Open\")}\n              </Button>\n            </ButtonGroup>\n          ) : (\n            <ButtonGroup style={{ marginLeft: theme.spacing(1) }}>\n              <Button\n                className={clsx(classes.controlBtn)}\n                disabled={crossnoteContainer.isAddingNotebook}\n                onClick={() => setAddNotebookDialogOpen(true)}\n              >\n                <CloudDownloadOutline\n                  style={{ marginRight: theme.spacing(0.5) }}\n                ></CloudDownloadOutline>\n                {t(\"general/Download\")}\n              </Button>\n            </ButtonGroup>\n          )}\n          {cloudContainer.viewer &&\n            cloudContainer.viewer.username === notebook.owner.username && (\n              <ButtonGroup style={{ marginLeft: theme.spacing(1) }}>\n                <Button\n                  className={clsx(classes.controlBtn)}\n                  onClick={() => setConfigureNotebookDialogOpen(true)}\n                >\n                  <Cog></Cog>\n                  {t(\"general/Configure\")}\n                </Button>\n              </ButtonGroup>\n            )}\n        </Box>\n      </Box>\n      <Box className={clsx(classes.previewWrapper)}>\n        <div\n          className={clsx(\n            classes.preview,\n            \"preview\",\n            previewIsPresentation ? classes.presentation : null,\n          )}\n          ref={(element: HTMLElement) => {\n            setPreviewElement(element);\n          }}\n        ></div>\n      </Box>\n      <Box className={clsx(classes.bottomPanel)}>\n        <Box className={clsx(classes.row)}>\n          <Git\n            style={{\n              color: theme.palette.text.secondary,\n              marginRight: theme.spacing(0.5),\n            }}\n          ></Git>\n          <Typography\n            variant={\"caption\"}\n            style={{ cursor: \"pointer\" }}\n            color={\"textPrimary\"}\n            onClick={openGitURLWithBranch}\n          >{`${notebook.gitURL}:${notebook.gitBranch}`}</Typography>\n        </Box>\n      </Box>\n      <AddNotebookDialog\n        open={addNotebookDialogOpen}\n        onClose={() => setAddNotebookDialogOpen(false)}\n        gitURL={notebook.gitURL}\n        gitBranch={notebook.gitBranch}\n        notebookName={matter(notebook.markdown).data?.notebook?.name || \"\"}\n        canCancel={true}\n      ></AddNotebookDialog>\n      <ConfigurePublishedNotebookDialog\n        notebook={notebook}\n        open={configureNotebookDialogOpen}\n        onClose={() => setConfigureNotebookDialogOpen(false)}\n      ></ConfigurePublishedNotebookDialog>\n    </Box>\n  );\n}\n","import React, { useState, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  Typography,\n  List,\n  ListItem,\n  ListItemText,\n  // useMediaQuery,\n  // useTheme,\n} from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport useInterval from \"@use-it/interval\";\nimport { Translate, ChevronDown } from \"mdi-material-ui\";\n\ninterface Props {}\nexport default function LanguageSelectorDialog(props: Props) {\n  const { t } = useTranslation();\n  // const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const languages = [\"en-US\", \"zh-CN\", \"zh-TW\", \"ja-JP\"];\n  // const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n\n  const [open, setOpen] = useState<boolean>(\n    crossnoteContainer.notebooks.length <= 1 &&\n      !localStorage.getItem(\"settings/language\"),\n  );\n  const [titleLanguage, setTitleLanguage] = useState<string>(languages[0]);\n\n  const chooseLanguage = useCallback((language: string) => {\n    settingsContainer.setLanguage(language);\n    setOpen(false);\n  }, []);\n\n  useInterval(() => {\n    let index = languages.findIndex((x) => x === titleLanguage);\n    index = index + 1;\n    if (index >= languages.length) {\n      index = 0;\n    }\n    setTitleLanguage(languages[index]);\n  }, 5000);\n\n  return (\n    <Dialog\n      open={open}\n      fullWidth={true}\n      style={{ zIndex: 2000 }}\n      onClose={() => chooseLanguage(\"en-US\")}\n    >\n      <DialogTitle style={{ textAlign: \"center\" }}>\n        {\" \" + t(\"widget/crossnote.auth/welcome\", { lng: titleLanguage })}\n      </DialogTitle>\n      <DialogContent>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <Translate style={{ marginRight: \"8px\" }}></Translate>\n          {t(\"language-selector-dialog/subtitle\", { lng: titleLanguage })}\n        </Typography>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <ChevronDown></ChevronDown>\n        </Typography>\n        <List>\n          <ListItem button onClick={() => chooseLanguage(\"en-US\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>English</ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-CN\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              \n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-TW\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              \n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"ja-JP\")}>\n            <ListItemText style={{ textAlign: \"center\" }}></ListItemText>\n          </ListItem>\n        </List>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  TextField,\n  Box,\n  Typography,\n  DialogActions,\n  Button,\n  Link,\n  ExpansionPanel,\n  ExpansionPanelDetails,\n  ExpansionPanelSummary,\n  Input,\n  InputAdornment,\n} from \"@material-ui/core\";\nimport { ChevronDown } from \"mdi-material-ui\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { useTranslation } from \"react-i18next\";\nimport { Notebook } from \"../lib/notebook\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nconst MaxClickDeleteCount = 3;\nexport default function ConfigureNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [gitURL, setGitURL] = useState<string>(\"\");\n  const [gitBranch, setGitBranch] = useState<string>(\"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [autoFetchPeriod, setAutoFetchPeriod] = useState<number>(0);\n  const [clickDeleteCount, setClickDeleteCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const [clickHardResetCount, setClickHardResetCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n    setClickHardResetCount(MaxClickDeleteCount);\n  }, [props.open]);\n\n  useEffect(() => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      return;\n    }\n    setNotebookName(notebook.name);\n    setGitURL(notebook.gitURL);\n    setGitBranch(notebook.gitBranch || \"master\");\n    setGitUsername(notebook.gitUsername);\n    setGitPassword(notebook.gitPassword);\n    setGitCorsProxy(notebook.gitCorsProxy);\n    setAutoFetchPeriod(notebook.autoFetchPeriod / 60000);\n  }, [props.notebook]);\n\n  const updateNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      props.onClose();\n      return;\n    }\n    notebook.name = notebookName.trim();\n    notebook.gitURL = gitURL.trim();\n    notebook.gitBranch = gitBranch.trim();\n    notebook.gitUsername = gitUsername.trim();\n    notebook.gitPassword = gitPassword;\n    notebook.gitCorsProxy = gitCorsProxy.trim();\n    notebook.autoFetchPeriod = Math.max(autoFetchPeriod * 60000, 0);\n    try {\n      await crossnoteContainer.updateNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [\n    props,\n    props.notebook,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    gitCorsProxy,\n    autoFetchPeriod,\n  ]);\n\n  const deleteNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.deleteNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [props.notebook]);\n\n  const hardResetNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.hardResetNotebook(notebook);\n    } catch (error) {}\n    props.onClose();\n  }, [props.notebook]);\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n  }, [props.notebook]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={!clickDeleteCount ? null : props.onClose}\n    >\n      <DialogTitle>{t(\"general/configure-the-notebook\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        <ExpansionPanel\n          elevation={2}\n          expanded={expanded}\n          onChange={() => setExpanded(!expanded)}\n        >\n          <ExpansionPanelSummary expandIcon={<ChevronDown></ChevronDown>}>\n            <Typography>{`${t(\"general/git-repository\")} (${t(\n              \"general/optional\",\n            )})`}</Typography>\n          </ExpansionPanelSummary>\n          <ExpansionPanelDetails>\n            <Box>\n              <TextField\n                label={t(\"general/url\")}\n                placeholder={\"https://abc/def.git\"}\n                disabled={true}\n                fullWidth={true}\n                value={gitURL}\n                onChange={(event) => setGitURL(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/branch\")}\n                placeholder={\"master\"}\n                disabled={true}\n                fullWidth={true}\n                value={gitBranch}\n                onChange={(event) => setGitBranch(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Username\")} (${t(\n                  \"general/optional\",\n                )})`}\n                fullWidth={true}\n                value={gitUsername}\n                onChange={(event) => setGitUsername(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Password\")} (${t(\n                  \"general/optional\",\n                )})`}\n                type={\"password\"}\n                fullWidth={true}\n                value={gitPassword}\n                onChange={(event) => setGitPassword(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/cors-proxy\")}\n                placeholder={\"https://crossnote.app/cors/\"}\n                fullWidth={true}\n                value={gitCorsProxy}\n                onChange={(event) => setGitCorsProxy(event.target.value)}\n              ></TextField>\n              <Link\n                href={\n                  \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                }\n                target={\"_blank\"}\n              >\n                {t(\"general/why-cors-proxy\")}\n              </Link>\n              {props.notebook && props.notebook.gitURL ? (\n                <Box style={{ marginTop: \"16px\" }}>\n                  <Typography>\n                    {t(\"general/check-notebook-updates-periodically\")}\n                  </Typography>\n                  <Input\n                    value={autoFetchPeriod}\n                    onChange={(event) => {\n                      try {\n                        const value = parseFloat(event.target.value || \"0\");\n                        if (!isNaN(value)) {\n                          setAutoFetchPeriod(value);\n                        }\n                      } catch (error) {}\n                    }}\n                    endAdornment={\n                      <InputAdornment position=\"end\">\n                        {t(\"general/minutes\")}\n                      </InputAdornment>\n                    }\n                  ></Input>\n                </Box>\n              ) : null}\n            </Box>\n          </ExpansionPanelDetails>\n        </ExpansionPanel>\n      </DialogContent>\n      <DialogActions>\n        {crossnoteContainer.notebooks.length > 1 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickDeleteCount}\n            onClick={() => {\n              if (clickDeleteCount === 1) {\n                deleteNotebook();\n                setClickDeleteCount(clickDeleteCount - 1);\n              } else {\n                setClickDeleteCount(clickDeleteCount - 1);\n              }\n            }}\n          >\n            {t(\"general/Delete\") +\n              (clickDeleteCount < MaxClickDeleteCount\n                ? ` ${clickDeleteCount}`\n                : \"\")}\n          </Button>\n        )}\n        {props.notebook && props.notebook.gitURL.length > 0 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickHardResetCount || !clickDeleteCount}\n            onClick={() => {\n              if (clickHardResetCount === 1) {\n                hardResetNotebook();\n                setClickHardResetCount(clickHardResetCount - 1);\n              } else {\n                setClickHardResetCount(clickHardResetCount - 1);\n              }\n            }}\n          >\n            {t(\"general/hard-reset\") +\n              (clickHardResetCount < MaxClickDeleteCount\n                ? ` ${clickHardResetCount}`\n                : \"\")}\n          </Button>\n        )}\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={updateNotebook}\n          disabled={!clickDeleteCount}\n        >\n          {t(\"general/Save\")}\n        </Button>\n        <Button onClick={props.onClose} disabled={!clickDeleteCount}>\n          {t(\"general/cancel\")}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogActions,\n  Button,\n  TextField,\n  Typography,\n  Box,\n} from \"@material-ui/core\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport Noty from \"noty\";\nimport { useTranslation } from \"react-i18next\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { Notebook } from \"../lib/notebook\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    textField: {\n      marginBottom: theme.spacing(2),\n    },\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nexport default function PushNotebookDialog(props: Props) {\n  const classes = useStyles(props);\n  const notebook = props.notebook;\n  const [gitUsername, setGitUsername] = useState<string>(notebook.gitUsername);\n  const [gitPassword, setGitPassword] = useState<string>(notebook.gitPassword);\n  const [commitMessage, setCommitMessage] = useState<string>(\n    \"doc: Updated docs\",\n  );\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const pushNotebook = useCallback(() => {\n    crossnoteContainer\n      .pushNotebook({\n        notebook,\n        authorName: settingsContainer.authorEmail,\n        authorEmail: settingsContainer.authorEmail,\n        username: gitUsername,\n        password: gitPassword,\n        message: commitMessage,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        props.onClose();\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-uploaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error: Error) => {\n        console.log(error);\n        props.onClose();\n        new Noty({\n          type: \"error\",\n          text: error.message.match(/^error\\//)\n            ? t(error.message)\n            : t(\"error/failed-to-upload-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [\n    settingsContainer.authorName,\n    settingsContainer.authorEmail,\n    gitUsername,\n    gitPassword,\n    notebook,\n    commitMessage,\n    props,\n    t,\n    crossnoteContainer.pushNotebook,\n  ]);\n\n  useEffect(() => {\n    setGitUsername(notebook.gitUsername);\n  }, [notebook.gitUsername, props.open]);\n\n  useEffect(() => {\n    setGitPassword(notebook.gitPassword);\n  }, [notebook.gitPassword, props.open]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isPushingNotebook) {\n          props.onClose();\n        }\n      }}\n    >\n      <DialogTitle>\n        {`${t(\"general/upload-notebook\")} \"${notebook.name}\"`}\n        <Box>\n          <Typography variant={\"caption\"}>\n            {notebook.gitURL + \":\" + notebook.gitBranch}\n          </Typography>\n        </Box>\n      </DialogTitle>\n      <DialogContent>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-name\")}\n          fullWidth={true}\n          value={settingsContainer.authorName}\n          onChange={(event) =>\n            settingsContainer.setAuthorName(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-email\")}\n          fullWidth={true}\n          value={settingsContainer.authorEmail}\n          onChange={(event) =>\n            settingsContainer.setAuthorEmail(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"general/commit-message\")}\n          fullWidth={true}\n          value={commitMessage}\n          onChange={(event) => setCommitMessage(event.target.value)}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Username\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Username\",\n          )} (${t(\"general/optional\")})`}\n          fullWidth={true}\n          value={gitUsername}\n          onChange={(event) => setGitUsername(event.target.value)}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Password\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Password\",\n          )} (${t(\"general/optional\")})`}\n          type={\"password\"}\n          fullWidth={true}\n          value={gitPassword}\n          onChange={(event) => setGitPassword(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          disabled={crossnoteContainer.isPushingNotebook}\n          onClick={pushNotebook}\n        >\n          {crossnoteContainer.isPushingNotebook\n            ? t(\"general/Uploading\")\n            : t(\"general/Upload\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { TreeView, TreeItem } from \"@material-ui/lab\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  darken,\n  fade,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { IconButton, Box, Typography, Tooltip } from \"@material-ui/core\";\nimport {\n  ChevronRight,\n  ChevronDown,\n  Cog,\n  Upload,\n  Download,\n} from \"mdi-material-ui\";\nimport {\n  CrossnoteContainer,\n  SelectedSectionType,\n  HomeSection,\n} from \"../containers/crossnote\";\nimport { useTranslation } from \"react-i18next\";\nimport ConfigureNotebookDialog from \"./ConfigureNotebookDialog\";\nimport PushNotebookDialog from \"./PushNotebookDialog\";\n\nimport { Notebook, Note, Notes } from \"../lib/notebook\";\nimport {\n  globalEmitter,\n  EventType,\n  ModifiedMarkdownEventData,\n} from \"../lib/event\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    treeItemRoot: {\n      \"paddingLeft\": \"4px\",\n      // color: theme.palette.text.secondary,\n      \"&:focus > $treeItemContent\": {\n        color: theme.palette.text.primary,\n        backgroundColor: darken(theme.palette.background.paper, 0.05),\n      },\n      \"&:focus > $treeItemLabelIcon\": {\n        color: theme.palette.text.primary,\n      },\n    },\n    treeItemContent: {\n      \"cursor\": \"default\",\n      \"color\": theme.palette.text.primary,\n      // paddingLeft: theme.spacing(1),\n      // paddingRight: theme.spacing(1),\n      \"userSelect\": \"none\",\n      \"fontWeight\": theme.typography.fontWeightMedium,\n      \"$treeItemExpanded > &\": {\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n    },\n    treeItemGroup: {\n      \"marginLeft\": 0,\n      \"& $treeItemContent\": {\n        // paddingLeft: theme.spacing(2)\n      },\n    },\n    treeItemExpanded: {},\n    treeItemLabel: {\n      fontWeight: \"inherit\",\n      color: \"inherit\",\n      backgroundColor: \"transparent !important\",\n    },\n    treeItemLabelRoot: {\n      display: \"flex\",\n      alignItems: \"center\",\n      padding: theme.spacing(1, 0),\n    },\n    treeItemLabelIcon: {},\n    treeItemLabelText: {\n      paddingLeft: \"12px\",\n      flexGrow: 1,\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n}\nexport default function NotebookTreeView(props: Props) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState<string[]>([]);\n  const [\n    notebookConfigurationDialogOpen,\n    setNotebookConfigurationDialogOpen,\n  ] = useState<boolean>(false);\n  const [pushNotebookDialogOpen, setPushNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [favoritedNotes, setFavoritedNotes] = useState<Note[]>([]);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const { t } = useTranslation();\n\n  const refreshQuickAccessNotes = useCallback((notes: Notes) => {\n    const favoritedNotes = [];\n    for (let filePath in notes) {\n      const note = notes[filePath];\n      if (note.config.favorited) {\n        favoritedNotes.push(note);\n      }\n    }\n    setFavoritedNotes(favoritedNotes);\n  }, []);\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<{}>, nodes: string[]) => {\n      event.stopPropagation();\n      const element = event.target as HTMLElement;\n      if (\n        element &&\n        element.tagName &&\n        element.tagName.toUpperCase().match(/^(SVG|PATH|BUTTON)$/)\n      ) {\n        props.notebook\n          .refreshNotesInNotLoaded({\n            dir: \"./\",\n            includeSubdirectories: true,\n          })\n          .then((notes) => {\n            refreshQuickAccessNotes(notes);\n          });\n        setExpanded(nodes);\n      }\n    },\n    [props.notebook, refreshQuickAccessNotes],\n  );\n\n  // Emitter\n  useEffect(() => {\n    if (globalEmitter) {\n      const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n        if (!(data.noteFilePath in props.notebook.notes)) {\n          return;\n        }\n        refreshQuickAccessNotes(props.notebook.notes);\n      };\n      globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      return () => {\n        globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      };\n    }\n  }, [props.notebook, refreshQuickAccessNotes]);\n\n  useEffect(() => {\n    if (crossnoteContainer.homeSection !== HomeSection.Notebooks) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.homeSection]);\n\n  useEffect(() => {\n    refreshQuickAccessNotes(props.notebook.notes);\n  }, [props.notebook, refreshQuickAccessNotes]);\n\n  /*\n  useEffect(() => {\n    if (crossnoteContainer.selectedNotebook !== props.notebook) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.selectedNotebook, props.notebook]);\n  */\n\n  return (\n    <React.Fragment>\n      <TreeView\n        defaultExpandIcon={\n          <IconButton\n            disableFocusRipple={true}\n            disableRipple={true}\n            size={\"medium\"}\n          >\n            <ChevronRight></ChevronRight>\n          </IconButton>\n        }\n        defaultCollapseIcon={\n          <IconButton\n            disableFocusRipple={true}\n            disableRipple={true}\n            size={\"medium\"}\n          >\n            <ChevronDown></ChevronDown>\n          </IconButton>\n        }\n        defaultEndIcon={<div style={{ width: 24 }} />}\n        expanded={expanded}\n        onNodeToggle={handleChange}\n        style={{ width: \"100%\" }}\n      >\n        <TreeItem\n          nodeId={\"notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                props.notebook\n                  .refreshNotesInNotLoaded({\n                    dir: \"./\",\n                    includeSubdirectories: true,\n                  })\n                  .then((notes) => {\n                    refreshQuickAccessNotes(notes);\n                  });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <Typography\n                color={\"inherit\"}\n                variant={\"body1\"}\n                className={clsx(classes.treeItemLabelText)}\n              >\n                {props.notebook.name +\n                  (props.notebook.localSha === props.notebook.remoteSha\n                    ? \"\"\n                    : \" \")}\n              </Typography>\n            </Box>\n          }\n        >\n          <TreeItem\n            nodeId={\"today-notes\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.openTodayNote(props.notebook);\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label=\"today-notes\">\n                  {\"\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/today\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          <TreeItem\n            nodeId={\"graph-view\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Graph\",\n                    id: \"Graph: \" + props.notebook.dir,\n                    name: t(\"general/graph-view\"),\n                    config: {\n                      singleton: true,\n                      notebook: props.notebook,\n                    },\n                  });\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label=\"todo-notes\">\n                  {\"\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/graph-view\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          {/*\n        <TreeItem\n          nodeId={\"todo-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.addTabNode({\n                  type: \"tab\",\n                  component: \"Todo\",\n                  id: \"Todo: \" + props.notebook.dir,\n                  name: t(\"general/todo\"),\n                  config: {\n                    singleton: true,\n                    notebook: props.notebook,\n                  },\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"todo-notes\">\n                {\"\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/todo\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>*/}\n          <TreeItem\n            nodeId={\"all-notes\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Notes\",\n                    id: \"Notes: \" + props.notebook.dir,\n                    name: \" \" + props.notebook.name,\n                    config: {\n                      singleton: true,\n                      notebook: props.notebook,\n                    },\n                  });\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label=\"Notes\">\n                  {\"\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/notes\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          {favoritedNotes.map((note) => {\n            return (\n              <TreeItem\n                key={`${note.notebookPath}/${note.filePath}`}\n                nodeId={`${note.notebookPath}/${note.filePath}`}\n                classes={{\n                  root: classes.treeItemRoot,\n                  content: classes.treeItemContent,\n                  expanded: classes.treeItemExpanded,\n                  group: classes.treeItemGroup,\n                  label: classes.treeItemLabel,\n                }}\n                label={\n                  <Box\n                    onClick={() => {\n                      crossnoteContainer.addTabNode({\n                        type: \"tab\",\n                        component: \"Note\",\n                        config: {\n                          singleton: false,\n                          note,\n                        },\n                        name: ` ` + note.title,\n                      });\n                    }}\n                    className={clsx(classes.treeItemLabelRoot)}\n                  >\n                    <span role=\"img\" aria-label=\"quick-access\">\n                      {\"\"}\n                    </span>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {note.title}\n                    </Typography>\n                  </Box>\n                }\n              ></TreeItem>\n            );\n          })}\n          <TreeItem\n            nodeId={\"settings\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => setNotebookConfigurationDialogOpen(true)}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span role=\"img\" aria-label={t(\"general/Settings\")}>\n                  {\"\"}\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/Settings\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          {props.notebook.gitURL && (\n            <TreeItem\n              nodeId={\"upload\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() => setNotebookConfigurationDialogOpen(true)}\n                  className={clsx(classes.treeItemLabelRoot)}\n                >\n                  <span role=\"img\" aria-label={t(\"general/Upload\")}>\n                    {\"\"}\n                  </span>\n                  <Tooltip title={t(\"general/upload-push\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/Upload\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {props.notebook.gitURL && (\n            <TreeItem\n              nodeId={\"download\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() => setPushNotebookDialogOpen(true)}\n                  className={clsx(classes.treeItemLabelRoot)}\n                >\n                  <span role=\"img\" aria-label={t(\"general/Download\")}>\n                    {\"\"}\n                  </span>\n                  <Tooltip title={t(\"general/download-pull\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/Download\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {/*<TreeItem\n          nodeId={\"conflicted-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.addTabNode({\n                  type: \"tab\",\n                  component: \"Conflicted\",\n                  id: \"Conflicted: \" + props.notebook.dir,\n                  name: t(\"general/conflicted\"),\n                  config: {\n                    singleton: true,\n                    notebook: props.notebook,\n                  },\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"conflicted-notes\">\n                {\"\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/conflicted\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        */}\n        </TreeItem>\n      </TreeView>\n      <ConfigureNotebookDialog\n        open={notebookConfigurationDialogOpen}\n        onClose={() => setNotebookConfigurationDialogOpen(false)}\n        notebook={props.notebook}\n      ></ConfigureNotebookDialog>\n      <PushNotebookDialog\n        notebook={props.notebook}\n        open={pushNotebookDialogOpen}\n        onClose={() => setPushNotebookDialogOpen(false)}\n      ></PushNotebookDialog>\n    </React.Fragment>\n  );\n}\n","export default {\"logMessage\": \"9779cad Merge d6fa6773ba480f1f8b6cfd2ff6bd97779719a52a into caefb1a5de987cb32bb433cda6d6ceb166a80317\",\"hash\":\"9779cadb482ac92ab066d445ad636be41201214a\"}\n","import {\n  Box,\n  Card,\n  Typography,\n  Popover,\n  Hidden,\n  IconButton,\n  TextField,\n  Select,\n  MenuItem,\n  Button,\n  Avatar,\n  Tooltip,\n  Chip,\n  Link,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { SketchPicker } from \"react-color\";\nimport { useTranslation } from \"react-i18next\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport {\n  Menu as MenuIcon,\n  Translate,\n  ImagePlus,\n  Github,\n  ThemeLightDark,\n  Keyboard,\n} from \"mdi-material-ui\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { smmsUploadImages } from \"../utilities/image_uploader\";\nimport {\n  useGitHubUserQuery,\n  useUnlinkGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\nimport GitCommit from \"../_git_commit\";\nimport { themeManager } from \"../themes/manager\";\nimport { KeyMap } from \"../lib/keymap\";\nimport { browserHistory } from \"../utilities/history\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    settingsCard: {\n      padding: theme.spacing(2),\n      width: \"600px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      margin: `${theme.spacing(4)}px auto`,\n      height: \"fit-content\",\n      [theme.breakpoints.down(\"sm\")]: {\n        top: \"0\",\n        margin: \"0\",\n        height: \"100%\",\n        overflow: \"auto\",\n      },\n    },\n    cover: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      marginTop: theme.spacing(2),\n      paddingTop: \"30%\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundColor: \"#fade79\",\n      [theme.breakpoints.down(\"sm\")]: {\n        paddingTop: \"50%\",\n      },\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    loggedInSection: {\n      position: \"relative\",\n      padding: theme.spacing(0, 2),\n      border: `1px solid ${theme.palette.primary.light}`,\n      marginBottom: theme.spacing(4),\n      marginTop: theme.spacing(2),\n      borderRadius: \"4px\",\n    },\n    avatar: {\n      marginTop: theme.spacing(2),\n      width: \"64px\",\n      height: \"64px\",\n      borderRadius: \"4px\",\n    },\n    saveBtn: {\n      marginBottom: theme.spacing(2),\n    },\n    logoutBtn: {\n      position: \"absolute\",\n      top: \"16px\",\n      right: \"16px\",\n    },\n    section: {\n      marginTop: theme.spacing(1),\n    },\n    swatch: {\n      padding: \"4px\",\n      backgroundColor: \"#fff\",\n      borderRadius: \"1px\",\n      boxShadow: \"0 0 0 1px rgba(0,0,0,0.1)\",\n      display: \"inline-block\",\n      cursor: \"pointer\",\n    },\n    color: {\n      width: \"36px\",\n      height: \"18px\",\n      borderRadius: \"2px\",\n    },\n    editorText: {\n      marginLeft: theme.spacing(4),\n    },\n    editorCursor: {\n      borderLeftStyle: \"solid\",\n      borderLeftWidth: \"2px\",\n      padding: \"0\",\n      position: \"relative\",\n    },\n  }),\n);\n\ninterface RGBA {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\nfunction getRGBA(inputStr: string = \"\"): RGBA {\n  if (!inputStr || !inputStr.length || !inputStr.match(/^rgba\\(/)) {\n    return {\n      r: 51,\n      g: 51,\n      b: 51,\n      a: 1,\n    };\n  } else {\n    const match = inputStr.match(\n      /^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/,\n    );\n    if (!match) {\n      return {\n        r: 51,\n        g: 51,\n        b: 51,\n        a: 1,\n      };\n    } else {\n      return {\n        r: parseInt(match[1], 10),\n        g: parseInt(match[2], 10),\n        b: parseInt(match[3], 10),\n        a: parseInt(match[4], 10),\n      };\n    }\n  }\n}\n\ninterface Props {}\nexport function Settings(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [colorPickerAnchorElement, setColorPickerAnchorElement] = useState<\n    HTMLElement\n  >(null);\n  const [imageUploaderElement, setImageUploaderElement] = useState<\n    HTMLInputElement\n  >(null);\n  const displayColorPicker = Boolean(colorPickerAnchorElement);\n  const settingsContainer = SettingsContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [avatar, setAvatar] = useState<string>(\n    (cloudContainer.viewer && cloudContainer.viewer.avatar) || \"\",\n  );\n  const [uploadingAvatar, setUploadingAvatar] = useState<boolean>(false);\n  const [resGitHubUser] = useGitHubUserQuery();\n  const [\n    resUnlinkGitHubAccount,\n    executeUnlinkGitHubAccount,\n  ] = useUnlinkGitHubAccountMutation();\n\n  function uploadAvatar(\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n  ) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (!imageUploaderElement) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: \"Uploading avatar image\",\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      smmsUploadImages(files)\n        .then((urls) => {\n          setUploadingAvatar(false);\n          setAvatar(urls[0] || \"\");\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          new Noty({\n            type: \"error\",\n            text: \"Failed to upload image\",\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n          setUploadingAvatar(false);\n        });\n    };\n    setUploadingAvatar(true);\n    imageUploaderElement.click();\n  }\n\n  useEffect(() => {\n    if (cloudContainer.viewer) {\n      setAvatar((avatar) => avatar || cloudContainer.viewer.avatar);\n    }\n  }, [cloudContainer.viewer]);\n\n  useEffect(() => {\n    if (resUnlinkGitHubAccount.data) {\n      window.location.reload();\n    }\n  }, [resUnlinkGitHubAccount]);\n\n  return (\n    <Card className={clsx(classes.settingsCard)}>\n      <Box\n        style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\n      >\n        <Typography variant={\"h6\"}>{t(\"general/Settings\")}</Typography>\n      </Box>\n      {cloudContainer.loggedIn ? (\n        <Box className={clsx(classes.loggedInSection)}>\n          <Box className={clsx(classes.section)}>\n            <Box className={clsx(classes.row)}>\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"48px\", height: \"48px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n              <Typography variant={\"h6\"}>\n                @{cloudContainer.viewer.username}\n              </Typography>\n            </Box>\n            <Typography>{cloudContainer.viewer.email}</Typography>\n            <Typography variant={\"caption\"}>\n              {t(\"settings/created-cloud-widgets-count\") +\n                `: ${cloudContainer.viewer.widgetsCount}/`}\n            </Typography>\n          </Box>\n          <Box className={clsx(classes.section)}>\n            <Avatar\n              className={clsx(classes.avatar)}\n              variant={\"rounded\"}\n              src={\n                avatar ||\n                \"data:image/png;base64,\" +\n                  new Identicon(\n                    sha256(\n                      cloudContainer.viewer && cloudContainer.viewer.username,\n                    ),\n                    80,\n                  ).toString()\n              }\n            ></Avatar>\n            <Box className={clsx(classes.row)}>\n              <TextField\n                label={t(\"settings/Avatar\")}\n                style={{ marginTop: 8 }}\n                placeholder=\"https://.../xxx.png\"\n                helperText={t(\"settings/enter-avatar-image-url\")}\n                fullWidth\n                margin=\"normal\"\n                InputLabelProps={{\n                  shrink: true,\n                }}\n                value={avatar}\n                onChange={(event) => setAvatar(event.currentTarget.value)}\n              />\n              <Tooltip title={t(\"settings/upload-image\")}>\n                <IconButton disabled={uploadingAvatar} onClick={uploadAvatar}>\n                  <ImagePlus></ImagePlus>\n                </IconButton>\n              </Tooltip>\n            </Box>\n          </Box>\n          <Box\n            className={clsx(classes.section)}\n            style={{ marginBottom: \"16px\" }}\n          >\n            {resGitHubUser.data &&\n            resGitHubUser.data.viewer &&\n            resGitHubUser.data.viewer.githubUser ? (\n              <Chip\n                color={\"primary\"}\n                avatar={\n                  <Avatar\n                    src={resGitHubUser.data.viewer.githubUser.avatar}\n                  ></Avatar>\n                }\n                label={\n                  t(\"settings/linked-with-github-account\") +\n                  \": \" +\n                  resGitHubUser.data.viewer.githubUser.login\n                }\n                onClick={() => {\n                  window.open(\n                    \"https://github.com/\" +\n                      resGitHubUser.data.viewer.githubUser.login,\n                    \"_blank\",\n                  );\n                }}\n                disabled={resUnlinkGitHubAccount.fetching}\n                onDelete={() => {\n                  executeUnlinkGitHubAccount();\n                }}\n              />\n            ) : (\n              <Chip\n                color={\"default\"}\n                disabled={resGitHubUser.fetching}\n                icon={<Github></Github>}\n                onClick={() => startGitHubOAuth()}\n                label={t(\"settings/link-with-github-account\")}\n              ></Chip>\n            )}\n          </Box>\n          <Box className={clsx(classes.section)}>\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              className={clsx(classes.saveBtn)}\n              onClick={() => {\n                cloudContainer.setUserInfo({\n                  name: settingsContainer.authorName,\n                  cover: \"\",\n                  avatar,\n                  editorCursorColor: settingsContainer.editorCursorColor,\n                  language: settingsContainer.language,\n                });\n              }}\n              disabled={cloudContainer.resSetUserInfo.fetching}\n            >\n              {t(\"general/upload-the-profile\")}\n            </Button>\n          </Box>\n          <Button\n            variant={\"outlined\"}\n            color=\"secondary\"\n            className={clsx(classes.logoutBtn)}\n            onClick={() => {\n              cloudContainer.logout();\n            }}\n          >\n            {t(\"settings/log-out\")}\n          </Button>\n        </Box>\n      ) : null}\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n          }}\n        >\n          <Translate style={{ marginRight: \"8px\" }}></Translate>\n          {\"Languages/\"}\n        </Typography>\n        <Select\n          variant={\"standard\"}\n          value={settingsContainer.language}\n          onChange={(event) =>\n            settingsContainer.setLanguage(event.target.value as string)\n          }\n        >\n          <MenuItem value={\"en-US\"}>English</MenuItem>\n          <MenuItem value={\"zh-CN\"}></MenuItem>\n          <MenuItem value={\"zh-TW\"}></MenuItem>\n          <MenuItem value={\"ja-JP\"}></MenuItem>\n        </Select>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <TextField\n          label={t(\"settings/author-name\")}\n          placeholder={t(\"account/Anonymous\")}\n          fullWidth\n          margin=\"normal\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n          value={settingsContainer.authorName}\n          onChange={(event) =>\n            settingsContainer.setAuthorName(event.currentTarget.value)\n          }\n        ></TextField>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <TextField\n          label={t(\"settings/author-email\")}\n          placeholder={\"anonymous@crossnote.app\"}\n          fullWidth\n          margin=\"normal\"\n          InputLabelProps={{\n            shrink: true,\n          }}\n          value={settingsContainer.authorEmail}\n          onChange={(event) =>\n            settingsContainer.setAuthorEmail(event.currentTarget.value)\n          }\n        ></TextField>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            marginTop: \"16px\",\n          }}\n        >\n          <ThemeLightDark style={{ marginRight: \"8px\" }}></ThemeLightDark>\n          {t(\"settings/theme\") + \" (beta)\"}\n        </Typography>\n        <Select\n          value={settingsContainer.theme.name}\n          onChange={(event) => {\n            settingsContainer.setTheme(event.target.value as string);\n          }}\n        >\n          {themeManager.themes.map((theme) => {\n            return (\n              <MenuItem key={theme.name} value={theme.name}>\n                {theme.name}\n              </MenuItem>\n            );\n          })}\n        </Select>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            marginTop: \"16px\",\n          }}\n        >\n          {t(\"settings/editor-cursor-color\") + \" (beta)\"}\n        </Typography>\n        <Box\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n          }}\n        >\n          <Box\n            className={clsx(classes.swatch)}\n            onClick={(event: React.MouseEvent<HTMLElement>) =>\n              setColorPickerAnchorElement(event.currentTarget)\n            }\n          >\n            <Box\n              className={clsx(classes.color)}\n              style={{ backgroundColor: settingsContainer.editorCursorColor }}\n            ></Box>\n          </Box>\n          <div className={clsx(classes.editorText)}>\n            {t(\"settings/hello\")}\n            <span\n              className={clsx(classes.editorCursor)}\n              style={{\n                borderLeftColor:\n                  settingsContainer.editorCursorColor || \"#4A90E2\",\n              }}\n            ></span>\n            {t(\"settings/world\")}\n          </div>\n        </Box>\n        <Popover\n          open={displayColorPicker}\n          anchorEl={colorPickerAnchorElement}\n          onClose={() => {\n            setColorPickerAnchorElement(null);\n          }}\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n          transformOrigin={{\n            vertical: \"top\",\n            horizontal: \"center\",\n          }}\n        >\n          <SketchPicker\n            color={getRGBA(settingsContainer.editorCursorColor)}\n            onChange={(color) => {\n              const cursorColor = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`;\n              settingsContainer.setEditorCursorColor(cursorColor);\n            }}\n          ></SketchPicker>\n        </Popover>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            marginTop: \"16px\",\n          }}\n        >\n          <Keyboard style={{ marginRight: \"8px\" }}></Keyboard>\n          {t(\"settings/key-map\") + \" (beta)\"}\n        </Typography>\n        <Select\n          value={settingsContainer.keyMap}\n          onChange={(event) => {\n            settingsContainer.setKeyMap(event.target.value as KeyMap);\n          }}\n        >\n          <MenuItem value={KeyMap.DEFAULT}>{t(\"general/Default\")}</MenuItem>\n          <MenuItem value={KeyMap.VIM}>{t(\"general/Vim\")}</MenuItem>\n          <MenuItem value={KeyMap.EMACS}>{t(\"general/Emacs\")}</MenuItem>\n        </Select>\n      </Box>\n      <Box className={clsx(classes.section)} style={{ marginTop: \"32px\" }}>\n        <Link\n          href={\n            \"https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md\"\n          }\n          target={\"_blank\"}\n        >\n          <Typography variant={\"caption\"}>\n            {\" \" + t(\"settings/about-this-project\")}\n          </Typography>\n        </Link>\n        <br></br>\n        <Link\n          href={`https://github.com/0xGG/crossnote/issues`}\n          target={\"_blank\"}\n        >\n          <Typography variant={\"caption\"}>\n            {\" \" + t(\"settings/issues-and-feature-requests\")}\n          </Typography>\n        </Link>\n        <br></br>\n        <Link\n          href={`https://github.com/0xGG/crossnote/commit/${GitCommit.hash}`}\n          target={\"_blank\"}\n        >\n          <Typography variant={\"caption\"}>\n            {\" Build \" + GitCommit.logMessage}\n          </Typography>\n        </Link>\n        <br></br>\n        <Link\n          onClick={(event: any) => {\n            event.preventDefault();\n            crossnoteContainer.addTabNode({\n              type: \"tab\",\n              name: \" Privacy policy\",\n              component: \"Privacy\",\n              id: \"Privacy\",\n              config: {\n                singleton: true,\n              },\n            });\n          }}\n          href=\"\"\n        >\n          <Typography variant={\"caption\"}>{\" Privacy policy\"}</Typography>\n        </Link>\n      </Box>\n      {!cloudContainer.loggedIn && (\n        <Button\n          variant={\"outlined\"}\n          color={\"primary\"}\n          className={clsx(classes.logoutBtn)}\n          onClick={() => cloudContainer.setAuthDialogOpen(true)}\n        >\n          {t(\"general/sign-in\")}\n        </Button>\n      )}\n      <input\n        type=\"file\"\n        multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageUploaderElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n","import React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  Dialog,\n  DialogTitle,\n  DialogContent,\n  DialogContentText,\n  DialogActions,\n  Button,\n} from \"@material-ui/core\";\nimport { Note } from \"../lib/notebook\";\nimport { TabNode } from \"flexlayout-react\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  tabNode: TabNode;\n  note: Note;\n}\n\nexport function DeleteNoteDialog(props: Props) {\n  const { t } = useTranslation();\n  const note = props.note;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"delete-note-dialog/title\")}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {t(\"delete-note-dialog/subtitle\")}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          style={{ color: \"red\" }}\n          onClick={() => {\n            crossnoteContainer.deleteNote(\n              props.tabNode,\n              note.notebookPath,\n              note.filePath,\n            );\n            props.onClose();\n          }}\n        >\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  Popover,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Divider,\n} from \"@material-ui/core\";\nimport {\n  PinOutline,\n  StarOutline,\n  RenameBox,\n  Delete,\n  ContentDuplicate,\n  Restore,\n  ShareVariant,\n  Printer,\n  Pin,\n  Star,\n} from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport { Note } from \"../lib/notebook\";\nimport { TabNode } from \"flexlayout-react\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { DeleteNoteDialog } from \"./DeleteNoteDialog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    secondaryColor: {\n      color: theme.palette.secondary.main,\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  note: Note;\n  anchorElement: Element;\n  onClose: () => void;\n}\n\nexport default function NotePopover(props: Props) {\n  const classes = useStyles(props);\n  const note = props.note;\n  const [deleteNoteDialogOpen, setDeleteNoteDialogOpen] = useState<boolean>(\n    false,\n  );\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  return (\n    <React.Fragment>\n      <Popover\n        anchorEl={props.anchorElement}\n        keepMounted\n        open={Boolean(props.anchorElement)}\n        onClose={props.onClose}\n      >\n        <List>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.togglePin(\n                props.tabNode,\n                note.notebookPath,\n                note.filePath,\n              );\n              props.onClose();\n            }}\n          >\n            <ListItemIcon\n              className={clsx(note.config.pinned && classes.secondaryColor)}\n            >\n              {note.config.pinned ? <Pin></Pin> : <PinOutline></PinOutline>}\n            </ListItemIcon>\n            <ListItemText\n              primary={\n                note.config.pinned\n                  ? t(\"general/unpin-the-note\")\n                  : t(\"general/pin-the-note\")\n              }\n            ></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.toggleFavorite(\n                props.tabNode,\n                note.notebookPath,\n                note.filePath,\n              );\n              props.onClose();\n            }}\n          >\n            <ListItemIcon\n              className={clsx(note.config.favorited && classes.secondaryColor)}\n            >\n              {note.config.favorited ? (\n                <Star></Star>\n              ) : (\n                <StarOutline></StarOutline>\n              )}\n            </ListItemIcon>\n            <ListItemText\n              primary={\n                note.config.favorited\n                  ? t(\"general/remove-from-quick-access\")\n                  : t(\"general/add-to-quick-access\")\n              }\n            ></ListItemText>\n          </ListItem>\n          <ListItem></ListItem>\n          <Divider></Divider>\n          <ListItem button>\n            <ListItemIcon>\n              <RenameBox></RenameBox>\n            </ListItemIcon>\n            <ListItemText\n              primary={t(\"general/change-file-path\")}\n            ></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              setDeleteNoteDialogOpen(true);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <Delete></Delete>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Delete\")}></ListItemText>\n          </ListItem>\n          <ListItem button>\n            <ListItemIcon>\n              <ContentDuplicate></ContentDuplicate>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/create-a-copy\")}></ListItemText>\n          </ListItem>\n          <ListItem button>\n            <ListItemIcon>\n              <Restore></Restore>\n            </ListItemIcon>\n            <ListItemText\n              primary={t(\"general/restore-checkout\")}\n            ></ListItemText>\n          </ListItem>\n          <Divider></Divider>\n          <ListItem button>\n            <ListItemIcon>\n              <ShareVariant></ShareVariant>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Share\")}></ListItemText>\n          </ListItem>\n          <ListItem button>\n            <ListItemIcon>\n              <Printer></Printer>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Print\")}></ListItemText>\n          </ListItem>\n        </List>\n      </Popover>\n      <DeleteNoteDialog\n        open={deleteNoteDialogOpen}\n        onClose={() => {\n          setDeleteNoteDialogOpen(false);\n        }}\n        tabNode={props.tabNode}\n        note={note}\n      ></DeleteNoteDialog>\n    </React.Fragment>\n  );\n}\n","import React, { useState, useEffect } from \"react\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Box, Typography, Tooltip, Card, IconButton } from \"@material-ui/core\";\nimport { generateSummaryFromMarkdown, Summary } from \"../utilities/note\";\nimport { formatDistanceStrict } from \"date-fns/esm\";\nimport { useTranslation } from \"react-i18next\";\nimport { Pin, DotsVertical } from \"mdi-material-ui\";\nimport { formatRelative } from \"date-fns\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { languageCodeToDateFNSLocale } from \"../i18n/i18n\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport { Note } from \"../lib/notebook\";\nimport NotePopover from \"./NotePopover\";\nimport { TabNode } from \"flexlayout-react\";\n\nexport const NoteCardWidth = 550;\nexport const NoteCardMargin = 4;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    noteCard: {\n      width: `${NoteCardWidth}px`,\n      maxWidth: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"flex-start\",\n      padding: theme.spacing(2, 0.5, 0),\n      textAlign: \"left\",\n      cursor: \"pointer\",\n      backgroundColor: theme.palette.background.paper,\n      margin: `${NoteCardMargin}px auto`,\n      [theme.breakpoints.down(\"sm\")]: {\n        marginLeft: 0,\n        marginRight: 0,\n      },\n    },\n    selected: {\n      borderLeft: `4px solid ${theme.palette.primary.main}`,\n    },\n    unselected: {\n      borderLeft: `4px solid rgba(0, 0, 0, 0)`,\n    },\n    leftPanel: {\n      width: \"48px\",\n      paddingLeft: theme.spacing(0.5),\n    },\n    duration: {\n      color: theme.palette.text.secondary,\n    },\n    rightPanel: {\n      width: \"calc(100% - 48px)\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    header: {\n      marginBottom: theme.spacing(1),\n      wordBreak: \"break-all\",\n    },\n    summary: {\n      \"color\": theme.palette.text.secondary,\n      \"marginBottom\": theme.spacing(1),\n      \"paddingRight\": theme.spacing(2),\n      \"display\": \"-webkit-box\",\n      \"lineHeight\": \"1.3rem !important\",\n      \"textOverflow\": \"ellipsis !important\",\n      \"overflow\": \"hidden !important\",\n      \"maxWidth\": \"100%\",\n      \"maxHeight\": \"2.6rem\", // lineHeight x -website-line-clamp\n      \"-webkit-line-clamp\": 2,\n      \"-webkit-box-orient\": \"vertical\",\n      \"wordBreak\": \"break-all\",\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n    },\n    images: {\n      display: \"flex\",\n      width: \"100%\",\n      overflow: \"hidden\",\n      position: \"relative\",\n      marginBottom: theme.spacing(1),\n    },\n    imagesWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n    },\n    image: {\n      width: \"128px\",\n      height: \"80px\",\n      marginRight: theme.spacing(1),\n      position: \"relative\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      display: \"block\",\n      borderRadius: \"6px\",\n    },\n    pin: {\n      color: theme.palette.secondary.main,\n      marginTop: theme.spacing(1),\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  note: Note;\n}\n\nexport default function NoteCard(props: Props) {\n  const classes = useStyles(props);\n  const note = props.note;\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const [header, setHeader] = useState<string>(\"\");\n  const [summary, setSummary] = useState<Summary>(null);\n  const [images, setImages] = useState<string[]>([]);\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n  const [popoverElement, setPopoverElement] = useState<Element>(null);\n  const { t } = useTranslation();\n  const duration = formatDistanceStrict(note.config.modifiedAt, Date.now())\n    .replace(/\\sseconds?/, \"s\")\n    .replace(/\\sminutes?/, \"m\")\n    .replace(/\\shours?/, \"h\")\n    .replace(/\\sdays?/, \"d\")\n    .replace(/\\sweeks?/, \"w\")\n    .replace(/\\smonths?/, \"mo\")\n    .replace(/\\syears?/, \"y\");\n\n  useEffect(() => {\n    setHeader(note.title);\n    generateSummaryFromMarkdown(\n      note.markdown.trim() || t(\"general/this-note-is-empty\"),\n    )\n      .then((summary) => {\n        setSummary(summary);\n\n        // render images\n        const imagePromises = Promise.all(\n          summary.images.map((image) => resolveNoteImageSrc(note, image)),\n        );\n        imagePromises\n          .then((imageSrcs) => {\n            imageSrcs = imageSrcs.filter((x) => x).slice(0, 3);\n            setImages(imageSrcs || []);\n          })\n          .catch((error) => {\n            setImages([]);\n          });\n      })\n      .catch((error) => {});\n  }, [note.markdown, note, crossnoteContainer.crossnote, t]);\n\n  /*\n  useEffect(() => {\n    crossnoteContainer.crossnote\n      .getStatus(note.notebook, note.filePath)\n      .then((status) => {\n        setGitStatus(status);\n      });\n  }, [\n    note.markdown,\n    note.config.modifiedAt,\n    note,\n    crossnoteContainer.crossnote,\n  ]);*/\n\n  return (\n    <React.Fragment>\n      <Card\n        className={clsx(classes.noteCard, \"note-card\")}\n        onClick={() => {\n          // crossnoteContainer.setDisplayMobileEditor(true);\n          crossnoteContainer.addTabNode({\n            type: \"tab\",\n            component: \"Note\",\n            config: {\n              singleton: false,\n              note,\n            },\n            name: ` ` + note.title,\n          });\n        }}\n      >\n        <Box className={clsx(classes.leftPanel)}>\n          <Tooltip\n            title={\n              <>\n                <p>\n                  {t(\"general/created-at\") +\n                    \" \" +\n                    formatRelative(\n                      new Date(note.config.createdAt),\n                      new Date(),\n                      {\n                        locale: languageCodeToDateFNSLocale(\n                          settingsContainer.language,\n                        ),\n                      },\n                    )}\n                </p>\n                <p>\n                  {t(\"general/modified-at\") +\n                    \" \" +\n                    formatRelative(\n                      new Date(note.config.modifiedAt),\n                      new Date(),\n                      {\n                        locale: languageCodeToDateFNSLocale(\n                          settingsContainer.language,\n                        ),\n                      },\n                    )}\n                </p>\n              </>\n            }\n            arrow\n          >\n            <Typography className={clsx(classes.duration)}>\n              {duration}\n            </Typography>\n          </Tooltip>\n\n          {note.config.pinned && <Pin className={clsx(classes.pin)}></Pin>}\n        </Box>\n        <Box className={clsx(classes.rightPanel)}>\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"flex-start\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Typography\n              style={{ fontWeight: \"bold\" }}\n              variant={\"body1\"}\n              className={clsx(classes.header)}\n            >\n              {header}\n            </Typography>\n            <IconButton\n              size={\"small\"}\n              style={{\n                marginBottom: theme.spacing(1),\n                marginLeft: theme.spacing(1),\n                marginRight: theme.spacing(1),\n              }}\n              onClick={(event) => {\n                event.preventDefault();\n                event.stopPropagation();\n                setPopoverElement(event.currentTarget);\n              }}\n            >\n              <DotsVertical></DotsVertical>\n            </IconButton>\n          </Box>\n\n          {summary && summary.summary.trim().length > 0 && (\n            <Typography className={clsx(classes.summary)}>\n              {summary && summary.summary.slice(0, 200)}\n            </Typography>\n          )}\n          {images.length > 0 && (\n            <Box className={clsx(classes.images)}>\n              <Box className={clsx(classes.imagesWrapper)}>\n                {images.map((image, offset) => (\n                  <div\n                    key={`${image}-${offset}`}\n                    className={clsx(classes.image)}\n                    style={{\n                      backgroundImage: `url(${image})`,\n                    }}\n                  ></div>\n                ))}\n              </Box>\n            </Box>\n          )}\n          <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n            {t(`git/status/${gitStatus}`)}\n          </Typography>\n        </Box>\n      </Card>\n      <NotePopover\n        tabNode={props.tabNode}\n        note={note}\n        anchorElement={popoverElement}\n        onClose={() => setPopoverElement(null)}\n      ></NotePopover>\n    </React.Fragment>\n  );\n}\n","export enum OrderBy {\n  CreatedAt = \"CreatedAt\",\n  ModifiedAt = \"ModifiedAt\",\n  Title = \"Title\",\n}\n\nexport enum OrderDirection {\n  ASC = \"ASC\",\n  DESC = \"DESC\",\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport LazyLoad from \"react-lazyload\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Box, Typography, Button, Card } from \"@material-ui/core\";\nimport NoteCard, { NoteCardWidth, NoteCardMargin } from \"./NoteCard\";\nimport { useTranslation } from \"react-i18next\";\nimport useInterval from \"@use-it/interval\";\nimport { CloudDownloadOutline } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport { Note } from \"../lib/notebook\";\nimport { TabNode } from \"flexlayout-react\";\nconst is = require(\"is_js\");\n\nconst lazyLoadPlaceholderHeight = 92 + 2 * NoteCardMargin;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesList: {\n      \"position\": \"relative\",\n      // \"flex\": \"1\",\n      // \"overflowY\": \"auto\",\n      \"paddingTop\": theme.spacing(2),\n      \"paddingLeft\": theme.spacing(2),\n      \"paddingRight\": theme.spacing(2),\n      \"paddingBottom\": theme.spacing(12),\n      [theme.breakpoints.down(\"sm\")]: {\n        paddingLeft: theme.spacing(0.5),\n        paddingRight: theme.spacing(0.5),\n      },\n\n      \"& .note-card-sizer\": {\n        width: `${NoteCardWidth + 2 * NoteCardMargin}px`,\n        maxWidth: \"100%\",\n        /*\n        [theme.breakpoints.down(\"xs\")]: {\n          width: \"100%\",\n        },\n        */\n      },\n    },\n    updatePanel: {\n      padding: theme.spacing(2),\n      textAlign: \"center\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n      backgroundColor: theme.palette.background.paper,\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  notes: Note[];\n  searchValue: string;\n  scrollElement: HTMLElement;\n}\n\nexport default function Notes(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [masonryInstance, setMasonryInstance] = useState<any>(null);\n\n  /*\n  const pullNotebook = useCallback(() => {\n    const notebook = crossnoteContainer.selectedNotebook;\n    if (!notebook) {\n      return;\n    }\n    crossnoteContainer\n      .pullNotebook({\n        notebook: notebook,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-downloaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error) => {\n        console.log(error);\n        new Noty({\n          type: \"error\",\n          text: t(\"error/failed-to-download-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [crossnoteContainer.selectedNotebook, t]);\n  */\n\n  useEffect(() => {\n    const notes = props.notes;\n    const searchValue = props.searchValue;\n    const pinned: Note[] = [];\n    const unpinned: Note[] = [];\n    notes.forEach((note) => {\n      if (searchValue.trim().length) {\n        const regexp = new RegExp(\n          \"(\" +\n            searchValue\n              .trim()\n              .split(/\\s+/g)\n              .map((s) => s.replace(/[.!@#$%^&*()_+\\-=[\\]]/g, (x) => `\\\\${x}`)) // escape special regexp characters\n              .join(\"|\") +\n            \")\",\n          \"i\",\n        );\n\n        if (note.markdown.match(regexp) || note.filePath.match(regexp)) {\n          if (note.config.pinned) {\n            pinned.push(note);\n          } else {\n            unpinned.push(note);\n          }\n        }\n      } else {\n        if (note.config.pinned) {\n          pinned.push(note);\n        } else {\n          unpinned.push(note);\n        }\n      }\n    });\n\n    setNotes([...pinned, ...unpinned]);\n  }, [props.notes, props.searchValue]);\n\n  /*\n  useEffect(() => {\n    if (notesListElement) {\n      const keyDownHandler = (event: KeyboardEvent) => {\n        const selectedNote = crossnoteContainer.selectedNote;\n        if (!selectedNote || !notes.length) {\n          return;\n        }\n        const currentIndex = notes.findIndex(\n          (n) => n.filePath === selectedNote.filePath,\n        );\n        if (currentIndex < 0) {\n          crossnoteContainer.setSelectedNote(notes[0]);\n        } else if (event.which === 40) {\n          // Up\n          if (currentIndex >= 0 && currentIndex < notes.length - 1) {\n            crossnoteContainer.setSelectedNote(notes[currentIndex + 1]);\n          }\n        } else if (event.which === 38) {\n          // Down\n          if (currentIndex > 0 && currentIndex < notes.length) {\n            crossnoteContainer.setSelectedNote(notes[currentIndex - 1]);\n          }\n        }\n      };\n      notesListElement.addEventListener(\"keydown\", keyDownHandler);\n      return () => {\n        notesListElement.removeEventListener(\"keydown\", keyDownHandler);\n      };\n    }\n  }, [notesListElement, notes, crossnoteContainer.selectedNote]);\n  */\n\n  useEffect(() => {\n    if (props.scrollElement) {\n      const scrollElement = props.scrollElement;\n      // Hack: fix note cards not displaying bug when searchValue is not empty\n      const hack = () => {\n        const initialHeight = scrollElement.style.height;\n        const initialFlex = scrollElement.style.flex;\n        scrollElement.style.flex = \"initial\";\n        scrollElement.style.height = \"10px\";\n        scrollElement.scrollTop += 1;\n        scrollElement.scrollTop -= 1;\n        scrollElement.style.height = initialHeight;\n        scrollElement.style.flex = initialFlex;\n      };\n      window.addEventListener(\"resize\", hack);\n      hack();\n      return () => {\n        window.removeEventListener(\"resize\", hack);\n      };\n    }\n  }, [notes, props.scrollElement, masonryInstance]);\n\n  useInterval(() => {\n    if (crossnoteContainer.needsToRefreshNotes) {\n      crossnoteContainer.setNeedsToRefreshNotes(false);\n      setForceUpdate(Date.now());\n    }\n  }, 15000);\n\n  return (\n    <div className={clsx(classes.notesList)}>\n      {/*crossnoteContainer.selectedNotebook &&\n        crossnoteContainer.selectedNotebook.localSha !==\n          crossnoteContainer.selectedNotebook.remoteSha && (\n          <Box className={clsx(classes.updatePanel)}>\n            <Typography style={{ marginBottom: \"8px\" }}>\n              {\"  \" + t(\"general/notebook-updates-found\")}\n            </Typography>\n            <Button\n              color={\"primary\"}\n              variant={\"outlined\"}\n              // onClick={pullNotebook}\n              disabled={\n                crossnoteContainer.isPullingNotebook ||\n                crossnoteContainer.isPushingNotebook\n              }\n            >\n              <CloudDownloadOutline\n                style={{ marginRight: \"8px\" }}\n              ></CloudDownloadOutline>\n              {t(\"general/update-the-notebook\")}\n            </Button>\n          </Box>\n        )*/}\n      {(notes || []).map((note) => {\n        return (\n          <LazyLoad\n            key={\"lazy-load-note-card-\" + note.filePath}\n            placeholder={\n              <Card\n                style={{\n                  width: `${NoteCardWidth}px`,\n                  maxWidth: \"100%\",\n                  margin: `${NoteCardMargin}px auto`,\n                  padding: theme.spacing(2, 0.5, 0),\n                  height: `${lazyLoadPlaceholderHeight}px`,\n                }}\n                className={\"note-card lazyload-placeholder\"}\n              >\n                <Skeleton />\n                <Skeleton animation={false} />\n                <Skeleton animation=\"wave\" />\n              </Card>\n            }\n            height={lazyLoadPlaceholderHeight}\n            overflow={true}\n            once={true}\n            scrollContainer={props.scrollElement}\n            resize={true}\n          >\n            <NoteCard\n              key={\"note-card-\" + note.filePath}\n              tabNode={props.tabNode}\n              note={note}\n            ></NoteCard>\n          </LazyLoad>\n\n          //   <NoteCard key={\"note-card-\" + note.filePath} note={note}></NoteCard>\n        );\n      })}\n      {crossnoteContainer.initialized &&\n        !crossnoteContainer.isLoadingNotebook &&\n        notes.length === 0 && (\n          <Typography\n            style={{\n              textAlign: \"center\",\n              marginTop: \"32px\",\n            }}\n            variant={\"body2\"}\n          >\n            {\" \" + t(\"general/no-notes-found\")}\n          </Typography>\n        )}\n    </div>\n  );\n}\n","import React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  Box,\n  InputBase,\n  Card,\n  IconButton,\n  Typography,\n  Hidden,\n  CircularProgress,\n  Popover,\n  List,\n  ListItem,\n  ListItemText,\n  ListItemIcon,\n  Divider,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  Magnify,\n  FileEditOutline,\n  Cog,\n  Menu as MenuIcon,\n  SortVariant,\n  SortDescending,\n  SortAscending,\n  Pencil,\n  ChevronDown,\n  TrashCan,\n} from \"mdi-material-ui\";\nimport { useTranslation } from \"react-i18next\";\nimport Notes from \"./Notes\";\nimport { OrderBy, OrderDirection } from \"../lib/order\";\nimport { Notebook, Note } from \"../lib/notebook\";\nimport Headroom from \"react-headroom\";\nimport { TabHeight } from \"../lib/tabNode\";\nimport {\n  globalEmitter,\n  EventType,\n  ModifiedMarkdownEventData,\n  RefreshNotesEventData,\n  DeleteNoteEventData,\n} from \"../lib/event\";\nimport { TabNode } from \"flexlayout-react\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesPanel: {\n      // position: \"relative\",\n      // display: \"flex\",\n      // flexDirection: \"column\",\n      // height: \"100%\",\n      backgroundColor: theme.palette.background.default,\n    },\n    topPanel: {\n      padding: theme.spacing(0, 1),\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.paper,\n      zIndex: 9,\n    },\n    fixedTopPanel: {\n      position: \"sticky\",\n      top: `0`,\n      width: \"100%\",\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": 0, // theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        // marginLeft: theme.spacing(3),\n        // width: \"auto\"\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n      border: \"1px solid #bbb\",\n      borderRadius: \"4px\",\n      width: \"100%\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        // width: 200\n      },\n    },\n    loading: {\n      position: \"absolute\",\n      top: \"40%\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n    },\n    sortSelected: {\n      \"color\": theme.palette.primary.main,\n      \"& svg\": {\n        color: theme.palette.primary.main,\n      },\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  notebook: Notebook;\n  referredNote?: Note;\n  initialSearchValue?: string;\n  title?: string;\n}\n\nexport default function NotesPanel(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [sortMenuAnchorEl, setSortMenuAnchorEl] = useState<HTMLElement>(null);\n  const [isCreatingNote, setIsCreatingNote] = useState<boolean>(false);\n  const [orderBy, setOrderBy] = useState<OrderBy>(OrderBy.ModifiedAt);\n  const [orderDirection, setOrderDirection] = useState<OrderDirection>(\n    OrderDirection.DESC,\n  );\n  const [rawNotes, setRawNotes] = useState<Note[]>([]);\n  const [notes, setNotes] = useState<Note[]>([]);\n\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  // Search\n  const [searchValue, setSearchValue] = useState<string>(\n    props.initialSearchValue || \"\",\n  );\n  const [searchValueInputTimeout, setSearchValueInputTimeout] = useState<\n    NodeJS.Timeout\n  >(null);\n  const [finalSearchValue, setFinalSearchValue] = useState<string>(\"\");\n  const [fixedTopPanel, setFixedTopPanel] = useState<boolean>(false);\n  const container = useRef<HTMLDivElement>(null);\n  const topPanel = useRef<HTMLElement>(null);\n\n  const createNewNote = useCallback(() => {\n    setIsCreatingNote(true);\n    let markdown = \"\";\n    if (props.referredNote) {\n      if (\n        props.referredNote.title ===\n        props.referredNote.filePath.replace(/\\.md$/, \"\")\n      ) {\n        markdown = `[[${props.referredNote.title}]]`;\n      } else {\n        markdown = `[[${props.referredNote.title}|${props.referredNote.filePath}]]`;\n      }\n    }\n    crossnoteContainer\n      .createNewNote(props.notebook, \"\", markdown)\n      .then((note) => {\n        crossnoteContainer.openNoteAtPath(props.notebook, note.filePath);\n        globalEmitter.emit(EventType.RefreshNotes, {\n          notebookPath: props.notebook.dir,\n        });\n        setIsCreatingNote(false);\n      })\n      .catch(() => {\n        setIsCreatingNote(false);\n      });\n  }, [crossnoteContainer, props.notebook, props.referredNote]);\n\n  const onChangeSearchValue = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n      const value = event.target.value;\n      setSearchValue(value);\n      if (searchValueInputTimeout) {\n        clearTimeout(searchValueInputTimeout);\n      }\n      const timeout = setTimeout(() => {\n        setFinalSearchValue(value);\n      }, 400);\n      setSearchValueInputTimeout(timeout);\n    },\n    [searchValueInputTimeout],\n  );\n\n  const refreshRawNotes = useCallback(() => {\n    const notes = [];\n    const notesMap = props.referredNote\n      ? props.referredNote.mentionedBy\n      : props.notebook.notes;\n\n    for (let key in notesMap) {\n      notes.push(notesMap[key]);\n    }\n    setRawNotes(notes);\n  }, [props.notebook.notes, props.referredNote]);\n\n  useEffect(() => {\n    setSearchValue(\"\");\n    setFinalSearchValue(\"\");\n  }, [props.notebook]);\n\n  // Emitter\n  useEffect(() => {\n    if (!globalEmitter) {\n      return;\n    }\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      if (!rawNotes.find((n) => n.filePath === data.noteFilePath)) {\n        return;\n      }\n      refreshRawNotes();\n    };\n    const refreshNotesCallback = (data: RefreshNotesEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const deleteNoteCallback = (data: DeleteNoteEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    // TODO: Delay the modifiedMarkdownCallback\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.RefreshNotes, refreshNotesCallback);\n    globalEmitter.on(EventType.DeleteNote, deleteNoteCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.RefreshNotes, refreshNotesCallback);\n      globalEmitter.off(EventType.DeleteNote, deleteNoteCallback);\n    };\n  }, [refreshRawNotes, rawNotes, props.notebook]);\n\n  useEffect(() => {\n    refreshRawNotes();\n  }, [refreshRawNotes]);\n\n  useEffect(() => {\n    const notes = rawNotes;\n    if (orderBy === OrderBy.ModifiedAt) {\n      if (orderDirection === OrderDirection.DESC) {\n        notes.sort(\n          (a, b) =>\n            b.config.modifiedAt.getTime() - a.config.modifiedAt.getTime(),\n        );\n      } else {\n        notes.sort(\n          (a, b) =>\n            a.config.modifiedAt.getTime() - b.config.modifiedAt.getTime(),\n        );\n      }\n    } else if (orderBy === OrderBy.CreatedAt) {\n      if (orderDirection === OrderDirection.DESC) {\n        notes.sort(\n          (a, b) => b.config.createdAt.getTime() - a.config.createdAt.getTime(),\n        );\n      } else {\n        notes.sort(\n          (a, b) => a.config.createdAt.getTime() - b.config.createdAt.getTime(),\n        );\n      }\n    } else if (orderBy === OrderBy.Title) {\n      if (orderDirection === OrderDirection.DESC) {\n        notes.sort((a, b) => b.title.localeCompare(a.title));\n      } else {\n        notes.sort((a, b) => a.title.localeCompare(b.title));\n      }\n    }\n    setNotes([...notes]);\n  }, [rawNotes, orderBy, orderDirection]);\n\n  useEffect(() => {\n    if (!container || !topPanel || !container.current || !topPanel.current) {\n      return;\n    }\n    const containerElement = container.current;\n    const scrollElement = containerElement.parentElement;\n    const scrollEvent = function () {\n      // console.log( \"onscroll: \", scrollElement.scrollTop, containerElement.offsetTop,);\n      if (scrollElement.scrollTop >= containerElement.offsetTop) {\n        setFixedTopPanel(true);\n      } else {\n        setFixedTopPanel(false);\n      }\n    };\n    scrollEvent();\n    scrollElement.addEventListener(\"scroll\", scrollEvent);\n    return () => {\n      scrollElement.removeEventListener(\"scroll\", scrollEvent);\n    };\n  }, [container, topPanel]);\n\n  return (\n    <div className={clsx(classes.notesPanel)} ref={container}>\n      <Card\n        className={clsx(\n          classes.topPanel,\n          fixedTopPanel ? classes.fixedTopPanel : \"\",\n        )}\n        ref={topPanel}\n      >\n        {props.title && (\n          <Typography variant={\"h6\"} style={{ padding: \"6px 0 7px\" }}>\n            {props.title}\n          </Typography>\n        )}\n        <Box className={clsx(classes.row)}>\n          <div className={classes.search}>\n            <div className={classes.searchIcon}>\n              <Magnify />\n            </div>\n            <InputBase\n              placeholder={t(\"search/notes\")}\n              classes={{\n                root: classes.inputRoot,\n                input: classes.inputInput,\n              }}\n              value={searchValue}\n              inputProps={{ \"aria-label\": \"search\" }}\n              onChange={onChangeSearchValue}\n              autoComplete={\"off\"}\n              autoCorrect={\"off\"}\n            />\n          </div>\n          <IconButton\n            onClick={createNewNote}\n            disabled={!crossnoteContainer.initialized || isCreatingNote}\n          >\n            <Tooltip title={t(\"general/new-note\")}>\n              <FileEditOutline></FileEditOutline>\n            </Tooltip>\n          </IconButton>\n          <IconButton\n            onClick={(event) => setSortMenuAnchorEl(event.currentTarget)}\n          >\n            <SortVariant></SortVariant>\n          </IconButton>\n        </Box>\n      </Card>\n\n      <Popover\n        anchorEl={sortMenuAnchorEl}\n        keepMounted\n        open={Boolean(sortMenuAnchorEl)}\n        onClose={() => setSortMenuAnchorEl(null)}\n      >\n        <List>\n          <ListItem\n            button\n            onClick={() => setOrderBy(OrderBy.ModifiedAt)}\n            className={clsx(\n              orderBy === OrderBy.ModifiedAt && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/date-modified\")}></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => setOrderBy(OrderBy.CreatedAt)}\n            className={clsx(\n              orderBy === OrderBy.CreatedAt && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/date-created\")}></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => setOrderBy(OrderBy.Title)}\n            className={clsx(orderBy === OrderBy.Title && classes.sortSelected)}\n          >\n            <ListItemText primary={t(\"general/title\")}></ListItemText>\n          </ListItem>\n          <Divider></Divider>\n          <ListItem\n            button\n            onClick={() => setOrderDirection(OrderDirection.DESC)}\n            className={clsx(\n              orderDirection === OrderDirection.DESC && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/Desc\")}></ListItemText>\n            <ListItemIcon style={{ marginLeft: \"8px\" }}>\n              <SortDescending></SortDescending>\n            </ListItemIcon>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => setOrderDirection(OrderDirection.ASC)}\n            className={clsx(\n              orderDirection === OrderDirection.ASC && classes.sortSelected,\n            )}\n          >\n            <ListItemText primary={t(\"general/Asc\")}></ListItemText>\n            <ListItemIcon style={{ marginLeft: \"8px\" }}>\n              <SortAscending></SortAscending>\n            </ListItemIcon>\n          </ListItem>\n        </List>\n      </Popover>\n\n      {crossnoteContainer.isLoadingNotebook && (\n        <CircularProgress className={clsx(classes.loading)}></CircularProgress>\n      )}\n\n      <Notes\n        tabNode={props.tabNode}\n        notes={notes}\n        searchValue={finalSearchValue}\n        scrollElement={\n          container && container.current && container.current.parentElement\n        }\n      ></Notes>\n    </div>\n  );\n}\n","import React from \"react\";\nimport { Box, Hidden, IconButton, Typography } from \"@material-ui/core\";\nimport { Menu as MenuIcon } from \"mdi-material-ui\";\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport function PrivacyPolicy(props: Props) {\n  return (\n    <Box style={{ padding: \"16px\" }} className={\"preview\"}>\n      <Box\n        style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\n      >\n        <Hidden smUp implementation=\"css\">\n          <IconButton onClick={props.toggleDrawer}>\n            <MenuIcon></MenuIcon>\n          </IconButton>\n        </Hidden>\n        <Typography variant={\"h2\"}>Privacy Policy</Typography>\n      </Box>\n      <p>\n        shd101wyy built the Crossnote app as an Open Source app. This SERVICE is\n        provided by shd101wyy at no cost and is intended for use as is.\n      </p>\n      <p>\n        This page is used to inform visitors regarding my policies with the\n        collection, use, and disclosure of Personal Information if anyone\n        decided to use my Service.\n      </p>\n      <p>\n        If you choose to use my Service, then you agree to the collection and\n        use of information in relation to this policy. The Personal Information\n        that I collect is used for providing and improving the Service. I will\n        not use or share your information with anyone except as described in\n        this Privacy Policy.\n      </p>\n      <p>\n        The terms used in this Privacy Policy have the same meanings as in our\n        Terms and Conditions, which is accessible at Crossnote unless otherwise\n        defined in this Privacy Policy.\n      </p>\n      <p>\n        <strong>Information Collection and Use</strong>\n      </p>\n      <p>\n        For a better experience, while using our Service, I may require you to\n        provide us with certain personally identifiable information. The\n        information that I request will be retained on your device and is not\n        collected by me in any way.\n      </p>\n      <p>\n        <strong>Log Data</strong>\n      </p>\n      <p>\n        I want to inform you that whenever you use my Service, in a case of an\n        error in the app I collect data and information (through third party\n        products) on your phone called Log Data. This Log Data may include\n        information such as your device Internet Protocol (IP) address, device\n        name, operating system version, the configuration of the app when\n        utilizing my Service, the time and date of your use of the Service, and\n        other statistics.\n      </p>\n      <p>\n        <strong>Cookies</strong>\n      </p>\n      <p>\n        Cookies are files with a small amount of data that are commonly used as\n        anonymous unique identifiers. These are sent to your browser from the\n        websites that you visit and are stored on your device's internal memory.\n      </p>\n      <p>\n        This Service does not use these cookies explicitly. However, the app\n        may use third party code and libraries that use cookies to collect\n        information and improve their services. You have the option to either\n        accept or refuse these cookies and know when a cookie is being sent to\n        your device. If you choose to refuse our cookies, you may not be able to\n        use some portions of this Service.\n      </p>\n      <p>\n        <strong>Service Providers</strong>\n      </p>\n      <p>\n        I may employ third-party companies and individuals due to the following\n        reasons:\n      </p>\n      <ul>\n        <li>To facilitate our Service;</li>{\" \"}\n        <li>To provide the Service on our behalf;</li>{\" \"}\n        <li>To perform Service-related services; or</li>{\" \"}\n        <li>To assist us in analyzing how our Service is used.</li>\n      </ul>\n      <p>\n        I want to inform users of this Service that these third parties have\n        access to your Personal Information. The reason is to perform the tasks\n        assigned to them on our behalf. However, they are obligated not to\n        disclose or use the information for any other purpose.\n      </p>\n      <p>\n        <strong>Security</strong>\n      </p>\n      <p>\n        I value your trust in providing us your Personal Information, thus we\n        are striving to use commercially acceptable means of protecting it. But\n        remember that no method of transmission over the internet, or method of\n        electronic storage is 100% secure and reliable, and I cannot guarantee\n        its absolute security.\n      </p>\n      <p>\n        <strong>Links to Other Sites</strong>\n      </p>\n      <p>\n        This Service may contain links to other sites. If you click on a\n        third-party link, you will be directed to that site. Note that these\n        external sites are not operated by me. Therefore, I strongly advise you\n        to review the Privacy Policy of these websites. I have no control over\n        and assume no responsibility for the content, privacy policies, or\n        practices of any third-party sites or services.\n      </p>\n      <p>\n        <strong>Children's Privacy</strong>\n      </p>\n      <p>\n        These Services do not address anyone under the age of 13. I do not\n        knowingly collect personally identifiable information from children\n        under 13. In the case I discover that a child under 13 has provided me\n        with personal information, I immediately delete this from our servers.\n        If you are a parent or guardian and you are aware that your child has\n        provided us with personal information, please contact me so that I will\n        be able to do necessary actions.\n      </p>\n      <p>\n        <strong>Changes to This Privacy Policy</strong>\n      </p>\n      <p>\n        I may update our Privacy Policy from time to time. Thus, you are advised\n        to review this page periodically for any changes. I will notify you of\n        any changes by posting the new Privacy Policy on this page.\n      </p>\n      <p>This policy is effective as of 2020-05-03</p>{\" \"}\n      <p>\n        <strong>Contact Us</strong>\n      </p>\n      <p>\n        If you have any questions or suggestions about my Privacy Policy, do not\n        hesitate to contact me at shd101wyy@gmail.com.\n      </p>\n      <p>\n        This privacy policy page was created at{\" \"}\n        <a href=\"https://privacypolicytemplate.net\" target=\"_blank\">\n          privacypolicytemplate.net\n        </a>{\" \"}\n        and modified/generated by{\" \"}\n        <a\n          href=\"https://app-privacy-policy-generator.firebaseapp.com/\"\n          target=\"_blank\"\n        >\n          App Privacy Policy Generator\n        </a>\n      </p>\n    </Box>\n  );\n}\n","export enum EditorMode {\n  VickyMD = \"VickyMD\",\n  SourceCode = \"SourceCode\",\n  Preview = \"Preview\",\n  SplitView = \"SplitView\",\n}\n","export class FloatWin {\n  private el: HTMLElement;\n  public closeBtn: HTMLElement;\n  public visible: boolean;\n\n  constructor(win: HTMLElement) {\n    if (!win) {\n      return;\n    }\n\n    /** @type {HTMLDivElement} */\n    const titlebar = win.querySelector(\".float-win-title\") as HTMLElement;\n    titlebar.addEventListener(\n      \"selectstart\",\n      function () {\n        return false;\n      },\n      false,\n    );\n\n    /** @type {HTMLButtonElement} */\n    const closeBtn = win.querySelector(\".float-win-close\") as HTMLElement;\n    if (closeBtn) {\n      closeBtn.addEventListener(\n        \"click\",\n        () => {\n          this.hide();\n        },\n        false,\n      );\n      win.addEventListener(\n        \"keyup\",\n        (ev) => {\n          if (ev.keyCode === 27) this.hide(); // ESC\n        },\n        false,\n      );\n    }\n\n    let boxX: number,\n      boxY: number,\n      mouseX: number,\n      mouseY: number,\n      offsetX: number,\n      offsetY: number;\n\n    titlebar.addEventListener(\n      \"mousedown\",\n      function (e) {\n        if (e.target === closeBtn) return;\n\n        boxX = win.offsetLeft;\n        boxY = win.offsetTop;\n        mouseX = getMouseXY(e).x;\n        mouseY = getMouseXY(e).y;\n        offsetX = mouseX - boxX;\n        offsetY = mouseY - boxY;\n\n        document.addEventListener(\"mousemove\", move, false);\n        document.addEventListener(\"mouseup\", up, false);\n      },\n      false,\n    );\n\n    function move(e: any) {\n      var x = getMouseXY(e).x - offsetX;\n      var y = getMouseXY(e).y - offsetY;\n      var width = document.documentElement.clientWidth - titlebar.offsetWidth;\n      var height =\n        document.documentElement.clientHeight - titlebar.offsetHeight;\n\n      x = Math.min(Math.max(0, x), width);\n      y = Math.min(Math.max(0, y), height);\n\n      win.style.left = x + \"px\";\n      win.style.top = y + \"px\";\n    }\n\n    function up(e: any) {\n      document.removeEventListener(\"mousemove\", move, false);\n      document.removeEventListener(\"mouseup\", up, false);\n    }\n\n    function getMouseXY(e: any) {\n      var x = 0,\n        y = 0;\n      e = e || window.event;\n      if (e.pageX) {\n        x = e.pageX;\n        y = e.pageY;\n      } else {\n        x = e.clientX + document.body.scrollLeft - document.body.clientLeft;\n        y = e.clientY + document.body.scrollTop - document.body.clientTop;\n      }\n      return {\n        x: x,\n        y: y,\n      };\n    }\n\n    this.el = win;\n    this.closeBtn = closeBtn;\n    this.visible = !/float-win-hidden/.test(win.className);\n  }\n\n  public show(moveToCenter?: boolean) {\n    if (this.visible) return;\n    var el = this.el;\n\n    this.visible = true;\n    el.className = this.el.className.replace(/\\s*(float-win-hidden\\s*)+/g, \" \");\n    el.style.display = \"block\";\n\n    if (moveToCenter) {\n      setTimeout(() => {\n        this.moveTo(\n          (window.innerWidth - el.offsetWidth) / 2,\n          (window.innerHeight - el.offsetHeight) / 2,\n        );\n      }, 0);\n    }\n  }\n\n  public hide() {\n    if (!this.visible) return;\n    this.visible = false;\n    this.el.className += \" float-win-hidden\";\n    this.el.style.display = \"none\";\n  }\n\n  public moveTo(x: number, y: number) {\n    var s = this.el.style;\n    s.left = x + \"px\";\n    s.top = y + \"px\";\n  }\n}\n","import React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/notebook\";\nimport {\n  Box,\n  ButtonGroup,\n  Button,\n  InputBase,\n  Divider,\n  Card,\n  IconButton,\n  Typography,\n  Tooltip,\n} from \"@material-ui/core\";\nimport { TabNode, Actions } from \"flexlayout-react\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport {\n  ChevronLeft,\n  Close,\n  FilePresentationBox,\n  Pencil,\n  CodeTags,\n  DotsVertical,\n} from \"mdi-material-ui\";\nimport * as path from \"path\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Editor as CodeMirrorEditor,\n  EditorChangeLinkedList,\n  TextMarker,\n  Position as CursorPosition,\n} from \"codemirror\";\nimport { EditorMode } from \"../lib/editorMode\";\nimport {\n  printPreview,\n  postprocessPreview as previewPostprocessPreview,\n  openURL,\n} from \"../utilities/preview\";\nimport { initMathPreview } from \"../editor/views/math-preview\";\nimport { renderPreview } from \"vickymd/preview\";\nimport NotesPanel from \"./NotesPanel\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport EditImageDialog from \"./EditImageDialog\";\nimport NotePopover from \"./NotePopover\";\nimport {\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  DeleteNoteEventData,\n} from \"../lib/event\";\nconst VickyMD = require(\"vickymd/core\");\n\nconst previewZIndex = 99;\n\nconst HMDFold = {\n  image: true,\n  link: true,\n  math: true,\n  html: true, // maybe dangerous\n  emoji: true,\n  widget: true,\n  code: true,\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    notePanel: {\n      height: \"100%\",\n      overflow: \"hidden\",\n    },\n    topPanel: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      padding: \"4px 0 0\",\n      position: \"relative\",\n      backgroundColor: \"inherit\",\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: \"0\",\n      },\n    },\n    contentPanel: {\n      height: \"calc(100% - 48px)\",\n      overflow: \"auto\",\n    },\n    editorWrapper: {\n      \"flex\": 1,\n      \"overflow\": \"auto\",\n      \"backgroundColor\": theme.palette.background.paper,\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n      \"& .CodeMirror-code\": {\n        width: \"100%\",\n      },\n      \"& .CodeMirror\": {\n        width: \"800px\",\n        maxWidth: \"100%\",\n        margin: \"0 auto\",\n        height: \"100%\",\n        padding: theme.spacing(0, 1),\n        [theme.breakpoints.down(\"sm\")]: {\n          padding: theme.spacing(1),\n        },\n      },\n      \"& .CodeMirror-vscrollbar\": {\n        // display: \"none !important\",\n      },\n      \"& .CodeMirror-placeholder\": {\n        color: `${theme.palette.action.disabled} !important`,\n      },\n      /*\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      */\n    },\n    editor: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"inherit\",\n      border: \"none\",\n    },\n    preview: {\n      position: \"relative\",\n      left: \"0\",\n      top: \"0\",\n      width: \"800px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n      height: \"100%\",\n      border: \"none\",\n      overflow: \"auto !important\",\n      padding: theme.spacing(1, 2),\n      zIndex: previewZIndex,\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n    },\n    presentation: {\n      padding: \"0 !important\",\n    },\n    controlBtn: {\n      padding: theme.spacing(0.5, 0),\n      color: theme.palette.text.secondary,\n    },\n    controlBtnSelected: {\n      color: theme.palette.primary.main,\n    },\n    controlBtnSelectedSecondary: {\n      color: theme.palette.secondary.main,\n    },\n    // math\n    floatWin: {\n      position: \"fixed\",\n      zIndex: 100,\n      background: theme.palette.background.paper,\n      borderRadius: \"5px\",\n      overflow: \"hidden\",\n      minWidth: \"200px\",\n      maxWidth: \"70%\",\n    },\n    floatWinHidden: {\n      display: \"none\",\n    },\n    floatWinTitle: {\n      display: \"flex\",\n      alignItems: \"center\",\n      background: \"#579\",\n      color: \"#eee\",\n    },\n    floatWinContent: {\n      maxHeight: \"80vh\",\n      overflow: \"auto\",\n      padding: \"10px 20px\",\n    },\n    floatWinClose: {\n      color: \"#eee\",\n    },\n  }),\n);\n\ninterface Props {\n  note: Note;\n  tabNode: TabNode;\n}\nexport default function NotePanel(props: Props) {\n  const classes = useStyles(props);\n  const tabNode = props.tabNode;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const { t } = useTranslation();\n  const [noteTitle, setNoteTitle] = useState<string>(\"\");\n  const [note, setNote] = useState<Note>(props.note);\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editorMode, setEditorMode] = useState<EditorMode>(EditorMode.Preview);\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [previewIsPresentation, setPreviewIsPresentation] = useState<boolean>(\n    false,\n  );\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [cursorPosition, setCursorPosition] = useState<CursorPosition>({\n    line: 0,\n    ch: 0,\n  });\n  const mathPreviewElement = useRef<HTMLElement>(null);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [notePopoverElement, setNotePopoverElement] = useState<Element>(null);\n\n  const confirmNoteTitle = useCallback(() => {\n    const finalNoteTitle = noteTitle.trim().replace(/\\//g, \"-\");\n    if (\n      !note ||\n      !finalNoteTitle.length ||\n      note.title.trim() === finalNoteTitle\n    ) {\n      return;\n    }\n\n    crossnoteContainer\n      .changeNoteFilePath(\n        note,\n        path.join(path.dirname(note.filePath), `${finalNoteTitle}.md`),\n      )\n      .then((note) => {\n        setNote(note);\n      })\n      .catch((error) => {\n        new Noty({\n          type: \"error\",\n          text: t(\"error/failed-to-change-file-path\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 5000,\n        }).show();\n        setNoteTitle(note.title);\n      });\n  }, [noteTitle, note, tabNode, t]);\n\n  const postprocessPreview = useCallback(\n    (previewElement: HTMLElement) => {\n      previewPostprocessPreview(previewElement, note, (flag) => {\n        setPreviewIsPresentation(flag);\n      });\n    },\n    [note],\n  );\n\n  useEffect(() => {\n    if (!note) {\n      return () => {\n        setEditor(null);\n        setTextAreaElement(null);\n        setPreviewElement(null);\n      };\n    } else {\n      if (note.markdown.length === 0) {\n        setEditorMode(EditorMode.VickyMD);\n      }\n    }\n  }, [note]);\n\n  useEffect(() => {\n    if (!note || !crossnoteContainer.layoutModel || !tabNode) {\n      return;\n    }\n    setNoteTitle(note.title);\n    crossnoteContainer.layoutModel.doAction(\n      Actions.renameTab(tabNode.getId(), ` ` + note.title),\n    );\n  }, [note, crossnoteContainer.layoutModel, tabNode]);\n\n  // Emitter\n  useEffect(() => {\n    if (!globalEmitter || !tabNode || !editor || !note) {\n      return;\n    }\n\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      note.config = data.noteConfig;\n      if (data.tabId === tabNode.getId()) {\n        return;\n      }\n      if (data.noteFilePath === note.filePath) {\n        if (editor.getValue() !== data.markdown) {\n          editor.setValue(data.markdown);\n        }\n      }\n    };\n\n    const deleteNoteCallback = (data: DeleteNoteEventData) => {\n      if (\n        data.notebookPath === note.notebookPath &&\n        data.noteFilePath === note.filePath\n      ) {\n        crossnoteContainer.closeTabNode(tabNode.getId());\n      }\n    };\n\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.DeleteNote, deleteNoteCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.DeleteNote, deleteNoteCallback);\n    };\n  }, [tabNode, editor, note]);\n\n  // Set editor\n  useEffect(() => {\n    if (textAreaElement && !editor && note) {\n      const editor: CodeMirrorEditor = VickyMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\", // Break mobile device paste functionality\n        hmdFold: HMDFold,\n        keyMap: settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n        hmdClick: (info: any, cm: CodeMirrorEditor) => {\n          let { text, url } = info;\n          if (info.type === \"link\" || info.type === \"url\") {\n            const footnoteRef = text.match(/\\[[^[\\]]+\\](?:\\[\\])?$/); // bare link, footref or [foot][] . assume no escaping char inside\n            if (!footnoteRef && (info.ctrlKey || info.altKey) && url) {\n              // just open URL\n              openURL(url, note);\n              return false; // Prevent default click event\n            }\n          }\n        },\n      });\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setValue(note.markdown || \"\");\n      editor.on(\"cursorActivity\", (instance) => {\n        const cursor = instance.getCursor();\n        if (cursor) {\n          setCursorPosition({\n            line: cursor.line,\n            ch: cursor.ch,\n          });\n        }\n      });\n      setEditor(editor);\n    }\n  }, [textAreaElement, note, editor]);\n\n  // Math preview\n  useEffect(() => {\n    if (editor && mathPreviewElement) {\n      initMathPreview(editor, mathPreviewElement.current);\n    }\n  }, [editor, mathPreviewElement]);\n\n  // Render Preview\n  useEffect(() => {\n    if (editorMode === EditorMode.Preview && editor && note && previewElement) {\n      try {\n        renderPreview(previewElement, editor.getValue());\n        postprocessPreview(previewElement);\n        previewElement.scrollTop = 0;\n      } catch (error) {\n        previewElement.innerText = error;\n      }\n    }\n  }, [editorMode, editor, previewElement, note, postprocessPreview, t]);\n\n  // Toggle editor & preview\n  useEffect(() => {\n    if (!editor || !note) return;\n    if (editorMode === EditorMode.VickyMD) {\n      VickyMD.switchToHyperMD(editor);\n      editor.setOption(\"hmdFold\", HMDFold);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (editorMode === EditorMode.SourceCode) {\n      VickyMD.switchToNormal(editor);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (editorMode === EditorMode.Preview) {\n      editor.getWrapperElement().style.display = \"none\";\n    } else if (editorMode === EditorMode.SplitView) {\n      VickyMD.switchToNormal(editor);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    }\n  }, [editorMode, editor, note]);\n\n  // Change markdown\n  useEffect(() => {\n    if (editor && note && tabNode) {\n      const changesHandler = () => {\n        if (editor.getOption(\"readOnly\")) {\n          // This line is necessary for decryption...\n          return;\n        }\n        const markdown = editor.getValue();\n\n        if (markdown === note.markdown) {\n          return;\n        }\n        setTimeout(() => {\n          if (markdown === editor.getValue()) {\n            crossnoteContainer.updateNoteMarkdown(\n              tabNode,\n              note.notebookPath,\n              note.filePath,\n              markdown,\n            );\n          }\n          if (editorMode === EditorMode.Preview && previewElement) {\n            try {\n              renderPreview(previewElement, editor.getValue());\n              postprocessPreview(previewElement);\n              previewElement.scrollTop = 0;\n            } catch (error) {\n              previewElement.innerText = error;\n            }\n          }\n        }, 300);\n      };\n      editor.on(\"changes\", changesHandler);\n\n      const imageClickedHandler = (args: any) => {\n        const marker: TextMarker = args.marker;\n        const imageElement: HTMLImageElement = args.element;\n        imageElement.setAttribute(\n          \"data-marker-position\",\n          JSON.stringify(marker.find()),\n        );\n        setEditImageElement(imageElement);\n        setEditImageTextMarker(marker);\n        setEditImageDialogOpen(true);\n      };\n      editor.on(\"imageClicked\", imageClickedHandler);\n\n      const loadImage = async (args: any) => {\n        const element = args.element;\n        const imageSrc = element.getAttribute(\"data-src\");\n        element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n      };\n      editor.on(\"imageReadyToLoad\", loadImage);\n\n      return () => {\n        editor.off(\"changes\", changesHandler);\n        editor.off(\"imageClicked\", imageClickedHandler);\n        editor.off(\"imageReadyToLoad\", loadImage);\n      };\n    }\n  }, [editor, note, tabNode, editorMode, previewElement]);\n\n  return (\n    <Box className={clsx(classes.notePanel)}>\n      <Box\n        className={clsx(classes.topPanel, \"editor-toolbar\")}\n        style={{\n          backgroundColor:\n            settingsContainer.theme.name === \"light\" ? \"#fff\" : \"inherit\",\n        }}\n      >\n        <Box className={clsx(classes.row)} style={{ width: \"100%\" }}>\n          <InputBase\n            value={noteTitle}\n            style={{\n              fontSize: \"1.5rem\",\n              fontWeight: 400,\n              marginLeft: \"6px\",\n            }}\n            placeholder={t(\"general/title\")}\n            fullWidth={true}\n            onChange={(event) => setNoteTitle(event.currentTarget.value)}\n            onBlur={confirmNoteTitle}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                confirmNoteTitle();\n              }\n            }}\n          ></InputBase>\n          <ButtonGroup\n            variant=\"text\"\n            color=\"default\"\n            aria-label=\"editor mode\"\n            size=\"small\"\n          >\n            <Tooltip title={t(\"editor/note-control/preview\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.Preview &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.Preview ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.Preview)}\n              >\n                <FilePresentationBox></FilePresentationBox>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"general/vickymd\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.VickyMD &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.VickyMD ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.VickyMD)}\n              >\n                <Pencil></Pencil>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"editor/note-control/source-code\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.SourceCode &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.SourceCode ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.SourceCode)}\n              >\n                <CodeTags></CodeTags>\n              </Button>\n            </Tooltip>\n          </ButtonGroup>\n          <ButtonGroup\n            variant=\"text\"\n            color=\"default\"\n            aria-label=\"editor mode\"\n            size=\"small\"\n          >\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={(event) => setNotePopoverElement(event.currentTarget)}\n            >\n              <DotsVertical></DotsVertical>\n            </Button>\n          </ButtonGroup>\n        </Box>\n        <Divider></Divider>\n      </Box>\n      <Box className={clsx(classes.contentPanel)}>\n        <Box className={clsx(classes.editorWrapper)}>\n          <textarea\n            className={clsx(classes.editor, \"editor-textarea\")}\n            placeholder={t(\"editor/placeholder\")}\n            ref={(element: HTMLTextAreaElement) => {\n              setTextAreaElement(element);\n            }}\n          ></textarea>\n          {(editorMode === EditorMode.Preview ||\n            editorMode === EditorMode.SplitView) &&\n          editor ? (\n            <div\n              className={clsx(\n                classes.preview,\n                \"preview\",\n                previewIsPresentation ? classes.presentation : null,\n              )}\n              ref={(element: HTMLElement) => {\n                setPreviewElement(element);\n              }}\n            ></div>\n          ) : null}\n        </Box>\n        {Object.keys(note.mentionedBy).length > 0 && (\n          <React.Fragment>\n            <Divider style={{ marginTop: \"32px\" }}></Divider>\n            <NotesPanel\n              title={\"Linked references\"}\n              tabNode={props.tabNode}\n              notebook={crossnoteContainer.getNotebookAtPath(note.notebookPath)}\n              referredNote={note}\n            ></NotesPanel>\n          </React.Fragment>\n        )}\n      </Box>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n\n      <NotePopover\n        tabNode={props.tabNode}\n        note={note}\n        anchorElement={notePopoverElement}\n        onClose={() => setNotePopoverElement(null)}\n      ></NotePopover>\n\n      <Card\n        id=\"math-preview\"\n        className={clsx(classes.floatWin, \"float-win\", \"float-win-hidden\")}\n        ref={mathPreviewElement}\n      >\n        <Box className={clsx(classes.floatWinTitle, \"float-win-title\")}>\n          <IconButton\n            className={clsx(classes.floatWinClose, \"float-win-close\")}\n          >\n            <Close></Close>\n          </IconButton>\n          <Typography>{t(\"general/math-preview\")}</Typography>\n        </Box>\n        <Box\n          className={clsx(classes.floatWinContent, \"float-win-content\")}\n          id=\"math-preview-content\"\n        ></Box>\n      </Card>\n    </Box>\n  );\n}\n","import { FloatWin } from \"./float-win\";\n\nexport function initMathPreview(\n  cm: CodeMirror.Editor,\n  winElement: HTMLElement,\n) {\n  let mathRenderer: any = null;\n  const win = new FloatWin(winElement);\n  var supressed = false;\n\n  win.closeBtn.addEventListener(\n    \"click\",\n    function () {\n      supressed = true; // for current TeX block\n    },\n    false,\n  );\n\n  function updatePreview(expr: string) {\n    if (supressed) return;\n\n    if (!mathRenderer) {\n      // initialize renderer and preview window\n      mathRenderer = cm.hmd.FoldMath.createRenderer(\n        document.getElementById(\"math-preview-content\"),\n        \"display\",\n      );\n      mathRenderer.onChanged = function () {\n        // finished rendering. show the window\n        if (!win.visible) {\n          var cursorPos = cm.charCoords(cm.getCursor(), \"window\");\n          win.moveTo(cursorPos.left, cursorPos.bottom);\n        }\n        win.show();\n      };\n    }\n\n    // console.log(\"[MathPreview] \" + expr);\n\n    if (!mathRenderer.isReady()) return;\n    mathRenderer.startRender(expr);\n  }\n\n  function hidePreview() {\n    // console.log(\"[MathPreview] (exit)\");\n\n    win.hide();\n    supressed = false;\n  }\n\n  cm.setOption(\"hmdFoldMath\", {\n    onPreview: updatePreview,\n    onPreviewEnd: hidePreview,\n  });\n}\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport * as d3 from \"d3\";\nimport { Notebook } from \"../lib/notebook\";\nimport {\n  GraphViewData,\n  constructGraphView,\n  GraphViewLink,\n  GraphViewNode,\n} from \"../lib/graphView\";\nimport { Box } from \"@material-ui/core\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    graphViewPanel: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n}\n\nexport default function GraphView(props: Props) {\n  const classes = useStyles();\n  const [graphViewData, setGraphViewData] = useState<GraphViewData>({\n    nodes: [],\n    links: [],\n  });\n  const graphViewPanel = useRef<HTMLDivElement>(null);\n  const [width, setWidth] = useState<number>(0);\n  const [height, setHeight] = useState<number>(0);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  useEffect(() => {\n    if (!graphViewPanel || !graphViewPanel.current) {\n      return;\n    }\n    const resize = () => {\n      console.log(\"width: \", graphViewPanel.current.offsetWidth);\n      console.log(\"height: \", graphViewPanel.current.offsetHeight);\n      setWidth(graphViewPanel.current.offsetWidth);\n      setHeight(graphViewPanel.current.offsetHeight);\n    };\n    window.addEventListener(\"resize\", resize);\n    resize();\n    return () => {\n      window.removeEventListener(\"resize\", resize);\n    };\n  }, [graphViewPanel]);\n\n  useEffect(() => {\n    const data = constructGraphView(props.notebook);\n    setGraphViewData(data);\n  }, [props.notebook]);\n\n  useEffect(() => {\n    if (\n      !graphViewPanel ||\n      !graphViewPanel.current ||\n      !graphViewData ||\n      !width ||\n      !height\n    ) {\n      return;\n    }\n\n    const svg = d3\n      .select(graphViewPanel.current)\n      .append(\"svg\")\n      .attr(\"width\", width)\n      .attr(\"height\", height);\n    const container = svg.append(\"g\");\n\n    const zoomHandler = d3\n      .zoom()\n      .scaleExtent([0.1, 4])\n      .on(\"zoom\", function (event: any) {\n        console.log(\"zoomed\");\n        (window as any)[\"event_\"] = event;\n        container.attr(\"transform\", event.transform);\n      });\n    zoomHandler(svg as any);\n\n    const link = container\n      .append(\"g\")\n      .attr(\"class\", \"links\")\n      .selectAll(\"line\")\n      .data(graphViewData.links)\n      .enter()\n      .append(\"line\")\n      .style(\"stroke\", \"#aaa\")\n      .attr(\"stroke-width\", \"1px\");\n\n    const node = container\n      .append(\"g\")\n      .attr(\"class\", \"nodes\")\n      .selectAll(\"g\")\n      .data(graphViewData.nodes)\n      .enter()\n      .append(\"circle\")\n      .attr(\"r\", 8)\n      .style(\"fill\", \"#aaa\");\n\n    const text = container\n      .append(\"g\")\n      .attr(\"class\", \"labelNodes\")\n      .selectAll(\"text\")\n      .data(graphViewData.nodes)\n      .enter()\n      .append(\"text\")\n      .text((d) => d.id)\n      .style(\"fill\", \"#555\")\n      .style(\"font-family\", \"Arial\")\n      .style(\"font-size\", 12)\n      .style(\"pointer-events\", \"none\");\n\n    const fixna = (x: number) => {\n      if (isFinite(x)) return x;\n      return 0;\n    };\n\n    const neigh = (n1: GraphViewNode, n2: GraphViewNode) => {\n      const note1 = props.notebook.notes[n1.id];\n      const note2 = props.notebook.notes[n2.id];\n      if (!note1 || !note2) {\n        return false;\n      }\n      return (\n        note1.filePath in note2.mentions ||\n        note2.filePath in note1.mentions ||\n        note1.filePath === note2.filePath\n      );\n    };\n\n    const focus = (event: any, d: GraphViewNode) => {\n      node.style(\"opacity\", function (o) {\n        return neigh(d, o) ? 1 : 0.1;\n      });\n      text.attr(\"display\", function (o) {\n        return neigh(d, o) ? \"block\" : \"none\";\n      });\n\n      link.style(\"opacity\", function (o) {\n        return (o.source as any).id === d.id || (o.target as any).id === d.id\n          ? 1\n          : 0.2;\n      });\n    };\n\n    const unfocus = () => {\n      text.attr(\"display\", \"block\");\n      node.style(\"opacity\", 1);\n      link.style(\"opacity\", 1);\n    };\n\n    const dragstarted = function (event: any, d: any) {\n      console.log(\"dragstarted: \", d.active);\n      event.sourceEvent.stopPropagation();\n      if (!d.active) graphLayout.alphaTarget(0.3).restart();\n\n      // @ts-ignore\n      d3.select(this).attr(\"stroke\", \"black\");\n    };\n\n    const dragged = function (event: any, d: any) {\n      console.log(\"dragged\");\n      d.x = event.x;\n      d.y = event.y;\n      // @ts-ignore\n      d3.select(this as SVGCircleElement)\n        .raise()\n        .attr(\"transform\", (d: any) => \"translate(\" + [d.x, d.y] + \")\");\n    };\n\n    const dragended = function (event: any, d: any) {\n      console.log(\"dragended\");\n      if (!d.active) graphLayout.alphaTarget(0);\n\n      // @ts-ignore\n      d3.select(this).attr(\"stroke\", null);\n    };\n\n    const updateLink = (link: any) => {\n      link\n        .attr(\"x1\", function (d: any) {\n          return fixna(d.source.x);\n        })\n        .attr(\"y1\", function (d: any) {\n          return fixna(d.source.y);\n        })\n        .attr(\"x2\", function (d: any) {\n          return fixna(d.target.x);\n        })\n        .attr(\"y2\", function (d: any) {\n          return fixna(d.target.y);\n        });\n    };\n\n    const updateNode = (node: any) => {\n      node.attr(\"transform\", function (d: any) {\n        return \"translate(\" + fixna(d.x) + \",\" + fixna(d.y) + \")\";\n      });\n    };\n    const ticked = () => {\n      // console.log(\"ticked\");\n      node.call(updateNode);\n      link.call(updateLink);\n      text.call(updateNode);\n    };\n\n    const graphLayout = d3\n      .forceSimulation(graphViewData.nodes as any)\n      .force(\"charge\", d3.forceManyBody().strength(-3000))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2))\n      .force(\"x\", d3.forceX(width / 2).strength(1))\n      .force(\"y\", d3.forceY(height / 2).strength(1))\n      .force(\n        \"link\",\n        d3\n          .forceLink(graphViewData.links)\n          .id(function (d) {\n            return (d as GraphViewNode).id;\n          })\n          .distance(50)\n          .strength(1),\n      )\n      .on(\"tick\", ticked);\n\n    node.on(\"mouseover\", focus).on(\"mouseout\", unfocus);\n    const drag = d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n    drag(node as any);\n\n    node.on(\"click\", (event: any, d: GraphViewNode) => {\n      crossnoteContainer.openNoteAtPath(props.notebook, d.id);\n    });\n\n    console.log(\"simulated\");\n\n    return () => {\n      console.log(\"destroyed\");\n      svg.remove();\n    };\n  }, [graphViewData, graphViewPanel, width, height, props.notebook]);\n\n  return (\n    <div className={clsx(classes.graphViewPanel)} ref={graphViewPanel}></div>\n  );\n}\n","import { Notebook, Note } from \"./notebook\";\n\nexport interface GraphViewNode {\n  id: string;\n  label: string;\n}\n\nexport interface GraphViewLink {\n  source: string;\n  target: string;\n}\n\nexport interface GraphViewData {\n  nodes: GraphViewNode[];\n  links: GraphViewLink[];\n}\n\nexport function constructGraphView(notebook: Notebook): GraphViewData {\n  const nodes: GraphViewNode[] = [];\n  const links: GraphViewLink[] = [];\n\n  for (let filePath in notebook.notes) {\n    const note = notebook.notes[filePath];\n    nodes.push({\n      id: note.filePath,\n      label: note.title,\n    });\n\n    for (let mentionedFilePath in note.mentions) {\n      const mentionedNote = note.mentions[mentionedFilePath];\n      links.push({\n        source: note.filePath,\n        target: mentionedNote.filePath,\n      });\n    }\n  }\n  return {\n    nodes,\n    links,\n  };\n}\n","import React, { useState, useCallback, useEffect, useRef } from \"react\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n  lighten,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Box } from \"@material-ui/core\";\nimport FlexLayout, { Model, TabNode, Actions } from \"flexlayout-react\";\nimport \"flexlayout-react/style/light.css\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Settings } from \"./Settings\";\nimport { TabNodeComponent, TabNodeConfig } from \"../lib/tabNode\";\nimport NotesPanel from \"./NotesPanel\";\nimport { PrivacyPolicy } from \"../pages/Privacy\";\nimport NotePanel from \"./NotePanel\";\nimport { useTranslation } from \"react-i18next\";\nimport GraphView from \"./GraphView\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    mainPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      flexGrow: 1,\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.default,\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport function MainPanel(props: Props) {\n  const classes = useStyles();\n  const container = useRef<HTMLDivElement>(null);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const { t } = useTranslation();\n\n  const factory = useCallback((node: TabNode) => {\n    const config: TabNodeConfig = node.getConfig();\n    console.log(\n      \"render component: \\n\",\n      `* id: ${node.getId()}\\n`,\n      `* name: ${node.getName()}\\n`,\n      `* config: `,\n      node.getConfig(),\n    );\n\n    const component: TabNodeComponent = node.getComponent() as TabNodeComponent;\n    if (component === \"Settings\") {\n      return <Settings></Settings>;\n    } else if (component === \"Notes\") {\n      return (\n        <NotesPanel\n          tabNode={node}\n          notebook={config.notebook}\n          title={t(\"general/notes\")}\n        ></NotesPanel>\n      );\n    } else if (component === \"Privacy\") {\n      return <PrivacyPolicy toggleDrawer={props.toggleDrawer}></PrivacyPolicy>;\n    } else if (component === \"Note\") {\n      return <NotePanel note={config.note} tabNode={node}></NotePanel>;\n    } else if (component === \"Graph\") {\n      return <GraphView notebook={config.notebook}></GraphView>;\n    }\n  }, []);\n\n  useEffect(() => {\n    console.log(\"render MainPanel\");\n  }, [container, crossnoteContainer.layoutModel]);\n\n  return (\n    <div className={clsx(classes.mainPanel)} ref={container} id=\"main-panel\">\n      <FlexLayout.Layout\n        model={crossnoteContainer.layoutModel}\n        factory={factory}\n      ></FlexLayout.Layout>\n    </div>\n  );\n}\n","import {\n  Box,\n  CssBaseline,\n  Drawer,\n  Hidden,\n  List,\n  ListItem,\n  IconButton,\n  Divider,\n  ListItemIcon,\n  ListItemText,\n  Avatar,\n  CircularProgress,\n  Badge,\n  useMediaQuery,\n  ListItemSecondaryAction,\n  Tooltip,\n  Card,\n} from \"@material-ui/core\";\nimport {\n  fade,\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n  lighten,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useState, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  PlusCircleOutline,\n  Cog as SettingsIcon,\n  Bell,\n  Notebook,\n} from \"mdi-material-ui\";\nimport SplitPane from \"react-split-pane\";\nimport {\n  CrossnoteContainer,\n  SelectedSectionType,\n  HomeSection,\n} from \"../containers/crossnote\";\nimport Editor from \"../components/Editor\";\nimport AddNotebookDialog from \"../components/AddNotebookDialog\";\nimport NotesPanel from \"../components/NotesPanel\";\nimport { browserHistory } from \"../utilities/history\";\nimport { Settings } from \"../components/Settings\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { globalContainers } from \"../containers/global\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { AuthDialog } from \"../components/AuthDialog\";\nimport { Notifications } from \"../components/Notifications\";\nimport ExplorePanel from \"../components/ExplorePanel\";\nimport { NotebookPanel } from \"../components/NotebookPanel\";\nimport { PrivacyPolicy } from \"./Privacy\";\nimport LanguageSelectorDialog from \"../components/LanguageSelectorDialog\";\nimport NotebookTreeView from \"../components/NotebookTreeView\";\nimport { MainPanel } from \"../components/MainPanel\";\nimport { Actions, DockLocation } from \"flexlayout-react\";\nconst is = require(\"is_js\");\n\nconst drawerWidth = 200;\nconst notesPanelWidth = 350;\nconst notesPanelMinWidth = 220;\nconst notesPanelMaxWidth = 400;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    page: {\n      display: \"flex\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      boxShadow: \"none\",\n    },\n    toolBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        marginLeft: theme.spacing(3),\n        width: \"auto\",\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        width: 200,\n      },\n    },\n    displayNone: {\n      display: \"none\",\n    },\n    drawer: {\n      [theme.breakpoints.up(\"sm\")]: {\n        width: drawerWidth,\n        flexShrink: 0,\n      },\n    },\n    drawerPaper: {\n      width: drawerWidth,\n      backgroundColor: lighten(theme.palette.background.paper, 0.05),\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      overflow: \"hidden\",\n    },\n    notebooksSection: {\n      overflowY: \"auto\",\n    },\n    controllersSection: {\n      // flex: 1,\n    },\n    listItemIcon: {\n      color: theme.palette.text.secondary,\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    selectedSection: {\n      backgroundColor: \"#ccc\",\n    },\n    left: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n      /*\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\"\n      }\n      */\n    },\n    notesPanel: {\n      maxWidth: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n      },\n    },\n    editorPanel: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"md\")]: {\n        // width: `calc(100% - ${notesPanelWidth}px)`,\n        // left: `${notesPanelWidth}px`\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\",\n        top: \"0\",\n        left: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n      },\n    },\n    toolBarSpace: theme.mixins.toolbar,\n  }),\n);\n\ninterface QueryParams {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath?: string;\n}\n\ninterface Props {\n  section: HomeSection;\n  queryParams: QueryParams;\n}\n\nexport function Home(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const isMobile = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const [addNotebookDialogOpen, setAddNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [addNotebookRepo, setAddNotebookRepo] = useState<string>(\"\");\n  const [addNotebookBranch, setAddNotebookBranch] = useState<string>(\"\");\n\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false);\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  // HACK: Register globalContainers for widgets use\n  globalContainers.cloudContainer = cloudContainer;\n  globalContainers.settingsContainer = settingsContainer;\n  globalContainers.crossnoteContainer = crossnoteContainer;\n\n  const toggleDrawer = useCallback(() => {\n    setDrawerOpen(!drawerOpen);\n  }, [drawerOpen]);\n\n  /*\n  useEffect(() => {\n    if (!crossnoteContainer.initialized) {\n      return;\n    }\n    if (props.section === HomeSection.Notebooks) {\n      if (props.queryParams) {\n        const notebookID = props.queryParams[\"notebookID\"];\n        if (notebookID) {\n          const filePath = decodeURIComponent(props.queryParams.filePath || \"\");\n          const notebook = crossnoteContainer.notebooks.find(\n            (nb) => nb._id === notebookID,\n          );\n          if (notebook && crossnoteContainer.selectedNotebook !== notebook) {\n            crossnoteContainer.setSelectedNotebook(notebook);\n          }\n          if (filePath) {\n            crossnoteContainer.setPendingNote({\n              notebookID: notebookID,\n              filePath,\n            });\n          } else {\n            crossnoteContainer.setPendingNote(null);\n          }\n        } else if (props.queryParams.repo && props.queryParams.branch) {\n          const repo = decodeURIComponent(props.queryParams.repo || \"\");\n          const branch = decodeURIComponent(props.queryParams.branch || \"\");\n          const filePath = decodeURIComponent(props.queryParams.filePath || \"\");\n          const notebook = crossnoteContainer.notebooks.find(\n            (nb) => nb.gitURL === repo && nb.gitBranch === branch,\n          );\n          if (notebook) {\n            if (crossnoteContainer.selectedNotebook !== notebook) {\n              crossnoteContainer.setSelectedNotebook(notebook);\n            }\n            if (filePath) {\n              crossnoteContainer.setPendingNote({\n                repo,\n                branch,\n                filePath,\n              });\n            } else {\n              crossnoteContainer.setPendingNote(null);\n            }\n          } else {\n            // Show dialog\n            setAddNotebookRepo(repo);\n            setAddNotebookBranch(branch);\n            setAddNotebookDialogOpen(true);\n          }\n        }\n      }\n    }\n  }, [props.section, props.queryParams, crossnoteContainer.initialized]);\n  */\n\n  useEffect(() => {\n    crossnoteContainer.setHomeSection(props.section);\n  }, [props.section]);\n\n  const drawer = (\n    <React.Fragment>\n      <Box\n        className={clsx(classes.notebooksSection)}\n        style={{\n          overflowY: crossnoteContainer.initialized ? \"auto\" : \"hidden\",\n        }}\n      >\n        <List disablePadding={true}>\n          <ListItem>\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <Notebook></Notebook>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Notebooks\")}></ListItemText>\n            <ListItemSecondaryAction style={{ right: \"0\" }}>\n              {crossnoteContainer.initialized && (\n                <Tooltip title={t(\"general/add-a-notebook\")}>\n                  <IconButton\n                    className={clsx(classes.listItemIcon)}\n                    onClick={() => setAddNotebookDialogOpen(true)}\n                  >\n                    <PlusCircleOutline></PlusCircleOutline>\n                  </IconButton>\n                </Tooltip>\n              )}\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n        <List disablePadding={true} style={{ marginBottom: theme.spacing(16) }}>\n          {crossnoteContainer.notebooks.map((notebook) => {\n            return (\n              <ListItem\n                disableGutters={true}\n                style={{ padding: \"0\" }}\n                key={notebook._id}\n              >\n                <NotebookTreeView notebook={notebook}></NotebookTreeView>\n              </ListItem>\n            );\n          })}\n          {!crossnoteContainer.initialized && (\n            <ListItem>\n              <CircularProgress style={{ margin: \"0 auto\" }}></CircularProgress>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n\n      <Box className={clsx(classes.controllersSection)}>\n        <Divider></Divider>\n        <List disablePadding={true}>\n          {/*\n          <ListItem\n            button\n            onClick={() => {\n              browserHistory.push(`/explore`);\n              setDrawerOpen(false);\n            }}\n            style={{ display: is.online() ? \"flex\" : \"none\" }}\n          >\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"28px\", height: \"28px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Explore\")}></ListItemText>\n          </ListItem>\n          */}\n          <ListItem\n            button\n            onClick={() => {\n              // browserHistory.push(`/settings`);\n              // setDrawerOpen(false);\n              crossnoteContainer.addTabNode({\n                type: \"tab\",\n                component: \"Settings\",\n                name: \" \" + t(\"general/Settings\"),\n                id: \"Settings\",\n                config: {\n                  singleton: true,\n                },\n              });\n            }}\n          >\n            {cloudContainer.viewer ? (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <Avatar\n                  className={clsx(classes.avatar)}\n                  variant={\"rounded\"}\n                  src={\n                    cloudContainer.viewer.avatar ||\n                    \"data:image/png;base64,\" +\n                      new Identicon(\n                        sha256(\n                          cloudContainer.viewer &&\n                            cloudContainer.viewer.username,\n                        ),\n                        80,\n                      ).toString()\n                  }\n                ></Avatar>\n              </ListItemIcon>\n            ) : (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <SettingsIcon></SettingsIcon>\n              </ListItemIcon>\n            )}\n            <ListItemText primary={t(\"general/Settings\")}></ListItemText>\n          </ListItem>\n          {cloudContainer.loggedIn && (\n            <ListItem\n              button\n              onClick={() => {\n                browserHistory.push(`/notifications`);\n                setDrawerOpen(false);\n              }}\n            >\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                {cloudContainer.viewer.notifications.totalCount > 0 ? (\n                  <Badge\n                    color={\"secondary\"}\n                    badgeContent={\n                      cloudContainer.viewer.notifications.totalCount || \"\"\n                    }\n                  >\n                    <Bell></Bell>\n                  </Badge>\n                ) : (\n                  <Bell></Bell>\n                )}\n              </ListItemIcon>\n              <ListItemText primary={t(\"general/Notifications\")}></ListItemText>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n    </React.Fragment>\n  );\n\n  /*\n  const notesPanel =\n    props.section === HomeSection.Notebooks &&\n    (crossnoteContainer.selectedSection.type ===\n    SelectedSectionType.Attachments ? (\n      <Box className={clsx(classes.notesPanel)} id={\"notes-panel\"}>\n        <AttachmentsPanel toggleDrawer={toggleDrawer}></AttachmentsPanel>\n      </Box>\n    ) : (\n      <Box className={clsx(classes.notesPanel)} id={\"notes-panel\"}>\n        <NotesPanel toggleDrawer={toggleDrawer}></NotesPanel>\n      </Box>\n    ));\n\n  const editorPanel = props.section === HomeSection.Notebooks && (\n    <Card\n      className={clsx(classes.editorPanel, \"editor-panel\")}\n      style={{\n        display: crossnoteContainer.displayMobileEditor && \"block\",\n      }}\n    >\n      <Editor note={crossnoteContainer.selectedNote}></Editor>\n    </Card>\n  );\n  */\n\n  const explorePanel = props.section === HomeSection.Explore && (\n    <Box className={clsx(classes.notesPanel)}>\n      <ExplorePanel toggleDrawer={toggleDrawer}></ExplorePanel>\n    </Box>\n  );\n\n  const notebookPanel = props.section === HomeSection.Explore && (\n    <Card\n      className={clsx(classes.editorPanel)}\n      style={{\n        display: cloudContainer.displayNotebookPreview && \"block\",\n      }}\n    >\n      <NotebookPanel notebook={cloudContainer.selectedNotebook}></NotebookPanel>\n    </Card>\n  );\n\n  return (\n    <Box className={clsx(classes.page)}>\n      <CssBaseline></CssBaseline>\n      <nav className={clsx(classes.drawer, \"drawer\")}>\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            open={drawerOpen}\n            onClose={toggleDrawer}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n      </nav>\n      {/* <Box className={clsx(classes.mainPanel)} id=\"main-panel\"> */}\n      {/*<Box className={clsx(classes.notesPanel)} id={\"notes-panel\"}>\n          <NotesPanel toggleDrawer={toggleDrawer}></NotesPanel>\n          </Box>*/}\n      {/*props.section === HomeSection.Notebooks &&\n          (isMobile ? (\n            <React.Fragment>\n              {notesPanel}\n              {editorPanel}\n            </React.Fragment>\n          ) : (\n            <SplitPane\n              defaultSize={notesPanelWidth}\n              minSize={notesPanelMinWidth}\n              maxSize={notesPanelMaxWidth}\n              className={\"main-panel-split-pane\"}\n            >\n              {notesPanel}\n              {editorPanel}\n            </SplitPane>\n          ))}*/}\n      {/*\n        {props.section === HomeSection.Explore &&\n          (isMobile ? (\n            <React.Fragment>\n              {explorePanel}\n              {notebookPanel}\n            </React.Fragment>\n          ) : (\n            <SplitPane\n              defaultSize={notesPanelWidth}\n              minSize={notesPanelMinWidth}\n              maxSize={notesPanelMaxWidth}\n              className={\"main-panel-split-pane\"}\n            >\n              {explorePanel}\n              {notebookPanel}\n            </SplitPane>\n          ))}\n        {props.section === HomeSection.Settings && (\n          <Settings toggleDrawer={toggleDrawer}></Settings>\n        )}\n        {props.section === HomeSection.Notifications && (\n          <Notifications toggleDrawer={toggleDrawer}></Notifications>\n        )}\n        {props.section === HomeSection.Privacy && (\n          <PrivacyPolicy toggleDrawer={toggleDrawer}></PrivacyPolicy>\n        )}\n        */}\n      {/* </Box> */}\n      <MainPanel toggleDrawer={toggleDrawer}></MainPanel>\n      <AddNotebookDialog\n        open={addNotebookDialogOpen}\n        onClose={() => setAddNotebookDialogOpen(false)}\n        canCancel={true}\n        gitURL={addNotebookRepo}\n        gitBranch={addNotebookBranch}\n      ></AddNotebookDialog>\n      <AuthDialog\n        open={cloudContainer.authDialogOpen}\n        onClose={() => cloudContainer.setAuthDialogOpen(false)}\n      ></AuthDialog>\n      <LanguageSelectorDialog></LanguageSelectorDialog>\n    </Box>\n  );\n}\n","import React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  Box,\n  Typography,\n  IconButton,\n  TextField,\n  Card,\n  Button,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  useLinkWithGitHubAccountMutation,\n  useSignInWithGitHubAccountMutation,\n  useSignUpWithGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { browserHistory } from \"../utilities/history\";\nimport { UUIDNil } from \"../utilities/utils\";\nimport { ChevronLeft } from \"mdi-material-ui\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"100%\",\n      color: theme.palette.text.primary,\n      backgroundColor: theme.palette.background.default,\n    },\n    wrapper: {\n      position: \"relative\",\n      width: \"960px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n      transform: \"translateY(-60%)\",\n      top: \"50%\",\n      padding: \"16px\",\n      boxSizing: \"border-box\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n    card: {\n      position: \"relative\",\n      width: \"300px\",\n      maxWidth: \"100%\",\n      padding: \"16px\",\n      margin: \"32px auto\",\n    },\n  }),\n);\n\ninterface Props {\n  code: string;\n}\nexport function GitHubOAuthCallback(props: Props) {\n  const classes = useStyles(props);\n  const { t, i18n } = useTranslation();\n  const [accessToken, setAccessToken] = useState<string>(\"\");\n  const [title, setTitle] = useState<string>(t(\"github-oauth/wait\"));\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [\n    resLinkWithGitHubAccount,\n    executeLinkWithGitHubAccount,\n  ] = useLinkWithGitHubAccountMutation();\n  const [\n    resSignInWithGitHubAccount,\n    executeSignInWithGitHubAccount,\n  ] = useSignInWithGitHubAccountMutation();\n  const [\n    resSignUpWithGitHubAccount,\n    executeSignUpWithGitHubAccount,\n  ] = useSignUpWithGitHubAccountMutation();\n\n  useEffect(() => {\n    if (props.code) {\n      if (localStorage.getItem(\"token\")) {\n        // Link with GitHub account\n        executeLinkWithGitHubAccount({ code: props.code });\n      } else {\n        // Sign in with GitHub account\n        executeSignInWithGitHubAccount({ code: props.code });\n      }\n    }\n  }, [props.code]);\n\n  useEffect(() => {\n    if (resLinkWithGitHubAccount.fetching) {\n    } else if (resLinkWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/link-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/link-with-github-account-failure\"));\n    } else if (resLinkWithGitHubAccount.data) {\n      browserHistory.replace(\"/settings\");\n    }\n  }, [resLinkWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignInWithGitHubAccount.fetching) {\n    } else if (resSignInWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/sign-in-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/sign-in-with-github-account-failure\"));\n    } else if (\n      resSignInWithGitHubAccount.data &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount.token\n    ) {\n      if (\n        resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.id ===\n        UUIDNil\n      ) {\n        // Ask user to register for new account\n        setAccessToken(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        setUsername(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.username,\n        );\n        setEmail(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.email,\n        );\n      } else {\n        localStorage.setItem(\n          \"token\",\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }\n    }\n  }, [resSignInWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignUpWithGitHubAccount.error) {\n      setErrorMessage(\n        resSignUpWithGitHubAccount.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSignUpWithGitHubAccount.data) {\n      localStorage.setItem(\n        \"token\",\n        resSignUpWithGitHubAccount.data.signUpWithGitHubAccount.token,\n      );\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUpWithGitHubAccount]);\n\n  const signUpWithGitHubAccessToken = () => {\n    executeSignUpWithGitHubAccount({\n      email,\n      username,\n      accessToken,\n    });\n  };\n\n  const backBtn = (\n    <IconButton\n      onClick={() => {\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }}\n      color={\"inherit\"}\n    >\n      <ChevronLeft></ChevronLeft>\n    </IconButton>\n  );\n\n  return (\n    <Box className={clsx(classes.container)}>\n      <Box className={clsx(classes.wrapper)}>\n        {accessToken ? (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant=\"h4\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in\")}\n            </Typography>\n            <Typography variant=\"h5\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in-small\")}\n            </Typography>\n            <Card elevation={2} className={clsx(classes.card)}>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Username\")}\n                variant=\"outlined\"\n                value={username}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setUsername(event.target.value);\n                }}\n                fullWidth={true}\n              ></TextField>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Email\")}\n                variant=\"outlined\"\n                value={email}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setEmail(event.target.value);\n                }}\n                onClick={(event) => {\n                  event.currentTarget.focus();\n                }}\n                fullWidth={true}\n              ></TextField>\n              {errorMessage.length ? (\n                <Typography className={clsx(classes.errorMessage)}>\n                  {errorMessage}\n                </Typography>\n              ) : null}\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => signUpWithGitHubAccessToken()}\n                fullWidth={true}\n                disabled={resSignUpWithGitHubAccount.fetching}\n              >\n                {t(\"general/Continue\")}\n              </Button>\n            </Card>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant={\"h2\"}>{title}</Typography>\n            <Typography>{props.code}</Typography>\n          </React.Fragment>\n        )}\n      </Box>\n    </Box>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import React, { FC, useEffect, useCallback } from \"react\";\nimport { Snackbar, Button } from \"@material-ui/core\";\nimport * as serviceWorker from \"../serviceWorker\";\nimport { useTranslation } from \"react-i18next\";\n\nconst ServiceWorkerWrapper: FC = () => {\n  const { t } = useTranslation();\n  const [showReload, setShowReload] = React.useState(false);\n  const [\n    waitingWorker,\n    setWaitingWorker,\n  ] = React.useState<ServiceWorker | null>(null);\n\n  const onSWUpdate = (registration: ServiceWorkerRegistration) => {\n    setShowReload(true);\n    setWaitingWorker(registration.waiting);\n  };\n\n  useEffect(() => {\n    serviceWorker.register({ onUpdate: onSWUpdate });\n  }, []);\n\n  const reloadPage = useCallback(() => {\n    waitingWorker?.postMessage({ type: \"SKIP_WAITING\" });\n    setShowReload(false);\n    window.location.reload(true);\n  }, [waitingWorker]);\n\n  return (\n    <Snackbar\n      open={showReload}\n      message={t(\"notifications/new-version-available\")}\n      onClick={reloadPage}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n      action={\n        <Button color=\"inherit\" size=\"small\" onClick={reloadPage}>\n          {t(\"general/update\")}\n        </Button>\n      }\n    />\n  );\n};\n\nexport default ServiceWorkerWrapper;\n","import React, { useEffect, FC } from \"react\";\nimport \"./App.css\";\nimport { ThemeProvider } from \"@material-ui/styles\";\nimport * as qs from \"qs\";\nimport { Router, Route, Switch } from \"react-router-dom\";\nimport { browserHistory } from \"./utilities/history\";\nimport { Home } from \"./pages/Home\";\nimport { GitHubOAuthCallback } from \"./components/GitHubOAuthCallback\";\nimport \"./editor\";\nimport { HomeSection } from \"./containers/crossnote\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport ServiceWorkerWrapper from \"./components/ServiceWorkerWrapper\";\n// @ts-ignore\nimport PWAPrompt from \"react-ios-pwa-prompt\";\nimport { useTranslation } from \"react-i18next\";\nconst is = require(\"is_js\");\n\nconst App: FC = () => {\n  const { t } = useTranslation();\n  const settingsContainer = SettingsContainer.useContainer();\n  useEffect(() => {\n    const handler = (event: any) => {\n      try {\n        event.preventDefault();\n        event.prompt();\n        event.userChoice.then((choiceResult: any) => {\n          console.log(choiceResult);\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    window.addEventListener(\"beforeinstallprompt\", handler);\n    return () => {\n      window.removeEventListener(\"beforeinstallprompt\", handler);\n    };\n  }, []);\n  return (\n    <ThemeProvider theme={settingsContainer.theme.muiTheme}>\n      <div className=\"App\">\n        <Router history={browserHistory}>\n          <Switch>\n            <Route\n              path={`/settings`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Settings} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/explore`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Explore} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/notifications`}\n              exact={true}\n              render={(props) => (\n                <Home\n                  section={HomeSection.Notifications}\n                  queryParams={{}}\n                ></Home>\n              )}\n            ></Route>\n            <Route\n              exact={true}\n              path={`/github_oauth_callback`}\n              render={(props) => (\n                <GitHubOAuthCallback\n                  code={\n                    qs.parse(props.location.search.replace(/^\\?/, \"\"))[\n                      \"code\"\n                    ] as string || \"\"\n                  }\n                ></GitHubOAuthCallback>\n              )}\n            ></Route>\n            <Route\n              path={`/privacy`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Privacy} queryParams={{}}></Home>\n              )}\n            ></Route>\n            <Route\n              path={`/`}\n              render={(props) => (\n                <Home\n                  section={HomeSection.Notebooks}\n                  queryParams={qs.parse(\n                    props.location.search.replace(/^\\?/, \"\"),\n                  )}\n                ></Home>\n              )}\n            ></Route>\n          </Switch>\n        </Router>\n        <ServiceWorkerWrapper></ServiceWorkerWrapper>\n        {is.safari() ? (\n          <PWAPrompt\n            copyTitle={t(\"react-ios-pwa-prompt/copy-title\")}\n            copyBody={t(\"react-ios-pwa-prompt/copy-body\")}\n            copyShareButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-share-button-label\",\n            )}\n            copyAddHomeButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-add-home-button-label\",\n            )}\n            copyClosePrompt={t(\"general/cancel\")}\n          ></PWAPrompt>\n        ) : null}\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import { useState, useEffect, useCallback } from \"react\";\nimport { createContainer } from \"unstated-next\";\nimport {\n  PageInfo,\n  useNotificationsQuery,\n  Notification,\n  useDeleteNotificationMutation,\n  useDeleteAllNotificationsMutation,\n} from \"../generated/graphql\";\nimport { EmptyPageInfo } from \"../utilities/note\";\nimport Noty from \"noty\";\n\ninterface InitialState {}\n\nfunction useNotificationsContainer(initialState: InitialState) {\n  const [pageInfo, setPageInfo] = useState<PageInfo>(EmptyPageInfo);\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [needsRefetch, setNeedsRefetch] = useState<boolean>(false);\n  const [resNotifications, executeNotificationsQuery] = useNotificationsQuery({\n    variables: {\n      before: pageInfo.startCursor,\n      after: pageInfo.endCursor,\n      first: 0,\n      last: 20,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resDeleteNotification,\n    executeDeleteNotificationMutation,\n  ] = useDeleteNotificationMutation();\n  const [\n    resDeleteAllNotifications,\n    executeDeleteAllNotificationsMutation,\n  ] = useDeleteAllNotificationsMutation();\n\n  const fetchMoreNotifications = useCallback(() => {\n    executeNotificationsQuery({\n      requestPolicy: \"network-only\",\n    });\n  }, [executeNotificationsQuery]);\n\n  const deleteNotification = useCallback(\n    (notificationID: string) => {\n      setNotifications((notifications) => {\n        if (\n          pageInfo.hasPreviousPage &&\n          pageInfo.startCursor === notificationID\n        ) {\n          const notification = notifications[1];\n          if (notification) {\n            setPageInfo({\n              startCursor: notification.id,\n              endCursor: pageInfo.endCursor,\n              hasPreviousPage: pageInfo.hasPreviousPage,\n              hasNextPage: pageInfo.hasNextPage,\n            });\n          }\n        }\n        return notifications.filter((n) => n.id !== notificationID);\n      });\n      executeDeleteNotificationMutation({\n        notificationID: notificationID,\n      });\n    },\n    [executeDeleteNotificationMutation, pageInfo],\n  );\n\n  const deleteAllNotifications = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    executeDeleteAllNotificationsMutation();\n  }, [executeDeleteAllNotificationsMutation]);\n\n  const refresh = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    setNeedsRefetch(true);\n  }, [executeNotificationsQuery]);\n\n  useEffect(() => {\n    if (resNotifications.fetching) {\n    } /*else if (resNotifications.error) {\n      // There might be records that are not found because origin(user) undo the action.\n      new Noty({\n        type: \"error\",\n        text: resNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n    } */ else if (\n      resNotifications.data &&\n      resNotifications.data.viewer.notifications\n    ) {\n      const ns = resNotifications.data.viewer.notifications;\n      const pageInfo = ns.pageInfo;\n      const edges = ns.edges;\n      const newNotifications = (edges || [])\n        .map((edge) => {\n          if (edge) {\n            return edge.node as any;\n          } else {\n            return null;\n          }\n        })\n        .reverse()\n        .filter((x) => x);\n      setNotifications((notifications) =>\n        [...notifications, ...newNotifications].filter(\n          (notification, index, self) =>\n            index === self.findIndex((m) => m.id === notification.id),\n        ),\n      );\n      setPageInfo(pageInfo);\n    }\n  }, [resNotifications]);\n\n  useEffect(() => {\n    if (resDeleteNotification.fetching) {\n    } else if (resDeleteNotification.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteNotification.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteNotification.data &&\n      resDeleteNotification.data.deleteNotification\n    ) {\n    }\n  }, [resDeleteNotification]);\n\n  useEffect(() => {\n    if (resDeleteAllNotifications.fetching) {\n    } else if (resDeleteAllNotifications.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteAllNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteAllNotifications.data &&\n      resDeleteAllNotifications.data.deleteAllNotifications\n    ) {\n      setNotifications([]);\n      setPageInfo(EmptyPageInfo);\n    }\n  }, [resDeleteAllNotifications]);\n\n  useEffect(() => {\n    if (needsRefetch) {\n      fetchMoreNotifications();\n      setNeedsRefetch(false);\n    }\n  }, [needsRefetch, fetchMoreNotifications]);\n\n  return {\n    fetching: resNotifications.fetching,\n    notifications,\n    pageInfo,\n    fetchMoreNotifications,\n    deleteNotification,\n    deleteAllNotifications,\n    refresh,\n  };\n}\n\nexport const NotificationsContainer = createContainer(\n  useNotificationsContainer,\n);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"typeface-noto-sans-sc\";\nimport \"typeface-roboto\";\nimport \"noty/lib/noty.css\";\nimport \"noty/lib/themes/relax.css\";\nimport \"@mdi/font/css/materialdesignicons.min.css\";\n\nimport \"./i18n/i18n\";\nimport \"./index.css\";\nimport \"./themes/manager\";\nimport App from \"./App\";\nimport Crossnote from \"./lib/crossnote\";\nimport \"./lib/fs\";\nimport { CrossnoteContainer } from \"./containers/crossnote\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport { CloudContainer } from \"./containers/cloud\";\nimport { NotificationsContainer } from \"./containers/notifications\";\n\nimport { Provider } from \"urql\";\nimport { GraphQLClient } from \"./utilities/client\";\n\n// Hack for GoldenLayout\nwindow[\"React\"] = React;\nwindow[\"ReactDOM\"] = ReactDOM;\n\ntry {\n  const crossnote = new Crossnote();\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <CrossnoteContainer.Provider\n        initialState={{\n          crossnote: crossnote,\n        }}\n      >\n        <SettingsContainer.Provider initialState={{}}>\n          <CloudContainer.Provider initialState={{}}>\n            <NotificationsContainer.Provider initialState={{}}>\n              <App />\n            </NotificationsContainer.Provider>\n          </CloudContainer.Provider>\n        </SettingsContainer.Provider>\n      </CrossnoteContainer.Provider>\n    </Provider>,\n    document.getElementById(\"root\"),\n  );\n} catch (error) {\n  console.log(error);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n//// serviceWorker.register();\n"],"sourceRoot":""}