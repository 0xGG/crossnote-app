{"version":3,"sources":["generated/graphql.tsx","utilities/history.ts","components/GitHubOAuthCallback.tsx","serviceWorker.ts","components/ServiceWorkerWrapper.tsx","lib/event.ts","lib/note.ts","lib/tabNode.ts","containers/crossnote.ts","lib/editorMode.ts","lib/keymap.ts","components/EmojiWrapper.tsx","containers/global.ts","editor/widgets/audio/index.tsx","editor/widgets/bilibili/index.tsx","utilities/client.ts","utilities/note.ts","editor/widgets/widget/WidgetTopPanel.tsx","i18n/i18n.ts","i18n/lang/enUS.ts","i18n/lang/zhCN.ts","i18n/lang/zhTW.ts","i18n/lang/jaJP.ts","utilities/preview.ts","editor/widgets/comment/CommentMessages.tsx","components/EditImageDialog.tsx","editor/widgets/comment/CommentEditor.tsx","editor/widgets/comment/CommentDialog.tsx","editor/widgets/comment/index.tsx","editor/widgets/github_gist/index.tsx","utilities/image_uploader.ts","editor/widgets/image/index.tsx","editor/widgets/kanban/index.tsx","editor/widgets/ocr/index.tsx","editor/widgets/timer/index.tsx","editor/widgets/video/index.tsx","editor/widgets/youtube/index.tsx","editor/index.ts","themes/theme.ts","themes/dark.ts","themes/light.ts","themes/one-dark.ts","themes/solarized-light.ts","themes/manager.ts","containers/settings.ts","components/AddNotebookDialog.tsx","containers/cloud.ts","components/AuthDialog.tsx","components/LanguageSelectorDialog.tsx","pages/Privacy.tsx","lib/graphView.ts","components/GraphView.tsx","components/Loading.tsx","editor/views/float-win.ts","components/IconPopover.tsx","components/ChangeFilePathDialog.tsx","components/DeleteNoteDialog.tsx","components/NoteAliasPopover.tsx","components/NotePopover.tsx","lib/order.ts","components/NoteCard.tsx","components/Notes.tsx","components/NotesPanel.tsx","components/NotePanel.tsx","editor/views/math-preview.ts","containers/notifications.ts","components/notifications/NotificationAvatarPanel.tsx","components/notifications/CommentWidgetMessagePostingNotification.tsx","components/Notifications.tsx","_git_commit.js","components/Settings.tsx","components/MainPanel.tsx","components/ConfigureNotebookDialog.tsx","components/PushNotebookDialog.tsx","components/NotebookTreeView.tsx","pages/Home.tsx","App.tsx","index.tsx","lib/localFileSystem.ts","lib/fs.ts","utilities/markdown.ts","lib/reference.ts","lib/search.ts","lib/notebook.ts","lib/crossnote.ts","utilities/utils.ts","utilities/image.ts"],"names":["NotificationEventType","WidgetType","NotebookOrderBy","PageInfoFieldsFragmentDoc","gql","CommentWidgetMessageFieldsFragmentDoc","CommentWidgetMessageConnectionFieldsFragmentDoc","CommentWidgetFieldsFragmentDoc","NotebookFieldsFragmentDoc","NotificationFieldsFragmentDoc","ViewerFieldsFragmentDoc","SignUpDocument","SignInDocument","SignUpWithGitHubAccountDocument","SignInWithGitHubAccountDocument","SendEmailVerificationCodeDocument","ResetPasswordDocument","CreateCommentWidgetDocument","PostCommentWidgetMessageDocument","UpdateCommentWidgetMessageDocument","AddReactionToCommentWidgetDocument","RemoveReactionFromCommentWidgetDocument","AddReactionToCommentWidgetMessageDocument","RemoveReactionFromCommentWidgetMessageDocument","SubscribeToCommentWidgetDocument","UnsubscribeFromCommentWidgetDocument","LinkWithGitHubAccountDocument","UnlinkGitHubAccountDocument","DeleteNotificationDocument","DeleteAllNotificationsDocument","SetUserInfoDocument","DeleteWidgetDocument","UpdateWidgetDocument","CommentWidgetDocument","CommentWidgetMessagesDocument","GitHubUserDocument","NotificationsDocument","ViewerDocument","browserHistory","createBrowserHistory","useStyles","makeStyles","theme","createStyles","container","position","width","height","color","palette","text","primary","backgroundColor","background","default","wrapper","maxWidth","margin","transform","top","padding","boxSizing","email","marginBottom","password","errorMessage","card","GitHubOAuthCallback","props","classes","useTranslation","t","i18n","useState","accessToken","setAccessToken","title","setTitle","username","setUsername","setEmail","setErrorMessage","Urql","resLinkWithGitHubAccount","executeLinkWithGitHubAccount","resSignInWithGitHubAccount","executeSignInWithGitHubAccount","resSignUpWithGitHubAccount","executeSignUpWithGitHubAccount","useEffect","code","localStorage","getItem","fetching","error","Noty","type","layout","timeout","show","data","replace","signInWithGitHubAccount","token","user","id","UUIDNil","setItem","window","location","reload","message","trim","signUpWithGitHubAccount","backBtn","IconButton","onClick","Box","className","clsx","Fragment","Typography","variant","style","Card","elevation","TextField","label","value","onChange","event","target","fullWidth","currentTarget","focus","length","Button","disabled","isLocalhost","Boolean","hostname","match","register","config","navigator","URL","process","href","origin","addEventListener","swUrl","fetch","then","response","contentType","headers","get","status","indexOf","serviceWorker","ready","registration","unregister","registerValidSW","catch","console","log","checkValidServiceWorker","onupdatefound","installingWorker","installing","onstatechange","state","controller","onUpdate","onSuccess","EventType","ServiceWorkerWrapper","React","showReload","setShowReload","waitingWorker","setWaitingWorker","onSWUpdate","waiting","reloadPage","useCallback","postMessage","Snackbar","open","anchorOrigin","vertical","horizontal","action","size","globalEmitter","subscriptions","this","eventName","cb","push","eventCallbacks","index","findIndex","x","splice","slice","forEach","callback","offset","getNoteIcon","note","icon","SelectedSectionType","HomeSection","defaultLayoutModel","global","splitterSize","tabSetEnableMaximize","tabSetHeaderHeight","tabSetTabStripHeight","tabEnableRename","borders","weight","children","selected","EditorMode","KeyMap","CrossnoteContainer","createContainer","initialState","crossnote","initialized","setInitialized","notebooks","setNotebooks","isAddingNotebook","setIsAddingNotebook","isPushingNotebook","setIsPushingNotebook","isPullingNotebook","setIsPullingNotebook","isPerformingAutoFetch","setIsPerformingAutoFetch","Unknown","homeSection","setHomeSection","FlexLayout","Model","fromJson","layoutModelString","JSON","parse","_","getlayoutModelFromLocalStrorage","layoutModel","setLayoutModel","getNotebookAtPath","notebookPath","find","dir","addTabNode","tabNode","activeTabset","getActiveTabset","modelChildren","getRoot","getChildren","needsToCreateNewTabSet","child","getType","doAction","Actions","setActiveTabset","getId","TabSetNode","_addChild","singleton","node","getNodeById","selectTab","component","noteFilePath","tabs","i","eTabNode","eNotebookpath","_attributes","eNoteFilePath","updateNodeAttributes","addNode","DockLocation","CENTER","closeTabNode","deleteTab","updateNoteMarkdown","filePath","markdown","a","notebook","getNote","writeNote","newNote","emit","ModifiedMarkdown","tabId","noteConfig","updateNoteConfig","stringify","deleteNote","refreshNotes","includeSubdirectories","DeletedNote","changeNoteFilePath","newFilePath","oldNoteFilePath","ChangedNoteFilePath","newNoteFilePath","Error","createNewNote","fileName","refreshNotesIfNotLoaded","autoGeneratedFileName","key","today","moment","format","untitled","foundToday","count","notes","startsWith","endsWith","path","modifiedAt","Date","createdAt","CreatedNote","openNoteAtPath","name","openTodayNote","getTodayName","duplicateNote","addNotebook","gitURL","gitBranch","gitUsername","gitPassword","gitRememberCredentials","gitCorsProxy","nb","branch","corsProxy","rememberCredentials","openLocalNotebook","showDirectoryPicker","directoryHandle","updateNotebook","deleteNotebook","DeletedNotebook","_id","selectedNotebook","filter","n","refreshNotebook","PerformedGitOperation","hardResetNotebook","localSha","pushNotebook","args","pullNotebook","checkoutNote","isLocal","togglePin","newConfig","Object","assign","pinned","toggleFavorite","favorited","setNoteIcon","addNoteAlias","alias","aliases","newAliases","concat","search","addAlias","deleteNoteAlias","deleteAlias","getStatus","saveCurrentLayoutModel","toJson","removeNodeID","splitNoteHorizontally","newTabNode","BOTTOM","splitNoteVertically","RIGHT","listNotebooks","selectedNotebookID","pfs","writeFile","useInterval","autoFetchPeriod","now","fetchedAt","getTime","remoteSha","fetchNotebook","EmojiBackgroundImageFn","set","sheetSize","Emoji","emoji","backgroundImageFn","EmojiPicker","showSkinTones","onSelect","globalContainers","cloudContainer","settingsContainer","crossnoteContainer","spacing","actionButtons","right","section","marginTop","cursor","AudioWidget","attributes","source","setSource","autoplay","setAutoplay","controls","setControls","loop","setLoop","muted","setMuted","autoPlay","src","isPreview","Tooltip","removeSelf","Input","placeholder","onKeyDown","which","attrs","setAttributes","FormControlLabel","control","Switch","checked","videoWrapper","paddingTop","video","border","left","BilibiliWidget","url","setURL","setError","scrolling","frameBorder","allowFullScreen","aid","bvid","GraphQLClient","createClient","getGraphQLEndpoint","exchanges","defaultExchanges","fetchOptions","cache","Authorization","getMentionsFromMarkdown","map","toLocaleLowerCase","self","username2","images","contentString","titleMatch","aheadString","coverMatch","coverImagesMatch","mdImage","image","m","summary","split","join","tags","html","EmptyPageInfo","hasPreviousPage","hasNextPage","startCursor","endCursor","EchoMD","require","topPanel","display","flexDirection","alignItems","avatar","borderRadius","widgetTitle","marginLeft","widgetSourceLink","editorWrapper","textarea","preview","WidgetTopPanel","widget","previewElement","setPreviewElement","textAreaElement","setTextAreaElement","editor","setEditor","editorDialogOpen","setEditDialogOpen","resDeleteWidget","executeDeleteWidgetMutation","executeUpdateWidgetMutation","forceUpdate","setForceUpdate","widgetSource","setWidgetSource","deleteWidget","updateWidget","description","getValue","closeEditDialog","err","renderPreview","fromTextArea","mode","hashtag","keyMap","showCursorWhenSelecting","inputStyle","setValue","setOption","setTheme","themeName","whiteSpace","ref","element","Link","preventDefault","owner","Avatar","Identicon","sha256","toString","canConfigure","Dialog","onClose","DialogContent","minWidth","DialogActions","i18next","use","initReactI18next","init","interpolation","escapeValue","keySeparator","lng","fallbackLng","resources","translation","languageCodeToDateFNSLocale","zhCN","enUS","zhTW","ja","openURL","decodeURIComponent","postprocessPreview","isPresentationCallback","handleLinksClickEvent","links","getElementsByTagName","link","onclick","hasAttribute","tag","getAttribute","resolveImages","imageSrc","resolveNoteImageSrc","setAttribute","childElementCount","tagName","toUpperCase","overflow","contentDocument","body","chatMessage","avatarPanel","gridTemplateAreas","justifyContent","gridColumnGap","gridArea","time","reactions","singleTime","modifiedCaption","reactionChip","actionBtnClass","CommentMessage","previousMessage","anchorEl","setAnchorEl","emojiPickerOpen","setEmojiPickerOpen","resAddReactionToCommentWidgetMessage","executeAddReactionToCommentWidgetMessageMutation","resRemoveReactionFromCommentWidgetMessage","executeRemoveReactionFromCommentWidgetMessageMutation","handleClose","openPopper","modified","updatedAt","updateReactionSummaries","reaction","found","reactionSummaries","selfAuthored","author","formatRelative","locale","language","sort","y","weightX","weightY","reactionSummary","Chip","marginRight","loggedIn","messageID","setAuthDialogOpen","Popover","transformOrigin","mentionUser","viewer","onModifyChatMessage","colons","imageWrapper","textAlign","imagePreview","maxHeight","EditImageDialog","marker","imageElement","setImageSrc","imageAlt","setImageAlt","imageTitle","setImageTitle","finalImageSrc","setFinalImageSrc","deleteImage","pos","replaceRange","from","to","updateImage","alt","zIndex","DialogTitle","autoFocus","helperText","root","bottom","toolbar","darken","paper","toolbarLeft","sendButton","CommentEditor","editImageElement","setEditImageElement","editImageTextMarker","setEditImageTextMarker","editImageDialogOpen","setEditImageDialogOpen","linkIconClickedHandler","on","imageClickedHandler","loadImage","off","updateMessageID","updateMessageMarkdown","cancelUpdatingMessage","updateMessage","updatingMessage","sendMessage","sendingMessage","topBar","row","commentWrapper","messages","CommentDialog","useTheme","fullScreen","useMediaQuery","breakpoints","down","commentWidget","instance","edges","edge","setMessages","messagesElement","setMessagesElement","pageInfo","latestPulledMessagePageInfo","setLatestPulledMessagePageInfo","setUpdateMessageID","options","query","useCommentWidgetMessagesQuery","variables","widgetID","before","after","first","last","requestPolicy","pause","resMessagesAfter","executeMessagesAfterQuery","resPostMessage","executePostMessageMutation","resUpdateMessage","executeUpdateMessageMutation","resSubscribeToCommentWidget","executeSubscribeToCommentWidgetMutation","resUnsubscribeFromCommentWidget","executeUnsubscribeFromCommentWidgetMutation","replaceSelection","subscribeToChatGroup","subscribed","unsubscribeFromChatGroup","notifyUsers","addMessage","xC","yC","scrollMessagesToBottom","scrollTop","scrollHeight","fetchPreviousMessages","postCommentWidgetMessage","updateCommentWidgetMessage","connection","paddingBottom","commentMessage","paddingLeft","paddingRight","interactionPanel","button","CommentWidget","commentDialogOpen","setCommentDialogOpen","resCreateCommentWidget","executeCreateCommentWidgetMutation","useCommentWidgetQuery","resCommentWidget","executeCommentWidgetQuery","executeAddReactionToCommentWidgetMutation","executeRemoveReactionFromCommentWidgetMutation","setCommentWidget","reactionsCount","createWidget","getHeaderFromMarkdown","getOption","encodeURIComponent","messagesCount","Badge","actionButtonsGroup","GitHubGistWidget","setGistURL","host","pathname","onKeyUp","smmsUploadImages","files","promises","file","Promise","resolve","reject","FormData","append","method","referrer","json","all","dropArea","ImageWidget","imageUploaderElement","setImageUploaderElement","uploadingImages","setUploadingImages","replaceSelf","e","stopPropagation","onchange","urls","click","multiple","columnHeader","kanbanCard","KanbanColumnHeaderDisplay","column","board","refreshBoard","clickedTitle","setClickedTitle","titleValue","setTitleValue","onBlur","cards","columns","l","KanbanCardDisplay","setDescription","c","KanbanWidget","setBoard","lanes","newBoard","renderColumnHeader","renderCard","dragging","allowAddColumn","allowAddCard","renderColumnAdder","wip","onNewColumnConfirm","newColumn","disableCardDrag","disableColumnDrag","onCardDragEnd","destination","fromPosition","fromColumnId","toPosition","toColumnId","fromColumn","toColumn","onColumnDragEnd","b","canvasWrapper","canvas","OCRWidget","setCanvas","setLink","imageDataURL","setImageDataURL","ocrDataURL","setOCRDataURL","imageDropAreaElement","setImageDropAreaElement","isProcessing","setIsProcessing","ocrProgresses","setOCRProgresses","getInitialLanguages","selectedLanguages","setSelectedLanguages","grayscaleChecked","setGrayscaleChecked","toggleLanguage","lang","imageObject","Image","context","getContext","onload","clearRect","fillStyle","fillRect","globalCompositeOperation","drawImage","toDataURL","onerror","List","ListItem","ListItemText","ListItemSecondaryAction","Math","floor","progress","FormGroup","Checkbox","removeItem","ButtonGroup","input","worker","createWorker","logger","languagesArr","load","loadLanguage","initialize","recognize","terminate","ocr","startOCRFromLink","reader","FileReader","readAsDataURL","result","Timer","secondary","main","contrastText","boxShadow","toLocaleString","VideoWidget","poster","setPoster","YoutubeWidget","videoID","registerWidgetCreator","el","document","createElement","ReactDOM","render","ThemeProvider","muiTheme","ErrorWidget","EchoMDVersion","dependencies","hypermdKeyMap","oldTwemojiParse","twemoji","what","emojiElements","querySelectorAll","emojiElement","newElement","replaceWith","emojiCodePointToShortNameMap","emojiDefinitions","shortName","emojis","emojiData","has_img_twitter","nonQualified","non_qualified","unified","convert","fromCodePoint","enableEmoji","EmojiData","setTwemojiOptions","folder","ext","codePoint","attr","attrRegExp","exec","attrName","attrValue","CrossnoteTheme","muiThemeOptions","createMuiTheme","DarkTheme","common","black","white","lighten","light","dark","active","LightTheme","blue","orange","OneDarkTheme","indigo","blueGrey","SolarizedLight","amber","EchoMDSetTheme","baseUri","_themeManager","themes","selectedTheme","selectTheme","addTheme","themeManager","SettingsContainer","v","setLanguage","editorCursorColor","setEditorCursorColor","Preview","defaultEditorMode","setDefaultEditorMode","authorName","setAuthorName","authorEmail","setAuthorEmail","getTheme","SUBLIME","VIM","EMACS","DEFAULT","setKeyMap","_setLanguage","changeLanguage","_setEditorCursorColor","_setDefaultEditorMode","editorMode","_setAuthorName","_setAuthorEmail","_setTheme","_setKeyMap","AddNotebookDialog","useContainer","notebookName","setNotebookName","expanded","setExpanded","setGitURL","setGitBranch","setGitUsername","setGitPassword","setGitCorsProxy","rememberCredentialsChecked","setRememberCredentialsChecked","showUsername","setShowUsername","showPassword","setShowPassword","close","lastIndexOf","hideOpeningLocal","startIcon","Divider","Accordion","AccordionSummary","expandIcon","AccordionDetails","InputProps","endAdornment","InputAdornment","aria-label","canCancel","Stage","CloudContainer","authDialogOpen","setLoggedIn","setViewer","useViewerQuery","resViewer","executeViewerQuery","resSetUserInfo","executeSetUserInfoMutation","setSelectedNotebook","displayNotebookPreview","setDisplayNotebookPreview","refetchViewer","pollInterval","setUserInfo","cover","bio","reduceNotificationsCountByOne","notifications","totalCount","max","clearNotificationsCount","logout","form","header","authBtn","switchLink","AuthDialog","Signin","stage","setStage","setPassword","passwordConfirmation","setPasswordConfirmation","verificationCode","setVerificationCode","resSignIn","executeSignInMutation","resSignUp","executeSignUpMutation","resSendEmailVerificationCode","executeSendEmailVerificationCodeMutation","resResetPassword","executeResetPasswordMutation","signin","signup","sendEmailVerificationCode","resetPassword","signIn","signUp","setTimeout","Signup","ForgotPassword","startGitHubOAuth","LanguageSelectorDialog","languages","setOpen","titleLanguage","setTitleLanguage","chooseLanguage","fontSize","PrivacyPolicy","Hidden","smUp","implementation","toggleDrawer","constructGraphView","nodes","addedNodes","lastIndex","basename","referenceMap","referredByFilePath","hash","defaultFillColor","graphViewPanel","graphView","pointerEvents","bottomPanel","getContrastText","wordBreak","GraphView","graphViewData","setGraphViewData","useRef","hoveredGraphViewNode","setHoveredGraphViewNode","focusedNoteFilePath","setFocusedNoteFilePath","tabNodeVisible","setTabNodeVisible","isMounted","graphLayout","setGraphLayout","svg","setSVG","setContainer","setNode","setText","neigh","n1","n2","hasRelation","removeArrows","selectAll","remove","drawArrowPath","d","arrow","enter","repeat","transition","duration","ease","d3","o","unfocus","current","resize","offsetWidth","offsetHeight","selectChild","force","strength","debouncedResize","debounce","setEventListener","removeEventListener","tabNodeConfig","getConfig","isVisible","params","visible","refreshGraphViewData","newGraphViewData","modifiedMarkdownCallback","createdNoteCallback","deletedNoteCallback","changedNoteFilePathCallback","performedGitOperationCallback","deletedNotebookCallback","focusedOnNoteCallback","FocusedOnNote","scaleExtent","zoomHandler","fixna","isFinite","updateLink","updateNode","distance","call","sourceEvent","alphaTarget","restart","raise","drag","Loading","CircularProgress","FloatWin","win","closeBtn","titlebar","querySelector","boxX","boxY","mouseX","mouseY","offsetX","offsetY","hide","ev","keyCode","offsetLeft","offsetTop","getMouseXY","move","up","test","documentElement","clientWidth","clientHeight","min","pageX","pageY","clientX","scrollLeft","clientLeft","clientY","clientTop","moveToCenter","moveTo","innerWidth","innerHeight","s","secondaryColor","IconPopover","anchorElement","keepMounted","ChangeFilePathDialog","inputEl","setInputEl","setNewFilePath","changeFilePath","setSelectionRange","start","end","inputRef","DeleteNoteDialog","DialogContentText","menuItemOverride","menuItemTextField","NoteAliasPopover","setAlias","NotePopover","deleteNoteDialogOpen","setDeleteNoteDialogOpen","changeNoteFilePathDialogOpen","setChangeNoteFilePathDialogOpen","needsToPrint","setNeedsToPrint","shareAnchorEl","setShareAnchorEl","noteAliasAnchorEl","setNoteAliasAnchorEl","setAliases","tempPreviewElement","classList","add","appendChild","bannerElement","innerHTML","currentTheme","printDone","previewIsPresentation","EchoMDPrintPreview","printPreview","ListItemIcon","copyToClipboard","OrderBy","OrderDirection","noteCard","borderLeft","unselected","leftPanel","rightPanel","borderBottom","divider","imagesWrapper","backgroundSize","backgroundPosition","pin","markdownPreview","NoteCard","setHeader","setSummary","setImages","gitStatus","setGitStatus","popoverElement","setPopoverElement","setNote","references","setReferences","formatDistanceStrict","openNote","referredNote","getReferences","generateSummaryFromMarkdown","imageSrcs","fontWeight","backgroundImage","reference","parentToken","content","notesList","updatePanel","Notes","setNotes","hack","scrollElement","initialHeight","initialFlex","flex","newNotes","searchValue","unpinned","regexp","RegExp","mergedNotes","some","mergedNote","notesComponent","useMemo","Skeleton","animation","once","scrollContainer","keys","hasLoadedNotes","notesPanel","fixedTopPanel","sectionName","shape","fade","searchIcon","inputRoot","inputInput","transitions","create","loading","sortSelected","NotesPanel","sortMenuAnchorEl","setSortMenuAnchorEl","isCreatingNote","setIsCreatingNote","ModifiedAt","orderBy","setOrderBy","DESC","orderDirection","setOrderDirection","rawNotesMap","setRawNotesMap","needsToRefreshRawNotes","setNeedsToRefreshRawNotes","initialSearchValue","setSearchValue","searchValueInputTimeout","setSearchValueInputTimeout","finalSearchValue","setFinalSearchValue","setFixedTopPanel","onChangeSearchValue","clearTimeout","refreshRawNotes","getReferredByNotes","values","CreatedAt","Title","localeCompare","containerElement","parentElement","scrollEvent","rootComponent","InputBase","inputProps","autoComplete","autoCorrect","ASC","tocPanelWidth","parseInt","HMDFold","math","codeMirrorSelectCss","notePanel","warning","contentPanel","editorContentPanel","tocPanel","toc","hint","tocButtonGroup","previewZIndex","presentation","controlBtn","controlBtnSelected","controlBtnSelectedSecondary","floatWin","floatWinHidden","floatWinTitle","floatWinContent","floatWinClose","cursorPositionInfo","NotePanel","noteTitle","setNoteTitle","noteIcon","setEditorMode","tocElement","setPreviewIsPresentation","line","ch","cursorPosition","setCursorPosition","mathPreviewElement","notePopoverElement","setNotePopoverElement","iconPopoverElement","setIconPopoverElement","tocEnabled","setTocEnabled","confirmNoteTitle","finalNoteTitle","previewPostprocessPreview","flag","renameTab","updateNoteIcon","hmdFold","hmdClick","info","cm","ctrlKey","altKey","getCursor","getRect","winElement","mathRenderer","supressed","onPreview","expr","hmd","FoldMath","createRenderer","getElementById","onChanged","cursorPos","charCoords","isReady","startRender","onPreviewEnd","initMathPreview","innerText","highlightedElements","elementId","scrollIntoView","behavior","block","inline","removeHighlightClass","previewElementCurrent","lineNo","setCursor","lastLine","switchToHyperMD","getWrapperElement","refresh","SourceCode","switchToNormal","changesHandler","onChangeHandler","changeObject","getLine","showHint","closeOnUnfocus","completeSingle","getTokenAt","lineStr","currentWord","cur","iconWrapper","iconElement","descriptionElement","commandElement","command","commands","date","filtered","item","toLowerCase","list","doubleSemiColon","shortNameWrapper","EmojiDefinitions","renderTwemoji","displayText","fuzzy","fields","searchResult","val","aheadStr","withinWikiLink","searchResults","filtPath","terms","lastTOC","update","newTOC","eachLine","tmp","getStateAfter","level","$0","$1","tocClick","anchor","tocElementCurrent","defaultSize","minSize","maxSize","pane1Style","resizerStyle","pane2Style","onDragFinished","newSize","NotificationsContainer","setPageInfo","setNotifications","needsRefetch","setNeedsRefetch","useNotificationsQuery","resNotifications","executeNotificationsQuery","resDeleteNotification","executeDeleteNotificationMutation","resDeleteAllNotifications","executeDeleteAllNotificationsMutation","fetchMoreNotifications","deleteNotification","notificationID","notification","deleteAllNotifications","ns","newNotifications","reverse","NotificationAvatarPanel","flexWrap","CommentWidgetMessagePostingNotification","notificationsCard","Notifications","notificationsContainer","dense","idx","notificationComponent","CommentWidgetMessagePosting","settingsPanel","settingsCard","loggedInSection","saveBtn","logoutBtn","swatch","editorText","editorCursor","borderLeftStyle","borderLeftWidth","getRGBA","inputStr","r","g","Settings","colorPickerAnchorElement","setColorPickerAnchorElement","displayColorPicker","setAvatar","uploadingAvatar","setUploadingAvatar","useGitHubUserQuery","resGitHubUser","resUnlinkGitHubAccount","executeUnlinkGitHubAccount","widgetsCount","InputLabelProps","shrink","githubUser","login","onDelete","Select","MenuItem","borderLeftColor","cursorColor","rgb","GitCommit","mainPanel","borderColor","MainPanel","dialogOpen","setDialogOpen","setReady","factory","getComponent","renderElement","closeDialog","hasLocalDirectory","children2","j","isPathOfLocalFileSystem","Layout","model","onModelChange","iconFactory","ConfigureNotebookDialog","setAutoFetchPeriod","clickDeleteCount","setClickDeleteCount","clickHardResetCount","setClickHardResetCount","parseFloat","isNaN","textField","PushNotebookDialog","commitMessage","setCommitMessage","onAuthFailure","treeItemRoot","treeItemContent","typography","fontWeightMedium","fontWeightRegular","treeItemGroup","treeItemExpanded","treeItemLabel","treeItemLabelRoot","treeItemLabelIcon","treeItemLabelText","flexGrow","emojiIcon","NotebookTreeView","notebookConfigurationDialogOpen","setNotebookConfigurationDialogOpen","pushNotebookDialogOpen","setPushNotebookDialogOpen","favoritedNotes","setFavoritedNotes","refreshQuickAccessNotes","handleChange","isFavorited","oNote","nNote","Notebooks","TreeView","defaultExpandIcon","disableFocusRipple","disableRipple","defaultCollapseIcon","defaultEndIcon","onNodeToggle","TreeItem","nodeId","group","role","onCloseDrawer","getReferredByNotesCount","page","appBar","drawer","toolBar","displayNone","flexShrink","drawerPaper","notebooksSection","overflowY","controllersSection","listItemIcon","selectedSection","menuButton","editorPanel","toolBarSpace","mixins","fab","Home","addNotebookDialogOpen","setAddNotebookDialogOpen","addNotebookRepo","setAddNotebookRepo","addNotebookBranch","setAddNotebookBranch","addNotebookDialogHideOpeningLocal","setAddNotebookDialogHideOpeningLocal","drawerOpen","setDrawerOpen","queryParams","repo","disablePadding","disableGutters","badgeContent","CssBaseline","Drawer","ModalProps","xsDown","Fab","is","App","handler","prompt","userChoice","choiceResult","history","exact","qs","safari","copyTitle","copyBody","copyShareButtonLabel","copyAddHomeButtonLabel","copyClosePrompt","Crossnote","Provider","verifyPermission","fileHandle","queryPermission","requestPermission","LocalFileSystem","directoryHandleMap","_prefix","mkdirp","mkdir","rootDir","randomID","pathArr","opts","encoding","helper","getDirectoryHandle","getFileHandle","getFile","Uint8Array","arrayBuffer","createWritable","writable","write","names","entry","removeEntry","recursive","fHandle","dHandle","lastModified","stats","isDirectory","isFile","ctimeMs","mtimeMs","oldPath","newPath","readFile","unlink","FileSystem","fs","lfs","readdir","exists","rename","rmdir","setUpFSMethods","attachLocalDirectory","stat","oldPathStat","newPathStat","dirPath","LightningFS","matter","endFrontMatterOffset","frontMatter","frontMatterString","matterStringify","yamlStr","ReferenceMap","referredByNoteFilePath","mentionedBys","filePath1","filePath2","Search","miniSearch","_cache","MiniSearch","storeFields","extractField","fieldName","tokenize","string","uslug","searchDoc","doc","queryString","formatNoteConfig","newObject","Notebook","refreshNotesIfNotLoadedMutex","Mutex","noteHasReferences","rFilePath","tokens","md","resolveLink","traverse","results","arr","attrGet","decodeURI","mentions","deleteReferences","addReference","oldFilePath","removeNoteRelations","newDirPath","git","filepath","filepaths","refreshNoteRelations","absFilePath","oldMentions","oldNote","processNoteMentionsAndMentionedBy","runExclusive","refreshRelations","initSearch","refreshNotesPromises","oMarkdown","convertNotebookToNotebookDBEntry","notebookDB","PouchDB","plugin","PouchdbFind","createIndex","depth","cloneNotebook","put","http","singleBranch","onAuth","auth","getGitSHA","sha","getDefaultNotebookNameFromGitURL","notebookID","oldDirName","newDirName","dirName","createCache","stagedFiles","onProgress","onMessage","onAuthSuccess","numConflicts","restoreSHA","pushResult","ok","logs","oid","dirname","markdownHasConflicts","generateChangesCache","fetchHead","restoreFilesFromCache","LINEBREAKS","markerSize","ourName","theirName","ourContent","baseContent","theirContent","baseContentBlobResult","Buffer","blob","theirContentBlobTresult","ours","base","theirs","diff3Merge","mergedText","hasConflict","conflict","m1","m2","m3","selector","$gt","notebookEntries","docs","pendingPull","clipboardData","setData","queryCommandSupported","textContent","select","execCommand","ex","warn","removeChild","reduce","charCodeAt","abs","hashCode","random","substr","momentFormat","loadImageAsBase64","imageFilePath","base64","buffer","imageType"],"mappings":"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","file":"static/js/main.364eb3e9.chunk.js","sourcesContent":["import gql from \"graphql-tag\";\nimport * as React from \"react\";\nimport * as Urql from \"urql\";\nexport type Maybe<T> = T | null;\nexport type Omit<T, K extends keyof T> = Pick<T, Exclude<keyof T, K>>;\n/** All built-in and custom scalars, mapped to their actual values */\nexport interface Scalars {\n  ID: string;\n  String: string;\n  Boolean: boolean;\n  Int: number;\n  Float: number;\n  Time: any;\n  UUID: any;\n  Upload: any;\n}\n\nexport interface NotificationEventCommentWidgetMessagePosting\n  extends NotificationEvent {\n  __typename?: \"NotificationEventCommentWidgetMessagePosting\";\n  type: NotificationEventType;\n  message: CommentWidgetMessage;\n}\n\nexport interface LinkWithGitHubAccount {\n  code: Scalars[\"String\"];\n}\n\nexport interface GitHubUser {\n  __typename?: \"GitHubUser\";\n  login: Scalars[\"String\"];\n  avatar: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n}\n\nexport interface WidgetInstance {\n  type: WidgetType;\n}\n\nexport interface AuthReturn {\n  __typename?: \"AuthReturn\";\n  /** JSON Web Token */\n  token: Scalars[\"String\"];\n  /** User */\n  user: User;\n}\n\nexport interface SendEmailVerificationCode {\n  email: Scalars[\"String\"];\n}\n\nexport interface UnsubscribeFromCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n}\n\nexport interface NotificationEvent {\n  type: NotificationEventType;\n}\n\nexport interface Widget {\n  __typename?: \"Widget\";\n  id: Scalars[\"UUID\"];\n  instance: WidgetInstance;\n  owner: User;\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n  canConfigure: Scalars[\"Boolean\"];\n}\n\nexport interface NotificationConnection {\n  __typename?: \"NotificationConnection\";\n  totalCount: Scalars[\"Int\"];\n  pageInfo: PageInfo;\n  edges: Array<NotificationEdge>;\n}\n\nexport interface ResetPassword {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n}\n\nexport interface UpdateCommentWidgetMessage {\n  messageID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n}\n\nexport interface StarNotebook {\n  notebookID: Scalars[\"UUID\"];\n}\n\nexport enum NotificationEventType {\n  UserFollowing = \"USER_FOLLOWING\",\n  CommentWidgetMessagePosting = \"COMMENT_WIDGET_MESSAGE_POSTING\",\n}\n\nexport interface UserWidget {\n  __typename?: \"UserWidget\";\n  type: WidgetType;\n  count: Scalars[\"Int\"];\n}\n\nexport interface SignUpWithGitHubAccount {\n  username: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n  accessToken: Scalars[\"String\"];\n}\n\nexport interface Query {\n  __typename?: \"Query\";\n  test: Scalars[\"String\"];\n  widget: Widget;\n  notebooks: Array<Notebook>;\n  viewer: User;\n  user: User;\n  stats: Stats;\n}\n\nexport interface QueryWidgetArgs {\n  id: Scalars[\"UUID\"];\n}\n\nexport interface QueryNotebooksArgs {\n  orderBy?: Maybe<NotebookOrderBy>;\n  query?: Maybe<Scalars[\"String\"]>;\n  page?: Maybe<Scalars[\"Int\"]>;\n  perPage?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface QueryUserArgs {\n  id?: Maybe<Scalars[\"UUID\"]>;\n  username?: Maybe<Scalars[\"String\"]>;\n}\n\nexport enum WidgetType {\n  Comment = \"COMMENT\",\n}\n\nexport interface PublishNotebook {\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n}\n\nexport interface PageInfo {\n  __typename?: \"PageInfo\";\n  startCursor: Scalars[\"UUID\"];\n  endCursor: Scalars[\"UUID\"];\n  hasPreviousPage: Scalars[\"Boolean\"];\n  hasNextPage: Scalars[\"Boolean\"];\n}\n\nexport interface WidgetConnection {\n  __typename?: \"WidgetConnection\";\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars[\"Int\"];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<WidgetEdge>;\n}\n\nexport interface CommentWidgetMessageReaction {\n  __typename?: \"CommentWidgetMessageReaction\";\n  message: CommentWidgetMessage;\n  user: User;\n  reaction: Scalars[\"String\"];\n}\n\nexport interface CommentWidgetMessage {\n  __typename?: \"CommentWidgetMessage\";\n  /** Comment message ID */\n  id: Scalars[\"UUID\"];\n  /** The comment widget that this comment belongs to */\n  widget: Widget;\n  /** Author of this comment message */\n  author: User;\n  /** Comment message (markdown content) */\n  markdown: Scalars[\"String\"];\n  /** Created At */\n  createdAt: Scalars[\"Time\"];\n  /** updatedAt at */\n  updatedAt: Scalars[\"Time\"];\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\nexport interface CommentWidgetMessageReactionSummariesArgs {\n  size?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface Notification {\n  __typename?: \"Notification\";\n  id: Scalars[\"UUID\"];\n  createdAt: Scalars[\"Time\"];\n  event: NotificationEvent;\n  meta: Scalars[\"String\"];\n  receiver: User;\n  origin: User;\n}\n\nexport interface SetUserInfo {\n  name: Scalars[\"String\"];\n  avatar: Scalars[\"String\"];\n  cover: Scalars[\"String\"];\n  bio: Scalars[\"String\"];\n  location: Scalars[\"String\"];\n  language: Scalars[\"String\"];\n  editorCursorColor: Scalars[\"String\"];\n}\n\nexport interface FollowUser {\n  userID: Scalars[\"UUID\"];\n}\n\nexport interface SignInWithGitHubAccount {\n  code: Scalars[\"String\"];\n}\n\nexport interface UpdateNotebook {\n  notebookID: Scalars[\"UUID\"];\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n}\n\nexport interface NotificationEventUserFollowing extends NotificationEvent {\n  __typename?: \"NotificationEventUserFollowing\";\n  type: NotificationEventType;\n}\n\nexport interface NotificationEdge {\n  __typename?: \"NotificationEdge\";\n  cursor: Scalars[\"UUID\"];\n  node: Notification;\n}\n\nexport interface Stats {\n  __typename?: \"Stats\";\n  numUsers: Scalars[\"Int\"];\n  numNotebooks: Scalars[\"Int\"];\n}\n\nexport enum NotebookOrderBy {\n  TotalStarsCount = \"TOTAL_STARS_COUNT\",\n  DailyStarsCount = \"DAILY_STARS_COUNT\",\n  WeeklyStarsCount = \"WEEKLY_STARS_COUNT\",\n  MonthlyStarsCount = \"MONTHLY_STARS_COUNT\",\n}\n\nexport interface CommentWidgetMessageEdge {\n  __typename?: \"CommentWidgetMessageEdge\";\n  /** A cursor for use in pagination. */\n  cursor: Scalars[\"UUID\"];\n  /** The item at the end of the edge. */\n  node: CommentWidgetMessage;\n}\n\nexport interface CommentWidgetMessageConnection {\n  __typename?: \"CommentWidgetMessageConnection\";\n  /** Identifies the total count of items in the connection. */\n  totalCount: Scalars[\"Int\"];\n  /** Information to aid in pagination. */\n  pageInfo: PageInfo;\n  /** A list of edges. */\n  edges: Array<CommentWidgetMessageEdge>;\n}\n\nexport interface AddReactionToCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface NotebookConnection {\n  __typename?: \"NotebookConnection\";\n  totalCount: Scalars[\"Int\"];\n  pageInfo: PageInfo;\n  edges: Array<NotebookEdge>;\n}\n\nexport interface DeleteNotification {\n  notificationID: Scalars[\"UUID\"];\n}\n\nexport interface ReactionSummary {\n  __typename?: \"ReactionSummary\";\n  count: Scalars[\"Int\"];\n  reaction: Scalars[\"String\"];\n  selfAuthored: Scalars[\"Boolean\"];\n}\n\nexport interface CommentWidget {\n  __typename?: \"CommentWidget\";\n  /** Widget ID */\n  id: Scalars[\"UUID\"];\n  /** Widget creation time */\n  createdAt: Scalars[\"Time\"];\n  /** Widget update time */\n  updatedAt: Scalars[\"Time\"];\n  /** Count of messages in this comment widget */\n  messagesCount: Scalars[\"Int\"];\n  /** Count of reactions in this comment widget */\n  reactionsCount: Scalars[\"Int\"];\n  /** Check if the viewer subscribed to the comment widget */\n  subscribed: Scalars[\"Boolean\"];\n  /** Comment messages */\n  messages: CommentWidgetMessageConnection;\n  /** Reaction summaries */\n  reactionSummaries: Array<ReactionSummary>;\n}\n\nexport interface CommentWidgetMessagesArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface CommentWidgetReactionSummariesArgs {\n  size?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface SignInInput {\n  /** Email */\n  email: Scalars[\"String\"];\n  /** Password */\n  password: Scalars[\"String\"];\n}\n\nexport interface PostCommentWidgetMessage {\n  widgetID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n  notifyUsers: Array<Maybe<Scalars[\"String\"]>>;\n}\n\nexport interface NotebookEdge {\n  __typename?: \"NotebookEdge\";\n  cursor: Scalars[\"UUID\"];\n  node: Notebook;\n}\n\nexport interface UpdateWidget {\n  id: Scalars[\"UUID\"];\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n}\n\nexport interface SignUpInput {\n  /** Username */\n  username: Scalars[\"String\"];\n  /** Email */\n  email: Scalars[\"String\"];\n  /** Password */\n  password: Scalars[\"String\"];\n}\n\nexport interface RemoveReactionFromCommentWidgetMessage {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface UnpublishNotebook {\n  notebookID: Scalars[\"UUID\"];\n}\n\nexport interface CommentWidgetInstance extends WidgetInstance {\n  __typename?: \"CommentWidgetInstance\";\n  type: WidgetType;\n  commentWidget: CommentWidget;\n}\n\nexport interface WidgetEdge {\n  __typename?: \"WidgetEdge\";\n  /** A cursor for use in pagination. */\n  cursor: Scalars[\"UUID\"];\n  /** The item at the end of the edge. */\n  node: Widget;\n}\n\nexport interface CommentWidgetReaction {\n  __typename?: \"CommentWidgetReaction\";\n  widget: Widget;\n  user: User;\n  reaction: Scalars[\"String\"];\n}\n\nexport interface Notebook {\n  __typename?: \"Notebook\";\n  id: Scalars[\"UUID\"];\n  createdAt: Scalars[\"Time\"];\n  updatedAt: Scalars[\"Time\"];\n  owner: User;\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n  markdown: Scalars[\"String\"];\n  starsCount: Scalars[\"Int\"];\n  dailyStarsCount: Maybe<Scalars[\"Int\"]>;\n  weeklyStarsCount: Maybe<Scalars[\"Int\"]>;\n  monthlyStarsCount: Maybe<Scalars[\"Int\"]>;\n  isStarred: Scalars[\"Boolean\"];\n}\n\nexport interface VerifyEmail {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n}\n\nexport interface User {\n  __typename?: \"User\";\n  id: Scalars[\"UUID\"];\n  name: Maybe<Scalars[\"String\"]>;\n  username: Maybe<Scalars[\"String\"]>;\n  email: Maybe<Scalars[\"String\"]>;\n  verifiedEmail: Maybe<Scalars[\"String\"]>;\n  avatar: Maybe<Scalars[\"String\"]>;\n  cover: Maybe<Scalars[\"String\"]>;\n  bio: Maybe<Scalars[\"String\"]>;\n  location: Maybe<Scalars[\"String\"]>;\n  language: Maybe<Scalars[\"String\"]>;\n  createdAt: Maybe<Scalars[\"Time\"]>;\n  updatedAt: Maybe<Scalars[\"Time\"]>;\n  deletedAt: Maybe<Scalars[\"Time\"]>;\n  followingsCount: Maybe<Scalars[\"Int\"]>;\n  followersCount: Maybe<Scalars[\"Int\"]>;\n  widgetsCount: Maybe<Scalars[\"Int\"]>;\n  notebooksCount: Maybe<Scalars[\"Int\"]>;\n  starredNotebooksCount: Maybe<Scalars[\"Int\"]>;\n  isFollowing: Maybe<Scalars[\"Boolean\"]>;\n  areFriends: Maybe<Scalars[\"Boolean\"]>;\n  followings: Maybe<Array<User>>;\n  followers: Maybe<Array<User>>;\n  widgetSummaries: Array<UserWidget>;\n  widgets: WidgetConnection;\n  notifications: NotificationConnection;\n  /** Get user owned notebooks */\n  notebooks: NotebookConnection;\n  /** Get user starred notebooks */\n  starredNotebooks: NotebookConnection;\n  editorCursorColor: Maybe<Scalars[\"String\"]>;\n  githubUser: Maybe<GitHubUser>;\n}\n\nexport interface UserWidgetsArgs {\n  type: WidgetType;\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface UserNotificationsArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface UserNotebooksArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface UserStarredNotebooksArgs {\n  before?: Maybe<Scalars[\"UUID\"]>;\n  after?: Maybe<Scalars[\"UUID\"]>;\n  first?: Maybe<Scalars[\"Int\"]>;\n  last?: Maybe<Scalars[\"Int\"]>;\n}\n\nexport interface CreateWidget {\n  type: WidgetType;\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n}\n\nexport interface DeleteWidget {\n  id: Scalars[\"UUID\"];\n}\n\nexport interface RemoveReactionFromCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface AddReactionToCommentWidgetMessage {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n}\n\nexport interface SubscribeToCommentWidget {\n  widgetID: Scalars[\"UUID\"];\n}\n\nexport interface Mutation {\n  __typename?: \"Mutation\";\n  signUp: AuthReturn;\n  signIn: AuthReturn;\n  signUpWithGitHubAccount: AuthReturn;\n  signInWithGitHubAccount: AuthReturn;\n  deleteNotification: Scalars[\"Boolean\"];\n  deleteAllNotifications: Scalars[\"Boolean\"];\n  setUserInfo: User;\n  followUser: Scalars[\"Boolean\"];\n  unfollowUser: Scalars[\"Boolean\"];\n  sendEmailVerificationCode: Scalars[\"Boolean\"];\n  resetPassword: Scalars[\"Boolean\"];\n  verifyEmail: Scalars[\"Boolean\"];\n  linkWithGitHubAccount: Scalars[\"Boolean\"];\n  unlinkGitHubAccount: Scalars[\"Boolean\"];\n  publishNotebook: Notebook;\n  unpublishNotebook: Scalars[\"Boolean\"];\n  updateNotebook: Notebook;\n  starNotebook: Scalars[\"Boolean\"];\n  unstarNotebook: Scalars[\"Boolean\"];\n  createWidget: Widget;\n  updateWidget: Scalars[\"Boolean\"];\n  deleteWidget: Scalars[\"Boolean\"];\n  postCommentWidgetMessage: CommentWidgetMessage;\n  updateCommentWidgetMessage: CommentWidgetMessage;\n  addReactionToCommentWidget: Scalars[\"Boolean\"];\n  removeReactionFromCommentWidget: Scalars[\"Boolean\"];\n  addReactionToCommentWidgetMessage: Scalars[\"Boolean\"];\n  removeReactionFromCommentWidgetMessage: Scalars[\"Boolean\"];\n  subscribeToCommentWidget: Scalars[\"Boolean\"];\n  unsubscribeFromCommentWidget: Scalars[\"Boolean\"];\n}\n\nexport interface MutationSignUpArgs {\n  input: SignUpInput;\n}\n\nexport interface MutationSignInArgs {\n  input: SignInInput;\n}\n\nexport interface MutationSignUpWithGitHubAccountArgs {\n  input: SignUpWithGitHubAccount;\n}\n\nexport interface MutationSignInWithGitHubAccountArgs {\n  input: SignInWithGitHubAccount;\n}\n\nexport interface MutationDeleteNotificationArgs {\n  input: DeleteNotification;\n}\n\nexport interface MutationSetUserInfoArgs {\n  input: SetUserInfo;\n}\n\nexport interface MutationFollowUserArgs {\n  input: FollowUser;\n}\n\nexport interface MutationUnfollowUserArgs {\n  input: UnfollowUser;\n}\n\nexport interface MutationSendEmailVerificationCodeArgs {\n  input: Maybe<SendEmailVerificationCode>;\n}\n\nexport interface MutationResetPasswordArgs {\n  input: Maybe<ResetPassword>;\n}\n\nexport interface MutationVerifyEmailArgs {\n  input: Maybe<VerifyEmail>;\n}\n\nexport interface MutationLinkWithGitHubAccountArgs {\n  input: Maybe<LinkWithGitHubAccount>;\n}\n\nexport interface MutationPublishNotebookArgs {\n  input: PublishNotebook;\n}\n\nexport interface MutationUnpublishNotebookArgs {\n  input: UnpublishNotebook;\n}\n\nexport interface MutationUpdateNotebookArgs {\n  input: UpdateNotebook;\n}\n\nexport interface MutationStarNotebookArgs {\n  input: StarNotebook;\n}\n\nexport interface MutationUnstarNotebookArgs {\n  input: UnstarNotebook;\n}\n\nexport interface MutationCreateWidgetArgs {\n  input: Maybe<CreateWidget>;\n}\n\nexport interface MutationUpdateWidgetArgs {\n  input: Maybe<UpdateWidget>;\n}\n\nexport interface MutationDeleteWidgetArgs {\n  input: Maybe<DeleteWidget>;\n}\n\nexport interface MutationPostCommentWidgetMessageArgs {\n  input: PostCommentWidgetMessage;\n}\n\nexport interface MutationUpdateCommentWidgetMessageArgs {\n  input: UpdateCommentWidgetMessage;\n}\n\nexport interface MutationAddReactionToCommentWidgetArgs {\n  input: Maybe<AddReactionToCommentWidget>;\n}\n\nexport interface MutationRemoveReactionFromCommentWidgetArgs {\n  input: Maybe<RemoveReactionFromCommentWidget>;\n}\n\nexport interface MutationAddReactionToCommentWidgetMessageArgs {\n  input: Maybe<AddReactionToCommentWidgetMessage>;\n}\n\nexport interface MutationRemoveReactionFromCommentWidgetMessageArgs {\n  input: Maybe<RemoveReactionFromCommentWidgetMessage>;\n}\n\nexport interface MutationSubscribeToCommentWidgetArgs {\n  input: Maybe<SubscribeToCommentWidget>;\n}\n\nexport interface MutationUnsubscribeFromCommentWidgetArgs {\n  input: Maybe<UnsubscribeFromCommentWidget>;\n}\n\nexport interface UnfollowUser {\n  userID: Scalars[\"UUID\"];\n}\n\nexport interface UnstarNotebook {\n  notebookID: Scalars[\"UUID\"];\n}\n\nexport type SignUpMutationVariables = {\n  username: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n};\n\nexport type SignUpMutation = { __typename?: \"Mutation\" } & {\n  signUp: { __typename?: \"AuthReturn\" } & Pick<AuthReturn, \"token\"> & {\n      user: { __typename?: \"User\" } & Pick<User, \"id\">;\n    };\n};\n\nexport type SignInMutationVariables = {\n  email: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n};\n\nexport type SignInMutation = { __typename?: \"Mutation\" } & {\n  signIn: { __typename?: \"AuthReturn\" } & Pick<AuthReturn, \"token\"> & {\n      user: { __typename?: \"User\" } & Pick<User, \"id\">;\n    };\n};\n\nexport type SignUpWithGitHubAccountMutationVariables = {\n  username: Scalars[\"String\"];\n  email: Scalars[\"String\"];\n  accessToken: Scalars[\"String\"];\n};\n\nexport type SignUpWithGitHubAccountMutation = { __typename?: \"Mutation\" } & {\n  signUpWithGitHubAccount: { __typename?: \"AuthReturn\" } & Pick<\n    AuthReturn,\n    \"token\"\n  > & { user: { __typename?: \"User\" } & Pick<User, \"id\"> };\n};\n\nexport type SignInWithGitHubAccountMutationVariables = {\n  code: Scalars[\"String\"];\n};\n\nexport type SignInWithGitHubAccountMutation = { __typename?: \"Mutation\" } & {\n  signInWithGitHubAccount: { __typename?: \"AuthReturn\" } & Pick<\n    AuthReturn,\n    \"token\"\n  > & {\n      user: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"email\">;\n    };\n};\n\nexport type SendEmailVerificationCodeMutationVariables = {\n  email: Scalars[\"String\"];\n};\n\nexport type SendEmailVerificationCodeMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"sendEmailVerificationCode\">;\n\nexport type ResetPasswordMutationVariables = {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n  password: Scalars[\"String\"];\n};\n\nexport type ResetPasswordMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"resetPassword\"\n>;\n\nexport type VerifyEmailMutationVariables = {\n  email: Scalars[\"String\"];\n  verificationCode: Scalars[\"String\"];\n};\n\nexport type VerifyEmailMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"verifyEmail\"\n>;\n\nexport type CreateCommentWidgetMutationVariables = {\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n};\n\nexport type CreateCommentWidgetMutation = { __typename?: \"Mutation\" } & {\n  createWidget: { __typename?: \"Widget\" } & Pick<Widget, \"id\">;\n};\n\nexport type PostCommentWidgetMessageMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n  notifyUsers: Array<Scalars[\"String\"]>;\n};\n\nexport type PostCommentWidgetMessageMutation = { __typename?: \"Mutation\" } & {\n  postCommentWidgetMessage: {\n    __typename?: \"CommentWidgetMessage\";\n  } & CommentWidgetMessageFieldsFragment;\n};\n\nexport type UpdateCommentWidgetMessageMutationVariables = {\n  messageID: Scalars[\"UUID\"];\n  markdown: Scalars[\"String\"];\n};\n\nexport type UpdateCommentWidgetMessageMutation = { __typename?: \"Mutation\" } & {\n  updateCommentWidgetMessage: {\n    __typename?: \"CommentWidgetMessage\";\n  } & CommentWidgetMessageFieldsFragment;\n};\n\nexport type AddReactionToCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type AddReactionToCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"addReactionToCommentWidget\">;\n\nexport type RemoveReactionFromCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type RemoveReactionFromCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"removeReactionFromCommentWidget\">;\n\nexport type AddReactionToCommentWidgetMessageMutationVariables = {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type AddReactionToCommentWidgetMessageMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"addReactionToCommentWidgetMessage\">;\n\nexport type RemoveReactionFromCommentWidgetMessageMutationVariables = {\n  messageID: Scalars[\"UUID\"];\n  reaction: Scalars[\"String\"];\n};\n\nexport type RemoveReactionFromCommentWidgetMessageMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"removeReactionFromCommentWidgetMessage\">;\n\nexport type SubscribeToCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n};\n\nexport type SubscribeToCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"subscribeToCommentWidget\">;\n\nexport type UnsubscribeFromCommentWidgetMutationVariables = {\n  widgetID: Scalars[\"UUID\"];\n};\n\nexport type UnsubscribeFromCommentWidgetMutation = {\n  __typename?: \"Mutation\";\n} & Pick<Mutation, \"unsubscribeFromCommentWidget\">;\n\nexport type LinkWithGitHubAccountMutationVariables = {\n  code: Scalars[\"String\"];\n};\n\nexport type LinkWithGitHubAccountMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"linkWithGitHubAccount\"\n>;\n\nexport type UnlinkGitHubAccountMutationVariables = {};\n\nexport type UnlinkGitHubAccountMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"unlinkGitHubAccount\"\n>;\n\nexport type PublishNotebookMutationVariables = {\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n};\n\nexport type PublishNotebookMutation = { __typename?: \"Mutation\" } & {\n  publishNotebook: { __typename?: \"Notebook\" } & NotebookFieldsFragment;\n};\n\nexport type UnpublishNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n};\n\nexport type UnpublishNotebookMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"unpublishNotebook\"\n>;\n\nexport type UpdateNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n  gitURL: Scalars[\"String\"];\n  gitBranch: Scalars[\"String\"];\n};\n\nexport type UpdateNotebookMutation = { __typename?: \"Mutation\" } & {\n  updateNotebook: { __typename?: \"Notebook\" } & NotebookFieldsFragment;\n};\n\nexport type StarNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n};\n\nexport type StarNotebookMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"starNotebook\"\n>;\n\nexport type UnstarNotebookMutationVariables = {\n  notebookID: Scalars[\"UUID\"];\n};\n\nexport type UnstarNotebookMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"unstarNotebook\"\n>;\n\nexport type DeleteNotificationMutationVariables = {\n  notificationID: Scalars[\"UUID\"];\n};\n\nexport type DeleteNotificationMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"deleteNotification\"\n>;\n\nexport type DeleteAllNotificationsMutationVariables = {};\n\nexport type DeleteAllNotificationsMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"deleteAllNotifications\"\n>;\n\nexport type SetUserInfoMutationVariables = {\n  cover: Scalars[\"String\"];\n  bio: Scalars[\"String\"];\n  location: Scalars[\"String\"];\n  language: Scalars[\"String\"];\n  name: Scalars[\"String\"];\n  avatar: Scalars[\"String\"];\n  editorCursorColor: Scalars[\"String\"];\n};\n\nexport type SetUserInfoMutation = { __typename?: \"Mutation\" } & {\n  setUserInfo: { __typename?: \"User\" } & ViewerFieldsFragment;\n};\n\nexport type DeleteWidgetMutationVariables = {\n  id: Scalars[\"UUID\"];\n};\n\nexport type DeleteWidgetMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"deleteWidget\"\n>;\n\nexport type UpdateWidgetMutationVariables = {\n  id: Scalars[\"UUID\"];\n  description: Scalars[\"String\"];\n  source: Scalars[\"String\"];\n};\n\nexport type UpdateWidgetMutation = { __typename?: \"Mutation\" } & Pick<\n  Mutation,\n  \"updateWidget\"\n>;\n\nexport type CommentWidgetMessageFieldsFragment = {\n  __typename?: \"CommentWidgetMessage\";\n} & Pick<\n  CommentWidgetMessage,\n  \"id\" | \"markdown\" | \"createdAt\" | \"updatedAt\"\n> & {\n    author: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"avatar\">;\n    reactionSummaries: Array<\n      { __typename?: \"ReactionSummary\" } & Pick<\n        ReactionSummary,\n        \"count\" | \"reaction\" | \"selfAuthored\"\n      >\n    >;\n  };\n\nexport type CommentWidgetMessageConnectionFieldsFragment = {\n  __typename?: \"CommentWidgetMessageConnection\";\n} & {\n  pageInfo: { __typename?: \"PageInfo\" } & PageInfoFieldsFragment;\n  edges: Array<\n    { __typename?: \"CommentWidgetMessageEdge\" } & Pick<\n      CommentWidgetMessageEdge,\n      \"cursor\"\n    > & {\n        node: {\n          __typename?: \"CommentWidgetMessage\";\n        } & CommentWidgetMessageFieldsFragment;\n      }\n  >;\n};\n\nexport type CommentWidgetFieldsFragment = { __typename?: \"Widget\" } & Pick<\n  Widget,\n  \"id\" | \"description\" | \"source\" | \"canConfigure\"\n> & {\n    owner: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"avatar\">;\n    instance: { __typename?: \"CommentWidgetInstance\" } & Pick<\n      CommentWidgetInstance,\n      \"type\"\n    > & {\n        commentWidget: { __typename?: \"CommentWidget\" } & Pick<\n          CommentWidget,\n          | \"id\"\n          | \"createdAt\"\n          | \"updatedAt\"\n          | \"messagesCount\"\n          | \"reactionsCount\"\n          | \"subscribed\"\n        > & {\n            reactionSummaries: Array<\n              { __typename?: \"ReactionSummary\" } & Pick<\n                ReactionSummary,\n                \"count\" | \"reaction\" | \"selfAuthored\"\n              >\n            >;\n            messages: {\n              __typename?: \"CommentWidgetMessageConnection\";\n            } & CommentWidgetMessageConnectionFieldsFragment;\n          };\n      };\n  };\n\nexport type CommentWidgetQueryVariables = {\n  widgetID: Scalars[\"UUID\"];\n};\n\nexport type CommentWidgetQuery = { __typename?: \"Query\" } & {\n  widget: { __typename?: \"Widget\" } & CommentWidgetFieldsFragment;\n};\n\nexport type CommentWidgetMessagesQueryVariables = {\n  widgetID: Scalars[\"UUID\"];\n  before: Scalars[\"UUID\"];\n  after: Scalars[\"UUID\"];\n  first: Scalars[\"Int\"];\n  last: Scalars[\"Int\"];\n};\n\nexport type CommentWidgetMessagesQuery = { __typename?: \"Query\" } & {\n  widget: { __typename?: \"Widget\" } & {\n    instance: { __typename?: \"CommentWidgetInstance\" } & Pick<\n      CommentWidgetInstance,\n      \"type\"\n    > & {\n        commentWidget: { __typename?: \"CommentWidget\" } & {\n          messages: {\n            __typename?: \"CommentWidgetMessageConnection\";\n          } & CommentWidgetMessageConnectionFieldsFragment;\n        };\n      };\n  };\n};\n\nexport type GitHubUserQueryVariables = {};\n\nexport type GitHubUserQuery = { __typename?: \"Query\" } & {\n  viewer: { __typename?: \"User\" } & {\n    githubUser: Maybe<\n      { __typename?: \"GitHubUser\" } & Pick<\n        GitHubUser,\n        \"login\" | \"avatar\" | \"email\"\n      >\n    >;\n  };\n};\n\nexport type NotebookFieldsFragment = { __typename?: \"Notebook\" } & Pick<\n  Notebook,\n  | \"id\"\n  | \"createdAt\"\n  | \"updatedAt\"\n  | \"gitURL\"\n  | \"gitBranch\"\n  | \"markdown\"\n  | \"starsCount\"\n  | \"isStarred\"\n> & {\n    owner: { __typename?: \"User\" } & Pick<User, \"id\" | \"avatar\" | \"username\">;\n  };\n\nexport type NotebooksQueryVariables = {\n  query?: Maybe<Scalars[\"String\"]>;\n  orderBy?: Maybe<NotebookOrderBy>;\n  page?: Maybe<Scalars[\"Int\"]>;\n  perPage?: Maybe<Scalars[\"Int\"]>;\n};\n\nexport type NotebooksQuery = { __typename?: \"Query\" } & {\n  notebooks: Array<{ __typename?: \"Notebook\" } & NotebookFieldsFragment>;\n};\n\nexport type NotificationFieldsFragment = { __typename?: \"Notification\" } & Pick<\n  Notification,\n  \"id\" | \"createdAt\" | \"meta\"\n> & {\n    origin: { __typename?: \"User\" } & Pick<User, \"id\" | \"username\" | \"avatar\">;\n    receiver: { __typename?: \"User\" } & Pick<\n      User,\n      \"id\" | \"username\" | \"avatar\"\n    >;\n    event:\n      | ({ __typename?: \"NotificationEventCommentWidgetMessagePosting\" } & Pick<\n          NotificationEventCommentWidgetMessagePosting,\n          \"type\"\n        > & {\n            message: { __typename?: \"CommentWidgetMessage\" } & Pick<\n              CommentWidgetMessage,\n              \"id\" | \"markdown\" | \"createdAt\"\n            > & {\n                widget: { __typename?: \"Widget\" } & Pick<\n                  Widget,\n                  \"description\" | \"source\"\n                > & {\n                    owner: { __typename?: \"User\" } & Pick<\n                      User,\n                      \"id\" | \"username\" | \"avatar\"\n                    >;\n                  };\n              };\n          })\n      | ({ __typename?: \"NotificationEventUserFollowing\" } & Pick<\n          NotificationEventUserFollowing,\n          \"type\"\n        >);\n  };\n\nexport type NotificationsQueryVariables = {\n  before: Scalars[\"UUID\"];\n  after: Scalars[\"UUID\"];\n  first: Maybe<Scalars[\"Int\"]>;\n  last: Maybe<Scalars[\"Int\"]>;\n};\n\nexport type NotificationsQuery = { __typename?: \"Query\" } & {\n  viewer: { __typename?: \"User\" } & {\n    notifications: { __typename?: \"NotificationConnection\" } & {\n      pageInfo: { __typename?: \"PageInfo\" } & PageInfoFieldsFragment;\n      edges: Array<\n        { __typename?: \"NotificationEdge\" } & Pick<\n          NotificationEdge,\n          \"cursor\"\n        > & {\n            node: { __typename?: \"Notification\" } & NotificationFieldsFragment;\n          }\n      >;\n    };\n  };\n};\n\nexport type PageInfoFieldsFragment = { __typename?: \"PageInfo\" } & Pick<\n  PageInfo,\n  \"startCursor\" | \"endCursor\" | \"hasNextPage\" | \"hasPreviousPage\"\n>;\n\nexport type ViewerFieldsFragment = { __typename?: \"User\" } & Pick<\n  User,\n  | \"avatar\"\n  | \"bio\"\n  | \"cover\"\n  | \"createdAt\"\n  | \"deletedAt\"\n  | \"id\"\n  | \"language\"\n  | \"name\"\n  | \"username\"\n  | \"email\"\n  | \"verifiedEmail\"\n  | \"updatedAt\"\n  | \"widgetsCount\"\n  | \"notebooksCount\"\n  | \"starredNotebooksCount\"\n  | \"editorCursorColor\"\n> & {\n    notifications: { __typename?: \"NotificationConnection\" } & Pick<\n      NotificationConnection,\n      \"totalCount\"\n    >;\n  };\n\nexport type ViewerQueryVariables = {};\n\nexport type ViewerQuery = { __typename?: \"Query\" } & {\n  viewer: { __typename?: \"User\" } & ViewerFieldsFragment;\n};\n\nexport const PageInfoFieldsFragmentDoc = gql`\n  fragment PageInfoFields on PageInfo {\n    startCursor\n    endCursor\n    hasNextPage\n    hasPreviousPage\n  }\n`;\nexport const CommentWidgetMessageFieldsFragmentDoc = gql`\n  fragment CommentWidgetMessageFields on CommentWidgetMessage {\n    id\n    author {\n      id\n      username\n      avatar\n    }\n    markdown\n    createdAt\n    updatedAt\n    reactionSummaries {\n      count\n      reaction\n      selfAuthored\n    }\n  }\n`;\nexport const CommentWidgetMessageConnectionFieldsFragmentDoc = gql`\n  fragment CommentWidgetMessageConnectionFields on CommentWidgetMessageConnection {\n    pageInfo {\n      ...PageInfoFields\n    }\n    edges {\n      cursor\n      node {\n        ...CommentWidgetMessageFields\n      }\n    }\n  }\n  ${PageInfoFieldsFragmentDoc}\n  ${CommentWidgetMessageFieldsFragmentDoc}\n`;\nexport const CommentWidgetFieldsFragmentDoc = gql`\n  fragment CommentWidgetFields on Widget {\n    id\n    owner {\n      id\n      username\n      avatar\n    }\n    description\n    source\n    canConfigure\n    instance {\n      type\n      ... on CommentWidgetInstance {\n        type\n        commentWidget {\n          id\n          createdAt\n          updatedAt\n          messagesCount\n          reactionsCount\n          subscribed\n          reactionSummaries {\n            count\n            reaction\n            selfAuthored\n          }\n          messages(first: 20) {\n            ...CommentWidgetMessageConnectionFields\n          }\n        }\n      }\n    }\n  }\n  ${CommentWidgetMessageConnectionFieldsFragmentDoc}\n`;\nexport const NotebookFieldsFragmentDoc = gql`\n  fragment NotebookFields on Notebook {\n    id\n    createdAt\n    updatedAt\n    owner {\n      id\n      avatar\n      username\n    }\n    gitURL\n    gitBranch\n    markdown\n    starsCount\n    isStarred\n  }\n`;\nexport const NotificationFieldsFragmentDoc = gql`\n  fragment NotificationFields on Notification {\n    id\n    createdAt\n    origin {\n      id\n      username\n      avatar\n    }\n    receiver {\n      id\n      username\n      avatar\n    }\n    meta\n    event {\n      type\n      ... on NotificationEventUserFollowing {\n        type\n      }\n      ... on NotificationEventCommentWidgetMessagePosting {\n        type\n        message {\n          id\n          markdown\n          createdAt\n          widget {\n            owner {\n              id\n              username\n              avatar\n            }\n            description\n            source\n          }\n        }\n      }\n    }\n  }\n`;\nexport const ViewerFieldsFragmentDoc = gql`\n  fragment ViewerFields on User {\n    avatar\n    bio\n    cover\n    createdAt\n    deletedAt\n    id\n    language\n    name\n    username\n    email\n    verifiedEmail\n    updatedAt\n    widgetsCount\n    notebooksCount\n    starredNotebooksCount\n    notifications(last: 1) {\n      totalCount\n    }\n    editorCursorColor\n  }\n`;\nexport const SignUpDocument = gql`\n  mutation SignUp($username: String!, $email: String!, $password: String!) {\n    signUp(input: { username: $username, email: $email, password: $password }) {\n      token\n      user {\n        id\n      }\n    }\n  }\n`;\n\nexport const SignUpComponent = (\n  props: Omit<\n    Urql.MutationProps<SignUpMutation, SignUpMutationVariables>,\n    \"query\"\n  > & { variables?: SignUpMutationVariables },\n) => <Urql.Mutation {...props} query={SignUpDocument} />;\n\nexport function useSignUpMutation() {\n  return Urql.useMutation<SignUpMutation, SignUpMutationVariables>(\n    SignUpDocument,\n  );\n}\nexport const SignInDocument = gql`\n  mutation SignIn($email: String!, $password: String!) {\n    signIn(input: { email: $email, password: $password }) {\n      token\n      user {\n        id\n      }\n    }\n  }\n`;\n\nexport const SignInComponent = (\n  props: Omit<\n    Urql.MutationProps<SignInMutation, SignInMutationVariables>,\n    \"query\"\n  > & { variables?: SignInMutationVariables },\n) => <Urql.Mutation {...props} query={SignInDocument} />;\n\nexport function useSignInMutation() {\n  return Urql.useMutation<SignInMutation, SignInMutationVariables>(\n    SignInDocument,\n  );\n}\nexport const SignUpWithGitHubAccountDocument = gql`\n  mutation SignUpWithGitHubAccount(\n    $username: String!\n    $email: String!\n    $accessToken: String!\n  ) {\n    signUpWithGitHubAccount(\n      input: { username: $username, email: $email, accessToken: $accessToken }\n    ) {\n      token\n      user {\n        id\n      }\n    }\n  }\n`;\n\nexport const SignUpWithGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SignUpWithGitHubAccountMutation,\n      SignUpWithGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SignUpWithGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={SignUpWithGitHubAccountDocument} />;\n\nexport function useSignUpWithGitHubAccountMutation() {\n  return Urql.useMutation<\n    SignUpWithGitHubAccountMutation,\n    SignUpWithGitHubAccountMutationVariables\n  >(SignUpWithGitHubAccountDocument);\n}\nexport const SignInWithGitHubAccountDocument = gql`\n  mutation SignInWithGitHubAccount($code: String!) {\n    signInWithGitHubAccount(input: { code: $code }) {\n      token\n      user {\n        id\n        username\n        email\n      }\n    }\n  }\n`;\n\nexport const SignInWithGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SignInWithGitHubAccountMutation,\n      SignInWithGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SignInWithGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={SignInWithGitHubAccountDocument} />;\n\nexport function useSignInWithGitHubAccountMutation() {\n  return Urql.useMutation<\n    SignInWithGitHubAccountMutation,\n    SignInWithGitHubAccountMutationVariables\n  >(SignInWithGitHubAccountDocument);\n}\nexport const SendEmailVerificationCodeDocument = gql`\n  mutation SendEmailVerificationCode($email: String!) {\n    sendEmailVerificationCode(input: { email: $email })\n  }\n`;\n\nexport const SendEmailVerificationCodeComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SendEmailVerificationCodeMutation,\n      SendEmailVerificationCodeMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SendEmailVerificationCodeMutationVariables },\n) => <Urql.Mutation {...props} query={SendEmailVerificationCodeDocument} />;\n\nexport function useSendEmailVerificationCodeMutation() {\n  return Urql.useMutation<\n    SendEmailVerificationCodeMutation,\n    SendEmailVerificationCodeMutationVariables\n  >(SendEmailVerificationCodeDocument);\n}\nexport const ResetPasswordDocument = gql`\n  mutation ResetPassword(\n    $email: String!\n    $verificationCode: String!\n    $password: String!\n  ) {\n    resetPassword(\n      input: {\n        email: $email\n        verificationCode: $verificationCode\n        password: $password\n      }\n    )\n  }\n`;\n\nexport const ResetPasswordComponent = (\n  props: Omit<\n    Urql.MutationProps<ResetPasswordMutation, ResetPasswordMutationVariables>,\n    \"query\"\n  > & { variables?: ResetPasswordMutationVariables },\n) => <Urql.Mutation {...props} query={ResetPasswordDocument} />;\n\nexport function useResetPasswordMutation() {\n  return Urql.useMutation<\n    ResetPasswordMutation,\n    ResetPasswordMutationVariables\n  >(ResetPasswordDocument);\n}\nexport const VerifyEmailDocument = gql`\n  mutation VerifyEmail($email: String!, $verificationCode: String!) {\n    verifyEmail(input: { email: $email, verificationCode: $verificationCode })\n  }\n`;\n\nexport const VerifyEmailComponent = (\n  props: Omit<\n    Urql.MutationProps<VerifyEmailMutation, VerifyEmailMutationVariables>,\n    \"query\"\n  > & { variables?: VerifyEmailMutationVariables },\n) => <Urql.Mutation {...props} query={VerifyEmailDocument} />;\n\nexport function useVerifyEmailMutation() {\n  return Urql.useMutation<VerifyEmailMutation, VerifyEmailMutationVariables>(\n    VerifyEmailDocument,\n  );\n}\nexport const CreateCommentWidgetDocument = gql`\n  mutation CreateCommentWidget($description: String!, $source: String!) {\n    createWidget(\n      input: { description: $description, source: $source, type: COMMENT }\n    ) {\n      id\n    }\n  }\n`;\n\nexport const CreateCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      CreateCommentWidgetMutation,\n      CreateCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: CreateCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={CreateCommentWidgetDocument} />;\n\nexport function useCreateCommentWidgetMutation() {\n  return Urql.useMutation<\n    CreateCommentWidgetMutation,\n    CreateCommentWidgetMutationVariables\n  >(CreateCommentWidgetDocument);\n}\nexport const PostCommentWidgetMessageDocument = gql`\n  mutation PostCommentWidgetMessage(\n    $widgetID: UUID!\n    $markdown: String!\n    $notifyUsers: [String!]!\n  ) {\n    postCommentWidgetMessage(\n      input: {\n        widgetID: $widgetID\n        markdown: $markdown\n        notifyUsers: $notifyUsers\n      }\n    ) {\n      ...CommentWidgetMessageFields\n    }\n  }\n  ${CommentWidgetMessageFieldsFragmentDoc}\n`;\n\nexport const PostCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      PostCommentWidgetMessageMutation,\n      PostCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: PostCommentWidgetMessageMutationVariables },\n) => <Urql.Mutation {...props} query={PostCommentWidgetMessageDocument} />;\n\nexport function usePostCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    PostCommentWidgetMessageMutation,\n    PostCommentWidgetMessageMutationVariables\n  >(PostCommentWidgetMessageDocument);\n}\nexport const UpdateCommentWidgetMessageDocument = gql`\n  mutation UpdateCommentWidgetMessage($messageID: UUID!, $markdown: String!) {\n    updateCommentWidgetMessage(\n      input: { messageID: $messageID, markdown: $markdown }\n    ) {\n      ...CommentWidgetMessageFields\n    }\n  }\n  ${CommentWidgetMessageFieldsFragmentDoc}\n`;\n\nexport const UpdateCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UpdateCommentWidgetMessageMutation,\n      UpdateCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UpdateCommentWidgetMessageMutationVariables },\n) => <Urql.Mutation {...props} query={UpdateCommentWidgetMessageDocument} />;\n\nexport function useUpdateCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    UpdateCommentWidgetMessageMutation,\n    UpdateCommentWidgetMessageMutationVariables\n  >(UpdateCommentWidgetMessageDocument);\n}\nexport const AddReactionToCommentWidgetDocument = gql`\n  mutation AddReactionToCommentWidget($widgetID: UUID!, $reaction: String!) {\n    addReactionToCommentWidget(\n      input: { widgetID: $widgetID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const AddReactionToCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      AddReactionToCommentWidgetMutation,\n      AddReactionToCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: AddReactionToCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={AddReactionToCommentWidgetDocument} />;\n\nexport function useAddReactionToCommentWidgetMutation() {\n  return Urql.useMutation<\n    AddReactionToCommentWidgetMutation,\n    AddReactionToCommentWidgetMutationVariables\n  >(AddReactionToCommentWidgetDocument);\n}\nexport const RemoveReactionFromCommentWidgetDocument = gql`\n  mutation RemoveReactionFromCommentWidget(\n    $widgetID: UUID!\n    $reaction: String!\n  ) {\n    removeReactionFromCommentWidget(\n      input: { widgetID: $widgetID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const RemoveReactionFromCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      RemoveReactionFromCommentWidgetMutation,\n      RemoveReactionFromCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: RemoveReactionFromCommentWidgetMutationVariables },\n) => (\n  <Urql.Mutation {...props} query={RemoveReactionFromCommentWidgetDocument} />\n);\n\nexport function useRemoveReactionFromCommentWidgetMutation() {\n  return Urql.useMutation<\n    RemoveReactionFromCommentWidgetMutation,\n    RemoveReactionFromCommentWidgetMutationVariables\n  >(RemoveReactionFromCommentWidgetDocument);\n}\nexport const AddReactionToCommentWidgetMessageDocument = gql`\n  mutation AddReactionToCommentWidgetMessage(\n    $messageID: UUID!\n    $reaction: String!\n  ) {\n    addReactionToCommentWidgetMessage(\n      input: { messageID: $messageID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const AddReactionToCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      AddReactionToCommentWidgetMessageMutation,\n      AddReactionToCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: AddReactionToCommentWidgetMessageMutationVariables },\n) => (\n  <Urql.Mutation {...props} query={AddReactionToCommentWidgetMessageDocument} />\n);\n\nexport function useAddReactionToCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    AddReactionToCommentWidgetMessageMutation,\n    AddReactionToCommentWidgetMessageMutationVariables\n  >(AddReactionToCommentWidgetMessageDocument);\n}\nexport const RemoveReactionFromCommentWidgetMessageDocument = gql`\n  mutation RemoveReactionFromCommentWidgetMessage(\n    $messageID: UUID!\n    $reaction: String!\n  ) {\n    removeReactionFromCommentWidgetMessage(\n      input: { messageID: $messageID, reaction: $reaction }\n    )\n  }\n`;\n\nexport const RemoveReactionFromCommentWidgetMessageComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      RemoveReactionFromCommentWidgetMessageMutation,\n      RemoveReactionFromCommentWidgetMessageMutationVariables\n    >,\n    \"query\"\n  > & { variables?: RemoveReactionFromCommentWidgetMessageMutationVariables },\n) => (\n  <Urql.Mutation\n    {...props}\n    query={RemoveReactionFromCommentWidgetMessageDocument}\n  />\n);\n\nexport function useRemoveReactionFromCommentWidgetMessageMutation() {\n  return Urql.useMutation<\n    RemoveReactionFromCommentWidgetMessageMutation,\n    RemoveReactionFromCommentWidgetMessageMutationVariables\n  >(RemoveReactionFromCommentWidgetMessageDocument);\n}\nexport const SubscribeToCommentWidgetDocument = gql`\n  mutation SubscribeToCommentWidget($widgetID: UUID!) {\n    subscribeToCommentWidget(input: { widgetID: $widgetID })\n  }\n`;\n\nexport const SubscribeToCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      SubscribeToCommentWidgetMutation,\n      SubscribeToCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: SubscribeToCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={SubscribeToCommentWidgetDocument} />;\n\nexport function useSubscribeToCommentWidgetMutation() {\n  return Urql.useMutation<\n    SubscribeToCommentWidgetMutation,\n    SubscribeToCommentWidgetMutationVariables\n  >(SubscribeToCommentWidgetDocument);\n}\nexport const UnsubscribeFromCommentWidgetDocument = gql`\n  mutation UnsubscribeFromCommentWidget($widgetID: UUID!) {\n    unsubscribeFromCommentWidget(input: { widgetID: $widgetID })\n  }\n`;\n\nexport const UnsubscribeFromCommentWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UnsubscribeFromCommentWidgetMutation,\n      UnsubscribeFromCommentWidgetMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UnsubscribeFromCommentWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={UnsubscribeFromCommentWidgetDocument} />;\n\nexport function useUnsubscribeFromCommentWidgetMutation() {\n  return Urql.useMutation<\n    UnsubscribeFromCommentWidgetMutation,\n    UnsubscribeFromCommentWidgetMutationVariables\n  >(UnsubscribeFromCommentWidgetDocument);\n}\nexport const LinkWithGitHubAccountDocument = gql`\n  mutation LinkWithGitHubAccount($code: String!) {\n    linkWithGitHubAccount(input: { code: $code })\n  }\n`;\n\nexport const LinkWithGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      LinkWithGitHubAccountMutation,\n      LinkWithGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: LinkWithGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={LinkWithGitHubAccountDocument} />;\n\nexport function useLinkWithGitHubAccountMutation() {\n  return Urql.useMutation<\n    LinkWithGitHubAccountMutation,\n    LinkWithGitHubAccountMutationVariables\n  >(LinkWithGitHubAccountDocument);\n}\nexport const UnlinkGitHubAccountDocument = gql`\n  mutation UnlinkGitHubAccount {\n    unlinkGitHubAccount\n  }\n`;\n\nexport const UnlinkGitHubAccountComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UnlinkGitHubAccountMutation,\n      UnlinkGitHubAccountMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UnlinkGitHubAccountMutationVariables },\n) => <Urql.Mutation {...props} query={UnlinkGitHubAccountDocument} />;\n\nexport function useUnlinkGitHubAccountMutation() {\n  return Urql.useMutation<\n    UnlinkGitHubAccountMutation,\n    UnlinkGitHubAccountMutationVariables\n  >(UnlinkGitHubAccountDocument);\n}\nexport const PublishNotebookDocument = gql`\n  mutation PublishNotebook($gitURL: String!, $gitBranch: String!) {\n    publishNotebook(input: { gitURL: $gitURL, gitBranch: $gitBranch }) {\n      ...NotebookFields\n    }\n  }\n  ${NotebookFieldsFragmentDoc}\n`;\n\nexport const PublishNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      PublishNotebookMutation,\n      PublishNotebookMutationVariables\n    >,\n    \"query\"\n  > & { variables?: PublishNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={PublishNotebookDocument} />;\n\nexport function usePublishNotebookMutation() {\n  return Urql.useMutation<\n    PublishNotebookMutation,\n    PublishNotebookMutationVariables\n  >(PublishNotebookDocument);\n}\nexport const UnpublishNotebookDocument = gql`\n  mutation UnpublishNotebook($notebookID: UUID!) {\n    unpublishNotebook(input: { notebookID: $notebookID })\n  }\n`;\n\nexport const UnpublishNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      UnpublishNotebookMutation,\n      UnpublishNotebookMutationVariables\n    >,\n    \"query\"\n  > & { variables?: UnpublishNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={UnpublishNotebookDocument} />;\n\nexport function useUnpublishNotebookMutation() {\n  return Urql.useMutation<\n    UnpublishNotebookMutation,\n    UnpublishNotebookMutationVariables\n  >(UnpublishNotebookDocument);\n}\nexport const UpdateNotebookDocument = gql`\n  mutation UpdateNotebook(\n    $notebookID: UUID!\n    $gitURL: String!\n    $gitBranch: String!\n  ) {\n    updateNotebook(\n      input: { notebookID: $notebookID, gitURL: $gitURL, gitBranch: $gitBranch }\n    ) {\n      ...NotebookFields\n    }\n  }\n  ${NotebookFieldsFragmentDoc}\n`;\n\nexport const UpdateNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<UpdateNotebookMutation, UpdateNotebookMutationVariables>,\n    \"query\"\n  > & { variables?: UpdateNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={UpdateNotebookDocument} />;\n\nexport function useUpdateNotebookMutation() {\n  return Urql.useMutation<\n    UpdateNotebookMutation,\n    UpdateNotebookMutationVariables\n  >(UpdateNotebookDocument);\n}\nexport const StarNotebookDocument = gql`\n  mutation StarNotebook($notebookID: UUID!) {\n    starNotebook(input: { notebookID: $notebookID })\n  }\n`;\n\nexport const StarNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<StarNotebookMutation, StarNotebookMutationVariables>,\n    \"query\"\n  > & { variables?: StarNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={StarNotebookDocument} />;\n\nexport function useStarNotebookMutation() {\n  return Urql.useMutation<StarNotebookMutation, StarNotebookMutationVariables>(\n    StarNotebookDocument,\n  );\n}\nexport const UnstarNotebookDocument = gql`\n  mutation UnstarNotebook($notebookID: UUID!) {\n    unstarNotebook(input: { notebookID: $notebookID })\n  }\n`;\n\nexport const UnstarNotebookComponent = (\n  props: Omit<\n    Urql.MutationProps<UnstarNotebookMutation, UnstarNotebookMutationVariables>,\n    \"query\"\n  > & { variables?: UnstarNotebookMutationVariables },\n) => <Urql.Mutation {...props} query={UnstarNotebookDocument} />;\n\nexport function useUnstarNotebookMutation() {\n  return Urql.useMutation<\n    UnstarNotebookMutation,\n    UnstarNotebookMutationVariables\n  >(UnstarNotebookDocument);\n}\nexport const DeleteNotificationDocument = gql`\n  mutation DeleteNotification($notificationID: UUID!) {\n    deleteNotification(input: { notificationID: $notificationID })\n  }\n`;\n\nexport const DeleteNotificationComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      DeleteNotificationMutation,\n      DeleteNotificationMutationVariables\n    >,\n    \"query\"\n  > & { variables?: DeleteNotificationMutationVariables },\n) => <Urql.Mutation {...props} query={DeleteNotificationDocument} />;\n\nexport function useDeleteNotificationMutation() {\n  return Urql.useMutation<\n    DeleteNotificationMutation,\n    DeleteNotificationMutationVariables\n  >(DeleteNotificationDocument);\n}\nexport const DeleteAllNotificationsDocument = gql`\n  mutation DeleteAllNotifications {\n    deleteAllNotifications\n  }\n`;\n\nexport const DeleteAllNotificationsComponent = (\n  props: Omit<\n    Urql.MutationProps<\n      DeleteAllNotificationsMutation,\n      DeleteAllNotificationsMutationVariables\n    >,\n    \"query\"\n  > & { variables?: DeleteAllNotificationsMutationVariables },\n) => <Urql.Mutation {...props} query={DeleteAllNotificationsDocument} />;\n\nexport function useDeleteAllNotificationsMutation() {\n  return Urql.useMutation<\n    DeleteAllNotificationsMutation,\n    DeleteAllNotificationsMutationVariables\n  >(DeleteAllNotificationsDocument);\n}\nexport const SetUserInfoDocument = gql`\n  mutation SetUserInfo(\n    $cover: String!\n    $bio: String!\n    $location: String!\n    $language: String!\n    $name: String!\n    $avatar: String!\n    $editorCursorColor: String!\n  ) {\n    setUserInfo(\n      input: {\n        cover: $cover\n        bio: $bio\n        location: $location\n        language: $language\n        name: $name\n        avatar: $avatar\n        editorCursorColor: $editorCursorColor\n      }\n    ) {\n      ...ViewerFields\n    }\n  }\n  ${ViewerFieldsFragmentDoc}\n`;\n\nexport const SetUserInfoComponent = (\n  props: Omit<\n    Urql.MutationProps<SetUserInfoMutation, SetUserInfoMutationVariables>,\n    \"query\"\n  > & { variables?: SetUserInfoMutationVariables },\n) => <Urql.Mutation {...props} query={SetUserInfoDocument} />;\n\nexport function useSetUserInfoMutation() {\n  return Urql.useMutation<SetUserInfoMutation, SetUserInfoMutationVariables>(\n    SetUserInfoDocument,\n  );\n}\nexport const DeleteWidgetDocument = gql`\n  mutation DeleteWidget($id: UUID!) {\n    deleteWidget(input: { id: $id })\n  }\n`;\n\nexport const DeleteWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<DeleteWidgetMutation, DeleteWidgetMutationVariables>,\n    \"query\"\n  > & { variables?: DeleteWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={DeleteWidgetDocument} />;\n\nexport function useDeleteWidgetMutation() {\n  return Urql.useMutation<DeleteWidgetMutation, DeleteWidgetMutationVariables>(\n    DeleteWidgetDocument,\n  );\n}\nexport const UpdateWidgetDocument = gql`\n  mutation UpdateWidget($id: UUID!, $description: String!, $source: String!) {\n    updateWidget(input: { id: $id, description: $description, source: $source })\n  }\n`;\n\nexport const UpdateWidgetComponent = (\n  props: Omit<\n    Urql.MutationProps<UpdateWidgetMutation, UpdateWidgetMutationVariables>,\n    \"query\"\n  > & { variables?: UpdateWidgetMutationVariables },\n) => <Urql.Mutation {...props} query={UpdateWidgetDocument} />;\n\nexport function useUpdateWidgetMutation() {\n  return Urql.useMutation<UpdateWidgetMutation, UpdateWidgetMutationVariables>(\n    UpdateWidgetDocument,\n  );\n}\nexport const CommentWidgetDocument = gql`\n  query CommentWidget($widgetID: UUID!) {\n    widget(id: $widgetID) {\n      ...CommentWidgetFields\n    }\n  }\n  ${CommentWidgetFieldsFragmentDoc}\n`;\n\nexport const CommentWidgetComponent = (\n  props: Omit<\n    Urql.QueryProps<CommentWidgetQuery, CommentWidgetQueryVariables>,\n    \"query\"\n  > & { variables: CommentWidgetQueryVariables },\n) => <Urql.Query {...props} query={CommentWidgetDocument} />;\n\nexport function useCommentWidgetQuery(\n  options: Omit<Urql.UseQueryArgs<CommentWidgetQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<CommentWidgetQuery>({\n    query: CommentWidgetDocument,\n    ...options,\n  });\n}\nexport const CommentWidgetMessagesDocument = gql`\n  query CommentWidgetMessages(\n    $widgetID: UUID!\n    $before: UUID!\n    $after: UUID!\n    $first: Int!\n    $last: Int!\n  ) {\n    widget(id: $widgetID) {\n      instance {\n        type\n        ... on CommentWidgetInstance {\n          type\n          commentWidget {\n            messages(\n              before: $before\n              after: $after\n              first: $first\n              last: $last\n            ) {\n              ...CommentWidgetMessageConnectionFields\n            }\n          }\n        }\n      }\n    }\n  }\n  ${CommentWidgetMessageConnectionFieldsFragmentDoc}\n`;\n\nexport const CommentWidgetMessagesComponent = (\n  props: Omit<\n    Urql.QueryProps<\n      CommentWidgetMessagesQuery,\n      CommentWidgetMessagesQueryVariables\n    >,\n    \"query\"\n  > & { variables: CommentWidgetMessagesQueryVariables },\n) => <Urql.Query {...props} query={CommentWidgetMessagesDocument} />;\n\nexport function useCommentWidgetMessagesQuery(\n  options: Omit<\n    Urql.UseQueryArgs<CommentWidgetMessagesQueryVariables>,\n    \"query\"\n  > = {},\n) {\n  return Urql.useQuery<CommentWidgetMessagesQuery>({\n    query: CommentWidgetMessagesDocument,\n    ...options,\n  });\n}\nexport const GitHubUserDocument = gql`\n  query GitHubUser {\n    viewer {\n      githubUser {\n        login\n        avatar\n        email\n      }\n    }\n  }\n`;\n\nexport const GitHubUserComponent = (\n  props: Omit<\n    Urql.QueryProps<GitHubUserQuery, GitHubUserQueryVariables>,\n    \"query\"\n  > & { variables?: GitHubUserQueryVariables },\n) => <Urql.Query {...props} query={GitHubUserDocument} />;\n\nexport function useGitHubUserQuery(\n  options: Omit<Urql.UseQueryArgs<GitHubUserQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<GitHubUserQuery>({\n    query: GitHubUserDocument,\n    ...options,\n  });\n}\nexport const NotebooksDocument = gql`\n  query Notebooks(\n    $query: String = \"\"\n    $orderBy: NotebookOrderBy = TOTAL_STARS_COUNT\n    $page: Int = 0\n    $perPage: Int = 10\n  ) {\n    notebooks(\n      query: $query\n      orderBy: $orderBy\n      page: $page\n      perPage: $perPage\n    ) {\n      ...NotebookFields\n    }\n  }\n  ${NotebookFieldsFragmentDoc}\n`;\n\nexport const NotebooksComponent = (\n  props: Omit<\n    Urql.QueryProps<NotebooksQuery, NotebooksQueryVariables>,\n    \"query\"\n  > & { variables?: NotebooksQueryVariables },\n) => <Urql.Query {...props} query={NotebooksDocument} />;\n\nexport function useNotebooksQuery(\n  options: Omit<Urql.UseQueryArgs<NotebooksQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<NotebooksQuery>({\n    query: NotebooksDocument,\n    ...options,\n  });\n}\nexport const NotificationsDocument = gql`\n  query Notifications($before: UUID!, $after: UUID!, $first: Int, $last: Int) {\n    viewer {\n      notifications(\n        before: $before\n        after: $after\n        first: $first\n        last: $last\n      ) {\n        pageInfo {\n          ...PageInfoFields\n        }\n        edges {\n          cursor\n          node {\n            ...NotificationFields\n          }\n        }\n      }\n    }\n  }\n  ${PageInfoFieldsFragmentDoc}\n  ${NotificationFieldsFragmentDoc}\n`;\n\nexport const NotificationsComponent = (\n  props: Omit<\n    Urql.QueryProps<NotificationsQuery, NotificationsQueryVariables>,\n    \"query\"\n  > & { variables: NotificationsQueryVariables },\n) => <Urql.Query {...props} query={NotificationsDocument} />;\n\nexport function useNotificationsQuery(\n  options: Omit<Urql.UseQueryArgs<NotificationsQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<NotificationsQuery>({\n    query: NotificationsDocument,\n    ...options,\n  });\n}\nexport const ViewerDocument = gql`\n  query Viewer {\n    viewer {\n      ...ViewerFields\n    }\n  }\n  ${ViewerFieldsFragmentDoc}\n`;\n\nexport const ViewerComponent = (\n  props: Omit<Urql.QueryProps<ViewerQuery, ViewerQueryVariables>, \"query\"> & {\n    variables?: ViewerQueryVariables;\n  },\n) => <Urql.Query {...props} query={ViewerDocument} />;\n\nexport function useViewerQuery(\n  options: Omit<Urql.UseQueryArgs<ViewerQueryVariables>, \"query\"> = {},\n) {\n  return Urql.useQuery<ViewerQuery>({ query: ViewerDocument, ...options });\n}\n","import { createHashHistory, createBrowserHistory } from \"history\";\n\n// const hashHistory = createHashHistory();\n// export default hashHistory;\n\nexport const browserHistory = createBrowserHistory();\n","import {\n  Box,\n  Button,\n  Card,\n  IconButton,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { ChevronLeft } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  useLinkWithGitHubAccountMutation,\n  useSignInWithGitHubAccountMutation,\n  useSignUpWithGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { browserHistory } from \"../utilities/history\";\nimport { UUIDNil } from \"../utilities/utils\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    container: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"100%\",\n      color: theme.palette.text.primary,\n      backgroundColor: theme.palette.background.default,\n    },\n    wrapper: {\n      position: \"relative\",\n      width: \"960px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n      transform: \"translateY(-60%)\",\n      top: \"50%\",\n      padding: \"16px\",\n      boxSizing: \"border-box\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n    card: {\n      position: \"relative\",\n      width: \"300px\",\n      maxWidth: \"100%\",\n      padding: \"16px\",\n      margin: \"32px auto\",\n    },\n  }),\n);\n\ninterface Props {\n  code: string;\n}\nexport function GitHubOAuthCallback(props: Props) {\n  const classes = useStyles(props);\n  const { t, i18n } = useTranslation();\n  const [accessToken, setAccessToken] = useState<string>(\"\");\n  const [title, setTitle] = useState<string>(t(\"github-oauth/wait\"));\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [\n    resLinkWithGitHubAccount,\n    executeLinkWithGitHubAccount,\n  ] = useLinkWithGitHubAccountMutation();\n  const [\n    resSignInWithGitHubAccount,\n    executeSignInWithGitHubAccount,\n  ] = useSignInWithGitHubAccountMutation();\n  const [\n    resSignUpWithGitHubAccount,\n    executeSignUpWithGitHubAccount,\n  ] = useSignUpWithGitHubAccountMutation();\n\n  useEffect(() => {\n    if (props.code) {\n      if (localStorage.getItem(\"token\")) {\n        // Link with GitHub account\n        executeLinkWithGitHubAccount({ code: props.code });\n      } else {\n        // Sign in with GitHub account\n        executeSignInWithGitHubAccount({ code: props.code });\n      }\n    }\n  }, [props.code]);\n\n  useEffect(() => {\n    if (resLinkWithGitHubAccount.fetching) {\n    } else if (resLinkWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/link-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/link-with-github-account-failure\"));\n    } else if (resLinkWithGitHubAccount.data) {\n      browserHistory.replace(\"/settings\");\n    }\n  }, [resLinkWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignInWithGitHubAccount.fetching) {\n    } else if (resSignInWithGitHubAccount.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"github-oauth/sign-in-with-github-account-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setTitle(t(\"github-oauth/sign-in-with-github-account-failure\"));\n    } else if (\n      resSignInWithGitHubAccount.data &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount &&\n      resSignInWithGitHubAccount.data.signInWithGitHubAccount.token\n    ) {\n      if (\n        resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.id ===\n        UUIDNil\n      ) {\n        // Ask user to register for new account\n        setAccessToken(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        setUsername(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.username,\n        );\n        setEmail(\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.user.email,\n        );\n      } else {\n        localStorage.setItem(\n          \"token\",\n          resSignInWithGitHubAccount.data.signInWithGitHubAccount.token,\n        );\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }\n    }\n  }, [resSignInWithGitHubAccount]);\n\n  useEffect(() => {\n    if (resSignUpWithGitHubAccount.error) {\n      setErrorMessage(\n        resSignUpWithGitHubAccount.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSignUpWithGitHubAccount.data) {\n      localStorage.setItem(\n        \"token\",\n        resSignUpWithGitHubAccount.data.signUpWithGitHubAccount.token,\n      );\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUpWithGitHubAccount]);\n\n  const signUpWithGitHubAccessToken = () => {\n    executeSignUpWithGitHubAccount({\n      email,\n      username,\n      accessToken,\n    });\n  };\n\n  const backBtn = (\n    <IconButton\n      onClick={() => {\n        browserHistory.replace(\"/\");\n        window.location.reload();\n      }}\n      color={\"inherit\"}\n    >\n      <ChevronLeft></ChevronLeft>\n    </IconButton>\n  );\n\n  return (\n    <Box className={clsx(classes.container)}>\n      <Box className={clsx(classes.wrapper)}>\n        {accessToken ? (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant=\"h4\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in\")}\n            </Typography>\n            <Typography variant=\"h5\" style={{ marginBottom: \"0\" }}>\n              {t(\"github-oauth/first-time-sign-in-small\")}\n            </Typography>\n            <Card elevation={2} className={clsx(classes.card)}>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Username\")}\n                variant=\"outlined\"\n                value={username}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setUsername(event.target.value);\n                }}\n                fullWidth={true}\n              ></TextField>\n              <TextField\n                className={clsx(classes.email)}\n                label={t(\"general/Email\")}\n                variant=\"outlined\"\n                value={email}\n                onChange={(event) => {\n                  setErrorMessage(\"\");\n                  setEmail(event.target.value);\n                }}\n                onClick={(event) => {\n                  event.currentTarget.focus();\n                }}\n                fullWidth={true}\n              ></TextField>\n              {errorMessage.length ? (\n                <Typography className={clsx(classes.errorMessage)}>\n                  {errorMessage}\n                </Typography>\n              ) : null}\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => signUpWithGitHubAccessToken()}\n                fullWidth={true}\n                disabled={resSignUpWithGitHubAccount.fetching}\n              >\n                {t(\"general/Continue\")}\n              </Button>\n            </Card>\n          </React.Fragment>\n        ) : (\n          <React.Fragment>\n            {backBtn}\n            <Typography variant={\"h2\"}>{title}</Typography>\n            <Typography>{props.code}</Typography>\n          </React.Fragment>\n        )}\n      </Box>\n    </Box>\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister();\n    });\n  }\n}\n","import { Button, Snackbar } from \"@material-ui/core\";\nimport React, { FC, useCallback, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport * as serviceWorker from \"../serviceWorker\";\n\nconst ServiceWorkerWrapper: FC = () => {\n  const { t } = useTranslation();\n  const [showReload, setShowReload] = React.useState(false);\n  const [\n    waitingWorker,\n    setWaitingWorker,\n  ] = React.useState<ServiceWorker | null>(null);\n\n  const onSWUpdate = (registration: ServiceWorkerRegistration) => {\n    setShowReload(true);\n    setWaitingWorker(registration.waiting);\n  };\n\n  useEffect(() => {\n    serviceWorker.register({ onUpdate: onSWUpdate });\n  }, []);\n\n  const reloadPage = useCallback(() => {\n    waitingWorker?.postMessage({ type: \"SKIP_WAITING\" });\n    setShowReload(false);\n    window.location.reload(true);\n  }, [waitingWorker]);\n\n  return (\n    <Snackbar\n      open={showReload}\n      message={t(\"notifications/new-version-available\")}\n      onClick={reloadPage}\n      anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n      action={\n        <Button color=\"inherit\" size=\"small\" onClick={reloadPage}>\n          {t(\"general/update\")}\n        </Button>\n      }\n    />\n  );\n};\n\nexport default ServiceWorkerWrapper;\n","import { NoteConfig } from \"./note\";\n\nexport enum EventType {\n  ModifiedMarkdown = \"ModifiedMarkdown\",\n  CreatedNote = \"CreatedNote\",\n  DeletedNote = \"DeletedNote\",\n  ChangedNoteFilePath = \"ChangedNoteFilePath\",\n  PerformedGitOperation = \"PerformedGitOperation\",\n  DeletedNotebook = \"DeletedNotebook\",\n  FocusedOnNote = \"FocusedOnNote\",\n}\n\nexport interface ModifiedMarkdownEventData {\n  tabId: string;\n  notebookPath: string;\n  noteFilePath: string;\n  markdown: string;\n  noteConfig: NoteConfig;\n}\n\nexport interface CreatedNoteEventData {\n  notebookPath: string;\n}\n\nexport interface DeletedNoteEventData {\n  tabId: string;\n  notebookPath: string;\n  noteFilePath: string;\n}\n\nexport interface ChangedNoteFilePathEventData {\n  tabId: string;\n  notebookPath: string;\n  oldNoteFilePath: string;\n  newNoteFilePath: string;\n}\n\nexport interface PerformedGitOperationEventData {\n  notebookPath: string;\n}\n\nexport interface DeletedNotebookEventData {\n  notebookPath: string;\n}\n\nexport interface FocusedOnNoteEventData {\n  notebookPath: string;\n  noteFilePath: string;\n}\n\nexport type EventData =\n  | ModifiedMarkdownEventData\n  | CreatedNoteEventData\n  | DeletedNoteEventData\n  | ChangedNoteFilePathEventData\n  | PerformedGitOperationEventData;\n\nexport type EventCallback = (data: any) => void;\n\nexport class Emitter {\n  private subscriptions: { [key: string]: EventCallback[] } = {};\n  constructor() {\n    this.subscriptions = {};\n  }\n\n  public on(eventName: EventType, cb: EventCallback) {\n    if (eventName in this.subscriptions) {\n      this.subscriptions[eventName].push(cb);\n    } else {\n      this.subscriptions[eventName] = [cb];\n    }\n  }\n\n  public off(eventName: EventType, cb: EventCallback) {\n    const eventCallbacks = this.subscriptions[eventName] || [];\n    const index = eventCallbacks.findIndex((x) => x === cb);\n    if (index >= 0) {\n      eventCallbacks.splice(index, 1);\n    }\n  }\n\n  public emit(eventName: EventType, data: EventData) {\n    const eventCallbacks = (this.subscriptions[eventName] || []).slice() || [];\n    eventCallbacks.forEach((callback, offset) => {\n      callback(data);\n    });\n  }\n}\n\nexport const globalEmitter = new Emitter();\n\n(window as any)[\"globalEmitter\"] = globalEmitter;\n","export type FilePath = string;\n\nexport interface NoteConfigEncryption {\n  title: string;\n  // method: string;? // Default AES256\n}\n\nexport interface NoteConfig {\n  createdAt: Date;\n  modifiedAt: Date;\n  pinned?: boolean;\n  favorited?: boolean;\n  icon?: string;\n  aliases?: string[];\n}\n\nexport type Mentions = { [key: string]: boolean };\n\nexport interface Note {\n  notebookPath: string;\n  filePath: FilePath;\n  title: string;\n  markdown: string;\n  config: NoteConfig;\n  /**\n   * @param key: mentioned note file path\n   */\n  mentions: Mentions;\n}\n\nexport interface Notes {\n  [key: string]: Note;\n}\n\nexport function getNoteIcon(note: Note) {\n  if (note.config.icon) {\n    return note.config.icon;\n  } else {\n    return \":memo:\";\n  }\n}\n","import { Reference } from \"./reference\";\n\nexport type TabNodeComponent =\n  | \"Settings\"\n  | \"Note\"\n  | \"Notes\"\n  | \"Privacy\"\n  | \"Graph\"\n  | \"Notifications\";\n\nexport interface TabNodeConfig {\n  component: TabNodeComponent;\n  singleton: boolean;\n  noteFilePath?: string;\n  notebookPath?: string;\n  reference?: Reference;\n  icon?: string;\n}\n\nexport interface CrossnoteTabNode {\n  type: \"tab\";\n  name: string;\n  component: TabNodeComponent;\n  config: TabNodeConfig;\n  id?: string;\n}\n\nexport const TabHeight = 24;\n","import useInterval from \"@use-it/interval\";\nimport FlexLayout, {\n  Actions,\n  DockLocation,\n  Model,\n  TabNode,\n  TabSetNode,\n} from \"flexlayout-react\";\nimport moment from \"moment\";\nimport * as path from \"path\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { createContainer } from \"unstated-next\";\nimport Crossnote, {\n  PullNotebookArgs,\n  PushNotebookArgs,\n} from \"../lib/crossnote\";\nimport { EventType, globalEmitter } from \"../lib/event\";\nimport { pfs } from \"../lib/fs\";\nimport { getNoteIcon, Note, NoteConfig } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport { CrossnoteTabNode, TabHeight } from \"../lib/tabNode\";\nimport { getTodayName } from \"../utilities/utils\";\n\nexport enum SelectedSectionType {\n  Notes = \"Notes\",\n  Today = \"Today\",\n  Todo = \"Todo\",\n  Tagged = \"Tagged\",\n  Untagged = \"Untagged\",\n  Directory = \"Directory\",\n  Tag = \"Tag\",\n  Conflicted = \"Conflicted\",\n  Encrypted = \"Encrypted\",\n  Wiki = \"Wiki\",\n  Attachments = \"Attachments\",\n}\n\nexport interface SelectedSection {\n  type: SelectedSectionType;\n  path?: string;\n}\n\nexport enum HomeSection {\n  Notebooks = \"Notebooks\",\n  Explore = \"Explore\",\n  Settings = \"Settings\",\n  Notifications = \"Notifications\",\n  Privacy = \"Privacy\",\n  Unknown = \"Unknown\",\n}\n\n/**\n * The note to open\n */\nexport interface PendingNote {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath: string;\n}\n\ninterface InitialState {\n  crossnote: Crossnote;\n}\n\nconst defaultLayoutModel: any = {\n  global: {\n    splitterSize: 4,\n    tabSetEnableMaximize: false,\n    tabSetHeaderHeight: TabHeight,\n    tabSetTabStripHeight: TabHeight,\n    tabEnableRename: false,\n  },\n  borders: [],\n  layout: {\n    type: \"row\",\n    weight: 100,\n    children: [\n      {\n        type: \"tabset\",\n        weight: 50,\n        selected: 0,\n        children: [],\n      },\n    ],\n  },\n};\n\nconst getlayoutModelFromLocalStrorage = () => {\n  try {\n    const layoutModelString = localStorage.getItem(\"layoutModel\");\n    if (layoutModelString) {\n      return JSON.parse(layoutModelString);\n    } else {\n      return defaultLayoutModel;\n    }\n  } catch (_) {\n    return defaultLayoutModel;\n  }\n};\n\nfunction useCrossnoteContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n  const crossnote = initialState.crossnote;\n  const [initialized, setInitialized] = useState<boolean>(false);\n  const [notebooks, setNotebooks] = useState<Notebook[]>([]);\n  const [isAddingNotebook, setIsAddingNotebook] = useState<boolean>(false);\n  const [isPushingNotebook, setIsPushingNotebook] = useState<boolean>(false);\n  const [isPullingNotebook, setIsPullingNotebook] = useState<boolean>(false);\n  const [isPerformingAutoFetch, setIsPerformingAutoFetch] = useState<boolean>(\n    false,\n  );\n  const [homeSection, setHomeSection] = useState<HomeSection>(\n    HomeSection.Unknown,\n  );\n  const [layoutModel, setLayoutModel] = useState<Model>(\n    FlexLayout.Model.fromJson(getlayoutModelFromLocalStrorage()),\n  );\n\n  const getNotebookAtPath = useCallback(\n    (notebookPath: string) => {\n      return notebooks.find((x) => x.dir === notebookPath);\n    },\n    [notebooks],\n  );\n\n  const addTabNode = useCallback(\n    (tabNode: CrossnoteTabNode) => {\n      if (!layoutModel) {\n        return;\n      }\n      let activeTabset: TabSetNode = layoutModel.getActiveTabset();\n      if (!activeTabset) {\n        const modelChildren = layoutModel.getRoot().getChildren();\n        let needsToCreateNewTabSet = true;\n        if (modelChildren.length) {\n          modelChildren.forEach((child) => {\n            if (child.getType() === \"tabset\") {\n              needsToCreateNewTabSet = false;\n              layoutModel.doAction(Actions.setActiveTabset(child.getId()));\n            }\n          });\n        }\n\n        if (needsToCreateNewTabSet) {\n          activeTabset = new FlexLayout.TabSetNode();\n          (layoutModel.getRoot() as any)._addChild(activeTabset);\n          layoutModel.doAction(Actions.setActiveTabset(activeTabset.getId()));\n        } else {\n          activeTabset = layoutModel.getActiveTabset();\n        }\n      }\n\n      if (tabNode.config.singleton) {\n        const node = layoutModel.getNodeById(tabNode.id);\n        if (node) {\n          return layoutModel.doAction(Actions.selectTab(node.getId()));\n        }\n      }\n      if (tabNode.component === \"Note\") {\n        const notebookPath = tabNode.config.notebookPath;\n        const noteFilePath = tabNode.config.noteFilePath;\n        const tabs = activeTabset.getChildren();\n        for (let i = 0; i < tabs.length; i++) {\n          const eTabNode: any = tabs[i];\n          const eNotebookpath: string =\n            eTabNode._attributes.config.notebookPath;\n          const eNoteFilePath: string =\n            eTabNode._attributes.config.noteFilePath;\n          if (\n            notebookPath &&\n            noteFilePath &&\n            notebookPath === eNotebookpath &&\n            noteFilePath === eNoteFilePath\n          ) {\n            layoutModel.doAction(Actions.selectTab(eTabNode.getId()));\n            layoutModel.doAction(\n              Actions.updateNodeAttributes(eTabNode.getId(), {\n                config: tabNode.config,\n              }),\n            );\n            return;\n          }\n        }\n      }\n      if (!activeTabset) {\n        return;\n      }\n      layoutModel.doAction(\n        Actions.addNode(tabNode, activeTabset.getId(), DockLocation.CENTER, 0),\n      );\n    },\n    [layoutModel],\n  );\n\n  const closeTabNode = useCallback(\n    (id: string) => {\n      if (!layoutModel) {\n        return;\n      }\n      layoutModel.doAction(Actions.deleteTab(id));\n    },\n    [layoutModel],\n  );\n\n  const updateNoteMarkdown = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      filePath: string,\n      markdown: string,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      const note = await notebook.getNote(filePath);\n      if (!notebook) {\n        return;\n      }\n      if (note.markdown !== markdown) {\n        const newNote = await notebook.writeNote(\n          note.filePath,\n          markdown,\n          note.config,\n        );\n        globalEmitter.emit(EventType.ModifiedMarkdown, {\n          tabId: tabNode.getId(),\n          markdown: newNote.markdown,\n          notebookPath: note.notebookPath,\n          noteFilePath: note.filePath,\n          noteConfig: newNote.config,\n        });\n      }\n    },\n    [getNotebookAtPath],\n  );\n\n  const updateNoteConfig = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      filePath: string,\n      noteConfig: NoteConfig,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(filePath);\n      if (JSON.stringify(note.config) !== JSON.stringify(noteConfig)) {\n        const newNote = await notebook.writeNote(\n          note.filePath,\n          note.markdown,\n          noteConfig,\n        );\n        globalEmitter.emit(EventType.ModifiedMarkdown, {\n          tabId: tabNode.getId(),\n          markdown: newNote.markdown,\n          notebookPath: note.notebookPath,\n          noteFilePath: note.filePath,\n          noteConfig: newNote.config,\n        });\n      }\n    },\n    [getNotebookAtPath],\n  );\n\n  const deleteNote = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      await notebook.deleteNote(noteFilePath);\n      await notebook.refreshNotes({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      globalEmitter.emit(EventType.DeletedNote, {\n        tabId: tabNode.getId(),\n        notebookPath: notebookPath,\n        noteFilePath: noteFilePath,\n      });\n    },\n    [getNotebookAtPath],\n  );\n\n  const changeNoteFilePath = useCallback(\n    async (tabNode: TabNode, note: Note, newFilePath: string) => {\n      const notebook = notebooks.find((x) => x.dir === note.notebookPath);\n      if (notebook) {\n        const oldNoteFilePath = note.filePath;\n        const newNote = await notebook.changeNoteFilePath(\n          oldNoteFilePath,\n          newFilePath,\n        );\n        globalEmitter.emit(EventType.ChangedNoteFilePath, {\n          tabId: tabNode.getId(),\n          notebookPath: note.notebookPath,\n          oldNoteFilePath: oldNoteFilePath,\n          newNoteFilePath: newFilePath,\n        });\n        return newNote;\n      } else {\n        throw new Error(\"Notebook \" + note.notebookPath + \" not found\");\n      }\n    },\n    [notebooks],\n  );\n\n  const createNewNote = useCallback(\n    async (\n      notebook: Notebook,\n      fileName: string = \"\",\n      markdown: string = \"\",\n    ) => {\n      if (!notebook) {\n        return null;\n      }\n      // This is necessary to guarantee that an existing note will not be overwritten before the notebook is fully loaded\n      await notebook.refreshNotesIfNotLoaded({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n\n      let autoGeneratedFileName = !fileName;\n      if (!fileName) {\n        let today = moment().format(\"YYYY-MM-DD\"); // TODO: Allow user to customize this\n        let untitled = t(\"general/Untitled\");\n\n        let foundToday = false;\n        let count = 0;\n        for (let key in notebook.notes) {\n          const note = notebook.notes[key];\n          if (note.title === today) {\n            foundToday = true;\n          }\n          if (note.title.startsWith(untitled)) {\n            count++;\n          }\n        }\n        if (foundToday) {\n          if (count === 0) {\n            fileName = `${untitled}.md`;\n          } else {\n            fileName = `${untitled} ${count}.md`;\n          }\n        } else {\n          fileName = `${today}.md`;\n        }\n      }\n      if (!fileName.endsWith(\".md\")) {\n        fileName = fileName + \".md\";\n      }\n      let filePath = path.relative(\n        notebook.dir,\n        path.resolve(notebook.dir, fileName),\n      );\n\n      const noteConfig: NoteConfig = {\n        modifiedAt: new Date(),\n        createdAt: new Date(),\n      };\n      let note = await notebook.writeNote(filePath, markdown, noteConfig);\n      if (!autoGeneratedFileName) {\n        await notebook.refreshNotes({\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n      }\n      note = await notebook.getNote(filePath);\n      globalEmitter.emit(EventType.CreatedNote, {\n        notebookPath: notebook.dir,\n      });\n      return note;\n    },\n    [t],\n  );\n\n  const openNoteAtPath = useCallback(\n    async (notebook: Notebook, filePath: string) => {\n      if (!filePath.endsWith(\".md\")) {\n        filePath += \".md\";\n      }\n      // This is necessary to guarantee that an existing note will not be overwritten before the notebook is fully loaded\n      await notebook.refreshNotesIfNotLoaded({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      let note: Note;\n      if (filePath in notebook.notes) {\n        note = notebook.notes[filePath];\n      } else {\n        note = await createNewNote(notebook, filePath, \"\");\n      }\n      addTabNode({\n        type: \"tab\",\n        component: \"Note\",\n        name: note.title,\n        config: {\n          component: \"Note\",\n          singleton: false,\n          noteFilePath: note.filePath,\n          notebookPath: note.notebookPath,\n          icon: getNoteIcon(note),\n        },\n      });\n    },\n    [createNewNote, addTabNode],\n  );\n\n  const openTodayNote = useCallback(\n    (notebook: Notebook) => {\n      const today = getTodayName();\n      return openNoteAtPath(notebook, `${today}.md`);\n    },\n    [openNoteAtPath],\n  );\n\n  const duplicateNote = useCallback(\n    async (note: Note) => {\n      /*\n      if (!crossnote) return;\n      const duplicatedNote = await crossnote.duplicateNote(\n        note.notebook,\n        note.filePath,\n      );\n      setNotebookNotes((notes) => [duplicatedNote, ...notes]);\n      setSelectedNote(duplicatedNote);\n      */\n    },\n    [crossnote],\n  );\n\n  const addNotebook = useCallback(\n    async (\n      name: string,\n      gitURL: string,\n      gitBranch: string,\n      gitUsername: string,\n      gitPassword: string,\n      gitRememberCredentials: boolean,\n      gitCorsProxy: string,\n    ) => {\n      setIsAddingNotebook(true);\n      try {\n        if (\n          gitURL.length &&\n          notebooks.find(\n            (nb) => nb.gitBranch === gitBranch && nb.gitURL === gitURL,\n          )\n        ) {\n          setIsAddingNotebook(false);\n          throw new Error(t(\"error/notebook-already-exists\"));\n        }\n        const notebook = await crossnote.addNotebook({\n          name,\n          gitURL,\n          branch: gitBranch,\n          username: gitUsername,\n          password: gitPassword,\n          corsProxy: gitCorsProxy,\n          rememberCredentials: gitRememberCredentials,\n        });\n        setNotebooks((notebooks) => [notebook, ...notebooks]);\n        setIsAddingNotebook(false);\n      } catch (error) {\n        setIsAddingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote, notebooks, t],\n  );\n\n  const openLocalNotebook = useCallback(async () => {\n    const directoryHandle = await window.showDirectoryPicker();\n    const notebook = await crossnote.addNotebook({\n      name: directoryHandle.name,\n      gitURL: \"\",\n      directoryHandle,\n    });\n    setNotebooks((notebooks) => [notebook, ...notebooks]);\n  }, [crossnote]);\n\n  const updateNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.updateNotebook(notebook);\n        setNotebooks((notebooks) => [...notebooks]);\n      } catch (error) {}\n    },\n    [crossnote],\n  );\n\n  const deleteNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        globalEmitter.emit(EventType.DeletedNotebook, {\n          notebookPath: notebook.dir,\n        });\n        await crossnote.deleteNotebook(notebook._id);\n      } catch (error) {\n        console.error(error);\n      }\n      let selectedNotebook: Notebook = null;\n      setNotebooks((notebooks) =>\n        notebooks.filter((n) => {\n          if (!selectedNotebook && n._id !== notebook._id) {\n            selectedNotebook = n;\n          }\n          return n._id !== notebook._id;\n        }),\n      );\n    },\n    [crossnote],\n  );\n\n  const refreshNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      await notebook.refreshNotes({ dir: \"./\", includeSubdirectories: true });\n      globalEmitter.emit(EventType.PerformedGitOperation, {\n        notebookPath: notebook.dir,\n      });\n    },\n    [crossnote],\n  );\n\n  const hardResetNotebook = useCallback(\n    async (notebook: Notebook) => {\n      if (!crossnote) {\n        return;\n      }\n      try {\n        await crossnote.hardResetNotebook(notebook, notebook.localSha);\n        await refreshNotebook(notebook);\n      } catch (error) {}\n    },\n    [crossnote, refreshNotebook],\n  );\n\n  const pushNotebook = useCallback(\n    async (args: PushNotebookArgs) => {\n      if (!crossnote) {\n        return;\n      }\n      setIsPushingNotebook(true);\n      try {\n        await crossnote.pushNotebook(args);\n        await args.notebook.refreshNotes({\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        globalEmitter.emit(EventType.PerformedGitOperation, {\n          notebookPath: args.notebook.dir,\n        });\n        setIsPushingNotebook(false);\n      } catch (error) {\n        setIsPushingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote],\n  );\n\n  const pullNotebook = useCallback(\n    async (args: PullNotebookArgs) => {\n      if (!crossnote) {\n        return;\n      }\n      setIsPullingNotebook(true);\n      try {\n        // NOTE: Code here might have bug\n        await crossnote.pullNotebook(args);\n        await args.notebook.refreshNotes({\n          dir: \"./\",\n          includeSubdirectories: true,\n        });\n        globalEmitter.emit(EventType.PerformedGitOperation, {\n          notebookPath: args.notebook.dir,\n        });\n        setIsPullingNotebook(false);\n      } catch (error) {\n        setIsPullingNotebook(false);\n        throw error;\n      }\n    },\n    [crossnote],\n  );\n\n  const checkoutNote = useCallback(\n    async (note: Note) => {\n      const notebook = getNotebookAtPath(note.notebookPath);\n      if (!notebook || notebook.isLocal) {\n        return;\n      }\n      const newNote = await notebook.checkoutNote(note);\n      await notebook.refreshNotes({\n        dir: \"./\",\n        includeSubdirectories: true,\n      });\n      globalEmitter.emit(EventType.PerformedGitOperation, {\n        notebookPath: note.notebookPath,\n      });\n      return newNote;\n    },\n    [getNotebookAtPath],\n  );\n\n  const getNote = useCallback(\n    async (notebookPath: string, filePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      return await notebook.getNote(filePath);\n    },\n    [getNotebookAtPath],\n  );\n\n  const togglePin = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const newConfig = Object.assign({}, note.config, {\n        pinned: !note.config.pinned,\n      });\n      if (!newConfig.pinned) {\n        delete newConfig.pinned;\n      }\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const toggleFavorite = useCallback(\n    async (tabNode: TabNode, notebookPath: string, noteFilePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const newConfig = Object.assign({}, note.config, {\n        favorited: !note.config.favorited,\n      });\n      if (!newConfig.favorited) {\n        delete newConfig.favorited;\n      }\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const setNoteIcon = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      noteFilePath: string,\n      icon: string,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const newConfig = Object.assign({}, note.config, { icon });\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const addNoteAlias = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      noteFilePath: string,\n      alias: string,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const aliases: string[] = note.config.aliases || [];\n      const newAliases = aliases.concat(alias);\n      const newConfig = Object.assign({}, note.config, {\n        aliases: newAliases,\n      });\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n      notebook.search.addAlias(noteFilePath, alias);\n      return newAliases;\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const deleteNoteAlias = useCallback(\n    async (\n      tabNode: TabNode,\n      notebookPath: string,\n      noteFilePath: string,\n      alias: string,\n    ) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook) {\n        return;\n      }\n      const note = await notebook.getNote(noteFilePath);\n      const aliases: string[] = note.config.aliases || [];\n      const newAliases = aliases.filter((a) => a !== alias);\n      const newConfig = Object.assign({}, note.config, {\n        aliases: newAliases,\n      });\n      if (!newAliases.length) {\n        delete newConfig.aliases;\n      }\n      await updateNoteConfig(tabNode, notebookPath, noteFilePath, newConfig);\n      notebook.search.deleteAlias(noteFilePath, alias);\n      return newAliases;\n    },\n    [getNotebookAtPath, updateNoteConfig],\n  );\n\n  const getStatus = useCallback(\n    async (notebookPath: string, filePath: string) => {\n      const notebook = getNotebookAtPath(notebookPath);\n      if (!notebook || !crossnote || notebook.isLocal) {\n        return \"\";\n      } else {\n        return await crossnote.getStatus(notebookPath, filePath);\n      }\n    },\n    [crossnote, getNotebookAtPath],\n  );\n\n  const saveCurrentLayoutModel = useCallback(() => {\n    if (layoutModel) {\n      localStorage.setItem(\"layoutModel\", JSON.stringify(layoutModel.toJson()));\n    }\n  }, [layoutModel]);\n\n  const removeNodeID = useCallback((node: any) => {\n    delete node.id;\n    const children = node.children || [];\n    children.forEach((child: any) => removeNodeID(child));\n  }, []);\n\n  const splitNoteHorizontally = useCallback(\n    (note: Note, tabNode: TabNode) => {\n      if (layoutModel) {\n        let activeTabset: TabSetNode = layoutModel.getActiveTabset();\n        if (!activeTabset) {\n          return;\n        }\n        const newTabNode: CrossnoteTabNode = {\n          type: \"tab\",\n          name: note.title,\n          component: \"Note\",\n          config: {\n            component: \"Note\",\n            singleton: false,\n            noteFilePath: note.filePath,\n            notebookPath: note.notebookPath,\n            icon: getNoteIcon(note),\n          },\n        };\n        layoutModel.doAction(\n          Actions.addNode(\n            newTabNode,\n            activeTabset.getId(),\n            DockLocation.BOTTOM,\n            0,\n          ),\n        );\n      }\n    },\n    [layoutModel],\n  );\n\n  const splitNoteVertically = useCallback(\n    (note: Note) => {\n      if (layoutModel) {\n        let activeTabset: TabSetNode = layoutModel.getActiveTabset();\n        if (!activeTabset) {\n          return;\n        }\n        const newTabNode: CrossnoteTabNode = {\n          type: \"tab\",\n          name: note.title,\n          component: \"Note\",\n          config: {\n            component: \"Note\",\n            singleton: false,\n            noteFilePath: note.filePath,\n            notebookPath: note.notebookPath,\n            icon: getNoteIcon(note),\n          },\n        };\n        layoutModel.doAction(\n          Actions.addNode(\n            newTabNode,\n            activeTabset.getId(),\n            DockLocation.RIGHT,\n            0,\n          ),\n        );\n      }\n    },\n    [layoutModel],\n  );\n\n  useEffect(() => {\n    if (!crossnote || initialized) {\n      return;\n    }\n\n    (async () => {\n      const notebooks = await crossnote.listNotebooks();\n      let notebook: Notebook = null;\n      if (notebooks.length) {\n        setNotebooks(notebooks);\n        const selectedNotebookID = localStorage.getItem(\"selectedNotebookID\");\n        notebook = notebooks.find((n) => n._id === selectedNotebookID);\n        if (!notebook) {\n          notebook = notebooks[0];\n        }\n        setInitialized(true);\n      } else {\n        /*\n        notebook = await crossnote.cloneNotebook({\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"https://github.com/0xGG/crossnote-doc.git\"\n        });\n        */\n        notebook = await crossnote.addNotebook({\n          name: \"Drafts\",\n          corsProxy: \"https://crossnote.app/cors/\",\n          gitURL: \"\",\n        });\n        await pfs.writeFile(\n          path.resolve(notebook.dir, \"README.md\"),\n          `---\nfavorited: true\n---\n# Welcome to Crossnote \n\nIf you want to know more about this project,  \nplease download and read the [Welcome notebook](https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md).\n`,\n        );\n        setNotebooks([notebook]);\n        setInitialized(true);\n        // TODO: create empty note and add `We suggest you to add [Welcome to crossnote]() notebook ;)`\n      }\n    })();\n  }, [crossnote, initialized]);\n\n  // TODO: This script should be moved to background (serviceWorker?)\n  useInterval(async () => {\n    if (isPerformingAutoFetch) {\n      return;\n    }\n    setIsPerformingAutoFetch(true);\n    for (let i = 0; i < notebooks.length; i++) {\n      const notebook = notebooks[i];\n      if (\n        notebook.autoFetchPeriod >= 1000 &&\n        Date.now() - notebook.fetchedAt.getTime() >= notebook.autoFetchPeriod &&\n        notebook.gitURL.length > 0 &&\n        notebook.localSha === notebook.remoteSha\n      ) {\n        // TODO:  Run tasks in parallel instead of running one by one\n        try {\n          const changed = await crossnote.fetchNotebook({ notebook });\n          if (changed) {\n            globalEmitter.emit(EventType.PerformedGitOperation, {\n              notebookPath: notebook.dir,\n            });\n          }\n        } catch (error) {\n          console.error(error);\n        }\n      }\n    }\n    setIsPerformingAutoFetch(false);\n  }, 60000); // Check every 1 minute\n\n  return {\n    crossnote,\n    initialized,\n    notebooks,\n    updateNoteMarkdown,\n    updateNoteConfig,\n    createNewNote,\n    deleteNote,\n    changeNoteFilePath,\n    duplicateNote,\n    addNotebook,\n    openLocalNotebook,\n    togglePin,\n    toggleFavorite,\n    setNoteIcon,\n    addNoteAlias,\n    deleteNoteAlias,\n    isAddingNotebook,\n    isPushingNotebook,\n    isPullingNotebook,\n    updateNotebook,\n    deleteNotebook,\n    hardResetNotebook,\n    refreshNotebook,\n    pushNotebook,\n    pullNotebook,\n    checkoutNote,\n    getNote,\n    openNoteAtPath,\n    openTodayNote,\n    homeSection,\n    setHomeSection,\n    layoutModel,\n    setLayoutModel,\n    splitNoteHorizontally,\n    splitNoteVertically,\n    addTabNode,\n    closeTabNode,\n    getNotebookAtPath,\n    getStatus,\n    saveCurrentLayoutModel,\n  };\n}\n\nexport const CrossnoteContainer = createContainer(useCrossnoteContainer);\n","export enum EditorMode {\n  EchoMD = \"EchoMD\",\n  SourceCode = \"SourceCode\",\n  Preview = \"Preview\",\n}\n","export enum KeyMap {\n  \"DEFAULT\" = \"sublime\",\n  \"VIM\" = \"vim\",\n  \"EMACS\" = \"emacs\",\n  \"SUBLIME\" = \"sublime\",\n}\n\nexport function getKeyMap(v: string): KeyMap {\n  if (v === \"hypermd\") {\n    return KeyMap.SUBLIME;\n  } else if (v === \"vim\") {\n    return KeyMap.VIM;\n  } else if (v === \"emacs\") {\n    return KeyMap.EMACS;\n  } else {\n    return KeyMap.SUBLIME;\n  }\n}\n","import {\n  Emoji as EmojiMarketEmoji,\n  EmojiData,\n  Picker as EmojiMarketPicker,\n} from \"emoji-mart\";\n\nexport const EmojiBackgroundImageFn = (set: string, sheetSize: number) => {\n  return `${\n    window.location.origin.match(/0xgg\\./i) ? \"/crossnote\" : \"\"\n  }/assets/emoji/twitter/64.png`;\n};\n\ninterface EmojiProps {\n  size?: number;\n  emoji?: string;\n}\nexport function Emoji(props: EmojiProps) {\n  return (\n    <EmojiMarketEmoji\n      set={\"twitter\"}\n      size={props.size || 16}\n      emoji={props.emoji}\n      backgroundImageFn={EmojiBackgroundImageFn}\n    ></EmojiMarketEmoji>\n  );\n}\n\ninterface EmojiPickerProps {\n  showSkinTones?: boolean;\n  onSelect?: (data: EmojiData) => void;\n}\nexport function EmojiPicker(props: EmojiPickerProps) {\n  return (\n    <EmojiMarketPicker\n      set={\"twitter\"}\n      showSkinTones={props.showSkinTones}\n      onSelect={props.onSelect}\n      backgroundImageFn={EmojiBackgroundImageFn}\n    ></EmojiMarketPicker>\n  );\n}\n","import { CloudContainer } from \"./cloud\";\nimport { CrossnoteContainer } from \"./crossnote\";\nimport { SettingsContainer } from \"./settings\";\n\ninterface GlobalContainers {\n  cloudContainer: ReturnType<typeof CloudContainer.useContainer>;\n  settingsContainer: ReturnType<typeof SettingsContainer.useContainer>;\n  crossnoteContainer: ReturnType<typeof CrossnoteContainer.useContainer>;\n}\n\nexport const globalContainers: GlobalContainers = {\n  cloudContainer: null,\n  settingsContainer: null,\n  crossnoteContainer: null,\n};\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Box,\n  Card,\n  FormControlLabel,\n  IconButton,\n  Input,\n  Switch,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction AudioWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <audio\n          autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n          controls={attributes[\"controls\"]}\n          loop={attributes[\"loop\"]}\n          muted={attributes[\"muted\"]}\n          style={attributes[\"style\"]}\n        >\n          {t(\"widget/crossnote.audio/audio_element_fail\")}\n          <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n        </audio>\n        {!props.isPreview && !attributes[\"controls\"] && \"\"}\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Audio\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.audio/source-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const AudioWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <AudioWidget {...args}></AudioWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Box,\n  Card,\n  IconButton,\n  Input,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction BilibiliWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"aid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?aid=${attributes[\"aid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n  if (attributes[\"bvid\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <iframe\n            title={\"bilibili_\" + attributes[\"id\"]}\n            className={clsx(classes.video)}\n            src={`https://player.bilibili.com/player.html?bvid=BV${attributes[\"bvid\"]}`}\n            scrolling={\"no\"}\n            frameBorder={\"no\"}\n            allowFullScreen={true}\n          ></iframe>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.bilibili/Bilibili\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.bilibili/bilibili-video-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.bilibili/url-placeholder\")}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\/av(\\d+)/)) {\n                const aid = url.match(/\\/av(\\d+)/)[1];\n                const attrs = {\n                  aid,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/BV(.+?)($|\\/|\\?)/)) {\n                const bvid = url.match(/\\/BV(.+?)($|\\/|\\?)/)[1];\n                const attrs = {\n                  bvid,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.bilibili/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const BilibiliWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <BilibiliWidget {...args}></BilibiliWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { createClient, defaultExchanges, subscriptionExchange } from \"urql\";\nimport { getGraphQLEndpoint } from \"./utils\";\n// import { SubscriptionClient } from \"subscriptions-transport-ws\";\n\n/*\nconst subscriptionClient = new SubscriptionClient(\n  getGraphQLEndpoint().replace(/^http/, \"ws\"),\n  {\n    connectionParams: () => {\n      const auth = { Authorization: `Bearer ${localStorage.getItem(\"token\")}` };\n      return auth;\n    },\n    reconnect: true\n  }\n);\n*/\n\nexport const GraphQLClient = createClient({\n  url: getGraphQLEndpoint(),\n  exchanges: [\n    ...defaultExchanges,\n    // Disable subscriptions for now\n    /*\n    subscriptionExchange({\n      forwardSubscription: operation => subscriptionClient.request(operation)\n    })*/\n  ],\n  fetchOptions: {\n    cache: \"no-cache\",\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n});\n","import { UUIDNil } from \"./utils\";\n\nexport interface Summary {\n  title: string;\n  summary: string;\n  images: string[]; // If has `title`, then images[0] is cover.\n  tags: string[]; // TODO: support tags\n  html: string; // original html\n}\n\n/*\nexport async function getTopicsAndMentionsFromHTML(\n  html: string,\n  ribbit: Ribbit\n): Promise<{\n  topics: string[];\n  mentions: { name: string; address: string }[];\n}> {\n  const div = document.createElement(\"div\");\n  const topics = [];\n  const mentions = [];\n  div.innerHTML = html;\n\n  const tagElems = div.getElementsByClassName(\"tag\");\n  for (let i = 0; i < tagElems.length; i++) {\n    const tagElem = tagElems[i] as HTMLAnchorElement;\n    if (tagElem.classList.contains(\"tag-mention\")) {\n      const mention = tagElem.getAttribute(\"data-mention\");\n      const userInfo = await ribbit.getUserInfoFromUsername(mention);\n      mentions.push({\n        name: userInfo.username,\n        address: userInfo.address\n      });\n    } else if (tagElem.classList.contains(\"tag-topic\")) {\n      const topic = tagElem.getAttribute(\"data-topic\");\n      topics.push(topic);\n    }\n  }\n  div.remove();\n\n  return {\n    topics: Array.from(new Set(topics)),\n    mentions\n  };\n}\n*/\n\nexport function getHeaderFromMarkdown(markdown: string): string {\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    return titleMatch[0].replace(/^#/, \"\").trim();\n  }\n  return \"\";\n}\n\nexport function getMentionsFromMarkdown(markdown: string): string[] {\n  return (markdown.match(/@(?:[a-zA-Z\\d]+-)*[a-zA-Z\\d]+/g) || [])\n    .map((username) => username.replace(/^@/, \"\").toLocaleLowerCase())\n    .filter(\n      (username, index, self) =>\n        index === self.findIndex((username2) => username === username2),\n    );\n}\n\nexport async function generateSummaryFromMarkdown(\n  markdown: string,\n): Promise<Summary> {\n  let title = \"\",\n    summary = \"\",\n    images: string[] = [];\n  markdown = markdown.replace(/^---([\\w\\W]+?\\n---)/, \"\").trim(); // Remove front matter\n  let contentString = markdown;\n\n  const titleMatch = markdown.match(/^#\\s.+$/gim);\n  if (titleMatch && titleMatch.length) {\n    title = titleMatch[0].replace(/^#/, \"\").trim();\n    const aheadString = markdown\n      .slice(0, markdown.indexOf(titleMatch[0]))\n      .trim();\n    contentString = markdown.slice(\n      markdown.indexOf(titleMatch[0]) + titleMatch[0].length,\n      markdown.length,\n    );\n    const coverMatch = aheadString.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n    if (coverMatch && coverMatch.length) {\n      images.push(coverMatch[0].match(/\\(([^)\"]+?)\\)/)[1].trim());\n    }\n  }\n\n  const coverImagesMatch = markdown.match(/^!\\[.*?\\]\\(.+?\\)/gim);\n  if (coverImagesMatch && coverImagesMatch.length) {\n    coverImagesMatch.forEach((mdImage) => {\n      images.push(mdImage.match(/\\(([^)\"]+?)\\)/)[1].trim());\n    });\n    images = images.filter(\n      (image, index, self) => index === self.findIndex((m) => m === image),\n    );\n  }\n\n  summary = contentString\n    .split(\"\\n\")\n    .filter(\n      (x) =>\n        x.trim().length > 0 &&\n        !x.match(/!\\[.*?\\]\\(.+?\\)/) && // Remove image\n        !x.match(/<!--\\s*@.+?-->/), // Remove widget\n    )\n    .map((x) => x.replace(/#+\\s(.+)\\s*$/, \"**$1**\").trim()) // Replace headers to bold\n    .slice(0, 10)\n    .join(\"  \\n\");\n\n  return {\n    title,\n    summary,\n    images,\n    tags: [],\n    html: \"\",\n  };\n}\n\nexport const EmptyPageInfo = {\n  hasPreviousPage: false,\n  hasNextPage: false,\n  startCursor: UUIDNil,\n  endCursor: UUIDNil,\n};\n","import { renderPreview } from \"@0xgg/echomd/preview\";\nimport {\n  Avatar,\n  Box,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  IconButton,\n  Link,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  Cancel,\n  ContentSave,\n  LinkVariant,\n  Pencil,\n  TrashCanOutline,\n} from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\nimport {\n  useDeleteWidgetMutation,\n  useUpdateWidgetMutation,\n  Widget,\n} from \"../../../generated/graphql\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { browserHistory } from \"../../../utilities/history\";\nconst EchoMD = require(\"@0xgg/echomd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topPanel: {\n      position: \"relative\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      width: \"100%\",\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    widgetTitle: {\n      marginLeft: `${theme.spacing(1)}px !important`,\n    },\n    widgetSourceLink: {\n      marginTop: `8px`,\n      marginLeft: theme.spacing(0.5),\n    },\n    actionButtons: {\n      position: \"absolute\",\n      right: \"0\",\n      top: \"0\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"marginTop\": theme.spacing(2),\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      \"backgroundColor\": \"inherit !important\",\n      \"paddingTop\": theme.spacing(1),\n      \"paddingBottom\": theme.spacing(1),\n      \"& p:last-child\": {\n        marginBottom: \"0 !important\",\n      },\n      \"& br\": {\n        // display: \"none\"\n      },\n    },\n  }),\n);\n\ninterface Props {\n  widget: Widget;\n  removeSelf?: () => void;\n  isPreview: Boolean;\n}\n\nexport function WidgetTopPanel(props: Props) {\n  const classes = useStyles(props);\n  const widget = props.widget;\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = useState<HTMLElement>(null);\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n\n  const [\n    resDeleteWidget,\n    executeDeleteWidgetMutation,\n  ] = useDeleteWidgetMutation();\n  const [\n    resUpdateWidget,\n    executeUpdateWidgetMutation,\n  ] = useUpdateWidgetMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [widgetSource, setWidgetSource] = useState<string>(\"\");\n\n  const deleteWidget = useCallback(() => {\n    if (widget && widget.id) {\n      executeDeleteWidgetMutation({\n        id: widget.id,\n      });\n    }\n  }, [widget, executeDeleteWidgetMutation]);\n\n  const updateWidget = useCallback(() => {\n    if (editor && widget) {\n      const description = editor.getValue() || widget.description;\n      executeUpdateWidgetMutation({\n        id: widget.id,\n        description,\n        source: widgetSource,\n      });\n      widget.description = description;\n      widget.source = widgetSource;\n      setForceUpdate(Date.now());\n    }\n    setEditDialogOpen(false);\n  }, [editor, widget, executeUpdateWidgetMutation, widgetSource]);\n\n  const closeEditDialog = useCallback(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    }\n    setEditDialogOpen(false);\n  }, [widget]);\n\n  // Delete widget\n  useEffect(() => {\n    if (!widget.id) {\n      return;\n    }\n    const err = () => {\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-delete-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n    };\n    if (resDeleteWidget.error) {\n      err();\n    } else if (resDeleteWidget.data) {\n      if (resDeleteWidget.data.deleteWidget) {\n        resDeleteWidget.data = null;\n        if (props.removeSelf) {\n          props.removeSelf();\n        }\n      } else {\n        err();\n      }\n    }\n  }, [resDeleteWidget, t, widget, props]);\n\n  useEffect(() => {\n    if (widget && previewElement) {\n      renderPreview(previewElement, widget.description);\n    }\n  }, [widget, previewElement, forceUpdate]);\n\n  useEffect(() => {\n    if (!widget) {\n      return;\n    }\n\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = EchoMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(widget.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      editor.focus();\n      setEditor(editor);\n\n      return () => {\n        setEditor(null);\n        setTextAreaElement(null);\n      };\n    }\n  }, [textAreaElement, widget]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (widget) {\n      setWidgetSource(widget.source);\n    } else {\n      setWidgetSource(\"\");\n    }\n  }, [widget]);\n\n  return (\n    <Box className={clsx(classes.topPanel)}>\n      <div\n        className={clsx(classes.preview, \"preview\")}\n        style={{ whiteSpace: \"normal\" }}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n\n      <Box className={clsx(classes.actionButtons)}>\n        {widget.source && (\n          <Tooltip title={t(\"general/Source\")}>\n            <Link\n              href={widget.source}\n              onClick={(event: any) => {\n                event.preventDefault();\n                if (widget.source.startsWith(window.location.origin)) {\n                  browserHistory.push(\n                    widget.source.replace(window.location.origin, \"\"),\n                  );\n                } else {\n                  window.open(widget.source, \"_blank\");\n                }\n              }}\n            >\n              <IconButton>\n                <LinkVariant></LinkVariant>\n              </IconButton>\n            </Link>\n          </Tooltip>\n        )}\n        <Tooltip title={widget.owner.username}>\n          <IconButton>\n            <Avatar\n              className={clsx(classes.avatar)}\n              variant={\"rounded\"}\n              src={\n                widget.owner.avatar ||\n                \"data:image/png;base64,\" +\n                  new Identicon(sha256(widget.owner.username), 80).toString()\n              }\n            ></Avatar>\n          </IconButton>\n        </Tooltip>\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Edit\")}>\n            <IconButton onClick={() => setEditDialogOpen(true)}>\n              <Pencil></Pencil>\n            </IconButton>\n          </Tooltip>\n        )}\n        {!props.isPreview && widget.canConfigure && (\n          <Tooltip title={t(\"general/Delete\")}>\n            <IconButton onClick={deleteWidget}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Tooltip>\n        )}\n      </Box>\n      <Dialog open={editorDialogOpen} onClose={closeEditDialog}>\n        <DialogContent>\n          <TextField\n            label={t(\"general/Source\")}\n            value={widgetSource}\n            onChange={(event) => setWidgetSource(event.target.value)}\n            fullWidth={true}\n          ></TextField>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <Typography variant={\"caption\"} color={\"textSecondary\"}>\n              {t(\"general/Description\")}\n            </Typography>\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton onClick={updateWidget}>\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton onClick={closeEditDialog}>\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n    </Box>\n  );\n}\n","import i18next from \"i18next\";\nimport { initReactI18next } from \"react-i18next\";\nimport { zhCN, enUS, zhTW, ja } from \"date-fns/locale\";\nimport { enUS as enUSLanguage } from \"./lang/enUS\";\nimport { zhCN as zhCNLanguage } from \"./lang/zhCN\";\nimport { zhTW as zhTWLanguage } from \"./lang/zhTW\";\nimport { jaJP as jaJPLanguage } from \"./lang/jaJP\";\n\ni18next.use(initReactI18next).init({\n  interpolation: {\n    // React already does escaping\n    escapeValue: false,\n  },\n  keySeparator: false, // we do not use keys in form messages.welcome\n  lng: localStorage.getItem(\"settings/language\") || \"en-US\", // \"en-US\" | \"zh-CN\"\n  fallbackLng: \"en-US\",\n  resources: {\n    \"en-US\": enUSLanguage,\n    \"zh-CN\": zhCNLanguage,\n    \"zh-TW\": zhTWLanguage,\n    \"ja-JP\": jaJPLanguage,\n  },\n});\n\nexport default i18next;\n\nexport function languageCodeToLanguageName(code: string) {\n  if (code === \"zh-CN\") {\n    return \"\";\n  } else if (code === \"zh-TW\") {\n    return \"\";\n  } else if (code === \"ja-JP\") {\n    return \"\";\n  } else {\n    return \"English\";\n  }\n}\n\nexport function languageCodeToDateFNSLocale(code: string) {\n  if (code === \"zh-CN\") {\n    return zhCN;\n  } else if (code === \"en-US\") {\n    return enUS;\n  } else if (code === \"zh-HK\") {\n    return zhTW;\n  } else if (code === \"ja-JP\") {\n    return ja;\n  } else {\n    return enUS;\n  }\n}\n","export const enUS = {\n  translation: {\n    \"title/Crossnote\": \"Crossnote\",\n    \"search/notes\": \"Search Notes\",\n    \"search/notebooks\": \"Search Notebooks\",\n    \"search/attachments\": \"Search Attachments\",\n\n    // Account\n    \"account/Anonymous\": \"Anonymous\",\n    \"account/anonymous\": \"anonymous\",\n\n    // General\n    \"general/go-back\": \"Go back\",\n    \"general/sending\": \"Sending\",\n    \"general/send\": \"Send\",\n    \"general/cancel\": \"Cancel\",\n    \"general/add\": \"Add\",\n    \"general/adding\": \"Adding\",\n    \"general/backed-up-at\": \"Backed up at\",\n    \"general/created-at\": \"Created at\",\n    \"general/modified-at\": \"Modified at\",\n    \"general/interacted-at\": \"Interacted at\",\n    \"general/date-created\": \"Date created\",\n    \"general/date-modified\": \"Date modified\",\n    \"general/date-interacted\": \"Date interacted\",\n    \"general/title\": \"Title\",\n    \"general/saved-at\": \"Saved at\",\n    \"general/loading\": \"Loading ...\",\n    \"general/loading-notifications\": \"Loading notifications ...\",\n    \"general/failed-to-set\": \"Failed to set\",\n    \"general/update\": \"Update\",\n    \"general/updated\": \"Updated\",\n    \"general/updating\": \"Updating\",\n    \"general/close\": \"Close\",\n    \"general/Note\": \"Note\",\n    \"general/notes\": \"Notes\",\n    \"general/Settings\": \"Settings\",\n    \"general/Collaborators\": \"Collaborators\",\n    \"general/collaborators\": \"collaborators\",\n    \"general/Backups\": \"Backups\",\n    \"general/backups\": \"backups\",\n    \"general/Discussion\": \"Discussion\",\n    \"general/discussion\": \"discussion\",\n    \"general/Notifications\": \"Notifications\",\n    \"general/Username\": \"Username\",\n    \"general/Email\": \"Email\",\n    \"general/Password\": \"Password\",\n    \"general/confirm-password\": \"Confirm password\",\n    \"general/Continue\": \"Continue\",\n    \"general/enter-username\": \"Enter username\",\n    \"general/echomd\": \"Edit\",\n    \"general/tags\": \"Tags\",\n    \"general/add-a-tag\": \"Add a tag\",\n    \"general/edit-note-alias\": \"Edit note alias\",\n    \"general/no-aliases\": \"No aliases\",\n    \"general/add-an-alias\": \"Add an alias\",\n    \"general/private\": \"Private\",\n    \"general/public\": \"Public\",\n    \"general/friends-only\": \"Friends only\",\n    \"general/anonymous\": \"Anonymous\",\n    \"general/onymous\": \"Onymous\",\n    \"general/Tag\": \"Tag\",\n    \"general/no-tags\": \"No tags\",\n    \"general/Directory\": \"Directory\",\n    \"general/Untitled\": \"Untitled\",\n    \"general/untitled\": \"untitled\",\n    \"general/Unknown\": \"Unknown\",\n    \"general/unknown\": \"unknown\",\n    \"general/Agree\": \"Agree\",\n    \"general/Disagree\": \"Disagree\",\n    \"general/Print\": \"Print\",\n    \"general/Share\": \"Share\",\n    \"Editor\": \"Editor\",\n    \"EDITOR\": \"EDITOR\",\n    \"Viewer\": \"Viewer\",\n    \"VIEWER\": \"VIEWER\",\n    \"Admin\": \"Admin\",\n    \"ADMIN\": \"ADMIN\",\n    \"ARCHIVED\": \"ARCHIVED\",\n    \"ATTACHED NOTES\": \"ATTACHED NOTES\",\n    \"DELETED\": \"DELETED\",\n    \"PINNED\": \"PINNED\",\n    \"OTHERS\": \"OTHERS\",\n    \"PUBLIC NOTES\": \"PUBLIC NOTES\",\n    \"FOLLOWINGS' NOTES\": \"FOLLOWINGS' NOTES\",\n    \"SHARED WITH ME\": \"SHARED WITH ME\",\n    \"BOOKMARKS\": \"BOOKMARKS\",\n    \"MY TAGS\": \"MY TAGS\",\n    \"general/enter-fullscreen-mode\": \"Enter fullscreen mode\",\n    \"general/enter-presentation-mode\": \"Enter presentation mode\",\n    \"general/math-preview\": \"Math Preview\",\n    \"general/this-note-is-empty\": \"This note is empty\",\n    \"general/this-notebook-is-empty\": \"This notebook is empty\",\n    \"general/nothing-here\": \"Nothing here\",\n    \"general/no-notes-found\": \"No more notes found\",\n    \"general/no-more-notebooks-found\": \"No more notebooks found\",\n    \"general/no-more-attachments-found\": \"No more attachments found\",\n    \"general/no-notifications-found\": \"No notifications found\",\n    \"general/clear-all\": \"Clear all\",\n    \"general/Save\": \"Save\",\n    \"general/Delete\": \"Delete\",\n    \"general/Follow\": \"Follow\",\n    \"general/Following\": \"Following\",\n    \"general/Unfollow\": \"Unfollow\",\n    \"general/my-notes\": \"My notes\",\n    \"general/public-notes\": \"Public notes\",\n    \"general/followings-notes\": \"Followings' notes\",\n    \"general/shared-with-me\": \"Shared with me\",\n    \"general/Bookmarks\": \"Bookmarks\",\n    \"general/Archive\": \"Archive\",\n    \"general/Trash\": \"Trash\",\n    \"general/new-note\": \"New note\",\n    \"general/new-attachment\": \"New attachment\",\n    \"general/profile-updated\": \"Profile updated\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"Audio\",\n    \"general/Video\": \"Video\",\n    \"general/source-url\": \"Source URL\",\n    \"general/sign-in\": \"Sign in\",\n    \"general/sign-up\": \"Sign up\",\n    \"general/Link\": \"Link\",\n    \"general/Upload\": \"Upload\",\n    \"general/Uploading\": \"Uploading\",\n    \"general/clicks\": \"clicks\",\n    \"general/Processing\": \"Processing...\",\n    \"general/please-wait\": \"Please wait...\",\n    \"general/please-sign-in-first\": \"Please sign in first\",\n    \"general/Languages\": \"Languages\",\n    \"general/track\": \"Track\",\n    \"general/Publish\": \"Publish\",\n    \"general/Unpublish\": \"Unpublish\",\n    \"general/Open\": \"Open\",\n    \"general/Download\": \"Download\",\n    \"general/Configure\": \"Configure\",\n    \"general/Update\": \"Update\",\n    \"general/empty\": \"empty\",\n    \"general/Explore\": \"Explore\",\n    \"general/Notebooks\": \"Notebooks\",\n    \"general/add-a-notebook\": \"Add a notebook\",\n    \"general/add-a-note\": \"Add a note\",\n    \"general/add-an-attachment\": \"Add an attachment\",\n    \"general/configure-the-notebook\": \"Configure the notebook\",\n    \"general/publish-your-notebook\": \"Publish your notebook\",\n    \"general/notebook-name\": \"Notebook name\",\n    \"general/git-repository\": \"Git repository\",\n    \"general/clone-a-git-repository\": \"Clone a Git repository\",\n    \"general/optional\": \"optional\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"branch\",\n    \"general/remember-username-and-password\": \"Remember credentials\",\n    \"general/stored-locally\": \"stored locally\",\n    \"general/cors-proxy\": \"CORS proxy\",\n    \"general/why-cors-proxy\": \"Why do we need CORS proxy\",\n    \"general/today\": \"Today\",\n    \"general/todo\": \"Todo\",\n    \"general/graph-view\": \"Graph view\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"Tagged\",\n    \"general/untagged\": \"Untagged\",\n    \"general/encrypt\": \"Encrypt\",\n    \"general/encrypted\": \"Encrypted\",\n    \"general/decrypt\": \"Decrypt\",\n    \"general/conflicted\": \"Conflicted\",\n    \"general/attachments\": \"Attachments\",\n    \"general/Pin\": \"Pin\",\n    \"general/Encryption\": \"Encryption\",\n    \"general/Fullscreen\": \"Fullscreen\",\n    \"general/change-file-path\": \"Change file path\",\n    \"general/create-a-copy\": \"Create a copy\",\n    \"general/restore-checkout\": \"Restore (git checkout)\",\n    \"general/download-pull\": \"Download (git pull)\",\n    \"general/upload-push\": \"Upload (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"Disable the encryption on this note\",\n    \"general/encrypt-this-note-with-password\":\n      \"Encrypt this note with password\",\n    \"general/disable-encryption\": \"Disable encryption\",\n    \"general/decrypt-this-note\": \"Decrypt this note\",\n    \"general/upload-the-profile\": \"Upload profile\",\n    \"general/commit-message\": \"Commit message\",\n    \"general/upload-notebook\": \"Upload the notebook\",\n    \"general/Comments\": \"Comments\",\n    \"general/Source\": \"Source\",\n    \"general/Description\": \"Description\",\n    \"general/Edit\": \"Edit\",\n    \"general/Rename\": \"Rename\",\n    \"general/rename-directory\": \"Rename directory\",\n    \"general/delete-directory\": \"Delete directory\",\n    \"general/rename-tag\": \"Rename tag\",\n    \"general/delete-tag\": \"Delete tag\",\n    \"general/notebook-updates-found\": \"Notebook updates found\",\n    \"general/update-the-notebook\": \"Update the notebook\",\n    \"general/check-notebook-updates-periodically\":\n      \"Check notebook updates periodically\",\n    \"general/minutes\": \"minute(s)\",\n    \"general/hard-reset\": \"Hard reset\",\n    \"general/Default\": \"Default\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"Desc\",\n    \"general/Asc\": \"Asc\",\n    \"general/pin-the-note\": \"Pin the note\",\n    \"general/unpin-the-note\": \"Unpin the note\",\n    \"general/add-to-quick-access\": \"Add to quick access\",\n    \"general/remove-from-quick-access\": \"Remove from quick access\",\n    \"general/open-folder\": \"Open Folder\",\n    \"general/open-a-local-folder\": \"Open a Local Folder\",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \"Your browser doesn't support to open local folder\",\n    \"general/refresh\": \"Refresh\",\n    \"general/welcome-back-to-crossnote\": \"Welcome back to Crossnote\",\n    \"general/continue\": \"Continue\",\n    \"general/reference(s)\": \"reference(s)\",\n    \"general/References\": \"References\",\n\n    // Error\n    \"error/authentication-failed\": \"Authentication failed\",\n    \"error/failed-to-upload-notebook\": \"Failed to upload notebook\",\n    \"error/failed-to-download-notebook\": \"Failed to download notebook\",\n    \"error/notebook-already-exists\": \"Notebook already exists\",\n    \"error/invalid-git-url-prefix\": \"Invalid git URL prefix\",\n    \"error/please-resolve-conflicts\": \"Please resolve conflicts first\",\n    \"error/failed-to-disable-encryption\": \"Failed to disable encryption\",\n    \"error/decryption-failed\": \"Decryption failed\",\n    \"error/failed-to-change-file-path\": \"Failed to change file path\",\n    \"error/failed-to-create-widget\": \"Failed to create widget\",\n    \"error/failed-to-load-widget\": \"Failed to load widget\",\n    \"error/failed-to-update-the-notebook\": \"Failed to update the notebook\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"Failed to unpublish the notebook\",\n    \"error/failed-to-publish-notebook\": \"Failed to publish the notebook\",\n\n    // Success\n    \"success/notebook-uploaded\": \"Notebook uploaded\",\n    \"success/notebook-downloaded\": \"Notebook downloaded\",\n\n    // Info\n    \"info/downloading-notebook\": \"Downloading notebook\",\n\n    // Note\n    \"note/unarchive-note\": \"Unarchive note\",\n    \"note/archive-note\": \"Archive note\",\n    \"note/delete-forever\": \"Delete forever\",\n    \"note/delete-note\": \"Delete note\",\n    \"note/restore-note\": \"Restore note\",\n    \"note/report-note\": \"Report note\",\n    \"note/open-in-crossnote-website\": \"Open in Crossnote website\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"Failed to send suggestion\",\n    \"note-tags/suggestion-sent\": \"Suggestion sent\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"Suggest a tag to this note\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"Follow a tag\",\n\n    // Notifications\n    \"notifications/refresh\": \"Refresh to see new notifications\",\n    \"notifications/new-version-available\":\n      \"A new version of Crossnote is available!\",\n\n    // Settings\n    \"settings/about-this-project\": \"About this project\",\n    \"settings/issues-and-feature-requests\":\n      \"Found issues or have feature requests?\",\n    \"settings/uploading-cover-image\": \"Uploading cover image\",\n    \"settings/upload-image-failure\": \"Failed to upload image\",\n    \"settings/Cover\": \"Cover\",\n    \"settings/enter-cover-image-url\": \"Enter cover image URL\",\n    \"settings/upload-image\": \"Upload image\",\n    \"settings/Avatar\": \"Avatar\",\n    \"settings/enter-avatar-image-url\": \"Enter avatar image URL\",\n    \"settings/Name\": \"Name\",\n    \"settings/enter-name\": \"Enter your Name (this is not your username)\",\n    \"settings/editor-cursor-color\": \"Editor cursor color\",\n    \"settings/default-editor-mode\": \"Default editor mode\",\n    \"settings/hello\": \"Hello, \",\n    \"settings/world\": \"world!\",\n    \"settings/linked-with-github-account\": \"Linked with GitHub account\",\n    \"settings/link-with-github-account\": \"Link with GitHub account\",\n    \"settings/log-out\": \"Log out\",\n    \"settings/author-name\": \"Author name\",\n    \"settings/author-email\": \"Author email\",\n    \"settings/theme\": \"Theme\",\n    \"settings/created-cloud-widgets-count\": \"Created cloud widgets count\",\n    \"settings/key-map\": \"Key Map\",\n\n    // Preview\n    \"preview/attach-a-note\": \"Attach a note\",\n    \"preview/crossnote-untitled\": \"Crossnote - Untitled\",\n    \"preview/edit-this-note\": \"Edit this note\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"followings\",\n    \"profile-card/followers\": \"followers\",\n    \"profile-card/Followings\": \"Followings\",\n    \"profile-card/Followers\": \"Followers\",\n    \"profile-card/notes\": \"notes\",\n    \"profile-card/follow-user-failure\": \"Failed to follow user\",\n    \"profile-card/followed-user\": \"Followed user\",\n    \"profile-card/unfollow-user-failure\": \"Failed to unfollow user\",\n    \"profile-card/unfollowed-user\": \"Unfollowed user\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"Show attached notes\",\n    \"interaction-panel/add-comment\": \"Add comment\",\n    \"interaction-panel/add-reaction\": \"Add reaction\",\n\n    // Editor\n    \"editor/loading-your-note\": \"Loading your note...\",\n    \"editor/sync-failure\": \"Failed to sync... Please refresh your page\",\n    \"editor/saving\": \"Saving...\",\n    \"editor/save-failure\": \"Failed to save\",\n    \"editor/saved\": \"Saved\",\n    \"editor/update-note-failure\": \"Failed to update note\",\n    \"editor/placeholder\": \"#  Hi  Type '/' for commands\",\n    \"editor/ln\": \"Ln\",\n    \"editor/col\": \"Col\",\n    \"editor/split-horizontally\": \"Split horizontally\",\n    \"editor/split-vertically\": \"Split vertically\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"Allow readers to suggest note tags\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"Allow readers to attach notes under this note\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"Inherit parent note collaborators list\",\n    \"editor/note-control/note-visibility-hint\":\n      \"All collaborators will be able to see this note\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"Applies to you and collaborators that can edit and admin\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"Applies to anyone that can view this note\",\n    \"editor/note-control/enter-parent-note-id\": \"Enter parent note ID\",\n    \"editor/note-control/attach-note-failure\": \"Failed to attach note\",\n    \"editor/note-control/unattach-note-failure\": \"Failed to unattach note\",\n    \"editor/collaborator-hint\": \" - note will be visible to them\",\n    \"editor/shareable-link-hint\":\n      \"people with the link can view/edit this note with no need of login\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"Create backup\",\n    \"editor/backups-control/delete-this-backup\": \"Delete this backup\",\n    \"editor/backups-control/create-backup-failure\": \"Failed to create backup\",\n    \"editor/backups-control/backup-created\": \"Backup created\",\n    \"editor/backups-control/delete-backup-failure\": \"Failed to delete backup\",\n    \"editor/backups-control/backup-deleted\": \"Backup deleted\",\n    \"editor/backups-control/cloud-version\": \"Cloud version\",\n    \"editor/backups-control/backup-name\": \"Backup name\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"Failed to set collaborator role\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"Failed to add collaborator\",\n    \"editor/collaborators-control/collaborator-removed\": \"Collaborator removed\",\n    \"editor/collaborators-control/collaborator-added\": \"Collaborator added\",\n    \"editor/collaborators-control/can-view\": \"Can view\",\n    \"editor/collaborators-control/can-edit\": \"Can edit\",\n    \"editor/collaborators-control/can-administrate\": \"Can administrate\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"Insert image\",\n    \"editor/toolbar/upload-local-images\": \"Upload local images\",\n    \"editor/toolbar/capture-webpage\": \"Capture the whole webpage\",\n    \"editor/toolbar/insert-clock\": \"Insert clock\",\n    \"editor/toolbar/insert-emoji\": \"Insert emoji\",\n    \"editor/toolbar/insert-media\": \"Insert media\",\n    \"editor/toolbar/insert-audio\": \"Insert Audio\",\n    \"editor/toolbar/netease-music\": \"Netease Music\",\n    \"editor/toolbar/insert-video\": \"Insert video\",\n    \"editor/toolbar/insert-youtube\": \"Insert Youtube\",\n    \"editor/toolbar/insert-bilibili\": \"Insert Bilibili\",\n    \"editor/toolbar/insert-slide\": \"Insert slide\",\n    \"editor/toolbar/insert-ocr\": \"Insert OCR\",\n    \"editor/toolbar/insert-kanban\": \"Insert Kanban\",\n    \"editor/toolbar/insert-abc-notation\": \"Insert ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"Insert header 1\",\n    \"editor/toolbar/insert-header-2\": \"Insert header 2\",\n    \"editor/toolbar/insert-header-3\": \"Insert header 3\",\n    \"editor/toolbar/insert-header-4\": \"Insert header 4\",\n    \"editor/toolbar/insert-header-5\": \"Insert header 5\",\n    \"editor/toolbar/insert-header-6\": \"Insert header 6\",\n    \"editor/toolbar/bold\": \"Bold\",\n    \"editor/toolbar/italic\": \"Italic\",\n    \"editor/toolbar/strikethrough\": \"Strikethrough\",\n    \"editor/toolbar/insert-inline-code\": \"Insert inline code\",\n    \"editor/toolbar/insert-blockquote\": \"Insert blockquote\",\n    \"editor/toolbar/insert-unordered-list\": \"Insert unordered list\",\n    \"editor/toolbar/insert-ordered-list\": \"Insert ordered list\",\n    \"editor/toolbar/insert-link\": \"Insert link\",\n    \"editor/toolbar/insert-table\": \"Insert table\",\n    \"editor/toolbar/insert-comment\": \"Insert crossnote cloud comment widget\",\n    \"editor/toolbar/insert-github-gist\": \"Insert GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"Tag added\",\n    \"editor/note-control/tag-deleted\": \"Tag deleted\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"Failed to set note visibility\",\n    \"editor/note-control/note-visibility-updated\": \"Note visibility updated\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"Failed to set author visibility\",\n    \"editor/note-control/author-visibility-updated\":\n      \"Author visibility updated\",\n    \"editor/note-control/editor-mode\": \"Editor mode\",\n    \"editor/note-control/source-code\": \"Source code\",\n    \"editor/note-control/preview\": \"Preview\",\n    \"editor/note-control/split-view\": \"Split view\",\n    \"editor/note-control/pin-preview\": \"Pin preview on the side\",\n    \"editor/note-control/display-modification-records\":\n      \"Display modification records\",\n    \"editor/note-control/note-visibility\": \"Note visibility\",\n    \"editor/note-control/author-visibility\": \"Author visibility\",\n    \"editor/note-control/shareable-link\": \"Shareable link\",\n    \"editor/note-control/copy-to-clipboard\": \"Copy to clipboard\",\n    \"editor/note-control/link-to-preview\": \"Link to preview\",\n    \"editor/note-control/link-to-editor\": \"Link to editor\",\n    \"editor/note-control/attach-to-note\": \"Attach to note\",\n    \"editor/note-control/source-added\": \"URL added\",\n    \"editor/note-control/source-deleted\": \"URL deleted\",\n    \"editor/note-control/invalid-note-source\": \"Invalid URL\",\n    \"editor/note-control/add-note-source\": \"Add related URLs\",\n    \"editor/note-control/note-source-hint\":\n      \"Notes on the same URL will be grouped together\",\n    \"editor/note-control/enter-note-source\": \"Enter URL\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"This note is private\",\n    \"avatar-panel/this-note-is-public\": \"This note is visible to public\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"This note is only visible to friends\",\n    \"avatar-panel/you-are-anonymous\": \"You are anonymous\",\n\n    // FileExporter\n    \"file-exporter/name\": \"File exporter\",\n    \"file-exporter/orientation\": \"Orientation\",\n    \"file-exporter/portrait\": \"portrait\",\n    \"file-exporter/landscape\": \"landscape\",\n    \"file-exporter/paper-size\": \"Paper size\",\n    \"file-exporter/unit\": \"Unit\",\n    \"file-exporter/margin-top\": \"Margin top\",\n    \"file-exporter/margin-bottom\": \"Margin bottom\",\n    \"file-exporter/margin-left\": \"Margin left\",\n    \"file-exporter/margin-right\": \"Margin right\",\n\n    // Utils\n    \"utils/uploading-image\": \"Uploading image...\",\n    \"utils/upload-image-failure\": \"Failed to upload image\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"Replies to you in\",\n    \"notification/'s-note\": \"'s note \",\n    // * NoteReactionNotification\n    \"notification/added\": \"Added\",\n    \"notification/to-your-note\": \"to your note\",\n    \"notification/add-you-as\": \"Added you as\",\n    \"notification/of-note\": \"of note\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"Failed to add tag\",\n    \"notification/suggested-to-add-tag\": \"Suggested to add tag\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"Started following you\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"Bookmarked your note\",\n    \"notification/view-more-notifications\": \"View more notifications\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \"Please wait ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"Failed to link with GitHub account\",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"Failed to sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in\":\n      \"It seems to be the first time you sign in with GitHub account\",\n    \"github-oauth/first-time-sign-in-small\":\n      \"Please finish the registeration below\",\n\n    // Widgets\n    \"widget/autoplay\": \"autoplay\",\n    \"widget/controls\": \"controls\",\n    \"widget/loop\": \"loop\",\n    \"widget/muted\": \"muted\",\n    \"widget/creating-widget\": \"Creating widget\",\n    \"widget/loading-widget\": \"Loading widget\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"Thanks sm.ms for offering free image hosting service.\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"Your browser does not support the audio element.\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"Enter audio source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"Your browser does not support the video element\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"Error: Only supported https://www.bilibili.com/video/av79126732 like URL\",\n    \"widget/crossnote.youtube/error_message\":\n      \"Error: Only supported https://www.youtube.com/watch?v=MmB9b5njVbA like URL\",\n    \"widget/crossnote.auth/welcome\": \"Welcome to Crossnote\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \"Doesn't have an account? Let's create one !\",\n    \"widget/crossnote.auth/forgot_password\": \"Forgot your password ?\",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"Failed to send verification code\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \"Verification code has been sent to \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"Failed to reset password\",\n    \"widget/crossnote.auth/password_reset\": \"Your password has been reset\",\n    \"widget/crossnote.auth/password-mismatch\": \"Passwords mismatch\",\n    \"widget/crossnote.auth/hello\": \"Hello, \",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"Enter the verification code\",\n    \"widget/crossnote.auth/get-code\": \"Get code\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"Sign in with GitHub account\",\n    \"widget/crossnote.auth/already-have-an-account\": \"Already have an account?\",\n    \"widget/crossnote.auth/reset-password\": \"Reset password\",\n    \"widget/crossnote.auth/Or\": \"Or\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili video URL\",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"Enter the Bilibili video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/image-helper\": \"Image helper\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"Enter image URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"Click here to browse image file\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"Enter Netease Music song number ID.\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"Enter video source URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.video/poster-url\": \"Poster URL (optional)\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"Enter poster URL here.\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube video URL\",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"Enter the Youtube video URL here, then press 'Enter' to insert.\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"Local image\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"Recognize text in languages\",\n    \"widget/crossnote.ocr/start-ocr\": \"Start OCR\",\n    \"widget/crossnote.ocr/extra-settings\": \"Extra settings\",\n    \"widget/crossnote.ocr/grayscale\": \"Grayscale\",\n    \"widget/crossnote.kanban/add-column\": \"Add new column\",\n    \"widget/crossnote.github_gist/title\": \"Embed a GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"Enter GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"Reply to this user\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"Add reaction to this comment\",\n    \"widget/crossnote.comment/edit-this-message\": \"Edit this comment\",\n    \"widget/crossnote.comment/modified-comment\": \"modified comment\",\n    \"widget/crossnote.comment/post-comment-failure\": \"Failed to post comment\",\n    \"widget/crossnote.comment/unsubscribe-info\":\n      \"Unsubscribe from the comments\",\n    \"widget/crossnote.comment/subscribe-info\": \"Subscribe to the comments\",\n    \"widget/crossnote.comment/view-more-comments\": \"View more comments\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"Are you sure to delete this note?\",\n    \"delete-note-dialog/subtitle\": \"You can't undo this action.\",\n    \"delete-directory-dialog/title\": \"Are you sure to delete this directory?\",\n    \"delete-directory-dialog/subtitle\":\n      \"All the child directories and notes will also be deleted. You can't undo this action.\",\n    \"delete-tag-dialog/title\": \"Are you sure to delete this tag?\",\n    \"delete-tag-dialog/subtitle\":\n      \"All the child tags will also be deleted. You can't undo this action.\",\n    \"add-notebook-dialog/disclaimer\":\n      \"Notebook data will only be stored locally in browser for offline uses. We won't upload any notebook data to our server.\",\n    \"edit-image-dialog/title\": \"Edit the image\",\n    \"edit-image-dialog/image-url\": \"image URL\",\n    \"edit-image-dialog/image-title\": \"image title\",\n    \"edit-image-dialog/image-alt-text\": \"image alt text\",\n    \"language-selector-dialog/subtitle\": \"Please choose the preferred language\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"Add to Home Screen\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"This website has app functionality. Add it to your home screen to use it in fullscreen and while offline.\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) Press the 'Share' button\",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) Press 'Add to Home Screen'\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"We currently only support publishing the notebook from a public repository on GitHub, GitLab, Gitea, or Gitea. We only collect README.md file data.\",\n    \"publish-notebook/disclaimer-2\":\n      \"Please declare the ownership of your notebook by adding the following front-matter to README.md in remote repository:\",\n\n    // git\n    \"git/status/ignored\": \"ignored\",\n    \"git/status/unmodified\": \"unmodified\",\n    \"git/status/*modified\": \"*modified\",\n    \"git/status/*deleted\": \"*deleted\",\n    \"git/status/*added\": \"*added\",\n    \"git/status/absent\": \"absent\",\n    \"git/status/modified\": \"modified\",\n    \"git/status/deleted\": \"deleted\",\n    \"git/status/added\": \"added\",\n    \"git/status/*unmodified\": \"*unmodified\",\n    \"git/status/*absent\": \"*absent\",\n    \"git/status/*undeleted\": \"*undeleted\",\n    \"git/status/*undeletemodified\": \"*undeletemodified\",\n    \"git/status/\": \"\",\n\n    // graph view\n    \"graph-view/node\": \"Node(s)\",\n    \"graph-view/link\": \"Link(s)\",\n  },\n};\n","export const zhCN = {\n  translation: {\n    \"title/Crossnote\": \"\",\n    \"search/notes\": \"\",\n    \"search/notebooks\": \"\",\n    \"search/attachments\": \"\",\n\n    // Account\n    \"account/Anonymous\": \"\",\n    \"account/anonymous\": \"\",\n\n    // General\n    \"general/go-back\": \"\",\n    \"general/sending\": \"\",\n    \"general/send\": \"\",\n    \"general/cancel\": \"\",\n    \"general/add\": \"\",\n    \"general/adding\": \"\",\n    \"general/backed-up-at\": \"\",\n    \"general/created-at\": \"\",\n    \"general/modified-at\": \"\",\n    \"general/interacted-at\": \"\",\n    \"general/date-created\": \"\",\n    \"general/date-modified\": \"\",\n    \"general/date-interacted\": \"\",\n    \"general/title\": \"\",\n    \"general/saved-at\": \"\",\n    \"general/loading\": \" ...\",\n    \"general/loading-notifications\": \" ...\",\n    \"general/failed-to-set\": \"\",\n    \"general/update\": \"\",\n    \"general/updated\": \"\",\n    \"general/updating\": \"\",\n    \"general/close\": \"\",\n    \"general/Note\": \"\",\n    \"general/notes\": \"\",\n    \"general/Settings\": \"\",\n    \"general/Collaborators\": \"\",\n    \"general/collaborators\": \"\",\n    \"general/Backups\": \"\",\n    \"general/backups\": \"\",\n    \"general/Discussion\": \"\",\n    \"general/discussion\": \"\",\n    \"general/Notifications\": \"\",\n    \"general/Username\": \"\",\n    \"general/Email\": \"\",\n    \"general/Password\": \"\",\n    \"general/confirm-password\": \"\",\n    \"general/Continue\": \"\",\n    \"general/enter-username\": \"\",\n    \"general/echomd\": \"\",\n    \"general/tags\": \"\",\n    \"general/add-a-tag\": \"\",\n    \"general/edit-note-alias\": \"\",\n    \"general/no-aliases\": \"\",\n    \"general/add-an-alias\": \"\",\n    \"general/private\": \"\",\n    \"general/public\": \"\",\n    \"general/friends-only\": \"\",\n    \"general/anonymous\": \"\",\n    \"general/onymous\": \"\",\n    \"general/Tag\": \"\",\n    \"general/no-tags\": \"\",\n    \"general/Directory\": \"\",\n    \"general/Untitled\": \"\",\n    \"general/untitled\": \"\",\n    \"general/Unknown\": \"\",\n    \"general/unknown\": \"\",\n    \"general/Agree\": \"\",\n    \"general/Disagree\": \"\",\n    \"general/Print\": \"\",\n    \"general/Share\": \"\",\n    \"Editor\": \"\",\n    \"EDITOR\": \"\",\n    \"Viewer\": \"\",\n    \"VIEWER\": \"\",\n    \"Admin\": \"\",\n    \"ADMIN\": \"\",\n    \"ARCHIVED\": \"\",\n    \"ATTACHED NOTES\": \"\",\n    \"DELETED\": \"\",\n    \"PINNED\": \"\",\n    \"OTHERS\": \"\",\n    \"PUBLIC NOTES\": \"\",\n    \"FOLLOWINGS' NOTES\": \"\",\n    \"SHARED WITH ME\": \"\",\n    \"BOOKMARKS\": \"\",\n    \"MY TAGS\": \"\",\n    \"general/enter-fullscreen-mode\": \"\",\n    \"general/enter-presentation-mode\": \"\",\n    \"general/math-preview\": \"\",\n    \"general/this-note-is-empty\": \"\",\n    \"general/this-notebook-is-empty\": \"\",\n    \"general/nothing-here\": \"\",\n    \"general/no-notes-found\": \"\",\n    \"general/no-more-attachments-found\": \"\",\n    \"general/no-more-notebooks-found\": \"\",\n    \"general/no-notifications-found\": \"\",\n    \"general/clear-all\": \"\",\n    \"general/Save\": \"\",\n    \"general/Delete\": \"\",\n    \"general/Follow\": \"\",\n    \"general/Following\": \"\",\n    \"general/Unfollow\": \"\",\n    \"general/my-notes\": \"\",\n    \"general/public-notes\": \"\",\n    \"general/followings-notes\": \"\",\n    \"general/shared-with-me\": \"\",\n    \"general/Bookmarks\": \"\",\n    \"general/Archive\": \"\",\n    \"general/Trash\": \"\",\n    \"general/new-note\": \"\",\n    \"general/new-attachment\": \"\",\n    \"general/profile-updated\": \"\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"\",\n    \"general/Video\": \"\",\n    \"general/source-url\": \"\",\n    \"general/sign-in\": \"\",\n    \"general/sign-up\": \"\",\n    \"general/Link\": \"\",\n    \"general/Upload\": \"\",\n    \"general/Uploading\": \"\",\n    \"general/clicks\": \"\",\n    \"general/Processing\": \"...\",\n    \"general/please-wait\": \"...\",\n    \"general/please-sign-in-first\": \"\",\n    \"general/Languages\": \"\",\n    \"general/track\": \"\",\n    \"general/Publish\": \"\",\n    \"general/Unpublish\": \"\",\n    \"general/Open\": \"\",\n    \"general/Download\": \"\",\n    \"general/Configure\": \"\",\n    \"general/Update\": \"\",\n    \"general/empty\": \"\",\n    \"general/Explore\": \"\",\n    \"general/Notebooks\": \"\",\n    \"general/add-a-notebook\": \"\",\n    \"general/add-a-note\": \"\",\n    \"general/add-an-attachment\": \"\",\n    \"general/configure-the-notebook\": \"\",\n    \"general/publish-your-notebook\": \"\",\n    \"general/notebook-name\": \"\",\n    \"general/git-repository\": \"git \",\n    \"general/clone-a-git-repository\": \" Git \",\n    \"general/optional\": \"\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"\",\n    \"general/remember-username-and-password\": \"\",\n    \"general/stored-locally\": \"\",\n    \"general/cors-proxy\": \"CORS \",\n    \"general/why-cors-proxy\": \" CORS \",\n    \"general/today\": \"\",\n    \"general/todo\": \"\",\n    \"general/graph-view\": \"\",\n    \"general/wiki\": \"\",\n    \"general/tagged\": \"\",\n    \"general/untagged\": \"\",\n    \"general/encrypt\": \"\",\n    \"general/encrypted\": \"\",\n    \"general/decrypt\": \"\",\n    \"general/conflicted\": \"\",\n    \"general/attachments\": \"\",\n    \"general/Pin\": \"\",\n    \"general/Encryption\": \"\",\n    \"general/Fullscreen\": \"\",\n    \"general/change-file-path\": \"\",\n    \"general/create-a-copy\": \"\",\n    \"general/restore-checkout\": \" (git checkout)\",\n    \"general/download-pull\": \" (git pull)\",\n    \"general/upload-push\": \" (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"\",\n    \"general/encrypt-this-note-with-password\": \"\",\n    \"general/disable-encryption\": \"\",\n    \"general/decrypt-this-note\": \"\",\n    \"general/upload-the-profile\": \"\",\n    \"general/commit-message\": \"\",\n    \"general/upload-notebook\": \"\",\n    \"general/Comments\": \"\",\n    \"general/Source\": \"\",\n    \"general/Description\": \"\",\n    \"general/Edit\": \"\",\n    \"general/Rename\": \"\",\n    \"general/rename-directory\": \"\",\n    \"general/delete-directory\": \"\",\n    \"general/rename-tag\": \"\",\n    \"general/delete-tag\": \"\",\n    \"general/notebook-updates-found\": \"\",\n    \"general/update-the-notebook\": \"\",\n    \"general/check-notebook-updates-periodically\": \"\",\n    \"general/minutes\": \"\",\n    \"general/hard-reset\": \"\",\n    \"general/Default\": \"\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"\",\n    \"general/Asc\": \"\",\n    \"general/pin-the-note\": \"\",\n    \"general/unpin-the-note\": \"\",\n    \"general/add-to-quick-access\": \"\",\n    \"general/remove-from-quick-access\": \"\",\n    \"general/open-folder\": \"\",\n    \"general/open-a-local-folder\": \"\",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \"\",\n    \"general/refresh\": \"\",\n    \"general/welcome-back-to-crossnote\": \"\",\n    \"general/continue\": \"\",\n    \"general/reference(s)\": \"\",\n    \"general/References\": \"\",\n\n    // Error\n    \"error/authentication-failed\": \"\",\n    \"error/failed-to-upload-notebook\": \"\",\n    \"error/failed-to-download-notebook\": \"\",\n    \"error/notebook-already-exists\": \"\",\n    \"error/invalid-git-url-prefix\": \" git URL \",\n    \"error/please-resolve-conflicts\": \"\",\n    \"error/failed-to-disable-encryption\": \"\",\n    \"error/decryption-failed\": \"\",\n    \"error/failed-to-change-file-path\": \"\",\n    \"error/failed-to-create-widget\": \"\",\n    \"error/failed-to-load-widget\": \"\",\n    \"error/failed-to-update-the-notebook\": \"\",\n    \"error/failed-to-unpublish-the-notebook\": \"\",\n    \"error/failed-to-publish-notebook\": \"\",\n\n    // Success\n    \"success/notebook-uploaded\": \"\",\n    \"success/notebook-downloaded\": \"\",\n\n    // Info\n    \"info/downloading-notebook\": \"\",\n\n    // Note\n    \"note/unarchive-note\": \"\",\n    \"note/archive-note\": \"\",\n    \"note/delete-forever\": \"\",\n    \"note/delete-note\": \"\",\n    \"note/restore-note\": \"\",\n    \"note/report-note\": \"\",\n    \"note/open-in-crossnote-website\": \"\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"\",\n    \"note-tags/suggestion-sent\": \"\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"\",\n\n    // Notifications\n    \"notifications/refresh\": \"\",\n    \"notifications/new-version-available\": \"\",\n\n    // Settings\n    \"settings/about-this-project\": \"\",\n    \"settings/issues-and-feature-requests\": \"\",\n    \"settings/uploading-cover-image\": \"\",\n    \"settings/upload-image-failure\": \"\",\n    \"settings/Cover\": \"\",\n    \"settings/enter-cover-image-url\": \"\",\n    \"settings/upload-image\": \"\",\n    \"settings/Avatar\": \"\",\n    \"settings/enter-avatar-image-url\": \"\",\n    \"settings/Name\": \"\",\n    \"settings/enter-name\": \"\",\n    \"settings/editor-cursor-color\": \"\",\n    \"settings/default-editor-mode\": \"\",\n    \"settings/hello\": \"\",\n    \"settings/world\": \"\",\n    \"settings/linked-with-github-account\": \" GitHub \",\n    \"settings/link-with-github-account\": \" GitHub \",\n    \"settings/log-out\": \"\",\n    \"settings/author-name\": \"\",\n    \"settings/author-email\": \"\",\n    \"settings/theme\": \"\",\n    \"settings/created-cloud-widgets-count\": \"\",\n    \"settings/key-map\": \"\",\n\n    // Preview\n    \"preview/attach-a-note\": \"\",\n    \"preview/crossnote-untitled\": \" - \",\n    \"preview/edit-this-note\": \"\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"\",\n    \"profile-card/followers\": \"\",\n    \"profile-card/Followings\": \"\",\n    \"profile-card/Followers\": \"\",\n    \"profile-card/notes\": \"\",\n    \"profile-card/follow-user-failure\": \"\",\n    \"profile-card/followed-user\": \"\",\n    \"profile-card/unfollow-user-failure\": \"\",\n    \"profile-card/unfollowed-user\": \"\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"\",\n    \"interaction-panel/add-comment\": \"\",\n    \"interaction-panel/add-reaction\": \"\",\n\n    // Editor\n    \"editor/loading-your-note\": \"...\",\n    \"editor/sync-failure\": \"... \",\n    \"editor/saving\": \"...\",\n    \"editor/save-failure\": \"\",\n    \"editor/saved\": \"\",\n    \"editor/update-note-failure\": \"\",\n    \"editor/placeholder\": \"#     '/' \",\n    \"editor/ln\": \"\",\n    \"editor/col\": \"\",\n    \"editor/split-horizontally\": \"\",\n    \"editor/split-vertically\": \"\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"\",\n    \"editor/note-control/note-visibility-hint\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"\",\n    \"editor/note-control/enter-parent-note-id\": \" ID\",\n    \"editor/note-control/attach-note-failure\": \"\",\n    \"editor/note-control/unattach-note-failure\": \"\",\n    \"editor/collaborator-hint\": \" - \",\n    \"editor/shareable-link-hint\":\n      \"/\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"\",\n    \"editor/backups-control/delete-this-backup\": \"\",\n    \"editor/backups-control/create-backup-failure\": \"\",\n    \"editor/backups-control/backup-created\": \"\",\n    \"editor/backups-control/delete-backup-failure\": \"\",\n    \"editor/backups-control/backup-deleted\": \"\",\n    \"editor/backups-control/cloud-version\": \"\",\n    \"editor/backups-control/backup-name\": \"\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"\",\n    \"editor/collaborators-control/collaborator-removed\": \"\",\n    \"editor/collaborators-control/collaborator-added\": \"\",\n    \"editor/collaborators-control/can-view\": \"\",\n    \"editor/collaborators-control/can-edit\": \"\",\n    \"editor/collaborators-control/can-administrate\": \"\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"\",\n    \"editor/toolbar/upload-local-images\": \"\",\n    \"editor/toolbar/capture-webpage\": \"\",\n    \"editor/toolbar/insert-clock\": \"\",\n    \"editor/toolbar/insert-emoji\": \" Emoji\",\n    \"editor/toolbar/insert-media\": \"\",\n    \"editor/toolbar/insert-audio\": \"\",\n    \"editor/toolbar/netease-music\": \"\",\n    \"editor/toolbar/insert-video\": \"\",\n    \"editor/toolbar/insert-youtube\": \" Youtube\",\n    \"editor/toolbar/insert-bilibili\": \" Bilibili\",\n    \"editor/toolbar/insert-slide\": \"\",\n    \"editor/toolbar/insert-ocr\": \" OCR\",\n    \"editor/toolbar/insert-kanban\": \"\",\n    \"editor/toolbar/insert-abc-notation\": \" ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"\",\n    \"editor/toolbar/insert-header-2\": \"\",\n    \"editor/toolbar/insert-header-3\": \"\",\n    \"editor/toolbar/insert-header-4\": \"\",\n    \"editor/toolbar/insert-header-5\": \"\",\n    \"editor/toolbar/insert-header-6\": \"\",\n    \"editor/toolbar/bold\": \"\",\n    \"editor/toolbar/italic\": \"\",\n    \"editor/toolbar/strikethrough\": \"\",\n    \"editor/toolbar/insert-inline-code\": \"\",\n    \"editor/toolbar/insert-blockquote\": \"\",\n    \"editor/toolbar/insert-unordered-list\": \"\",\n    \"editor/toolbar/insert-ordered-list\": \"\",\n    \"editor/toolbar/insert-link\": \"\",\n    \"editor/toolbar/insert-table\": \"\",\n    \"editor/toolbar/insert-comment\": \"\",\n    \"editor/toolbar/insert-github-gist\": \" GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"\",\n    \"editor/note-control/tag-deleted\": \"\",\n    \"editor/note-control/set-note-visibility-failure\": \"\",\n    \"editor/note-control/note-visibility-updated\": \"\",\n    \"editor/note-control/set-author-visibility-failure\": \"\",\n    \"editor/note-control/author-visibility-updated\": \"\",\n    \"editor/note-control/editor-mode\": \"\",\n    \"editor/note-control/source-code\": \"\",\n    \"editor/note-control/preview\": \"\",\n    \"editor/note-control/split-view\": \"\",\n    \"editor/note-control/pin-preview\": \"\",\n    \"editor/note-control/display-modification-records\": \"\",\n    \"editor/note-control/note-visibility\": \"\",\n    \"editor/note-control/author-visibility\": \"\",\n    \"editor/note-control/shareable-link\": \"\",\n    \"editor/note-control/copy-to-clipboard\": \"\",\n    \"editor/note-control/link-to-preview\": \"\",\n    \"editor/note-control/link-to-editor\": \"\",\n    \"editor/note-control/attach-to-note\": \"\",\n    \"editor/note-control/source-added\": \"\",\n    \"editor/note-control/source-deleted\": \"\",\n    \"editor/note-control/invalid-note-source\": \"\",\n    \"editor/note-control/add-note-source\": \"\",\n    \"editor/note-control/note-source-hint\":\n      \"\",\n    \"editor/note-control/enter-note-source\": \"\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"\",\n    \"avatar-panel/this-note-is-public\": \"\",\n    \"avatar-panel/this-note-is-friends-only\": \"\",\n    \"avatar-panel/you-are-anonymous\": \"\",\n\n    // FileExporter\n    \"file-exporter/name\": \"\",\n    \"file-exporter/orientation\": \"\",\n    \"file-exporter/portrait\": \"\",\n    \"file-exporter/landscape\": \"\",\n    \"file-exporter/paper-size\": \"\",\n    \"file-exporter/unit\": \"\",\n    \"file-exporter/margin-top\": \"\",\n    \"file-exporter/margin-bottom\": \"\",\n    \"file-exporter/margin-left\": \"\",\n    \"file-exporter/margin-right\": \"\",\n\n    // Utils\n    \"utils/uploading-image\": \"...\",\n    \"utils/upload-image-failure\": \"\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"\",\n    \"notification/'s-note\": \" \",\n    // * NoteReactionNotification\n    \"notification/added\": \" \",\n    \"notification/to-your-note\": \"\",\n    \"notification/add-you-as\": \"\",\n    \"notification/of-note\": \"\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"\",\n    \"notification/suggested-to-add-tag\": \"\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"\",\n    \"notification/view-more-notifications\": \"\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \" ...\",\n    \"github-oauth/link-with-github-account-failure\": \" GitHub \",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \" GitHub \",\n    \"github-oauth/first-time-sign-in\": \" GitHub \",\n    \"github-oauth/first-time-sign-in-small\": \"\",\n\n    // Widgets\n    \"widget/autoplay\": \"\",\n    \"widget/controls\": \"\",\n    \"widget/loop\": \"\",\n    \"widget/muted\": \"\",\n    \"widget/creating-widget\": \"\",\n    \"widget/loading-widget\": \"\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \" sm.ms \",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \" audio \",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/video_element_fail\":\n      \" video \",\n    \"widget/crossnote.bilibili/error_message\":\n      \" https://www.bilibili.com/video/av79126732 \",\n    \"widget/crossnote.youtube/error_message\":\n      \" https://www.youtube.com/watch?v=MmB9b5njVbA \",\n    \"widget/crossnote.auth/welcome\": \"\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"\",\n    \"widget/crossnote.auth/forgot_password\": \" \",\n    \"widget/crossnote.auth/failed_to_send_code\": \"\",\n    \"widget/crossnote.auth/verification_code_sent\": \" \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"\",\n    \"widget/crossnote.auth/password_reset\": \"\",\n    \"widget/crossnote.auth/password-mismatch\": \"\",\n    \"widget/crossnote.auth/hello\": \"\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"\",\n    \"widget/crossnote.auth/get-code\": \"\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \" GitHub \",\n    \"widget/crossnote.auth/already-have-an-account\": \"\",\n    \"widget/crossnote.auth/reset-password\": \"\",\n    \"widget/crossnote.auth/Or\": \"\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili \",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \" Bilibili  '' \",\n    \"widget/crossnote.image/image-helper\": \"\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \" ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/poster-url\": \"\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube \",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \" Youtube  '' \",\n    \"widget/crossnote.ocr/ocr\": \"OCR - \",\n    \"widget/crossnote.ocr/local-image\": \"\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"\",\n    \"widget/crossnote.ocr/start-ocr\": \"\",\n    \"widget/crossnote.ocr/extra-settings\": \"\",\n    \"widget/crossnote.ocr/grayscale\": \"\",\n    \"widget/crossnote.kanban/add-column\": \"\",\n    \"widget/crossnote.github_gist/title\": \" GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \" GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \" tesseract \",\n    \"tesseract/initializing tesseract\": \" tesseract\",\n    \"tesseract/initialized tesseract\": \" tesseract\",\n    \"tesseract/loading language traineddata\": \"\",\n    \"tesseract/loaded language traineddata\": \"\",\n    \"tesseract/initializing api\": \"\",\n    \"tesseract/initialized api\": \"\",\n    \"tesseract/recognizing text\": \"\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"\",\n    \"widget/crossnote.comment/edit-this-message\": \"\",\n    \"widget/crossnote.comment/modified-comment\": \"\",\n    \"widget/crossnote.comment/post-comment-failure\": \"\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"\",\n    \"widget/crossnote.comment/subscribe-info\": \"\",\n    \"widget/crossnote.comment/view-more-comments\": \"\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"\",\n    \"delete-note-dialog/subtitle\": \"\",\n    \"delete-directory-dialog/title\": \"\",\n    \"delete-directory-dialog/subtitle\":\n      \"\",\n    \"delete-tag-dialog/title\": \"\",\n    \"delete-tag-dialog/subtitle\": \"\",\n    \"add-notebook-dialog/disclaimer\":\n      \"\",\n    \"edit-image-dialog/title\": \"\",\n    \"edit-image-dialog/image-url\": \" URL\",\n    \"edit-image-dialog/image-title\": \"\",\n    \"edit-image-dialog/image-alt-text\": \"\",\n    \"language-selector-dialog/subtitle\": \"\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1)  '' \",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\": \"2)  ''\",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \" GitHubGitLabGitea  README.md \",\n    \"publish-notebook/disclaimer-2\":\n      \" README.md  front-matter \",\n\n    // git\n    \"git/status/ignored\": \"\",\n    \"git/status/unmodified\": \"\",\n    \"git/status/*modified\": \"*\",\n    \"git/status/*deleted\": \"*\",\n    \"git/status/*added\": \"*\",\n    \"git/status/absent\": \"\",\n    \"git/status/modified\": \"\",\n    \"git/status/deleted\": \"\",\n    \"git/status/added\": \"\",\n    \"git/status/*unmodified\": \"*\",\n    \"git/status/*absent\": \"*\",\n    \"git/status/*undeleted\": \"*\",\n\n    // graph view\n    \"graph-view/node\": \"\",\n    \"graph-view/link\": \"\",\n  },\n};\n","export const zhTW = {\n  translation: {\n    \"title/Crossnote\": \"\",\n    \"search/notes\": \"\",\n    \"search/notebooks\": \"\",\n    \"search/attachments\": \"\",\n\n    // Account\n    \"account/Anonymous\": \"\",\n    \"account/anonymous\": \"\",\n\n    // General\n    \"general/go-back\": \"\",\n    \"general/sending\": \"\",\n    \"general/send\": \"\",\n    \"general/cancel\": \"\",\n    \"general/add\": \"\",\n    \"general/adding\": \"\",\n    \"general/backed-up-at\": \"\",\n    \"general/created-at\": \"\",\n    \"general/modified-at\": \"\",\n    \"general/interacted-at\": \"\",\n    \"general/date-created\": \"\",\n    \"general/date-modified\": \"\",\n    \"general/date-interacted\": \"\",\n    \"general/title\": \"\",\n    \"general/saved-at\": \"\",\n    \"general/loading\": \" ...\",\n    \"general/loading-notifications\": \" ...\",\n    \"general/failed-to-set\": \"\",\n    \"general/update\": \"\",\n    \"general/updated\": \"\",\n    \"general/updating\": \"\",\n    \"general/close\": \"\",\n    \"general/Note\": \"\",\n    \"general/notes\": \"\",\n    \"general/Settings\": \"\",\n    \"general/Collaborators\": \"\",\n    \"general/collaborators\": \"\",\n    \"general/Backups\": \"\",\n    \"general/backups\": \"\",\n    \"general/Discussion\": \"\",\n    \"general/discussion\": \"\",\n    \"general/Notifications\": \"\",\n    \"general/Username\": \"\",\n    \"general/Email\": \"\",\n    \"general/Password\": \"\",\n    \"general/confirm-password\": \"\",\n    \"general/Continue\": \"\",\n    \"general/enter-username\": \"\",\n    \"general/echomd\": \"\",\n    \"general/tags\": \"\",\n    \"general/add-a-tag\": \"\",\n    \"general/edit-note-alias\": \"\",\n    \"general/no-aliases\": \"\",\n    \"general/add-an-alias\": \"\",\n    \"general/private\": \"\",\n    \"general/public\": \"\",\n    \"general/friends-only\": \"\",\n    \"general/anonymous\": \"\",\n    \"general/onymous\": \"\",\n    \"general/Tag\": \"\",\n    \"general/no-tags\": \"\",\n    \"general/Directory\": \"\",\n    \"general/Untitled\": \"\",\n    \"general/untitled\": \"\",\n    \"general/Unknown\": \"\",\n    \"general/unknown\": \"\",\n    \"general/Agree\": \"\",\n    \"general/Disagree\": \"\",\n    \"general/Print\": \"\",\n    \"general/Share\": \"\",\n    \"Editor\": \"\",\n    \"EDITOR\": \"\",\n    \"Viewer\": \"\",\n    \"VIEWER\": \"\",\n    \"Admin\": \"\",\n    \"ADMIN\": \"\",\n    \"ARCHIVED\": \"\",\n    \"ATTACHED NOTES\": \"\",\n    \"DELETED\": \"\",\n    \"PINNED\": \"\",\n    \"OTHERS\": \"\",\n    \"PUBLIC NOTES\": \"\",\n    \"FOLLOWINGS' NOTES\": \"\",\n    \"SHARED WITH ME\": \"\",\n    \"BOOKMARKS\": \"\",\n    \"MY TAGS\": \"\",\n    \"general/enter-fullscreen-mode\": \"\",\n    \"general/enter-presentation-mode\": \"\",\n    \"general/math-preview\": \"\",\n    \"general/this-note-is-empty\": \"\",\n    \"general/this-notebook-is-empty\": \"\",\n    \"general/nothing-here\": \"\",\n    \"general/no-notes-found\": \"\",\n    \"general/no-more-attachments-found\": \"\",\n    \"general/no-more-notebooks-found\": \"\",\n    \"general/no-notifications-found\": \"\",\n    \"general/clear-all\": \"\",\n    \"general/Save\": \"\",\n    \"general/Delete\": \"\",\n    \"general/Follow\": \"\",\n    \"general/Following\": \"\",\n    \"general/Unfollow\": \"\",\n    \"general/my-notes\": \"\",\n    \"general/public-notes\": \"\",\n    \"general/followings-notes\": \"\",\n    \"general/shared-with-me\": \"\",\n    \"general/Bookmarks\": \"\",\n    \"general/Archive\": \"\",\n    \"general/Trash\": \"\",\n    \"general/new-note\": \"\",\n    \"general/new-attachment\": \"\",\n    \"general/profile-updated\": \"\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"\",\n    \"general/Video\": \"\",\n    \"general/source-url\": \"\",\n    \"general/sign-in\": \"\",\n    \"general/sign-up\": \"\",\n    \"general/Link\": \"\",\n    \"general/Upload\": \"\",\n    \"general/Uploading\": \"\",\n    \"general/clicks\": \"\",\n    \"general/Processing\": \"...\",\n    \"general/please-wait\": \"...\",\n    \"general/please-sign-in-first\": \"\",\n    \"general/Languages\": \"\",\n    \"general/track\": \"\",\n    \"general/Publish\": \"\",\n    \"general/Unpublish\": \"\",\n    \"general/Open\": \"\",\n    \"general/Download\": \"\",\n    \"general/Configure\": \"\",\n    \"general/Update\": \"\",\n    \"general/empty\": \"\",\n    \"general/Explore\": \"\",\n    \"general/Notebooks\": \"\",\n    \"general/add-a-notebook\": \"\",\n    \"general/add-a-note\": \"\",\n    \"general/add-an-attachment\": \"\",\n    \"general/configure-the-notebook\": \"\",\n    \"general/publish-your-notebook\": \"\",\n    \"general/notebook-name\": \"\",\n    \"general/git-repository\": \"git \",\n    \"general/clone-a-git-repository\": \" Git \",\n    \"general/optional\": \"\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"\",\n    \"general/remember-username-and-password\": \"\",\n    \"general/stored-locally\": \"\",\n    \"general/cors-proxy\": \"CORS \",\n    \"general/why-cors-proxy\": \" CORS \",\n    \"general/today\": \"\",\n    \"general/todo\": \"\",\n    \"general/graph-view\": \"\",\n    \"general/wiki\": \"\",\n    \"general/tagged\": \"\",\n    \"general/untagged\": \"\",\n    \"general/encrypt\": \"\",\n    \"general/encrypted\": \"\",\n    \"general/decrypt\": \"\",\n    \"general/conflicted\": \"\",\n    \"general/attachments\": \"\",\n    \"general/Pin\": \"\",\n    \"general/Encryption\": \"\",\n    \"general/Fullscreen\": \"\",\n    \"general/change-file-path\": \"\",\n    \"general/create-a-copy\": \"\",\n    \"general/restore-checkout\": \" (git checkout)\",\n    \"general/download-pull\": \" (git pull)\",\n    \"general/upload-push\": \" (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\": \"\",\n    \"general/encrypt-this-note-with-password\": \"\",\n    \"general/disable-encryption\": \"\",\n    \"general/decrypt-this-note\": \"\",\n    \"general/upload-the-profile\": \"\",\n    \"general/commit-message\": \"\",\n    \"general/upload-notebook\": \"\",\n    \"general/Comments\": \"\",\n    \"general/Source\": \"\",\n    \"general/Description\": \"\",\n    \"general/Edit\": \"\",\n    \"general/Rename\": \"\",\n    \"general/rename-directory\": \"\",\n    \"general/delete-directory\": \"\",\n    \"general/rename-tag\": \"\",\n    \"general/delete-tag\": \"\",\n    \"general/notebook-updates-found\": \"\",\n    \"general/update-the-notebook\": \"\",\n    \"general/check-notebook-updates-periodically\": \"\",\n    \"general/minutes\": \"\",\n    \"general/hard-reset\": \"\",\n    \"general/Default\": \"\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"\",\n    \"general/Asc\": \"\",\n    \"general/pin-the-note\": \"\",\n    \"general/unpin-the-note\": \"\",\n    \"general/add-to-quick-access\": \"\",\n    \"general/remove-from-quick-access\": \"\",\n    \"general/open-folder\": \"\",\n    \"general/open-a-local-folder\": \"\",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \"\",\n    \"general/refresh\": \"\",\n    \"general/welcome-back-to-crossnote\": \"\",\n    \"general/continue\": \"\",\n    \"general/reference(s)\": \"\",\n    \"general/References\": \"\",\n\n    // Error\n    \"error/authentication-failed\": \"\",\n    \"error/failed-to-upload-notebook\": \"\",\n    \"error/failed-to-download-notebook\": \"\",\n    \"error/notebook-already-exists\": \"\",\n    \"error/invalid-git-url-prefix\": \" git URL \",\n    \"error/please-resolve-conflicts\": \"\",\n    \"error/failed-to-disable-encryption\": \"\",\n    \"error/decryption-failed\": \"\",\n    \"error/failed-to-change-file-path\": \"\",\n    \"error/failed-to-create-widget\": \"\",\n    \"error/failed-to-load-widget\": \"\",\n    \"error/failed-to-update-the-notebook\": \"\",\n    \"error/failed-to-unpublish-the-notebook\": \"\",\n    \"error/failed-to-publish-notebook\": \"\",\n\n    // Success\n    \"success/notebook-uploaded\": \"\",\n    \"success/notebook-downloaded\": \"\",\n\n    // Info\n    \"info/downloading-notebook\": \"\",\n\n    // Note\n    \"note/unarchive-note\": \"\",\n    \"note/archive-note\": \"\",\n    \"note/delete-forever\": \"\",\n    \"note/delete-note\": \"\",\n    \"note/restore-note\": \"\",\n    \"note/report-note\": \"\",\n    \"note/open-in-crossnote-website\": \"\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"\",\n    \"note-tags/suggestion-sent\": \"\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"\",\n\n    // Notifications\n    \"notifications/refresh\": \"\",\n    \"notifications/new-version-available\": \"!\",\n\n    // Settings\n    \"settings/about-this-project\": \"\",\n    \"settings/issues-and-feature-requests\": \"?\",\n    \"settings/uploading-cover-image\": \"\",\n    \"settings/upload-image-failure\": \"\",\n    \"settings/Cover\": \"\",\n    \"settings/enter-cover-image-url\": \"\",\n    \"settings/upload-image\": \"\",\n    \"settings/Avatar\": \"\",\n    \"settings/enter-avatar-image-url\": \"\",\n    \"settings/Name\": \"\",\n    \"settings/enter-name\": \"\",\n    \"settings/editor-cursor-color\": \"\",\n    \"settings/default-editor-mode\": \"\",\n    \"settings/hello\": \"\",\n    \"settings/world\": \"\",\n    \"settings/linked-with-github-account\": \" GitHub \",\n    \"settings/link-with-github-account\": \" GitHub \",\n    \"settings/log-out\": \"\",\n    \"settings/author-name\": \"\",\n    \"settings/author-email\": \"\",\n    \"settings/theme\": \"\",\n    \"settings/created-cloud-widgets-count\": \"\",\n    \"settings/key-map\": \"\",\n\n    // Preview\n    \"preview/attach-a-note\": \"\",\n    \"preview/crossnote-untitled\": \" - \",\n    \"preview/edit-this-note\": \"\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"\",\n    \"profile-card/followers\": \"\",\n    \"profile-card/Followings\": \"\",\n    \"profile-card/Followers\": \"\",\n    \"profile-card/notes\": \"\",\n    \"profile-card/follow-user-failure\": \"\",\n    \"profile-card/followed-user\": \"\",\n    \"profile-card/unfollow-user-failure\": \"\",\n    \"profile-card/unfollowed-user\": \"\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"\",\n    \"interaction-panel/add-comment\": \"\",\n    \"interaction-panel/add-reaction\": \"\",\n\n    // Editor\n    \"editor/loading-your-note\": \"...\",\n    \"editor/sync-failure\": \"... \",\n    \"editor/saving\": \"...\",\n    \"editor/save-failure\": \"\",\n    \"editor/saved\": \"\",\n    \"editor/update-note-failure\": \"\",\n    \"editor/placeholder\": \"#     '/' \",\n    \"editor/ln\": \"\",\n    \"editor/col\": \"\",\n    \"editor/split-horizontally\": \"\",\n    \"editor/split-vertically\": \"\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"\",\n    \"editor/note-control/note-visibility-hint\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"\",\n    \"editor/note-control/enter-parent-note-id\": \" ID\",\n    \"editor/note-control/attach-note-failure\": \"\",\n    \"editor/note-control/unattach-note-failure\": \"\",\n    \"editor/collaborator-hint\": \" - \",\n    \"editor/shareable-link-hint\":\n      \"/\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"\",\n    \"editor/backups-control/delete-this-backup\": \"\",\n    \"editor/backups-control/create-backup-failure\": \"\",\n    \"editor/backups-control/backup-created\": \"\",\n    \"editor/backups-control/delete-backup-failure\": \"\",\n    \"editor/backups-control/backup-deleted\": \"\",\n    \"editor/backups-control/cloud-version\": \"\",\n    \"editor/backups-control/backup-name\": \"\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"\",\n    \"editor/collaborators-control/add-collaborator-failure\": \"\",\n    \"editor/collaborators-control/collaborator-removed\": \"\",\n    \"editor/collaborators-control/collaborator-added\": \"\",\n    \"editor/collaborators-control/can-view\": \"\",\n    \"editor/collaborators-control/can-edit\": \"\",\n    \"editor/collaborators-control/can-administrate\": \"\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"\",\n    \"editor/toolbar/upload-local-images\": \"\",\n    \"editor/toolbar/capture-webpage\": \"\",\n    \"editor/toolbar/insert-clock\": \"\",\n    \"editor/toolbar/insert-emoji\": \" Emoji\",\n    \"editor/toolbar/insert-media\": \"\",\n    \"editor/toolbar/insert-audio\": \"\",\n    \"editor/toolbar/netease-music\": \"\",\n    \"editor/toolbar/insert-video\": \"\",\n    \"editor/toolbar/insert-youtube\": \" Youtube\",\n    \"editor/toolbar/insert-bilibili\": \" Bilibili\",\n    \"editor/toolbar/insert-slide\": \"\",\n    \"editor/toolbar/insert-ocr\": \" OCR\",\n    \"editor/toolbar/insert-kanban\": \"\",\n    \"editor/toolbar/insert-abc-notation\": \" ABC notation\",\n    \"editor/toolbar/insert-header-1\": \"\",\n    \"editor/toolbar/insert-header-2\": \"\",\n    \"editor/toolbar/insert-header-3\": \"\",\n    \"editor/toolbar/insert-header-4\": \"\",\n    \"editor/toolbar/insert-header-5\": \"\",\n    \"editor/toolbar/insert-header-6\": \"\",\n    \"editor/toolbar/bold\": \"\",\n    \"editor/toolbar/italic\": \"\",\n    \"editor/toolbar/strikethrough\": \"\",\n    \"editor/toolbar/insert-inline-code\": \"\",\n    \"editor/toolbar/insert-blockquote\": \"\",\n    \"editor/toolbar/insert-unordered-list\": \"\",\n    \"editor/toolbar/insert-ordered-list\": \"\",\n    \"editor/toolbar/insert-link\": \"\",\n    \"editor/toolbar/insert-table\": \"\",\n    \"editor/toolbar/insert-comment\": \"\",\n    \"editor/toolbar/insert-github-gist\": \" GitHub Gist\",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"\",\n    \"editor/note-control/tag-deleted\": \"\",\n    \"editor/note-control/set-note-visibility-failure\": \"\",\n    \"editor/note-control/note-visibility-updated\": \"\",\n    \"editor/note-control/set-author-visibility-failure\": \"\",\n    \"editor/note-control/author-visibility-updated\": \"\",\n    \"editor/note-control/editor-mode\": \"\",\n    \"editor/note-control/source-code\": \"\",\n    \"editor/note-control/preview\": \"\",\n    \"editor/note-control/split-view\": \"\",\n    \"editor/note-control/pin-preview\": \"\",\n    \"editor/note-control/display-modification-records\": \"\",\n    \"editor/note-control/note-visibility\": \"\",\n    \"editor/note-control/author-visibility\": \"\",\n    \"editor/note-control/shareable-link\": \"\",\n    \"editor/note-control/copy-to-clipboard\": \"\",\n    \"editor/note-control/link-to-preview\": \"\",\n    \"editor/note-control/link-to-editor\": \"\",\n    \"editor/note-control/attach-to-note\": \"\",\n    \"editor/note-control/source-added\": \"\",\n    \"editor/note-control/source-deleted\": \"\",\n    \"editor/note-control/invalid-note-source\": \"\",\n    \"editor/note-control/add-note-source\": \"\",\n    \"editor/note-control/note-source-hint\":\n      \"\",\n    \"editor/note-control/enter-note-source\": \"\",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"\",\n    \"avatar-panel/this-note-is-public\": \"\",\n    \"avatar-panel/this-note-is-friends-only\": \"\",\n    \"avatar-panel/you-are-anonymous\": \"\",\n\n    // FileExporter\n    \"file-exporter/name\": \"\",\n    \"file-exporter/orientation\": \"\",\n    \"file-exporter/portrait\": \"\",\n    \"file-exporter/landscape\": \"\",\n    \"file-exporter/paper-size\": \"\",\n    \"file-exporter/unit\": \"\",\n    \"file-exporter/margin-top\": \"\",\n    \"file-exporter/margin-bottom\": \"\",\n    \"file-exporter/margin-left\": \"\",\n    \"file-exporter/margin-right\": \"\",\n\n    // Utils\n    \"utils/uploading-image\": \"...\",\n    \"utils/upload-image-failure\": \"\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"\",\n    \"notification/'s-note\": \" \",\n    // * NoteReactionNotification\n    \"notification/added\": \" \",\n    \"notification/to-your-note\": \"\",\n    \"notification/add-you-as\": \"\",\n    \"notification/of-note\": \"\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"\",\n    \"notification/suggested-to-add-tag\": \"\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"\",\n    \"notification/view-more-notifications\": \"\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \" ...\",\n    \"github-oauth/link-with-github-account-failure\": \" GitHub \",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \" GitHub \",\n    \"github-oauth/first-time-sign-in\": \" GitHub \",\n    \"github-oauth/first-time-sign-in-small\": \"\",\n\n    // Widgets\n    \"widget/autoplay\": \"\",\n    \"widget/controls\": \"\",\n    \"widget/loop\": \"\",\n    \"widget/muted\": \"\",\n    \"widget/creating-widget\": \"\",\n    \"widget/loading-widget\": \"\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \" sm.ms \",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \" audio \",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/video_element_fail\":\n      \" video \",\n    \"widget/crossnote.bilibili/error_message\":\n      \" https://www.bilibili.com/video/av79126732 \",\n    \"widget/crossnote.youtube/error_message\":\n      \" https://www.youtube.com/watch?v=MmB9b5njVbA \",\n    \"widget/crossnote.auth/welcome\": \"\",\n    \"widget/crossnote.auth/doesnt-have-account\": \"\",\n    \"widget/crossnote.auth/forgot_password\": \" \",\n    \"widget/crossnote.auth/failed_to_send_code\": \"\",\n    \"widget/crossnote.auth/verification_code_sent\": \" \",\n    \"widget/crossnote.auth/failed_to_reset_password\": \"\",\n    \"widget/crossnote.auth/password_reset\": \"\",\n    \"widget/crossnote.auth/password-mismatch\": \"\",\n    \"widget/crossnote.auth/hello\": \"\",\n    \"widget/crossnote.auth/enter-the-verification-code\": \"\",\n    \"widget/crossnote.auth/get-code\": \"\",\n    \"widget/crossnote.auth/sign-in-with-github-account\": \" GitHub \",\n    \"widget/crossnote.auth/already-have-an-account\": \"\",\n    \"widget/crossnote.auth/reset-password\": \"\",\n    \"widget/crossnote.auth/Or\": \"\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili \",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \" Bilibili  '' \",\n    \"widget/crossnote.image/image-helper\": \"\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \" ID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \" '' \",\n    \"widget/crossnote.video/poster-url\": \"\",\n    \"widget/crossnote.video/poster-url-placeholder\": \"\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube \",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \" Youtube  '' \",\n    \"widget/crossnote.ocr/ocr\": \"OCR - \",\n    \"widget/crossnote.ocr/local-image\": \"\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\": \"\",\n    \"widget/crossnote.ocr/start-ocr\": \"\",\n    \"widget/crossnote.ocr/extra-settings\": \"\",\n    \"widget/crossnote.ocr/grayscale\": \"\",\n    \"widget/crossnote.kanban/add-column\": \"\",\n    \"widget/crossnote.github_gist/title\": \" GitHub Gist\",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \" GitHub Gist URL\",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \" tesseract \",\n    \"tesseract/initializing tesseract\": \" tesseract\",\n    \"tesseract/initialized tesseract\": \" tesseract\",\n    \"tesseract/loading language traineddata\": \"\",\n    \"tesseract/loaded language traineddata\": \"\",\n    \"tesseract/initializing api\": \"\",\n    \"tesseract/initialized api\": \"\",\n    \"tesseract/recognizing text\": \"\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"\",\n    \"widget/crossnote.comment/edit-this-message\": \"\",\n    \"widget/crossnote.comment/modified-comment\": \"\",\n    \"widget/crossnote.comment/post-comment-failure\": \"\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"\",\n    \"widget/crossnote.comment/subscribe-info\": \"\",\n    \"widget/crossnote.comment/view-more-comments\": \"\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"?\",\n    \"delete-note-dialog/subtitle\": \"\",\n    \"delete-directory-dialog/title\": \"?\",\n    \"delete-directory-dialog/subtitle\":\n      \"\",\n    \"delete-tag-dialog/title\": \"?\",\n    \"delete-tag-dialog/subtitle\": \"\",\n    \"add-notebook-dialog/disclaimer\":\n      \"\",\n    \"edit-image-dialog/title\": \"\",\n    \"edit-image-dialog/image-url\": \" URL\",\n    \"edit-image-dialog/image-title\": \"\",\n    \"edit-image-dialog/image-alt-text\": \"\",\n    \"language-selector-dialog/subtitle\": \"\",\n\n    \"react-ios-pwa-prompt/copy-title\": \"\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \",\",\n    \"react-ios-pwa-prompt/copy-share-button-label\": \"1) \",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) \",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \" GitHubGitLabGitea   README.md \",\n    \"publish-notebook/disclaimer-2\":\n      \" README.md  front-matter :\",\n\n    // git\n    \"git/status/ignored\": \"\",\n    \"git/status/unmodified\": \"\",\n    \"git/status/*modified\": \"*\",\n    \"git/status/*deleted\": \"*\",\n    \"git/status/*added\": \"*\",\n    \"git/status/absent\": \"\",\n    \"git/status/modified\": \"\",\n    \"git/status/deleted\": \"\",\n    \"git/status/added\": \"\",\n    \"git/status/*unmodified\": \"*\",\n    \"git/status/*absent\": \"*\",\n    \"git/status/*undeleted\": \"*\",\n\n    // graph view\n    \"graph-view/node\": \"\",\n    \"graph-view/link\": \"\",\n  },\n};\n","export const jaJP = {\n  translation: {\n    \"title/Crossnote\": \"\",\n    \"search/notes\": \"\",\n    \"search/notebooks\": \"\",\n    \"search/attachments\": \"\",\n\n    // Account\n    \"account/Anonymous\": \"\",\n    \"account/anonymous\": \"\",\n\n    // General\n    \"general/go-back\": \"\",\n    \"general/sending\": \"\",\n    \"general/send\": \"\",\n    \"general/cancel\": \"\",\n    \"general/add\": \"\",\n    \"general/adding\": \"\",\n    \"general/backed-up-at\": \"\",\n    \"general/created-at\": \"\",\n    \"general/modified-at\": \"\",\n    \"general/interacted-at\": \"\",\n    \"general/date-created\": \"\",\n    \"general/date-modified\": \"\",\n    \"general/date-interacted\": \"\",\n    \"general/title\": \"\",\n    \"general/saved-at\": \"\",\n    \"general/loading\": \" ...\",\n    \"general/loading-notifications\": \" ...\",\n    \"general/failed-to-set\": \"\",\n    \"general/update\": \"\",\n    \"general/updated\": \"\",\n    \"general/updating\": \"\",\n    \"general/close\": \"\",\n    \"general/Note\": \"\",\n    \"general/notes\": \"\",\n    \"general/Settings\": \"\",\n    \"general/Collaborators\": \"\",\n    \"general/collaborators\": \"\",\n    \"general/Backups\": \"\",\n    \"general/backups\": \"\",\n    \"general/Discussion\": \"\",\n    \"general/discussion\": \"\",\n    \"general/Notifications\": \"\",\n    \"general/Username\": \"\",\n    \"general/Email\": \"E\",\n    \"general/Password\": \"\",\n    \"general/confirm-password\": \"\",\n    \"general/Continue\": \"\",\n    \"general/enter-username\": \"\",\n    \"general/echomd\": \"\",\n    \"general/tags\": \"\",\n    \"general/add-a-tag\": \"\",\n    \"general/edit-note-alias\": \" \",\n    \"general/no-aliases\": \"\",\n    \"general/add-an-alias\": \"\",\n    \"general/private\": \"\",\n    \"general/public\": \"\",\n    \"general/friends-only\": \"\",\n    \"general/anonymous\": \"\",\n    \"general/onymous\": \"\",\n    \"general/Tag\": \"\",\n    \"general/no-tags\": \"\",\n    \"general/Directory\": \"\",\n    \"general/Untitled\": \"\",\n    \"general/untitled\": \"\",\n    \"general/Unknown\": \"\",\n    \"general/unknown\": \"\",\n    \"general/Agree\": \"\",\n    \"general/Disagree\": \"\",\n    \"general/Print\": \"\",\n    \"general/Share\": \"\",\n    \"Editor\": \"\",\n    \"EDITOR\": \"\",\n    \"Viewer\": \"\",\n    \"VIEWER\": \"\",\n    \"Admin\": \"\",\n    \"ADMIN\": \"\",\n    \"ARCHIVED\": \"\",\n    \"ATTACHED NOTES\": \"\",\n    \"DELETED\": \"\",\n    \"PINNED\": \"\",\n    \"OTHERS\": \"\",\n    \"PUBLIC NOTES\": \"\",\n    \"FOLLOWINGS' NOTES\": \"\",\n    \"SHARED WITH ME\": \"\",\n    \"BOOKMARKS\": \"\",\n    \"MY TAGS\": \"\",\n    \"general/enter-fullscreen-mode\": \"\",\n    \"general/enter-presentation-mode\": \"\",\n    \"general/math-preview\": \"\",\n    \"general/this-note-is-empty\": \"\",\n    \"general/this-notebook-is-empty\": \"\",\n    \"general/nothing-here\": \"\",\n    \"general/no-notes-found\": \"\",\n    \"general/no-more-attachments-found\": \"\",\n    \"general/no-more-notebooks-found\": \"\",\n    \"general/no-notifications-found\": \"\",\n    \"general/clear-all\": \"\",\n    \"general/Save\": \"\",\n    \"general/Delete\": \"\",\n    \"general/Follow\": \"\",\n    \"general/Following\": \"\",\n    \"general/Unfollow\": \"\",\n    \"general/my-notes\": \"\",\n    \"general/public-notes\": \"\",\n    \"general/followings-notes\": \"\",\n    \"general/shared-with-me\": \"\",\n    \"general/Bookmarks\": \"\",\n    \"general/Archive\": \"\",\n    \"general/Trash\": \"\",\n    \"general/new-note\": \"\",\n    \"general/new-attachment\": \"\",\n    \"general/profile-updated\": \"\",\n    \"general/ID\": \"ID\",\n    \"general/Audio\": \"\",\n    \"general/Video\": \"\",\n    \"general/source-url\": \"\",\n    \"general/sign-in\": \"\",\n    \"general/sign-up\": \"\",\n    \"general/Link\": \"\",\n    \"general/Upload\": \"\",\n    \"general/Uploading\": \"\",\n    \"general/clicks\": \"\",\n    \"general/Processing\": \"...\",\n    \"general/please-wait\": \"...\",\n    \"general/please-sign-in-first\": \"\",\n    \"general/Languages\": \"\",\n    \"general/track\": \"\",\n    \"general/Publish\": \"\",\n    \"general/Unpublish\": \"\",\n    \"general/Open\": \"\",\n    \"general/Download\": \"\",\n    \"general/Configure\": \"\",\n    \"general/Update\": \"\",\n    \"general/empty\": \"\",\n    \"general/Explore\": \"\",\n    \"general/Notebooks\": \"\",\n    \"general/add-a-notebook\": \"\",\n    \"general/add-a-note\": \"\",\n    \"general/add-an-attachment\": \"\",\n    \"general/configure-the-notebook\": \"\",\n    \"general/publish-your-notebook\": \"\",\n    \"general/notebook-name\": \"\",\n    \"general/git-repository\": \"Git \",\n    \"general/clone-a-git-repository\": \"Git \",\n    \"general/optional\": \"\",\n    \"general/url\": \"Url\",\n    \"general/branch\": \"\",\n    \"general/remember-username-and-password\": \"\",\n    \"general/stored-locally\": \"\",\n    \"general/cors-proxy\": \"CORS \",\n    \"general/why-cors-proxy\": \" CORS ?\",\n    \"general/today\": \"\",\n    \"general/todo\": \"Todo\",\n    \"general/graph-view\": \"\",\n    \"general/wiki\": \"Wiki\",\n    \"general/tagged\": \"\",\n    \"general/untagged\": \"\",\n    \"general/encrypt\": \"\",\n    \"general/encrypted\": \"\",\n    \"general/decrypt\": \"\",\n    \"general/conflicted\": \"\",\n    \"general/attachments\": \"\",\n    \"general/Pin\": \"\",\n    \"general/Encryption\": \"\",\n    \"general/Fullscreen\": \"\",\n    \"general/change-file-path\": \" \",\n    \"general/create-a-copy\": \"\",\n    \"general/restore-checkout\": \" (git checkout)\",\n    \"general/download-pull\": \" (git pull)\",\n    \"general/upload-push\": \" (git pull & git push)\",\n    \"general/disable-the-encryption-on-this-note\":\n      \"\",\n    \"general/encrypt-this-note-with-password\":\n      \"\",\n    \"general/disable-encryption\": \"\",\n    \"general/decrypt-this-note\": \"\",\n    \"general/upload-the-profile\": \"\",\n    \"general/commit-message\": \" \",\n    \"general/upload-notebook\": \"\",\n    \"general/Comments\": \"\",\n    \"general/Source\": \"\",\n    \"general/Description\": \"\",\n    \"general/Edit\": \"\",\n    \"general/Rename\": \"\",\n    \"general/rename-directory\": \"\",\n    \"general/delete-directory\": \"\",\n    \"general/rename-tag\": \"\",\n    \"general/delete-tag\": \"\",\n    \"general/notebook-updates-found\": \"\",\n    \"general/update-the-notebook\": \"\",\n    \"general/check-notebook-updates-periodically\":\n      \"\",\n    \"general/minutes\": \"\",\n    \"general/hard-reset\": \"\",\n    \"general/Default\": \"\",\n    \"general/Vim\": \"Vim\",\n    \"general/Emacs\": \"Emacs\",\n    \"general/Desc\": \"\",\n    \"general/Asc\": \"\",\n    \"general/pin-the-note\": \"\",\n    \"general/unpin-the-note\": \"\",\n    \"general/add-to-quick-access\": \" \",\n    \"general/remove-from-quick-access\": \" \",\n    \"general/open-folder\": \"\",\n    \"general/open-a-local-folder\": \" \",\n    \"general/your-browser-doesnt-support-to-open-local-folder\":\n      \" \",\n    \"general/refresh\": \"\",\n    \"general/welcome-back-to-crossnote\": \"\",\n    \"general/continue\": \"\",\n    \"general/reference(s)\": \"\",\n    \"general/References\": \"\",\n\n    // Error\n    \"error/authentication-failed\": \"\",\n    \"error/failed-to-upload-notebook\":\n      \"\",\n    \"error/failed-to-download-notebook\":\n      \" ...\",\n    \"error/notebook-already-exists\": \"\",\n    \"error/invalid-git-url-prefix\": \" git URL \",\n    \"error/please-resolve-conflicts\": \"\",\n    \"error/failed-to-disable-encryption\": \"\",\n    \"error/decryption-failed\": \"\",\n    \"error/failed-to-change-file-path\": \" \",\n    \"error/failed-to-create-widget\": \"\",\n    \"error/failed-to-load-widget\": \"\",\n    \"error/failed-to-update-the-notebook\": \"\",\n    \"error/failed-to-unpublish-the-notebook\":\n      \"\",\n    \"error/failed-to-publish-notebook\": \"\",\n\n    // Success\n    \"success/notebook-uploaded\": \"\",\n    \"success/notebook-downloaded\": \"\",\n\n    // Info\n    \"info/downloading-notebook\": \"\",\n\n    // Note\n    \"note/unarchive-note\": \"\",\n    \"note/archive-note\": \"\",\n    \"note/delete-forever\": \"\",\n    \"note/delete-note\": \"\",\n    \"note/restore-note\": \"\",\n    \"note/report-note\": \"\",\n    \"note/open-in-crossnote-website\": \"\",\n\n    // NoteTags\n    \"note-tags/send-suggestion-failure\": \"\",\n    \"note-tags/suggestion-sent\": \"\",\n    \"note-tags/suggest-a-tag-to-this-note\": \"\",\n\n    // UserTags\n    \"user-tags/follow-a-tag\": \"\",\n\n    // Notifications\n    \"notifications/refresh\": \"\",\n    \"notifications/new-version-available\":\n      \"!\",\n\n    // Settings\n    \"settings/about-this-project\": \"\",\n    \"settings/issues-and-feature-requests\":\n      \"\",\n    \"settings/uploading-cover-image\": \"\",\n    \"settings/upload-image-failure\": \"\",\n    \"settings/Cover\": \"\",\n    \"settings/enter-cover-image-url\": \"\",\n    \"settings/upload-image\": \"\",\n    \"settings/Avatar\": \"\",\n    \"settings/enter-avatar-image-url\": \"\",\n    \"settings/Name\": \"\",\n    \"settings/enter-name\":\n      \"\",\n    \"settings/editor-cursor-color\": \"\",\n    \"settings/default-editor-mode\": \" \",\n    \"settings/hello\": \"\",\n    \"settings/world\": \"\",\n    \"settings/linked-with-github-account\":\n      \"GitHub \",\n    \"settings/link-with-github-account\": \"GitHub \",\n    \"settings/log-out\": \"\",\n    \"settings/author-name\": \"\",\n    \"settings/author-email\": \"\",\n    \"settings/theme\": \"\",\n    \"settings/created-cloud-widgets-count\": \"\",\n    \"settings/key-map\": \"\",\n\n    // Preview\n    \"preview/attach-a-note\": \"\",\n    \"preview/crossnote-untitled\": \" - \",\n    \"preview/edit-this-note\": \"\",\n\n    // ProfileCard\n    \"profile-card/followings\": \"\",\n    \"profile-card/followers\": \"\",\n    \"profile-card/Followings\": \"\",\n    \"profile-card/Followers\": \"\",\n    \"profile-card/notes\": \"\",\n    \"profile-card/follow-user-failure\": \"\",\n    \"profile-card/followed-user\": \"\",\n    \"profile-card/unfollow-user-failure\":\n      \"\",\n    \"profile-card/unfollowed-user\": \"\",\n\n    // Interaction panel\n    \"interaction-panel/show-attached-notes\": \"\",\n    \"interaction-panel/add-comment\": \"\",\n    \"interaction-panel/add-reaction\": \"\",\n\n    // Editor\n    \"editor/loading-your-note\": \"...\",\n    \"editor/sync-failure\":\n      \"... Web\",\n    \"editor/saving\": \"...\",\n    \"editor/save-failure\": \"\",\n    \"editor/saved\": \"\",\n    \"editor/update-note-failure\": \"\",\n    \"editor/placeholder\": \"#     / \",\n    \"editor/ln\": \"\",\n    \"editor/col\": \"\",\n    \"editor/split-horizontally\": \"\",\n    \"editor/split-vertically\": \"\",\n\n    // * NoteControl\n    \"editor/note-control/allow-readers-to-suggest-note-tags\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-under-this-note\":\n      \"\",\n    \"editor/note-control/inherit-parent-note-collaborators-list\":\n      \"\",\n    \"editor/note-control/note-visibility-hint\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-unchecked\":\n      \"\",\n    \"editor/note-control/allow-readers-to-attach-notes-checked\":\n      \"\",\n    \"editor/note-control/enter-parent-note-id\":\n      \"ID\",\n    \"editor/note-control/attach-note-failure\": \"\",\n    \"editor/note-control/unattach-note-failure\":\n      \"\",\n    \"editor/collaborator-hint\": \" - \",\n    \"editor/shareable-link-hint\":\n      \"/\",\n\n    // * BackupsControl\n    \"editor/backups-control/create-backup\": \"\",\n    \"editor/backups-control/delete-this-backup\": \"\",\n    \"editor/backups-control/create-backup-failure\":\n      \"\",\n    \"editor/backups-control/backup-created\": \"\",\n    \"editor/backups-control/delete-backup-failure\":\n      \"\",\n    \"editor/backups-control/backup-deleted\": \"\",\n    \"editor/backups-control/cloud-version\": \"\",\n    \"editor/backups-control/backup-name\": \"\",\n\n    // * CollaboratorasControl\n    \"editor/collaborators-control/set-collaborator-role-failure\":\n      \"\",\n    \"editor/collaborators-control/add-collaborator-failure\":\n      \"\",\n    \"editor/collaborators-control/collaborator-removed\":\n      \"\",\n    \"editor/collaborators-control/collaborator-added\":\n      \"\",\n    \"editor/collaborators-control/can-view\": \"\",\n    \"editor/collaborators-control/can-edit\": \"\",\n    \"editor/collaborators-control/can-administrate\": \"\",\n\n    // * EditorToolBar\n    \"editor/toolbar/insert-image\": \"\",\n    \"editor/toolbar/upload-local-images\": \"\",\n    \"editor/toolbar/capture-webpage\": \"\",\n    \"editor/toolbar/insert-clock\": \"\",\n    \"editor/toolbar/insert-emoji\": \"\",\n    \"editor/toolbar/insert-media\": \"\",\n    \"editor/toolbar/insert-audio\": \"\",\n    \"editor/toolbar/netease-music\": \"Netease Cloud Music\",\n    \"editor/toolbar/insert-video\": \"\",\n    \"editor/toolbar/insert-youtube\": \"Youtube \",\n    \"editor/toolbar/insert-bilibili\": \"Bilibili \",\n    \"editor/toolbar/insert-slide\": \"\",\n    \"editor/toolbar/insert-ocr\": \"OCR\",\n    \"editor/toolbar/insert-kanban\": \"\",\n    \"editor/toolbar/insert-abc-notation\": \"ABC notation \",\n    \"editor/toolbar/insert-header-1\": \"1\",\n    \"editor/toolbar/insert-header-2\": \"2\",\n    \"editor/toolbar/insert-header-3\": \"3\",\n    \"editor/toolbar/insert-header-4\": \"4\",\n    \"editor/toolbar/insert-header-5\": \"5\",\n    \"editor/toolbar/insert-header-6\": \"6\",\n    \"editor/toolbar/bold\": \"\",\n    \"editor/toolbar/italic\": \"\",\n    \"editor/toolbar/strikethrough\": \" \",\n    \"editor/toolbar/insert-inline-code\": \"\",\n    \"editor/toolbar/insert-blockquote\": \"\",\n    \"editor/toolbar/insert-unordered-list\": \"\",\n    \"editor/toolbar/insert-ordered-list\": \"\",\n    \"editor/toolbar/insert-link\": \"\",\n    \"editor/toolbar/insert-table\": \"\",\n    \"editor/toolbar/insert-comment\":\n      \"\",\n    \"editor/toolbar/insert-github-gist\": \"GitHub Gist \",\n\n    // * NoteControl\n    \"editor/note-control/tag-added\": \"\",\n    \"editor/note-control/tag-deleted\": \"\",\n    \"editor/note-control/set-note-visibility-failure\":\n      \"\",\n    \"editor/note-control/note-visibility-updated\":\n      \"\",\n    \"editor/note-control/set-author-visibility-failure\":\n      \"\",\n    \"editor/note-control/author-visibility-updated\":\n      \"\",\n    \"editor/note-control/editor-mode\": \"\",\n    \"editor/note-control/source-code\": \"\",\n    \"editor/note-control/preview\": \"\",\n    \"editor/note-control/split-view\": \"\",\n    \"editor/note-control/pin-preview\": \"\",\n    \"editor/note-control/display-modification-records\": \"\",\n    \"editor/note-control/note-visibility\": \"\",\n    \"editor/note-control/author-visibility\": \"\",\n    \"editor/note-control/shareable-link\": \"\",\n    \"editor/note-control/copy-to-clipboard\": \"\",\n    \"editor/note-control/link-to-preview\": \"\",\n    \"editor/note-control/link-to-editor\": \"\",\n    \"editor/note-control/attach-to-note\": \"\",\n    \"editor/note-control/source-added\": \"URL \",\n    \"editor/note-control/source-deleted\": \"URL \",\n    \"editor/note-control/invalid-note-source\": \" URL\",\n    \"editor/note-control/add-note-source\": \" URL \",\n    \"editor/note-control/note-source-hint\":\n      \" URL \",\n    \"editor/note-control/enter-note-source\": \"URL \",\n\n    // AvatarPanel\n    \"avatar-panel/this-note-is-private\": \"\",\n    \"avatar-panel/this-note-is-public\": \"\",\n    \"avatar-panel/this-note-is-friends-only\":\n      \"\",\n    \"avatar-panel/you-are-anonymous\": \"\",\n\n    // FileExporter\n    \"file-exporter/name\": \"\",\n    \"file-exporter/orientation\": \"\",\n    \"file-exporter/portrait\": \"\",\n    \"file-exporter/landscape\": \"\",\n    \"file-exporter/paper-size\": \"\",\n    \"file-exporter/unit\": \"\",\n    \"file-exporter/margin-top\": \"\",\n    \"file-exporter/margin-bottom\": \"\",\n    \"file-exporter/margin-left\": \"\",\n    \"file-exporter/margin-right\": \"\",\n\n    // Utils\n    \"utils/uploading-image\": \"...\",\n    \"utils/upload-image-failure\": \"\",\n\n    // Notification\n    // * CommentPostingNotification\n    \"notification/replies-to-you-in\": \"\",\n    // somone's\n    \"notification/'s-note\": \" \",\n    // * NoteReactionNotification\n    \"notification/added\": \" \",\n    // some reaction\n    \"notification/to-your-note\": \"\",\n    \"notification/add-you-as\": \"\",\n    // some role\n    \"notification/of-note\": \"\",\n    // * NoteTagSuggestion\n    \"notification/add-tag-failure\": \"\",\n    \"notification/suggested-to-add-tag\": \"\",\n    // * UserFollowingNotification\n    \"notification/started-following-you\": \"\",\n    // * BookmarkNotification\n    \"notification/bookmarked-your-note\": \"\",\n    \"notification/view-more-notifications\": \"\",\n\n    // GitHubOAuthCallback\n    \"github-oauth/wait\": \" ...\",\n    \"github-oauth/link-with-github-account-failure\":\n      \"GitHub \",\n    \"github-oauth/sign-in-with-github-account-failure\":\n      \"GitHub \",\n    \"github-oauth/first-time-sign-in\":\n      \"GitHub \",\n    \"github-oauth/first-time-sign-in-small\": \"\",\n\n    // Widgets\n    \"widget/autoplay\": \"\",\n    \"widget/controls\": \"\",\n    \"widget/loop\": \"\",\n    \"widget/muted\": \"\",\n    \"widget/creating-widget\": \"\",\n    \"widget/loading-widget\": \"\",\n    \"widget/crossnote.image/thanks_sm_ms\":\n      \"sm.ms\",\n    \"widget/crossnote.audio/audio_element_fail\":\n      \"\",\n    \"widget/crossnote.audio/source-url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.video/video_element_fail\":\n      \"\",\n    \"widget/crossnote.bilibili/error_message\":\n      \"https://www.bilibili.com/video/av79126732\",\n    \"widget/crossnote.youtube/error_message\":\n      \"https://www.youtube.com/watch?v=MmB9b5njVbA\",\n    \"widget/crossnote.auth/welcome\": \"\",\n    \"widget/crossnote.auth/doesnt-have-account\":\n      \" \",\n    \"widget/crossnote.auth/forgot_password\": \" \",\n    \"widget/crossnote.auth/failed_to_send_code\":\n      \"\",\n    \"widget/crossnote.auth/verification_code_sent\":\n      \" \",\n    \"widget/crossnote.auth/failed_to_reset_password\":\n      \"\",\n    \"widget/crossnote.auth/password_reset\": \"\",\n    \"widget/crossnote.auth/password-mismatch\": \"\",\n    \"widget/crossnote.auth/hello\": \"\",\n    \"widget/crossnote.auth/enter-the-verification-code\":\n      \"\",\n    \"widget/crossnote.auth/get-code\": \"\",\n    \"widget/crossnote.auth/sign-in-with-github-account\":\n      \"GitHub \",\n    \"widget/crossnote.auth/already-have-an-account\":\n      \"\",\n    \"widget/crossnote.auth/reset-password\": \"\",\n    \"widget/crossnote.auth/Or\": \"\",\n    \"widget/crossnote.bilibili/Bilibili\": \"Bilibili\",\n    \"widget/crossnote.bilibili/bilibili-video-url\": \"Bilibili \",\n    \"widget/crossnote.bilibili/url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.image/image-helper\": \"\",\n    \"widget/crossnote.image/image-url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.image/click-here-to-browse-image-file\":\n      \"\",\n    \"widget/crossnote.neteasemusic/song-id-placeholder\":\n      \"NetEase Cloud Music SongID\",\n    \"widget/crossnote.video/video-url-placeholder\":\n      \"Enter\",\n    \"widget/crossnote.video/poster-url\": \"\",\n    \"widget/crossnote.video/poster-url-placeholder\":\n      \"\",\n    \"widget/crossnote.youtube/youtube-video-url\": \"Youtube \",\n    \"widget/crossnote.youtube/youtube-video-url-placeholder\":\n      \"YoutubeEnter\",\n    \"widget/crossnote.ocr/ocr\": \"OCR - Optical character recognition\",\n    \"widget/crossnote.ocr/local-image\": \"\",\n    \"widget/crossnote.ocr/recognize-text-in-languages\":\n      \"\",\n    \"widget/crossnote.ocr/start-ocr\": \"\",\n    \"widget/crossnote.ocr/extra-settings\": \"\",\n    \"widget/crossnote.ocr/grayscale\": \"\",\n    \"widget/crossnote.kanban/add-column\": \"\",\n    \"widget/crossnote.github_gist/title\": \"GitHub Gist \",\n    \"widget/crossnote/github_gist/enter-github-gist-url\":\n      \"GitHub Gist URL \",\n\n    // Tesseract\n    \"tesseract/loading tesseract core\": \"loading tesseract core\",\n    \"tesseract/initializing tesseract\": \"initializing tesseract\",\n    \"tesseract/initialized tesseract\": \"initialized tesseract\",\n    \"tesseract/loading language traineddata\": \"loading language traineddata\",\n    \"tesseract/loaded language traineddata\": \"loaded language traineddata\",\n    \"tesseract/initializing api\": \"initializing api\",\n    \"tesseract/initialized api\": \"initialized api\",\n    \"tesseract/recognizing text\": \"recognizing text\",\n\n    // Comment widget\n    \"widget/crossnote.comment/reply-to-this-user\": \"\",\n    \"widget/crossnote.comment/add-reaction-to-this-comment\":\n      \"\",\n    \"widget/crossnote.comment/edit-this-message\": \"\",\n    \"widget/crossnote.comment/modified-comment\": \"\",\n    \"widget/crossnote.comment/post-comment-failure\":\n      \"\",\n    \"widget/crossnote.comment/unsubscribe-info\": \"\",\n    \"widget/crossnote.comment/subscribe-info\": \"\",\n    \"widget/crossnote.comment/view-more-comments\": \"\",\n\n    // Dialogs\n    \"delete-note-dialog/title\": \"?\",\n    \"delete-note-dialog/subtitle\": \"\",\n    \"delete-directory-dialog/title\": \"\",\n    \"delete-directory-dialog/subtitle\":\n      \"\",\n    \"delete-tag-dialog/title\": \"\",\n    \"delete-tag-dialog/subtitle\":\n      \"\",\n    \"add-notebook-dialog/disclaimer\":\n      \"\",\n    \"edit-image-dialog/title\": \"\",\n    \"edit-image-dialog/image-url\": \" URL\",\n    \"edit-image-dialog/image-title\": \"\",\n    \"edit-image-dialog/image-alt-text\": \"\",\n    \"language-selector-dialog/subtitle\": \"\",\n\n    // react-ios-pwa-prompt\n    \"react-ios-pwa-prompt/copy-title\": \"\",\n    \"react-ios-pwa-prompt/copy-body\":\n      \"\",\n    \"react-ios-pwa-prompt/copy-share-button-label\":\n      \"1) [] \",\n    \"react-ios-pwa-prompt/copy-add-home-button-label\":\n      \"2) \",\n\n    // Publish notebook\n    \"publish-notebook/disclaimer-1\":\n      \"GitHubGitLabGitea README.md  \",\n    \"publish-notebook/disclaimer-2\":\n      \"  front-matter  README.md \",\n\n    // git\n    \"git/status/ignored\": \"\",\n    \"git/status/unmodified\": \"\",\n    \"git/status/*modified\": \"*\",\n    \"git/status/*deleted\": \"*\",\n    \"git/status/*added\": \"*\",\n    \"git/status/absent\": \"\",\n    \"git/status/modified\": \"\",\n    \"git/status/deleted\": \"\",\n    \"git/status/added\": \"\",\n    \"git/status/*unmodified\": \"*\",\n    \"git/status/*absent\": \"*\",\n    \"git/status/*undeleted\": \"*\",\n\n    // graph view\n    \"graph-view/node\": \"\",\n    \"graph-view/link\": \"\",\n  },\n};\n","import { printPreview as EchoMDPrintPreview } from \"@0xgg/echomd/preview\";\nimport * as path from \"path\";\nimport { globalContainers } from \"../containers/global\";\nimport { Note } from \"../lib/note\";\nimport { browserHistory } from \"./history\";\nimport { resolveNoteImageSrc } from \"./image\";\n\nexport function printPreview(\n  previewElement: HTMLElement,\n  bannerElement?: HTMLElement,\n  timeout = 2000,\n) {\n  return EchoMDPrintPreview(\n    previewElement,\n    bannerElement,\n    [\"body\"],\n    `\n  .App,\n  .editor-bottom-panel,\n  .drawer,\n  .CodeMirror,\n  .editor-textarea,\n  .editor-toolbar,\n  .Pane.vertical.Pane1,\n  .notes-panel,\n  .control-panel-wrapper {\n    display: none;\n  }\n`,\n    timeout,\n  );\n}\n\nexport function openURL(url: string = \"\", note: Note) {\n  if (!note || !url) {\n    return;\n  }\n  if (url.match(/https?:\\/\\//)) {\n    if (url.startsWith(window.location.origin)) {\n      browserHistory.push(url.replace(window.location.origin, \"\"));\n    } else {\n      window.open(url, \"_blank\"); // TODO: opener bug, check zhihu\n    }\n  } else if (url.startsWith(\"/\")) {\n    let filePath = path.relative(\n      note.notebookPath,\n      path.resolve(note.notebookPath, url.replace(/^\\//, \"\")),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      globalContainers.crossnoteContainer.getNotebookAtPath(note.notebookPath),\n      decodeURIComponent(filePath),\n    );\n  } else {\n    let filePath = path.relative(\n      note.notebookPath,\n      path.resolve(\n        path.dirname(path.resolve(note.notebookPath, note.filePath)),\n        url,\n      ),\n    );\n    globalContainers.crossnoteContainer.openNoteAtPath(\n      globalContainers.crossnoteContainer.getNotebookAtPath(note.notebookPath),\n      decodeURIComponent(filePath),\n    );\n  }\n}\n\nexport function postprocessPreview(\n  previewElement: HTMLElement,\n  note: Note,\n  isPresentationCallback?: (isPresentation: boolean) => void,\n) {\n  if (!previewElement) {\n    return;\n  }\n  const handleLinksClickEvent = (preview: HTMLElement) => {\n    // Handle link click event\n    const links = preview.getElementsByTagName(\"A\");\n    for (let i = 0; i < links.length; i++) {\n      const link = links[i] as HTMLAnchorElement;\n      link.onclick = (event) => {\n        event.preventDefault();\n        if (link.hasAttribute(\"data-topic\")) {\n          const tag = link.getAttribute(\"data-topic\");\n          if (tag.length) {\n            globalContainers.crossnoteContainer.openNoteAtPath(\n              globalContainers.crossnoteContainer.getNotebookAtPath(\n                note.notebookPath,\n              ),\n              tag,\n            );\n          }\n        } else {\n          openURL(link.getAttribute(\"href\"), note);\n        }\n      };\n    }\n  };\n  const resolveImages = async (preview: HTMLElement) => {\n    const images = preview.getElementsByTagName(\"IMG\");\n    for (let i = 0; i < images.length; i++) {\n      const image = images[i] as HTMLImageElement;\n      const imageSrc = image.getAttribute(\"src\");\n      image.setAttribute(\n        \"src\",\n        await resolveNoteImageSrc(note, decodeURIComponent(imageSrc)),\n      );\n    }\n  };\n\n  if (\n    previewElement.childElementCount &&\n    previewElement.children[0].tagName.toUpperCase() === \"IFRAME\"\n  ) {\n    // presentation\n    previewElement.style.maxWidth = \"100%\";\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    resolveImages(\n      (previewElement.children[0] as HTMLIFrameElement).contentDocument\n        .body as HTMLElement,\n    );\n    if (isPresentationCallback) {\n      isPresentationCallback(true);\n    }\n  } else {\n    // normal\n    // previewElement.style.maxWidth = `${EditorPreviewMaxWidth}px`;\n    previewElement.style.height = \"100%\";\n    previewElement.style.overflow = \"hidden !important\";\n    handleLinksClickEvent(previewElement);\n    resolveImages(previewElement);\n    if (isPresentationCallback) {\n      isPresentationCallback(false);\n    }\n  }\n}\n","import { renderPreview } from \"@0xgg/echomd/preview\";\nimport {\n  Avatar,\n  Box,\n  Card,\n  Chip,\n  Dialog,\n  IconButton,\n  Popover,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { formatRelative } from \"date-fns/esm\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { FileEditOutline, Reply, StickerEmoji } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Emoji, EmojiPicker } from \"../../../components/EmojiWrapper\";\nimport { globalContainers } from \"../../../containers/global\";\nimport {\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n  useAddReactionToCommentWidgetMessageMutation,\n  useRemoveReactionFromCommentWidgetMessageMutation,\n} from \"../../../generated/graphql\";\nimport { languageCodeToDateFNSLocale } from \"../../../i18n/i18n\";\nimport { postprocessPreview } from \"../../../utilities/preview\";\n\nconst messageMarginLeft = 48;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    chatMessage: {\n      \"width\": \"100%\",\n      \"paddingLeft\": theme.spacing(2),\n      \"paddingRight\": theme.spacing(2),\n      \"boxSizing\": \"border-box\",\n      \"cursor\": \"pointer\",\n      \"&:first-child\": {\n        marginTop: theme.spacing(2),\n      },\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6\",\n      },\n      \"&:hover .preview\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    avatarPanel: {\n      display: \"grid\",\n      gridTemplateAreas: `\"avatar username\"\n                          \"avatar time\"`,\n      justifyContent: \"start\",\n      alignItems: \"center\",\n      gridColumnGap: theme.spacing(2),\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n    },\n    username: {\n      gridArea: \"username\",\n    },\n    time: {\n      gridArea: \"time\",\n    },\n    message: {\n      marginLeft: `${messageMarginLeft}px`,\n      cursor: \"pointer\",\n      backgroundColor: \"inherit !important\",\n      /*\n      \"&:hover\": {\n        backgroundColor: \"#f6f6f6 !important\",\n      },\n      */\n    },\n    reactions: {\n      marginLeft: `${messageMarginLeft}px`,\n      marginBottom: theme.spacing(2),\n    },\n    singleTime: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    modifiedCaption: {\n      marginLeft: `${messageMarginLeft}px`,\n    },\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nconst actionBtnClass = {\n  width: \"20px\",\n  height: \"20px\",\n};\n\ninterface Props {\n  commentWidget: CommentWidgetFieldsFragment;\n  message: CommentWidgetMessageFieldsFragment;\n  previousMessage?: CommentWidgetMessageFieldsFragment;\n  mentionUser: (username: string) => void;\n  onModifyChatMessage: (chatMessageID: string) => void;\n}\nexport function CommentMessage(props: Props) {\n  const classes = useStyles(props);\n  const message = props.message;\n  const previousMessage = props.previousMessage;\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [\n    resAddReactionToCommentWidgetMessage,\n    executeAddReactionToCommentWidgetMessageMutation,\n  ] = useAddReactionToCommentWidgetMessageMutation();\n  const [\n    resRemoveReactionFromCommentWidgetMessage,\n    executeRemoveReactionFromCommentWidgetMessageMutation,\n  ] = useRemoveReactionFromCommentWidgetMessageMutation();\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const { t } = useTranslation();\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  useEffect(() => {\n    if (resAddReactionToCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resAddReactionToCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resAddReactionToCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (resRemoveReactionFromCommentWidgetMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: resRemoveReactionFromCommentWidgetMessage.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [resRemoveReactionFromCommentWidgetMessage]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, message.markdown);\n      postprocessPreview(\n        previewElement,\n        null, // globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, message.markdown]);\n\n  const handleClick = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(anchorEl ? null : (event.target as any));\n  };\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n  const handleReply = () => {\n    props.mentionUser(message.author.username);\n    handleClose();\n  };\n  const openPopper = Boolean(anchorEl);\n  const modified = message.createdAt !== message.updatedAt;\n\n  function updateReactionSummaries(reaction: string) {\n    let found = false;\n    for (let i = 0; i < message.reactionSummaries.length; i++) {\n      if (message.reactionSummaries[i].reaction === reaction) {\n        found = true;\n        message.reactionSummaries[i].count += 1;\n        message.reactionSummaries[i].selfAuthored = true;\n        break;\n      }\n    }\n    if (!found) {\n      message.reactionSummaries = [\n        {\n          reaction: reaction,\n          count: 1,\n          selfAuthored: true,\n        },\n        ...message.reactionSummaries,\n      ];\n    }\n    setForceUpdate(Date.now());\n  }\n  return (\n    <Box className={clsx(classes.chatMessage)} onClick={handleClick}>\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username ? null : (\n        <Box className={clsx(classes.avatarPanel)}>\n          <Avatar\n            onClick={() => {\n              /*\n              if (message.authorVisibility !== AuthorVisibility.Anonymous) {\n                window.open(\n                  `${CROSSNOTE_CONFIG.homePage}/user/${chatMessage.author.username}`\n                );\n              }\n              */\n            }}\n            variant={\"rounded\"}\n            className={clsx(classes.avatar)}\n            src={\n              message.author.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(message.author.username), 80).toString()\n            }\n          ></Avatar>\n          <Typography className={clsx(classes.username)}>\n            {message.author.username}\n          </Typography>\n          <Typography\n            className={clsx(classes.time)}\n            variant=\"body2\"\n            color={\"textSecondary\"}\n          >\n            {formatRelative(new Date(message.createdAt), new Date(), {\n              locale: languageCodeToDateFNSLocale(\n                globalContainers.settingsContainer.language,\n              ),\n            })}\n          </Typography>\n        </Box>\n      )}\n      {previousMessage &&\n      previousMessage.author.id === message.author.id &&\n      previousMessage.author.username === message.author.username &&\n      new Date(message.createdAt).getTime() -\n        new Date(previousMessage.createdAt).getTime() >=\n        1000 * 60 ? (\n        <Typography\n          className={clsx(classes.time, classes.singleTime)}\n          variant=\"body2\"\n          color={\"textSecondary\"}\n        >\n          {formatRelative(new Date(message.createdAt), new Date(), {\n            locale: languageCodeToDateFNSLocale(\n              globalContainers.settingsContainer.language,\n            ),\n          })}\n        </Typography>\n      ) : null}\n      {modified && (\n        <Typography\n          variant={\"caption\"}\n          color={\"textSecondary\"}\n          className={clsx(classes.modifiedCaption)}\n        >\n          {t(\"widget/crossnote.comment/modified-comment\")}\n        </Typography>\n      )}\n      <div\n        className={clsx(classes.message) + \" preview\"}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      <Box className={clsx(classes.reactions)}>\n        {message.reactionSummaries\n          .sort((x, y) => {\n            let weightX = 1;\n            let weightY = 1;\n            if (x.selfAuthored) {\n              weightX = 100;\n            }\n            if (y.selfAuthored) {\n              weightY = 100;\n            }\n            return x.count * weightX - y.count * weightY;\n          })\n          .map((reactionSummary) => {\n            return (\n              <Chip\n                variant={reactionSummary.selfAuthored ? \"default\" : \"outlined\"}\n                size=\"medium\"\n                label={reactionSummary.count.toString()}\n                color={\"primary\"}\n                key={reactionSummary.reaction}\n                style={{ marginRight: \"8px\" }}\n                className={clsx(classes.reactionChip)}\n                onClick={() => {\n                  if (!globalContainers.cloudContainer.loggedIn) {\n                    globalContainers.cloudContainer.setAuthDialogOpen(true);\n                  } else if (reactionSummary.selfAuthored) {\n                    executeRemoveReactionFromCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    reactionSummary.selfAuthored = false;\n                    reactionSummary.count -= 1; // TODO: Should we remove the reaction if it reaches 0?\n                    setForceUpdate(Date.now());\n                  } else {\n                    executeAddReactionToCommentWidgetMessageMutation({\n                      messageID: message.id,\n                      reaction: reactionSummary.reaction,\n                    });\n                    updateReactionSummaries(reactionSummary.reaction);\n                  }\n                }}\n                avatar={\n                  <Avatar>\n                    <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                  </Avatar>\n                }\n              />\n            );\n          })}\n      </Box>\n\n      <Popover\n        open={openPopper}\n        anchorEl={anchorEl}\n        onClose={handleClose}\n        anchorOrigin={{\n          vertical: \"bottom\",\n          horizontal: \"center\",\n        }}\n        transformOrigin={{\n          vertical: \"top\",\n          horizontal: \"center\",\n        }}\n      >\n        <Card>\n          <Tooltip title={t(\"widget/crossnote.comment/reply-to-this-user\")}>\n            <IconButton onClick={handleReply}>\n              <Reply style={actionBtnClass}></Reply>\n            </IconButton>\n          </Tooltip>\n          <Tooltip\n            title={t(\"widget/crossnote.comment/add-reaction-to-this-comment\")}\n          >\n            <IconButton onClick={() => setEmojiPickerOpen(true)}>\n              <StickerEmoji style={actionBtnClass}></StickerEmoji>\n            </IconButton>\n          </Tooltip>\n          {globalContainers.cloudContainer.loggedIn &&\n            message.author.id === globalContainers.cloudContainer.viewer.id && (\n              <Tooltip title={t(\"widget/crossnote.comment/edit-this-message\")}>\n                <IconButton\n                  onClick={() => props.onModifyChatMessage(message.id)}\n                >\n                  <FileEditOutline style={actionBtnClass}></FileEditOutline>\n                </IconButton>\n              </Tooltip>\n            )}\n        </Card>\n      </Popover>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          showSkinTones={false /* Disable skin for now */}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMessageMutation({\n                messageID: message.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n              handleClose();\n            }\n          }}\n        />\n      </Dialog>\n      <Box style={{ display: \"none\" }}>{forceUpdate}</Box>\n    </Box>\n  );\n}\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  TextField,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { Note } from \"../lib/note\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  editor: CodeMirrorEditor;\n  marker: TextMarker;\n  imageElement: HTMLImageElement;\n  note: Note;\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    imageWrapper: {\n      textAlign: \"center\",\n    },\n    imagePreview: {\n      maxWidth: \"100%\",\n      maxHeight: \"400px\",\n    },\n  }),\n);\n\nexport default function EditImageDialog(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const editor = props.editor;\n  const marker = props.marker;\n  const imageElement = props.imageElement;\n  const [imageSrc, setImageSrc] = useState<string>(\"\");\n  const [imageAlt, setImageAlt] = useState<string>(\"\");\n  const [imageTitle, setImageTitle] = useState<string>(\"\");\n  const [finalImageSrc, setFinalImageSrc] = useState<string>(\"\");\n\n  const deleteImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    editor.replaceRange(\"\", pos.from, pos.to);\n    props.onClose();\n  }, [imageElement, editor, marker, props]);\n\n  const updateImage = useCallback(() => {\n    if (!imageElement || !editor || !marker) {\n      return;\n    }\n    const pos = marker.find();\n    if (!pos) return;\n    if (imageTitle.trim().length) {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()} ${JSON.stringify(\n          imageTitle,\n        )})`,\n        pos.from,\n        pos.to,\n      );\n    } else {\n      editor.replaceRange(\n        `![${imageAlt.trim()}](${imageSrc.trim()})`,\n        pos.from,\n        pos.to,\n      );\n    }\n    props.onClose();\n  }, [imageElement, editor, marker, props, imageAlt, imageSrc, imageTitle]);\n\n  useEffect(() => {\n    if (imageElement && marker && editor) {\n      setFinalImageSrc(\"\");\n      setImageSrc(\n        imageElement.getAttribute(\"data-src\") || imageElement.src || \"\",\n      );\n      setImageTitle(imageElement.title || \"\");\n      setImageAlt(imageElement.alt || \"\");\n    }\n  }, [imageElement, marker, editor]);\n\n  useEffect(() => {\n    if (!props.note) {\n      return;\n    }\n    resolveNoteImageSrc(props.note, imageSrc)\n      .then((finalImageSrc) => {\n        setFinalImageSrc(finalImageSrc);\n      })\n      .catch((error) => {\n        setFinalImageSrc(\"\");\n      });\n  }, [imageSrc, props.note]);\n\n  if (!editor || !marker || !imageElement) {\n    return null;\n  }\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose} style={{ zIndex: 3001 }}>\n      <DialogTitle>{t(\"edit-image-dialog/title\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        <Box className={clsx(classes.imageWrapper)}>\n          <img\n            className={clsx(classes.imagePreview)}\n            src={finalImageSrc}\n            alt={imageAlt}\n            title={imageTitle}\n          ></img>{\" \"}\n        </Box>\n        <TextField\n          autoFocus={true}\n          value={imageSrc}\n          helperText={t(\"edit-image-dialog/image-url\")}\n          fullWidth={true}\n          onChange={(event) => setImageSrc(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageTitle}\n          helperText={t(\"edit-image-dialog/image-title\")}\n          fullWidth={true}\n          onChange={(event) => setImageTitle(event.target.value)}\n        ></TextField>\n        <TextField\n          autoFocus={true}\n          value={imageAlt}\n          helperText={t(\"edit-image-dialog/image-alt-text\")}\n          fullWidth={true}\n          onChange={(event) => setImageAlt(event.target.value)}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button variant={\"contained\"} color={\"primary\"} onClick={updateImage}>\n          {t(\"general/update\")}\n        </Button>\n        <Button variant={\"contained\"} color={\"secondary\"} onClick={deleteImage}>\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}> {t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  Box,\n  Button,\n  Card,\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  Typography,\n} from \"@material-ui/core\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { Note } from \"../../../lib/note\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport { openURL } from \"../../../utilities/preview\";\nconst EchoMD = require(\"@0xgg/echomd/core\");\n\nexport const ChatMessageEditorHeight = \"150\";\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    root: {\n      width: \"100%\",\n      height: `${ChatMessageEditorHeight}px`,\n      display: \"flex\",\n      flexDirection: \"column\",\n      // position: \"absolute\",\n      bottom: \"0\",\n    },\n    toolbar: {\n      display: \"flex\",\n      overflow: \"hidden\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n      justifyContent: \"flex-end\",\n      padding: \"1px 4px 1px 4px\",\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    toolbarLeft: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    editorWrapper: {\n      \"height\": \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    sendButton: {\n      width: \"100px\",\n    },\n  }),\n);\ninterface Props {\n  sendMessage: (message: string) => void;\n  sendingMessage?: boolean;\n  updateMessage: (chatMessageID: string, message: string) => void;\n  updateMessageID?: string;\n  updateMessageMarkdown?: string;\n  cancelUpdatingMessage: () => void;\n  updatingMessage?: boolean;\n  setEditor: (editor: CodeMirrorEditor) => void;\n}\n\nexport function CommentEditor(props: Props) {\n  const classes = useStyles(props);\n  const note: Note = null; // globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = EchoMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(\"\");\n      editor.setOption(\"lineNumbers\", false);\n      editor.focus();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    props.setEditor(editor);\n  }, [editor, props]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  useEffect(() => {\n    if (props.updateMessageID && props.updateMessageMarkdown) {\n      editor.setValue(props.updateMessageMarkdown);\n    }\n  }, [props.updateMessageID, props.updateMessageMarkdown, editor]);\n\n  return (\n    <Box className={clsx(classes.root)}>\n      <Box className={clsx(classes.toolbar)}>\n        {props.updateMessageID ? (\n          <Box>\n            <Button\n              variant={\"contained\"}\n              color={\"secondary\"}\n              onClick={() => {\n                props.cancelUpdatingMessage();\n              }}\n            >\n              {t(\"general/cancel\")}\n            </Button>\n            <Button\n              variant={\"contained\"}\n              color={\"primary\"}\n              onClick={() => {\n                if (editor) {\n                  props.updateMessage(\n                    props.updateMessageID,\n                    editor.getValue() || \"\",\n                  );\n                }\n              }}\n              disabled={props.updatingMessage}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {props.updatingMessage\n                ? t(\"general/updating\")\n                : t(\"general/update\")}\n            </Button>\n          </Box>\n        ) : (\n          <Box>\n            {globalContainers.cloudContainer.loggedIn ? (\n              <Button\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => {\n                  if (editor) {\n                    props.sendMessage(editor.getValue() || \"\");\n                    editor.setValue(\"\");\n                  }\n                }}\n                disabled={props.sendingMessage}\n                className={clsx(classes.sendButton)}\n              >\n                {props.sendingMessage\n                  ? t(\"general/sending\")\n                  : t(\"general/send\")}\n              </Button>\n            ) : (\n              <Button\n                variant={\"contained\"}\n                color={\"primary\"}\n                onClick={() => {\n                  globalContainers.cloudContainer.setAuthDialogOpen(true);\n                }}\n              >\n                <Typography variant={\"body2\"}>{\"Log in\"}</Typography>\n              </Button>\n            )}\n          </Box>\n        )}\n      </Box>\n      <Card className={clsx(classes.editorWrapper)} elevation={4}>\n        <textarea\n          id=\"outlined-multiline-flexible\"\n          className={classes.textarea}\n          ref={(element: HTMLTextAreaElement) => {\n            setTextAreaElement(element);\n          }}\n        />\n      </Card>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Box>\n  );\n}\n","import React, { useState, useEffect, useCallback } from \"react\";\nimport {\n  Dialog,\n  DialogContent,\n  Typography,\n  DialogTitle,\n  Box,\n  IconButton,\n  DialogActions,\n  Button,\n  useMediaQuery,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  CommentWidgetFieldsFragment,\n  CommentWidgetMessageFieldsFragment,\n  PageInfo,\n  useCommentWidgetMessagesQuery,\n  usePostCommentWidgetMessageMutation,\n  useUpdateCommentWidgetMessageMutation,\n  useSubscribeToCommentWidgetMutation,\n  useUnsubscribeFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport { useTranslation } from \"react-i18next\";\nimport {\n  EmptyPageInfo,\n  getMentionsFromMarkdown,\n} from \"../../../utilities/note\";\nimport { UUIDNil } from \"../../../utilities/utils\";\nimport { BellOutline, Bell, Close } from \"mdi-material-ui\";\nimport { CommentMessage } from \"./CommentMessages\";\nimport { Editor as CodeMirrorEditor } from \"codemirror\";\nimport { CommentEditor } from \"./CommentEditor\";\nimport Noty from \"noty\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    topBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    commentWrapper: {\n      padding: \"0\",\n    },\n    messages: {},\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  commentWidget: CommentWidgetFieldsFragment;\n}\nexport function CommentDialog(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const commentWidget = props.commentWidget;\n  const { t } = useTranslation();\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [messages, setMessages] = useState<\n    CommentWidgetMessageFieldsFragment[]\n  >(\n    commentWidget.instance.commentWidget.messages.edges.map(\n      (edge) => edge.node,\n    ),\n  );\n  const [messagesElement, setMessagesElement] = useState<HTMLDivElement>(null);\n  const [\n    latestPulledMessagePageInfo,\n    setLatestPulledMessagePageInfo,\n  ] = useState<PageInfo>(\n    commentWidget.instance.commentWidget.messages.pageInfo,\n  );\n  const [updateMessageID, setUpdateMessageID] = useState<string>(\"\");\n  const [\n    resMessagesAfter,\n    executeMessagesAfterQuery,\n  ] = useCommentWidgetMessagesQuery({\n    variables: {\n      widgetID: commentWidget.id,\n      before: UUIDNil,\n      after: latestPulledMessagePageInfo.endCursor,\n      first: 20,\n      last: 0,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resPostMessage,\n    executePostMessageMutation,\n  ] = usePostCommentWidgetMessageMutation();\n  const [\n    resUpdateMessage,\n    executeUpdateMessageMutation,\n  ] = useUpdateCommentWidgetMessageMutation();\n  const [\n    resSubscribeToCommentWidget,\n    executeSubscribeToCommentWidgetMutation,\n  ] = useSubscribeToCommentWidgetMutation();\n  const [\n    resUnsubscribeFromCommentWidget,\n    executeUnsubscribeFromCommentWidgetMutation,\n  ] = useUnsubscribeFromCommentWidgetMutation();\n\n  const mentionUser = useCallback(\n    (username: string) => {\n      if (editor) {\n        editor.focus();\n        editor.replaceSelection(`@${username} `);\n        editor.focus();\n      }\n    },\n    [editor],\n  );\n\n  const subscribeToChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = true;\n      executeSubscribeToCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeSubscribeToCommentWidgetMutation]);\n\n  const unsubscribeFromChatGroup = useCallback(() => {\n    if (commentWidget) {\n      commentWidget.instance.commentWidget.subscribed = false;\n      executeUnsubscribeFromCommentWidgetMutation({\n        widgetID: commentWidget.id,\n      });\n    }\n  }, [commentWidget, executeUnsubscribeFromCommentWidgetMutation]);\n\n  const sendMessage = useCallback(\n    (message: string = \"\") => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executePostMessageMutation({\n        widgetID: commentWidget.id,\n        markdown: message,\n        notifyUsers: getMentionsFromMarkdown(message),\n      });\n    },\n    [commentWidget, executePostMessageMutation],\n  );\n\n  const updateMessage = useCallback(\n    (messageID: string, message: string) => {\n      if (!commentWidget || !message.trim().length) {\n        return;\n      }\n      executeUpdateMessageMutation({\n        messageID: messageID,\n        markdown: message,\n      });\n    },\n    [commentWidget, executeUpdateMessageMutation],\n  );\n\n  const addMessage = useCallback(\n    (message: CommentWidgetMessageFieldsFragment) => {\n      setMessages((messages) =>\n        [message, ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    },\n    [],\n  );\n\n  const scrollMessagesToBottom = useCallback(() => {\n    if (messagesElement) {\n      messagesElement.scrollTop = messagesElement.scrollHeight * 10;\n    }\n  }, [messagesElement]);\n\n  const fetchPreviousMessages = useCallback(() => {\n    if (latestPulledMessagePageInfo.hasNextPage) {\n      executeMessagesAfterQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [executeMessagesAfterQuery, latestPulledMessagePageInfo]);\n\n  useEffect(() => {\n    if (resSubscribeToCommentWidget.error) {\n      // console.log(resSubscribeToCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-subscribe-to-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resSubscribeToCommentWidget, t]);\n\n  useEffect(() => {\n    if (resUnsubscribeFromCommentWidget.error) {\n      // console.log(resUnsubscribeFromCommentWidget.error);\n      /*\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-unsubscribe-from-comment-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n    }\n  }, [resUnsubscribeFromCommentWidget, t]);\n\n  useEffect(() => {\n    if (resPostMessage.fetching) {\n    } else if (resPostMessage.error) {\n      new Noty({\n        type: \"error\",\n        text: t(\"widget/crossnote.comment/post-comment-failure\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resPostMessage.data) {\n      const message = resPostMessage.data.postCommentWidgetMessage;\n      addMessage(message);\n      scrollMessagesToBottom();\n    }\n  }, [resPostMessage, addMessage, scrollMessagesToBottom, t]);\n\n  useEffect(() => {\n    if (resUpdateMessage.data) {\n      const message = resUpdateMessage.data.updateCommentWidgetMessage;\n      addMessage(message);\n      setUpdateMessageID(\"\");\n      if (editor) {\n        editor.setValue(\"\");\n      }\n    }\n  }, [resUpdateMessage, addMessage, editor]);\n\n  useEffect(() => {\n    if (resMessagesAfter.fetching) {\n    } else if (resMessagesAfter.error) {\n    } else if (resMessagesAfter.data) {\n      const connection =\n        resMessagesAfter.data.widget.instance.commentWidget.messages;\n      setLatestPulledMessagePageInfo(connection.pageInfo);\n      if (!connection.edges.length) {\n        return;\n      }\n      setMessages((messages) =>\n        [...connection.edges.map((edge) => edge.node), ...messages]\n          .filter(\n            (message, index, self) =>\n              index === self.findIndex((m) => m.id === message.id),\n          )\n          .sort((x, y) => {\n            const xC = new Date(x.createdAt);\n            const yC = new Date(y.createdAt);\n            return xC.getTime() - yC.getTime();\n          }),\n      );\n    }\n  }, [resMessagesAfter]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={props.onClose}\n      fullWidth={true}\n      fullScreen={fullScreen}\n    >\n      <DialogTitle style={{ paddingBottom: \"0\" }}>\n        <Box className={classes.topBar}>\n          <Box className={classes.row}>\n            {fullScreen && (\n              <IconButton onClick={() => props.onClose()}>\n                <Close></Close>\n              </IconButton>\n            )}\n            <Typography>{t(\"general/Comments\")}</Typography>\n          </Box>\n          <Tooltip\n            title={\n              commentWidget.instance.commentWidget.subscribed\n                ? t(\"widget/crossnote.comment/unsubscribe-info\")\n                : t(\"widget/crossnote.comment/subscribe-info\")\n            }\n          >\n            <IconButton\n              color={\"primary\"}\n              onClick={() => {\n                if (commentWidget.instance.commentWidget.subscribed) {\n                  unsubscribeFromChatGroup();\n                } else {\n                  subscribeToChatGroup();\n                }\n              }}\n            >\n              {commentWidget.instance.commentWidget.subscribed ? (\n                <Bell></Bell>\n              ) : (\n                <BellOutline></BellOutline>\n              )}\n            </IconButton>\n          </Tooltip>\n        </Box>\n      </DialogTitle>\n      <DialogContent className={clsx(classes.commentWrapper)}>\n        <div\n          className={clsx(classes.messages)}\n          ref={(element: HTMLDivElement) => {\n            setMessagesElement(element);\n          }}\n        >\n          {messages.map((message, index) => {\n            const commentMessage = (\n              <CommentMessage\n                commentWidget={commentWidget}\n                message={message}\n                previousMessage={index > 0 ? messages[index - 1] : null}\n                mentionUser={mentionUser}\n                key={message.id}\n                onModifyChatMessage={(messageID: string) => {\n                  setUpdateMessageID(messageID);\n                }}\n              ></CommentMessage>\n            );\n            if (\n              latestPulledMessagePageInfo.hasNextPage &&\n              latestPulledMessagePageInfo.endCursor === message.id\n            ) {\n              return (\n                <Box key={message.id}>\n                  {commentMessage}\n                  <Box\n                    style={{\n                      textAlign: \"center\",\n                      padding: \"16px\",\n                      marginBottom: \"16px\",\n                    }}\n                  >\n                    <Button\n                      variant={\"outlined\"}\n                      color={\"secondary\"}\n                      onClick={fetchPreviousMessages}\n                      disabled={resMessagesAfter.fetching}\n                    >\n                      {t(\"widget/crossnote.comment/view-more-comments\")}\n                    </Button>\n                  </Box>\n                </Box>\n              );\n            } else {\n              return commentMessage;\n            }\n          })}\n        </div>\n      </DialogContent>\n      <DialogActions style={{ padding: \"0\" }}>\n        <CommentEditor\n          sendMessage={(message) => {\n            sendMessage(message);\n          }}\n          sendingMessage={resPostMessage.fetching}\n          updateMessage={(messageID, message) => {\n            updateMessage(messageID, message);\n          }}\n          cancelUpdatingMessage={() => {\n            setUpdateMessageID(\"\");\n          }}\n          updateMessageID={updateMessageID}\n          updateMessageMarkdown={\n            updateMessageID\n              ? messages.filter((message) => message.id === updateMessageID)[0]\n                  .markdown\n              : \"\"\n          }\n          updatingMessage={resUpdateMessage.fetching}\n          setEditor={setEditor}\n        ></CommentEditor>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Avatar,\n  Badge,\n  Box,\n  Button,\n  Chip,\n  Dialog,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport \"emoji-mart/css/emoji-mart.css\";\nimport { CommentOutline, StickerEmoji } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { Provider } from \"urql\";\nimport { Emoji, EmojiPicker } from \"../../../components/EmojiWrapper\";\nimport { globalContainers } from \"../../../containers/global\";\nimport {\n  CommentWidgetFieldsFragment,\n  useAddReactionToCommentWidgetMutation,\n  useCommentWidgetQuery,\n  useCreateCommentWidgetMutation,\n  useRemoveReactionFromCommentWidgetMutation,\n} from \"../../../generated/graphql\";\nimport { Note } from \"../../../lib/note\";\nimport { GraphQLClient } from \"../../../utilities/client\";\nimport { getHeaderFromMarkdown } from \"../../../utilities/note\";\nimport { WidgetTopPanel } from \"../widget/WidgetTopPanel\";\nimport { CommentDialog } from \"./CommentDialog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    commentWidget: {\n      position: \"relative\",\n      // backgroundColor: theme.palette.grey[100],\n      backgroundColor: darken(theme.palette.background.paper, 0.05),\n    },\n    topPanel: {\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(1),\n    },\n    interactionPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    button: {},\n    reactionChip: {\n      \"marginBottom\": \"2px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\nfunction CommentWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const widgetID = props.attributes[\"id\"];\n  const editor = props.editor;\n  const { t } = useTranslation();\n  const [emojiPickerOpen, setEmojiPickerOpen] = useState<boolean>(false);\n  const [commentDialogOpen, setCommentDialogOpen] = useState<boolean>(false);\n  const [forceUpdate, setForceUpdate] = useState<number>(Date.now());\n  const [\n    resCreateCommentWidget,\n    executeCreateCommentWidgetMutation,\n  ] = useCreateCommentWidgetMutation();\n  const [resCommentWidget, executeCommentWidgetQuery] = useCommentWidgetQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n    variables: {\n      widgetID,\n    },\n  });\n  const [\n    resAddReactionToCommentWidget,\n    executeAddReactionToCommentWidgetMutation,\n  ] = useAddReactionToCommentWidgetMutation();\n  const [\n    resRemoveReactionFromCommentWidget,\n    executeRemoveReactionFromCommentWidgetMutation,\n  ] = useRemoveReactionFromCommentWidgetMutation();\n  const [\n    commentWidget,\n    setCommentWidget,\n  ] = useState<CommentWidgetFieldsFragment>(null);\n\n  const updateReactionSummaries = useCallback(\n    (reaction: string) => {\n      if (!commentWidget) {\n        return;\n      }\n      let found = false;\n      for (\n        let i = 0;\n        i < commentWidget.instance.commentWidget.reactionSummaries.length;\n        i++\n      ) {\n        if (\n          commentWidget.instance.commentWidget.reactionSummaries[i].reaction ===\n          reaction\n        ) {\n          found = true;\n          commentWidget.instance.commentWidget.reactionSummaries[i].count += 1;\n          commentWidget.instance.commentWidget.reactionSummaries[\n            i\n          ].selfAuthored = true;\n          break;\n        }\n      }\n      if (!found) {\n        commentWidget.instance.commentWidget.reactionSummaries = [\n          {\n            reaction: reaction,\n            count: 1,\n            selfAuthored: true,\n          },\n          ...commentWidget.instance.commentWidget.reactionSummaries,\n        ];\n        commentWidget.instance.commentWidget.reactionsCount += 1;\n      }\n      setForceUpdate(Date.now());\n    },\n    [commentWidget],\n  );\n\n  // Create comment widget\n  useEffect(() => {\n    if (widgetID || props.isPreview) {\n      return;\n    }\n    if (resCreateCommentWidget.error) {\n      // TODO: Either user not logged in or server failed to create the widget\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-create-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000,\n      }).show();\n\n      if (!globalContainers.cloudContainer.loggedIn) {\n        new Noty({\n          type: \"info\",\n          text: t(\"general/please-sign-in-first\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 5000,\n        }).show();\n        globalContainers.cloudContainer.setAuthDialogOpen(true);\n      }\n\n      props.removeSelf();\n    } else if (resCreateCommentWidget.data) {\n      const id = resCreateCommentWidget.data.createWidget.id;\n      props.setAttributes(Object.assign(props.attributes, { id }));\n    }\n  }, [resCreateCommentWidget, t, props, widgetID]);\n\n  useEffect(() => {\n    if (resCommentWidget.error) {\n      // TODO: This part has issue if we delete a widget and create a new one. The error will repeatly occur.\n      /*\n      console.log(resCommentWidget.error);\n      new Noty({\n        type: \"error\",\n        text: t(\"error/failed-to-fetch-widget\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 5000\n      }).show();\n      */\n      setCommentWidget(null);\n    } else if (resCommentWidget.data) {\n      setCommentWidget(resCommentWidget.data.widget);\n      resCommentWidget.data = null;\n    }\n  }, [resCommentWidget, t]);\n\n  // Create widget\n  useEffect(() => {\n    if (\n      !widgetID &&\n      !resCreateCommentWidget.fetching &&\n      !resCreateCommentWidget.error &&\n      !resCreateCommentWidget.data &&\n      editor\n    ) {\n      const title =\n        getHeaderFromMarkdown(editor.getValue()) || t(\"general/Untitled\");\n      const note = (editor.getOption as any)(\"note\") as Note;\n      let source = window.location.href;\n      if (note) {\n        const notebook = globalContainers.crossnoteContainer.getNotebookAtPath(\n          note.notebookPath,\n        );\n        if (notebook) {\n          // TODO: Refactor with NotePopover.tsx\n          source = notebook.gitURL\n            ? `${window.location.origin}/?repo=${encodeURIComponent(\n                notebook.gitURL,\n              )}&branch=${encodeURIComponent(\n                notebook.gitBranch || \"master\",\n              )}&filePath=${encodeURIComponent(note.filePath)}`\n            : `${window.location.origin}/?notebookID=${\n                notebook._id\n              }&filePath=${encodeURIComponent(note.filePath)}`;\n        }\n      }\n      const description = `  **${title}**`;\n      executeCreateCommentWidgetMutation({\n        description,\n        source,\n      });\n    }\n  }, [\n    widgetID,\n    resCreateCommentWidget,\n    editor,\n    t,\n    executeCreateCommentWidgetMutation,\n  ]);\n\n  // Query created widget\n  useEffect(() => {\n    if (widgetID && executeCommentWidgetQuery) {\n      executeCommentWidgetQuery({\n        requestPolicy: \"network-only\",\n      });\n    }\n  }, [widgetID, executeCommentWidgetQuery]);\n\n  if (resCommentWidget.error) {\n    return <Box>{t(\"error/failed-to-load-widget\")}</Box>;\n  }\n\n  if (!widgetID) {\n    return <Box>{t(\"widget/creating-widget\")}</Box>;\n  }\n\n  if (!commentWidget) {\n    return <Box>{t(\"widget/loading-widget\")}</Box>;\n  }\n\n  return (\n    <Box\n      className={clsx(classes.commentWidget)}\n      style={{ marginBottom: props.isPreview ? \"16px\" : \"0\" }}\n    >\n      <Box className={clsx(classes.topPanel)}>\n        <WidgetTopPanel\n          widget={commentWidget as any}\n          removeSelf={props.removeSelf}\n          isPreview={props.isPreview}\n        ></WidgetTopPanel>\n      </Box>\n      <Box className={clsx(classes.interactionPanel)}>\n        <Tooltip title={t(\"interaction-panel/add-comment\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => {\n              setCommentDialogOpen(true);\n            }}\n          >\n            <CommentOutline></CommentOutline>\n            {commentWidget.instance.commentWidget.messagesCount > 0 ? (\n              <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                {commentWidget.instance.commentWidget.messagesCount}\n              </Typography>\n            ) : null}\n          </Button>\n        </Tooltip>\n        <Tooltip title={t(\"interaction-panel/add-reaction\")}>\n          <Button\n            className={clsx(classes.button)}\n            onClick={() => setEmojiPickerOpen(true)}\n          >\n            <Badge style={{ zIndex: 0 }} color={\"secondary\"}>\n              {/* badgeContent={(note.reactions || \"+\").toString()} */}\n              <StickerEmoji />\n              {commentWidget.instance.commentWidget.reactionsCount > 0 ? (\n                <Typography style={{ marginLeft: \"4px\", marginBottom: \"0\" }}>\n                  {commentWidget.instance.commentWidget.reactionsCount}\n                </Typography>\n              ) : null}\n            </Badge>\n          </Button>\n        </Tooltip>\n        <Box>\n          {commentWidget.instance.commentWidget.reactionSummaries\n            .sort((x, y) => {\n              let weightX = 1;\n              let weightY = 1;\n              if (x.selfAuthored) {\n                weightX = 100;\n              }\n              if (y.selfAuthored) {\n                weightY = 100;\n              }\n              return x.count * weightX - y.count * weightY;\n            })\n            .map((reactionSummary) => {\n              return (\n                <Chip\n                  variant={\n                    reactionSummary.selfAuthored ? \"default\" : \"outlined\"\n                  }\n                  size=\"medium\"\n                  label={reactionSummary.count.toString()}\n                  color={\"primary\"}\n                  key={reactionSummary.reaction}\n                  style={{ marginRight: \"8px\" }}\n                  className={clsx(classes.reactionChip)}\n                  onClick={() => {\n                    if (!globalContainers.cloudContainer.loggedIn) {\n                      globalContainers.cloudContainer.setAuthDialogOpen(true);\n                    } else if (reactionSummary.selfAuthored) {\n                      executeRemoveReactionFromCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      reactionSummary.selfAuthored = false;\n                      reactionSummary.count -= 1;\n                      commentWidget.instance.commentWidget.reactionsCount -= 1;\n                      if (reactionSummary.count <= 0) {\n                        commentWidget.instance.commentWidget.reactionSummaries = commentWidget.instance.commentWidget.reactionSummaries.filter(\n                          (summary) =>\n                            summary.reaction !== reactionSummary.reaction,\n                        );\n                        setForceUpdate(Date.now());\n                      }\n                    } else {\n                      executeAddReactionToCommentWidgetMutation({\n                        widgetID: commentWidget.id,\n                        reaction: reactionSummary.reaction,\n                      });\n                      updateReactionSummaries(reactionSummary.reaction);\n                    }\n                  }}\n                  avatar={\n                    <Avatar>\n                      <Emoji emoji={reactionSummary.reaction} size={16}></Emoji>\n                    </Avatar>\n                  }\n                />\n              );\n            })}\n        </Box>\n      </Box>\n\n      <Dialog open={emojiPickerOpen} onClose={() => setEmojiPickerOpen(false)}>\n        <EmojiPicker\n          showSkinTones={false}\n          onSelect={(data) => {\n            if (!globalContainers.cloudContainer.loggedIn) {\n              setEmojiPickerOpen(false);\n              globalContainers.cloudContainer.setAuthDialogOpen(true);\n            } else {\n              setEmojiPickerOpen(false);\n              executeAddReactionToCommentWidgetMutation({\n                widgetID: commentWidget.id,\n                reaction: data.colons,\n              });\n              updateReactionSummaries(data.colons);\n            }\n          }}\n        ></EmojiPicker>\n      </Dialog>\n      <CommentDialog\n        open={commentDialogOpen}\n        onClose={() => setCommentDialogOpen(false)}\n        commentWidget={commentWidget}\n      ></CommentDialog>\n    </Box>\n  );\n}\n\nexport const CommentWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n        <CommentWidget {...args}></CommentWidget>\n      </ThemeProvider>\n    </Provider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Box,\n  Card,\n  IconButton,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan, TrashCanOutline } from \"mdi-material-ui\";\nimport React, { useCallback, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\n// @ts-ignore\nimport Gist from \"super-react-gist\"; // <-- import the library\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtonsGroup: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\nfunction GitHubGistWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n\n  const setGistURL = useCallback(\n    (url: string) => {\n      try {\n        const location = new URL(url);\n        if (location.host !== \"gist.github.com\") {\n          return;\n        } else {\n          props.setAttributes({\n            url: location.origin + location.pathname,\n          });\n        }\n      } catch (error) {}\n    },\n    [props],\n  );\n\n  if (props.attributes[\"url\"]) {\n    return (\n      <Box className={\"preview github-gist\"} style={{ whiteSpace: \"normal\" }}>\n        <Gist url={props.attributes[\"url\"]}></Gist>\n        {!props.isPreview && (\n          <Box className={clsx(classes.actionButtonsGroup)}>\n            <IconButton onClick={() => props.removeSelf()}>\n              <TrashCanOutline></TrashCanOutline>\n            </IconButton>\n          </Box>\n        )}\n      </Box>\n    );\n  }\n\n  if (props.isPreview) {\n    return null;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.github_gist/title\")}\n      </Typography>\n      <TextField\n        label={t(\"widget/crossnote/github_gist/enter-github-gist-url\")}\n        placeholder={\"https://gist.github.com/...\"}\n        value={url}\n        onChange={(event) => setURL(event.target.value)}\n        fullWidth={true}\n        onKeyUp={(event) => {\n          if (event.which === 13) {\n            setGistURL(url);\n          }\n        }}\n      ></TextField>\n      <Box className={clsx(classes.actionButtonsGroup)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n    </Card>\n  );\n}\n\nexport const GitHubGistWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <GitHubGistWidget {...args}></GitHubGistWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","/**\n * Upload image to sm.ms\n * @param filePath\n */\nexport async function smmsUploadImages(files: File[] = []): Promise<string[]> {\n  const promises = [];\n  for (let i = 0; i < files.length; i++) {\n    const file = files[i];\n    if (!file.type.match(\"image.*\")) {\n      continue;\n    }\n    promises.push(\n      new Promise<string>((resolve, reject) => {\n        const headers = {\n          // \"Content-Type\": \"multipart/form-data\" // <= Adding this will cause problem.\n        };\n        const data = new FormData();\n        data.append(\"smfile\", file);\n        data.append(\"format\", \"json\");\n        fetch(\"https://sm.ms/api/v2/upload\", {\n          method: \"POST\",\n          mode: \"cors\",\n          headers,\n          referrer: \"\",\n          body: data,\n        })\n          .then((response) => response.json())\n          .then((json) => {\n            if (json[\"success\"]) {\n              return resolve(json[\"data\"][\"url\"]);\n            } else if (\n              json[\"code\"] === \"image_repeated\" ||\n              (json[\"code\"] === \"exception\" &&\n                json[\"message\"].match(/this image exists at:/))\n            ) {\n              return resolve(json[\"message\"].match(/https:\\/\\/.+$/)[0]);\n            } else {\n              return reject(json[\"message\"]);\n            }\n          })\n          .catch((error) => {\n            return reject(\"Failed to connect to sm.ms host\");\n          });\n      }),\n    );\n  }\n  return await Promise.all(promises);\n}\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Box,\n  Card,\n  IconButton,\n  Input,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { smmsUploadImages } from \"../../../utilities/image_uploader\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\nfunction ImageWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [imageUploaderElement, setImageUploaderElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [uploadingImages, setUploadingImages] = useState<boolean>(false);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageUploaderElement || uploadingImages) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: t(\"utils/uploading-image\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      setUploadingImages(true);\n      smmsUploadImages(files)\n        .then((urls) => {\n          let markdown = ``;\n          urls.forEach((url) => {\n            markdown = markdown + `![](${url})  \\n`;\n          });\n          props.replaceSelf(markdown);\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          setUploadingImages(false);\n          new Noty({\n            type: \"error\",\n            text: t(\"utils/upload-image-failure\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n        });\n    };\n    imageUploaderElement.click();\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>\n        {t(\"widget/crossnote.image/image-helper\")}\n      </Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      {!uploadingImages && (\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {\"URL\"}\n          </Typography>\n          <Input\n            margin={\"dense\"}\n            placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n            value={url}\n            onChange={(event) => {\n              setURL(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                props.replaceSelf(`![](${url})\\n`);\n              }\n            }}\n            fullWidth={true}\n          ></Input>\n        </Box>\n      )}\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Upload\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            uploadingImages ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {uploadingImages\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"caption\"}>\n          {t(\"widget/crossnote.image/thanks_sm_ms\")}\n        </Typography>\n      </Box>\n      <input\n        type=\"file\"\n        multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageUploaderElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const ImageWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <ImageWidget {...args}></ImageWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","// @ts-ignore\nimport { renderPreview } from \"@0xgg/echomd/preview\";\nimport { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\n// @ts-ignore\nimport Board from \"@lourenci/react-kanban\";\nimport {\n  Box,\n  Button,\n  Card,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  IconButton,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Editor as CodeMirrorEditor, TextMarker } from \"codemirror\";\nimport {\n  Cancel,\n  CardPlus,\n  Close,\n  ContentSave,\n  Pencil,\n  Plus,\n  TrashCan,\n} from \"mdi-material-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport EditImageDialog from \"../../../components/EditImageDialog\";\nimport { globalContainers } from \"../../../containers/global\";\nimport { Note } from \"../../../lib/note\";\nimport { setTheme } from \"../../../themes/manager\";\nimport { resolveNoteImageSrc } from \"../../../utilities/image\";\nimport { openURL, postprocessPreview } from \"../../../utilities/preview\";\n\nconst EchoMD = require(\"@0xgg/echomd/core\");\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    columnHeader: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      color: \"#000\", // BUG: TODO: Wait for react-kanban styling support\n    },\n    kanbanCard: {\n      width: \"256px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      backgroundColor: theme.palette.background.paper,\n      color: theme.palette.text.primary,\n      [theme.breakpoints.down(\"sm\")]: {\n        marginTop: \"4px\",\n        marginBottom: \"4px\",\n      },\n    },\n    editorWrapper: {\n      // height: \"160px\",\n      // border: \"2px solid #96c3e6\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n    },\n    textarea: {\n      width: \"100%\",\n      height: \"100%\",\n    },\n    preview: {\n      padding: theme.spacing(2),\n    },\n  }),\n);\n\ninterface KanbanCard {\n  id: number;\n  title: string;\n  description: string;\n}\n\ninterface kanbanColumn {\n  id: number;\n  title: string;\n  wip: boolean;\n  cards: KanbanCard[];\n}\n\ninterface KanbanBoard {\n  columns: kanbanColumn[];\n}\n\ninterface KanbanColumnHeaderProps {\n  column: kanbanColumn;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\n\nfunction KanbanColumnHeaderDisplay(props: KanbanColumnHeaderProps) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const column = props.column;\n  const board = props.board;\n  const isPreview = props.isPreview;\n  const refreshBoard = props.refreshBoard;\n  const [clickedTitle, setClickedTitle] = useState<boolean>(false);\n  const [titleValue, setTitleValue] = useState<string>(column.title);\n\n  useEffect(() => {\n    if (!clickedTitle && titleValue !== column.title) {\n      column.title = titleValue || t(\"general/Untitled\");\n      setTitleValue(column.title);\n      refreshBoard(board);\n    }\n  }, [clickedTitle, board, column.title, titleValue, t, refreshBoard]);\n\n  return (\n    <Box className={clsx(classes.columnHeader)}>\n      <Box>\n        {clickedTitle ? (\n          <TextField\n            value={titleValue}\n            onChange={(event) => {\n              setTitleValue(event.target.value);\n            }}\n            onBlur={() => {\n              setClickedTitle(false);\n            }}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                setClickedTitle(false);\n              }\n            }}\n          ></TextField>\n        ) : (\n          <Typography\n            variant={\"body1\"}\n            style={{ cursor: \"text\" }}\n            onClick={() => {\n              if (!isPreview) {\n                setClickedTitle(true);\n              }\n            }}\n          >\n            {titleValue}\n          </Typography>\n        )}\n      </Box>\n      {!isPreview && (\n        <Box>\n          <IconButton\n            onClick={() => {\n              const card: KanbanCard = {\n                id: Date.now(),\n                title: \"\", //\"Card \" + column.cards.length,\n                description: t(\"general/empty\"),\n              };\n              if (column) {\n                column.cards.push(card);\n              }\n              props.refreshBoard(board);\n            }}\n          >\n            <CardPlus></CardPlus>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns = board.columns.filter((l) => column.id !== l.id);\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n    </Box>\n  );\n}\n\ninterface KanbanCardProps {\n  card: KanbanCard;\n  board: KanbanBoard;\n  refreshBoard: (board: Board) => void;\n  isPreview: boolean;\n}\nfunction KanbanCardDisplay(props: KanbanCardProps) {\n  const classes = useStyles(props);\n  const board = props.board;\n  const card = props.card;\n  const isPreview = props.isPreview;\n  const note: Note = null; // = globalContainers.crossnoteContainer.selectedNote;\n  const [textAreaElement, setTextAreaElement] = useState<HTMLTextAreaElement>(\n    null,\n  );\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [description, setDescription] = useState<string>(card.description);\n  const [editorDialogOpen, setEditDialogOpen] = useState<boolean>(false);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n\n  const { t } = useTranslation();\n\n  useEffect(() => {\n    setDescription(card.description);\n  }, [card.description]);\n\n  useEffect(() => {\n    if (textAreaElement) {\n      const editor: CodeMirrorEditor = EchoMD.fromTextArea(textAreaElement, {\n        mode: {\n          name: \"hypermd\",\n          hashtag: true,\n        },\n        // inputStyle: \"textarea\",\n        // autofocus: false\n        keyMap: globalContainers.settingsContainer.keyMap,\n        showCursorWhenSelecting: true,\n        inputStyle: \"contenteditable\",\n      });\n      editor.setValue(card.description);\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setOption(\"autofocus\", false);\n      if (isPreview) {\n        editor.setOption(\"readOnly\", \"nocursor\");\n      }\n      editor.on(\"changes\", () => {\n        setDescription(editor.getValue());\n      });\n      editor.focus();\n      /*\n      // Cause save not working\n      editor.on(\"blur\", () => {\n        setClickedPreview(false);\n        setEditor(null);\n      });\n      */\n      // editor.display.input.blur();\n      setEditor(editor);\n    }\n  }, [textAreaElement]);\n\n  useEffect(() => {\n    if (editor && globalContainers.settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: globalContainers.settingsContainer.theme.name,\n      });\n    }\n  }, [editor]);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, card.description);\n      postprocessPreview(\n        previewElement,\n        null, // globalContainers.crossnoteContainer.selectedNote,\n      );\n    }\n  }, [previewElement, card.description]);\n\n  useEffect(() => {\n    if (!editor) {\n      return;\n    }\n\n    const linkIconClickedHandler = (args: any) => {\n      // TODO:\n      const url = args.element.getAttribute(\"data-url\");\n      openURL(url || \"\", note);\n    };\n    editor.on(\"linkIconClicked\", linkIconClickedHandler);\n\n    const imageClickedHandler = (args: any) => {\n      const marker: TextMarker = args.marker;\n      const imageElement: HTMLImageElement = args.element;\n      imageElement.setAttribute(\n        \"data-marker-position\",\n        JSON.stringify(marker.find()),\n      );\n      setEditImageElement(imageElement);\n      setEditImageTextMarker(marker);\n      setEditImageDialogOpen(true);\n    };\n    editor.on(\"imageClicked\", imageClickedHandler);\n\n    const loadImage = async (args: any) => {\n      const element = args.element;\n      const imageSrc = element.getAttribute(\"data-src\");\n      element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n    };\n    editor.on(\"imageReadyToLoad\", loadImage);\n\n    return () => {\n      editor.off(\"linkIconClicked\", linkIconClickedHandler);\n      editor.off(\"imageClicked\", imageClickedHandler);\n      editor.off(\"imageReadyToLoad\", loadImage);\n    };\n  }, [editor, note]);\n\n  return (\n    <Card className={clsx(classes.kanbanCard)}>\n      <div\n        className={clsx(\"preview\", classes.preview)}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n      ></div>\n      {!isPreview && (\n        <Box style={{ position: \"absolute\", top: \"0\", right: \"0\", zIndex: 99 }}>\n          <IconButton onClick={() => setEditDialogOpen(true)}>\n            <Pencil></Pencil>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              board.columns.forEach((column) => {\n                column.cards = column.cards.filter((c) => c.id !== card.id);\n              });\n              props.refreshBoard(board);\n            }}\n          >\n            <Close></Close>\n          </IconButton>\n        </Box>\n      )}\n      <Dialog\n        open={editorDialogOpen}\n        onClose={() => setEditDialogOpen(false)}\n        style={{ zIndex: 3000 }}\n      >\n        <DialogContent>\n          <Box\n            className={clsx(classes.editorWrapper)}\n            style={{ minWidth: \"300px\", maxWidth: \"100%\" }}\n          >\n            <textarea\n              className={classes.textarea}\n              ref={(element: HTMLTextAreaElement) => {\n                setTextAreaElement(element);\n              }}\n            ></textarea>\n          </Box>\n        </DialogContent>\n        <DialogActions>\n          <IconButton\n            onClick={() => {\n              card.description = description;\n              props.refreshBoard(props.board);\n              setEditDialogOpen(false);\n            }}\n          >\n            <ContentSave></ContentSave>\n          </IconButton>\n          <IconButton\n            onClick={() => {\n              if (editor) {\n                editor.setValue(card.description);\n              }\n              setDescription(card.description);\n              setEditDialogOpen(false);\n            }}\n          >\n            <Cancel></Cancel>\n          </IconButton>\n        </DialogActions>\n      </Dialog>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n    </Card>\n  );\n}\n\nfunction KanbanWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [board, setBoard] = useState<KanbanBoard>(\n    props.attributes[\"board\"] || {\n      columns: [],\n    },\n  );\n\n  if (\"lanes\" in (board as any)) {\n    board.columns = (board as any).lanes;\n  }\n\n  const refreshBoard = (board: KanbanBoard) => {\n    const newBoard = Object.assign({}, board);\n    props.setAttributes({ board: newBoard });\n    setBoard(newBoard as KanbanBoard);\n  };\n\n  return (\n    <div>\n      <Board\n        renderColumnHeader={(column: kanbanColumn) => (\n          <KanbanColumnHeaderDisplay\n            column={column}\n            board={board}\n            refreshBoard={refreshBoard}\n            isPreview={props.isPreview}\n          ></KanbanColumnHeaderDisplay>\n        )}\n        renderCard={(card: KanbanCard, { dragging }: { dragging: boolean }) => {\n          return (\n            <KanbanCardDisplay\n              card={card}\n              board={board}\n              refreshBoard={refreshBoard}\n              isPreview={props.isPreview}\n            ></KanbanCardDisplay>\n          );\n        }}\n        allowAddColumn={!props.isPreview}\n        allowAddCard={!props.isPreview}\n        renderColumnAdder={(): any => {\n          return (\n            <Box style={{ marginLeft: \"16px\", marginTop: \"16px\" }}>\n              <Button\n                color={\"primary\"}\n                variant={\"outlined\"}\n                onClick={() => {\n                  board.columns.push({\n                    id: Date.now(),\n                    title: t(\"general/untitled\"),\n                    cards: [],\n                    wip: false,\n                  });\n                  refreshBoard(board);\n                }}\n              >\n                <Plus></Plus>\n                {t(\"widget/crossnote.kanban/add-column\")}\n              </Button>\n              <Button color={\"primary\"} onClick={() => props.removeSelf()}>\n                <TrashCan></TrashCan>\n              </Button>\n            </Box>\n          );\n          // return <ColumnAdder addColumn={addColumn} />;\n        }}\n        onNewColumnConfirm={(newColumn: any) => {\n          board.columns.push({ id: Date.now(), ...newColumn });\n          refreshBoard(board);\n        }}\n        disableCardDrag={props.isPreview}\n        disableColumnDrag={props.isPreview}\n        onCardDragEnd={(\n          card: KanbanCard,\n          source: { fromPosition: number; fromColumnId: number },\n          destination: { toPosition: number; toColumnId: number },\n        ) => {\n          const { fromPosition, fromColumnId } = source;\n          let { toPosition, toColumnId } = destination;\n          const fromColumn = board.columns.filter(\n            (l) => l.id === fromColumnId,\n          )[0];\n          const toColumn = board.columns.filter((l) => l.id === toColumnId)[0];\n          fromColumn.cards.splice(fromPosition, 1);\n          toColumn.cards = [\n            ...toColumn.cards.slice(0, toPosition),\n            card,\n            ...toColumn.cards.slice(toPosition, toColumn.cards.length),\n          ];\n\n          refreshBoard(board);\n        }}\n        onColumnDragEnd={(\n          b: KanbanBoard,\n          source: { fromPosition: number },\n          destination: { toPosition: number },\n        ) => {\n          const fromPosition: number = source.fromPosition;\n          const toPosition: number = destination.toPosition;\n          const fromColumn = board.columns[fromPosition];\n          const toColumn = board.columns[toPosition];\n          board.columns[toPosition] = fromColumn;\n          board.columns[fromPosition] = toColumn;\n          refreshBoard(board);\n        }}\n      >\n        {board}\n      </Board>\n    </div>\n  );\n}\n\nexport const KanbanWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <KanbanWidget {...args}></KanbanWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Box,\n  Button,\n  ButtonGroup,\n  Card,\n  Checkbox,\n  FormControlLabel,\n  FormGroup,\n  IconButton,\n  Input,\n  List,\n  ListItem,\n  ListItemSecondaryAction,\n  ListItemText,\n  Switch,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { createWorker } from \"tesseract.js\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    dropArea: {\n      \"textAlign\": \"center\",\n      \"padding\": \"24px\",\n      \"border\": \"4px dotted #c7c7c7\",\n      \"backgroundColor\": darken(theme.palette.background.paper, 0.01),\n      \"cursor\": \"pointer\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.2),\n      },\n    },\n    canvasWrapper: {\n      marginTop: theme.spacing(2),\n      // height: 0,\n      // paddingTop: \"56.25%\" // 16:9\n    },\n    canvas: {\n      maxWidth: \"100%\",\n    },\n    disabled: {\n      cursor: \"not-allowed\",\n    },\n  }),\n);\n\ninterface OCRProgress {\n  status: string;\n  progress: number;\n  workerId?: string;\n}\n\nfunction getInitialLanguages() {\n  try {\n    return JSON.parse(\n      localStorage.getItem(\"widget/crossnote.ocr/languages\") || '[\"eng\"]',\n    );\n  } catch (error) {\n    return [\"eng\"];\n  }\n}\n\nfunction OCRWidget(props: WidgetArgs) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [canvas, setCanvas] = useState<HTMLCanvasElement>(null);\n  // https://github.com/tesseract-ocr/tesseract/wiki/Data-Files#data-files-for-version-400-november-29-2016\n  const [link, setLink] = useState<string>(\"\");\n  const [imageDataURL, setImageDataURL] = useState<string>(\"\");\n  const [ocrDataURL, setOCRDataURL] = useState<string>(\"\");\n  const [imageDropAreaElement, setImageDropAreaElement] = useState<\n    HTMLInputElement\n  >(null);\n  const [isProcessing, setIsProcessing] = useState<boolean>(false);\n  const [ocrProgresses, setOCRProgresses] = useState<OCRProgress[]>([]);\n  const [selectedLanguages, setSelectedLanguages] = useState<string[]>(\n    getInitialLanguages(),\n  );\n  const [grayscaleChecked, setGrayscaleChecked] = useState<boolean>(\n    !!localStorage.getItem(\"widget/crossnote.ocr/grayscale\") || true,\n  );\n\n  useEffect(() => {\n    if (canvas && imageDataURL) {\n      const imageObject = new Image();\n      const context = canvas.getContext(\"2d\");\n      imageObject.onload = function () {\n        canvas.width = imageObject.width;\n        canvas.height = imageObject.height;\n        context.clearRect(0, 0, canvas.width, canvas.height);\n        if (grayscaleChecked) {\n          context.fillStyle = \"#FFF\";\n          context.fillRect(0, 0, canvas.width, canvas.height);\n          context.globalCompositeOperation = \"luminosity\";\n        }\n        context.drawImage(imageObject, 0, 0);\n        setOCRDataURL(canvas.toDataURL());\n      };\n      imageObject.onerror = (error) => {\n        throw error;\n      };\n      imageObject.setAttribute(\"crossOrigin\", \"anonymous\");\n      imageObject.src = imageDataURL;\n    }\n  }, [canvas, imageDataURL, grayscaleChecked]);\n\n  function clickDropArea(e: any) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (!imageDropAreaElement || isProcessing) return;\n    imageDropAreaElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      if (files.length) {\n        try {\n          const file = files[0] as File;\n          const reader = new FileReader();\n          reader.readAsDataURL(file);\n          reader.onload = () => {\n            setImageDataURL(reader.result as string);\n          };\n          reader.onerror = (error) => {\n            throw error;\n          };\n        } catch (error) {}\n      }\n    };\n    imageDropAreaElement.click();\n  }\n\n  function startOCRFromLink() {\n    try {\n      setImageDataURL(link);\n    } catch (error) {}\n  }\n\n  function ocr(input: File | string | HTMLCanvasElement) {\n    const worker = createWorker({\n      logger: (m: OCRProgress) => {\n        setOCRProgresses((ocrProgresses) => {\n          if (\n            ocrProgresses.length &&\n            ocrProgresses[ocrProgresses.length - 1].status === m.status\n          ) {\n            return [...ocrProgresses.slice(0, ocrProgresses.length - 1), m];\n          } else {\n            return [...ocrProgresses, m];\n          }\n        });\n      },\n    });\n\n    (async () => {\n      setIsProcessing(true);\n      let languagesArr = selectedLanguages;\n      if (languagesArr.length === 0) {\n        languagesArr = [\"eng\"];\n      }\n\n      await worker.load();\n      await worker.loadLanguage(languagesArr.join(\"+\"));\n      await worker.initialize(languagesArr.join(\"+\"));\n      const {\n        data: { text },\n      } = await worker.recognize(input);\n      props.replaceSelf(\"\\n\" + text);\n      await worker.terminate();\n      setIsProcessing(false);\n    })();\n  }\n\n  function toggleLanguage(lang: string) {\n    setSelectedLanguages((selectedLanguages) => {\n      const offset = selectedLanguages.indexOf(lang);\n      if (offset >= 0) {\n        selectedLanguages.splice(offset, 1);\n        selectedLanguages = [...selectedLanguages];\n      } else {\n        selectedLanguages = [...selectedLanguages, lang];\n      }\n      localStorage.setItem(\n        \"widget/crossnote.ocr/languages\",\n        JSON.stringify(selectedLanguages),\n      );\n      return selectedLanguages;\n    });\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  if (isProcessing) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Typography variant={\"h5\"}>{t(\"general/Processing\")}</Typography>\n        {/*<Typography variant={\"body1\"}>{t(\"general/please-wait\")}</Typography>*/}\n        <List>\n          {ocrProgresses.length > 0 && (\n            <ListItem>\n              <ListItemText>\n                {t(\n                  \"tesseract/\" + ocrProgresses[ocrProgresses.length - 1].status,\n                )}\n              </ListItemText>\n              <ListItemSecondaryAction>\n                {Math.floor(\n                  ocrProgresses[ocrProgresses.length - 1].progress * 100,\n                ).toString() + \"%\"}\n              </ListItemSecondaryAction>\n            </ListItem>\n          )}\n        </List>\n      </Card>\n    );\n  }\n\n  if (imageDataURL) {\n    return (\n      <Card elevation={2} className={clsx(classes.card)}>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/recognize-text-in-languages\")}\n          </Typography>\n          <FormGroup>\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"eng\") >= 0}\n                  onChange={() => toggleLanguage(\"eng\")}\n                  value=\"eng\"\n                />\n              }\n              label=\"English\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_sim\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_sim\")}\n                  value=\"chi_sim\"\n                />\n              }\n              label=\"\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"chi_tra\") >= 0}\n                  onChange={() => toggleLanguage(\"chi_tra\")}\n                  value=\"chi_tra\"\n                />\n              }\n              label=\"\"\n            />\n            <FormControlLabel\n              control={\n                <Checkbox\n                  checked={selectedLanguages.indexOf(\"jpn\") >= 0}\n                  onChange={() => toggleLanguage(\"jpn\")}\n                  value=\"jpn\"\n                />\n              }\n              label=\"\"\n            />\n          </FormGroup>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n            {t(\"widget/crossnote.ocr/extra-settings\")}\n          </Typography>\n          <FormControlLabel\n            control={\n              <Switch\n                checked={grayscaleChecked}\n                onChange={() => {\n                  if (grayscaleChecked) {\n                    localStorage.removeItem(\"widget/crossnote.ocr/grayscale\");\n                  } else {\n                    localStorage.setItem(\n                      \"widget/crossnote.ocr/grayscale\",\n                      \"true\",\n                    );\n                  }\n                  setGrayscaleChecked(!grayscaleChecked);\n                }}\n                color={\"primary\"}\n              ></Switch>\n            }\n            label={t(\"widget/crossnote.ocr/grayscale\")}\n          ></FormControlLabel>\n        </Box>\n        <Box className={clsx(classes.canvasWrapper)}>\n          <canvas\n            className={clsx(classes.canvas)}\n            ref={(element) => setCanvas(element)}\n          ></canvas>\n        </Box>\n        <ButtonGroup>\n          <Button\n            onClick={() => {\n              setImageDataURL(\"\");\n              setOCRDataURL(\"\");\n            }}\n          >\n            {t(\"general/go-back\")}\n          </Button>\n          <Button\n            color={\"primary\"}\n            onClick={() => ocr(ocrDataURL)}\n            disabled={!ocrDataURL}\n          >\n            {t(\"widget/crossnote.ocr/start-ocr\")}\n          </Button>\n        </ButtonGroup>\n      </Card>\n    );\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"widget/crossnote.ocr/ocr\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/Link\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.image/image-url-placeholder\")}\n          value={link}\n          onChange={(event) => {\n            setLink(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              startOCRFromLink();\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Typography\n        variant={\"subtitle1\"}\n        style={{ marginTop: \"16px\", textAlign: \"center\" }}\n      >\n        {t(\"widget/crossnote.auth/Or\")}\n      </Typography>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.ocr/local-image\")}\n        </Typography>\n        <Box\n          className={clsx(\n            classes.dropArea,\n            isProcessing ? classes.disabled : null,\n          )}\n          onClick={clickDropArea}\n        >\n          <Typography>\n            {isProcessing\n              ? t(\"utils/uploading-image\")\n              : t(\"widget/crossnote.image/click-here-to-browse-image-file\")}\n          </Typography>\n        </Box>\n      </Box>\n      <input\n        type=\"file\"\n        // multiple\n        style={{ display: \"none\" }}\n        ref={(element: HTMLInputElement) => {\n          setImageDropAreaElement(element);\n        }}\n      ></input>\n    </Card>\n  );\n}\n\nexport const OCRWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <OCRWidget {...args}></OCRWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","// 0xGG Team\n// Distributed under AGPL3\n//\n// DESCRIPTION: This widget displays time related information\nimport { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport { ErrorWidget } from \"@0xgg/echomd/widget/error/error\";\nimport { ThemeProvider, useTheme } from \"@material-ui/core\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { globalContainers } from \"../../../containers/global\";\n\nfunction Timer(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const theme = useTheme();\n\n  return (\n    <div\n      style={{\n        cursor: \"default\",\n        padding: \"4px 12px\",\n        backgroundColor:\n          attributes[\"backgroundColor\"] ||\n          theme.palette.secondary.main ||\n          \"rgb(250, 145, 1)\",\n        color:\n          attributes[\"color\"] || theme.palette.secondary.contrastText || \"#fff\",\n        borderRadius: \"16px\",\n        display: \"flex\",\n        justifyContent: \"space-between\",\n        width: \"375px\",\n        maxWidth: \"100%\",\n        boxShadow: \"0 1px 3px 1px #aaa\",\n        marginBottom: props.isPreview ? \"16px\" : \"0\",\n      }}\n    >\n      <div className={\"widget-timer-date\"}>\n        {\" \" + new Date(attributes[\"date\"]).toLocaleString()}\n      </div>\n      <div className={\"widget-timer-duration\"}>\n        {attributes[\"duration\"] ? \" \" + attributes[\"duration\"] : \"\"}\n      </div>\n    </div>\n  );\n}\n\nexport const TimerWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  if (!args.attributes[\"date\"]) {\n    return ErrorWidget({\n      ...args,\n      ...{\n        attributes: {\n          message: \"Field 'date' is missing\",\n        },\n      },\n    });\n  }\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <Timer attributes={args.attributes} isPreview={args.isPreview}></Timer>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Box,\n  Card,\n  FormControlLabel,\n  IconButton,\n  Input,\n  Switch,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n  }),\n);\n\nfunction VideoWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [source, setSource] = useState<string>(attributes[\"source\"] || \"\");\n  const [autoplay, setAutoplay] = useState<boolean>(\n    attributes[\"autoplay\"] || false,\n  );\n  const [controls, setControls] = useState<boolean>(\n    attributes[\"controls\"] || true,\n  );\n  const [loop, setLoop] = useState<boolean>(attributes[\"loop\"] || false);\n  const [muted, setMuted] = useState<boolean>(attributes[\"muted\"] || false);\n  const [poster, setPoster] = useState<string>(attributes[\"poster\"] || \"\");\n\n  if (attributes[\"src\"]) {\n    return (\n      <span style={{ cursor: \"default\" }}>\n        <Box className={clsx(classes.videoWrapper)}>\n          <video\n            className={clsx(classes.video)}\n            autoPlay={attributes[\"autoplay\"] || attributes[\"autoPlay\"]}\n            controls={attributes[\"controls\"]}\n            loop={attributes[\"loop\"]}\n            muted={attributes[\"muted\"]}\n            style={attributes[\"style\"]}\n            poster={attributes[\"poster\"]}\n          >\n            {t(\"widget/crossnote.video/video_element_fail\")}\n            <source src={attributes[\"src\"]} type={attributes[\"type\"]}></source>\n          </video>\n        </Box>\n      </span>\n    );\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"general/Video\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"general/source-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/video-url-placeholder\")}\n          value={source}\n          onChange={(event) => {\n            setSource(event.target.value);\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (source) {\n                const attrs = {\n                  autoplay,\n                  controls,\n                  loop,\n                  muted,\n                  src: source,\n                  poster,\n                };\n                props.setAttributes(attrs);\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"widget/crossnote.video/poster-url\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\"widget/crossnote.video/poster-url-placeholder\")}\n          value={poster}\n          onChange={(event) => {\n            setPoster(event.target.value);\n          }}\n          fullWidth={true}\n        ></Input>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <FormControlLabel\n          label={t(\"widget/autoplay\")}\n          control={\n            <Switch\n              checked={autoplay}\n              onChange={() => setAutoplay(!autoplay)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/controls\")}\n          control={\n            <Switch\n              checked={controls}\n              onChange={() => setControls(!controls)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/loop\")}\n          control={\n            <Switch\n              checked={loop}\n              onChange={() => setLoop(!loop)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n        <FormControlLabel\n          label={t(\"widget/muted\")}\n          control={\n            <Switch\n              checked={muted}\n              onChange={() => setMuted(!muted)}\n              color={\"primary\"}\n            ></Switch>\n          }\n        ></FormControlLabel>\n      </Box>\n    </Card>\n  );\n}\n\nexport const VideoWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <VideoWidget {...args}></VideoWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","import { WidgetArgs, WidgetCreator } from \"@0xgg/echomd/widget\";\nimport {\n  Box,\n  Card,\n  IconButton,\n  Input,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport React, { useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { useTranslation } from \"react-i18next\";\nimport { globalContainers } from \"../../../containers/global\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    card: {\n      padding: theme.spacing(2),\n      position: \"relative\",\n    },\n    actionButtons: {\n      position: \"absolute\",\n      top: \"0\",\n      right: \"0\",\n    },\n    section: {\n      marginTop: theme.spacing(2),\n    },\n    videoWrapper: {\n      cursor: \"default\",\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      paddingTop: \"56.25%\",\n    },\n    video: {\n      backgroundColor: \"#ddd\",\n      border: \"none\",\n      position: \"absolute\",\n      left: \"0\",\n      top: \"0\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    errorMessage: {\n      color: \"#f44336\",\n      marginTop: theme.spacing(2),\n    },\n  }),\n);\n\nfunction YoutubeWidget(props: WidgetArgs) {\n  const attributes = props.attributes;\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [url, setURL] = useState<string>(\"\");\n  const [error, setError] = useState<string>(\"\");\n\n  if (attributes[\"videoID\"]) {\n    if (!props.isPreview) {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <img\n            alt={\"Youtube: \" + attributes[\"videoID\"]}\n            src={`https://img.youtube.com/vi/${attributes[\"videoID\"]}/0.jpg`}\n            onClick={() => {\n              window.open(\n                `https://www.youtube.com/watch?v=${attributes[\"videoID\"]}`,\n                \"_blank\",\n              );\n            }}\n            style={{\n              cursor: \"pointer\",\n              width: \"100%\",\n            }}\n          ></img>\n        </span>\n      );\n    } else {\n      return (\n        <span style={{ cursor: \"default\" }}>\n          <Box className={clsx(classes.videoWrapper)}>\n            <iframe\n              title={\"youtube_\" + attributes[\"videoID\"]}\n              className={clsx(classes.video)}\n              src={`https://www.youtube.com/embed/${attributes[\"videoID\"]}`}\n              scrolling={\"no\"}\n              frameBorder={\"no\"}\n              allowFullScreen={true}\n            ></iframe>\n          </Box>\n        </span>\n      );\n    }\n  }\n\n  if (props.isPreview) {\n    return <span></span>;\n  }\n\n  return (\n    <Card elevation={2} className={clsx(classes.card)}>\n      <Typography variant={\"h5\"}>{t(\"Youtube\")}</Typography>\n      <Box className={clsx(classes.actionButtons)}>\n        <Tooltip title={t(\"general/Delete\")}>\n          <IconButton onClick={() => props.removeSelf()}>\n            <TrashCan></TrashCan>\n          </IconButton>\n        </Tooltip>\n      </Box>\n      <Box className={clsx(classes.section)}>\n        <Typography variant={\"subtitle1\"} style={{ marginBottom: \"8px\" }}>\n          {t(\"Youtube video URL\")}\n        </Typography>\n        <Input\n          margin={\"dense\"}\n          placeholder={t(\n            \"widget/crossnote.youtube/youtube-video-url-placeholder\",\n          )}\n          value={url}\n          onChange={(event) => {\n            setURL(event.target.value);\n            setError(\"\");\n          }}\n          onKeyDown={(event) => {\n            if (event.which === 13) {\n              if (url && url.match(/\\?v=(.+?)(&|$)/)) {\n                const videoID = url.match(/\\?v=(.+?)(&|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else if (url && url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)) {\n                const videoID = url.match(/\\/youtu\\.be\\/(.+?)(\\?|$)/)[1];\n                const attrs = {\n                  videoID,\n                };\n                props.setAttributes(attrs);\n              } else {\n                setError(t(\"widget/crossnote.youtube/error_message\"));\n              }\n            }\n          }}\n          fullWidth={true}\n        ></Input>\n        <Typography className={clsx(classes.errorMessage)}>{error}</Typography>\n      </Box>\n    </Card>\n  );\n}\n\nexport const YoutubeWidgetCreator: WidgetCreator = (args) => {\n  const el = document.createElement(\"span\");\n  ReactDOM.render(\n    <ThemeProvider theme={globalContainers.settingsContainer.theme.muiTheme}>\n      <YoutubeWidget {...args}></YoutubeWidget>\n    </ThemeProvider>,\n    el,\n  );\n  return el;\n};\n","// Import EchoMD related modules\n// EchoMD\n// Essential\nimport \"@0xgg/echomd\"; // ESSENTIAL\nimport { setTwemojiOptions } from \"@0xgg/echomd/addon/emoji\";\nimport \"@0xgg/echomd/powerpack/fold-code-with-echarts\";\nimport \"@0xgg/echomd/powerpack/fold-code-with-mermaid\";\nimport \"@0xgg/echomd/powerpack/fold-code-with-plantuml\";\nimport \"@0xgg/echomd/powerpack/fold-code-with-wavedrom\";\nimport \"@0xgg/echomd/powerpack/fold-emoji-with-twemoji\";\n// Widgets\n// Load PowerPacks if you want to utilize 3rd-party libs\nimport \"@0xgg/echomd/powerpack/fold-math-with-katex\";\nimport \"@0xgg/echomd/powerpack/hover-with-marked\";\nimport { enableEmoji } from \"@0xgg/echomd/preview\";\nimport { registerWidgetCreator } from \"@0xgg/echomd/widget\";\nimport \"codemirror\";\nimport \"codemirror/addon/dialog/dialog.css\";\nimport \"codemirror/addon/display/placeholder\";\nimport \"codemirror/addon/hint/show-hint\";\nimport \"codemirror/keymap/emacs\";\nimport \"codemirror/keymap/sublime\";\nimport \"codemirror/keymap/vim\";\n// Load these modes if you want highlighting ...\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\"; // for embedded HTML\nimport \"codemirror/mode/javascript/javascript\"; // eg. javascript\nimport \"codemirror/mode/markdown/markdown\";\nimport \"codemirror/mode/python/python\";\nimport \"codemirror/mode/stex/stex\"; // for Math TeX Formular\nimport \"codemirror/mode/yaml/yaml\"; // for Front Matters\nimport { Emoji } from \"emoji-mart\";\nimport EmojiData from \"emoji-mart/data/all.json\";\nimport twemoji from \"twemoji\";\nimport { EmojiBackgroundImageFn } from \"../components/EmojiWrapper\";\nimport { AudioWidgetCreator } from \"./widgets/audio\";\nimport { BilibiliWidgetCreator } from \"./widgets/bilibili\";\n// import { ABCWidgetCreator } from \"./widgets/abc\";\nimport { CommentWidgetCreator } from \"./widgets/comment\";\nimport { GitHubGistWidgetCreator } from \"./widgets/github_gist\";\nimport { ImageWidgetCreator } from \"./widgets/image\";\nimport { KanbanWidgetCreator } from \"./widgets/kanban\";\nimport { OCRWidgetCreator } from \"./widgets/ocr\";\nimport { TimerWidgetCreator } from \"./widgets/timer\";\n// import { NeteaseMusicWidgetCreator } from \"./widgets/netease_music\";\nimport { VideoWidgetCreator } from \"./widgets/video\";\nimport { YoutubeWidgetCreator } from \"./widgets/youtube\";\n\n// Set necessary window scope variables\nwindow[\"CodeMirror\"] = require(\"codemirror\");\n\n// Register widget creators\nregisterWidgetCreator(\"timer\", TimerWidgetCreator);\nregisterWidgetCreator(\"crossnote.image\", ImageWidgetCreator);\nregisterWidgetCreator(\"crossnote.audio\", AudioWidgetCreator);\n// registerWidgetCreator(\"crossnote.netease_music\", NeteaseMusicWidgetCreator);\nregisterWidgetCreator(\"crossnote.video\", VideoWidgetCreator);\nregisterWidgetCreator(\"crossnote.bilibili\", BilibiliWidgetCreator);\nregisterWidgetCreator(\"crossnote.youtube\", YoutubeWidgetCreator);\nregisterWidgetCreator(\"crossnote.ocr\", OCRWidgetCreator);\nregisterWidgetCreator(\"crossnote.kanban\", KanbanWidgetCreator);\n// registerWidgetCreator(\"crossnote.abc\", ABCWidgetCreator);\nregisterWidgetCreator(\"crossnote.comment\", CommentWidgetCreator);\nregisterWidgetCreator(\"crossnote.github_gist\", GitHubGistWidgetCreator);\n\nconst packageJSON = require(\"../../package.json\");\nexport const EchoMDVersion: string = packageJSON.dependencies[\"@0xgg/echomd\"];\n\n// Hack the keymap for sublime\nconst hypermdKeyMap = window[\"CodeMirror\"].keyMap[\"hypermd\"] || {};\nwindow[\"CodeMirror\"].keyMap[\"sublime\"] = Object.assign(\n  window[\"CodeMirror\"].keyMap[\"sublime\"],\n  {\n    \"Ctrl-B\": hypermdKeyMap[\"Ctrl-B\"],\n    \"Ctrl-D\": hypermdKeyMap[\"Ctrl-D\"],\n    \"Ctrl-I\": hypermdKeyMap[\"Ctrl-I\"],\n    \"Enter\": hypermdKeyMap[\"Enter\"],\n    \"Shift-Enter\": hypermdKeyMap[\"Shift-Enter\"],\n    \"Shift-Tab\": hypermdKeyMap[\"Shift-Tab\"],\n    \"Tab\": hypermdKeyMap[\"Tab\"],\n  },\n);\n\n// Hack twemoji\nconst oldTwemojiParse = twemoji.parse;\ntwemoji.parse = function (what: string | HTMLElement, options: any) {\n  const result = oldTwemojiParse(what, options);\n  if (typeof what === \"string\") {\n    return (\n      result\n        .replace(/^<img\\s/, \"<span \")\n        .replace(/\\/>$/, \"\")\n        .replace(/&quot;/g, \"\")\n        .replace(/src=\"(.+?)\"/, \"\") + \"</span>\"\n    );\n  } else {\n    const emojiElements = what.querySelectorAll(\".emoji\");\n    for (let i = 0; i < emojiElements.length; i++) {\n      const emojiElement = emojiElements[i];\n      if (emojiElement.tagName.match(/IMG/i)) {\n        const newElement = document.createElement(\"span\");\n        newElement.setAttribute(\"style\", emojiElement.getAttribute(\"style\"));\n        newElement.setAttribute(\"class\", emojiElement.getAttribute(\"class\"));\n        newElement.setAttribute(\"alt\", emojiElement.getAttribute(\"alt\"));\n        newElement.setAttribute(\n          \"aria-label\",\n          emojiElement.getAttribute(\"aria-label\"),\n        );\n        emojiElement.replaceWith(newElement);\n      }\n    }\n    return;\n  }\n};\nconst emojiCodePointToShortNameMap: { [key: string]: string } = ((data) => {\n  const m: { [key: string]: string } = {};\n  const emojiDefinitions: { [key: string]: string } = {};\n  for (const shortName in data.emojis) {\n    const emojiData: any = (data.emojis as any)[shortName];\n    if (!emojiData.has_img_twitter) {\n      continue;\n    }\n    const nonQualified: string = emojiData.non_qualified;\n    const unified: string = emojiData.unified;\n    if (unified) {\n      m[unified.toLocaleLowerCase()] = shortName;\n      const emoji = unified\n        .split(\"-\")\n        .map((x) => twemoji.convert.fromCodePoint(x))\n        .join(\"\");\n      if (emoji.trim()) {\n        emojiDefinitions[shortName] = emoji;\n      }\n    }\n    if (nonQualified) {\n      m[nonQualified.toLocaleLowerCase()] = shortName;\n      const emoji = nonQualified\n        .split(\"-\")\n        .map((x) => twemoji.convert.fromCodePoint(x))\n        .join(\"\");\n      if (emoji.trim() && !unified) {\n        emojiDefinitions[shortName] = emoji;\n      }\n    }\n  }\n  enableEmoji(emojiDefinitions);\n  return m;\n})(EmojiData);\n\nsetTwemojiOptions({\n  folder: \"svg\",\n  ext: \".svg\",\n  className: \"emoji\",\n  attributes: (emoji: string, codePoint: string) => {\n    try {\n      const shortName = emojiCodePointToShortNameMap[codePoint];\n      const html = Emoji({\n        html: true,\n        set: \"twitter\",\n        emoji: shortName,\n        size: 16,\n        backgroundImageFn: EmojiBackgroundImageFn,\n      }) as any;\n      const attr: { [key: string]: string } = {};\n      const attrRegExp = /\\s([a-z-]+)='(.+?)'/g;\n      let result;\n      while ((result = attrRegExp.exec(html)) !== null) {\n        const attrName = result[1];\n        const attrValue = result[2];\n        if (attrName !== \"class\") {\n          attr[attrName] = attrValue.replace(/&quot;/, \"\");\n        }\n      }\n      return attr;\n    } catch (error) {\n      return {};\n    }\n  },\n  callback: () => {\n    return \"data:image/svg+xml;charset=utf8,%3Csvg%20xmlns='http://www.w3.org/2000/svg'%3E%3C/svg%3E\";\n  },\n});\n","import { ThemeName } from \"@0xgg/echomd/theme\";\nimport { createMuiTheme, Theme, ThemeOptions } from \"@material-ui/core\";\n\ninterface CrossnoteThemeProps {\n  name: ThemeName;\n  muiThemeOptions: ThemeOptions;\n}\n\nexport class CrossnoteTheme {\n  public name: ThemeName;\n  public muiTheme: Theme;\n  constructor({ name, muiThemeOptions }: CrossnoteThemeProps) {\n    this.name = name;\n    this.muiTheme = createMuiTheme(muiThemeOptions);\n  }\n}\n","import { lighten } from \"@material-ui/core\";\nimport { CrossnoteTheme } from \"./theme\";\n\nexport const DarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"dark\",\n  muiThemeOptions: {\n    palette: {\n      type: \"dark\",\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#1e1e1e\", 0.05),\n        default: \"#1e1e1e\",\n      },\n      primary: {\n        light: \"#7986cb\",\n        main: \"rgba(144, 19, 254, 1)\",\n        dark: \"#303f9f\",\n        contrastText: \"#fff\",\n      },\n      secondary: {\n        light: \"#ff4081\",\n        main: \"#f50057\",\n        dark: \"#c51162\",\n        contrastText: \"#fff\",\n      },\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      // divider: \"#383838\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n      },\n    },\n  },\n});\n","import { blue, orange } from \"@material-ui/core/colors\";\nimport { CrossnoteTheme } from \"./theme\";\n\nexport const LightTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"light\",\n  muiThemeOptions: {\n    palette: {\n      type: \"light\",\n      primary: blue,\n      secondary: orange,\n    },\n  },\n});\n","import { lighten } from \"@material-ui/core\";\nimport { blueGrey, indigo } from \"@material-ui/core/colors\";\nimport { CrossnoteTheme } from \"./theme\";\n\nexport const OneDarkTheme: CrossnoteTheme = new CrossnoteTheme({\n  name: \"one-dark\",\n  muiThemeOptions: {\n    palette: {\n      type: \"dark\",\n      common: { black: \"#000\", white: \"#fff\" },\n      background: {\n        paper: lighten(\"#282c34\", 0.05),\n        default: \"#282c34\",\n      },\n      primary: indigo,\n      secondary: blueGrey,\n      error: {\n        light: \"#e57373\",\n        main: \"#f44336\",\n        dark: \"#d32f2f\",\n        contrastText: \"rgba(197, 197, 197, 1)\",\n      },\n      // divider: \"#323944\",\n      text: {\n        primary: \"#ccc\",\n        secondary: \"rgba(180, 180, 180, 1)\",\n      },\n      action: {\n        active: \"rgba(180, 180, 180, 1)\",\n      },\n    },\n  },\n});\n","import { lighten } from \"@material-ui/core\";\nimport { amber, orange } from \"@material-ui/core/colors\";\nimport { CrossnoteTheme } from \"./theme\";\n\nexport const SolarizedLight: CrossnoteTheme = new CrossnoteTheme({\n  name: \"solarized-light\",\n  muiThemeOptions: {\n    palette: {\n      type: \"light\",\n      primary: orange,\n      secondary: amber,\n      background: {\n        paper: lighten(\"#fdf6e3\", 0.05),\n        default: \"#fdf6e3\",\n      },\n    },\n  },\n});\n","import { setTheme as EchoMDSetTheme, ThemeName } from \"@0xgg/echomd/theme\";\nimport { Editor } from \"codemirror\";\nimport { EchoMDVersion } from \"../editor\";\nimport { DarkTheme } from \"./dark\";\nimport { LightTheme } from \"./light\";\nimport { OneDarkTheme } from \"./one-dark\";\nimport { SolarizedLight } from \"./solarized-light\";\nimport { CrossnoteTheme } from \"./theme\";\n\nexport function setTheme({\n  editor,\n  themeName,\n}: {\n  editor?: Editor;\n  themeName: ThemeName;\n}) {\n  return EchoMDSetTheme({\n    editor,\n    themeName,\n    baseUri: `${\n      window.location.origin.match(/0xgg\\./i) ? \"/crossnote\" : \"\"\n    }/styles/echomd@${EchoMDVersion}/`,\n  });\n}\n\nexport class ThemeManager {\n  public themes: CrossnoteTheme[] = [];\n  public selectedTheme: CrossnoteTheme = null;\n  public addTheme(theme: CrossnoteTheme) {\n    this.themes.push(theme);\n    if (!this.selectedTheme) {\n      this.selectTheme(theme.name);\n    }\n  }\n\n  public getTheme(name: string) {\n    return this.themes.find((theme) => theme.name === name);\n  }\n\n  public selectTheme(name: string) {\n    if (!name) {\n      return;\n    }\n    const theme = this.themes.find((t) => t.name === name);\n    if (!theme) {\n      return;\n    }\n    this.selectedTheme = theme;\n    setTheme({\n      themeName: theme.name,\n    });\n  }\n}\n\nconst _themeManager = new ThemeManager();\n_themeManager.addTheme(LightTheme);\n_themeManager.addTheme(DarkTheme);\n_themeManager.addTheme(OneDarkTheme);\n_themeManager.addTheme(SolarizedLight);\n\nexport const themeManager = _themeManager;\n","import { ThemeName } from \"@0xgg/echomd/theme\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { createContainer } from \"unstated-next\";\nimport { EditorMode } from \"../lib/editorMode\";\nimport { getKeyMap, KeyMap } from \"../lib/keymap\";\nimport { themeManager } from \"../themes/manager\";\nimport { CrossnoteTheme } from \"../themes/theme\";\n\ninterface InitialState {}\n\nfunction useSettingsContainer(initialState: InitialState) {\n  const [language, setLanguage] = useState<string>(\n    localStorage.getItem(\"settings/language\") || \"en-US\",\n  );\n  const [editorCursorColor, setEditorCursorColor] = useState<string>(\n    localStorage.getItem(\"settings/editorCursorColor\") ||\n      \"rgba(74, 144, 226, 1)\",\n  );\n  const [defaultEditorMode, setDefaultEditorMode] = useState<EditorMode>(\n    (localStorage.getItem(\"settings/defaultEditorMode\") as EditorMode) ||\n      EditorMode.Preview,\n  );\n  const [authorName, setAuthorName] = useState<string>(\n    localStorage.getItem(\"settings/authorName\") || \"Anonymous\",\n  );\n  const [authorEmail, setAuthorEmail] = useState<string>(\n    localStorage.getItem(\"settings/authorEmail\") || \"anonymous@crossnote.app\",\n  );\n  const [theme, setTheme] = useState<CrossnoteTheme>(\n    themeManager.getTheme(localStorage.getItem(\"settings/theme\")) ||\n      themeManager.selectedTheme,\n  );\n  const [keyMap, setKeyMap] = useState<KeyMap>(\n    getKeyMap(localStorage.getItem(\"settings/keyMap\")) || KeyMap.DEFAULT,\n  );\n\n  const { t, i18n } = useTranslation();\n\n  const _setLanguage = useCallback(\n    (language: string) => {\n      if (\n        language === \"en-US\" ||\n        language === \"zh-CN\" ||\n        language === \"zh-TW\" ||\n        language === \"ja-JP\"\n      ) {\n        localStorage.setItem(\"settings/language\", language);\n        setLanguage(language);\n        i18n.changeLanguage(language);\n      } else {\n        localStorage.setItem(\"settings/language\", \"en-US\");\n        setLanguage(\"en-US\");\n        i18n.changeLanguage(\"en-US\");\n      }\n    },\n    [i18n],\n  );\n\n  const _setEditorCursorColor = useCallback((editorCursorColor: string) => {\n    editorCursorColor = editorCursorColor || \"rgba(74, 144, 226, 1)\";\n    localStorage.setItem(\"settings/editorCursorColor\", editorCursorColor);\n    setEditorCursorColor(editorCursorColor);\n  }, []);\n\n  const _setDefaultEditorMode = useCallback((editorMode: EditorMode) => {\n    localStorage.setItem(\"settings/defaultEditorMode\", editorMode);\n    setDefaultEditorMode(editorMode);\n  }, []);\n\n  const _setAuthorName = useCallback((authorName: string) => {\n    localStorage.setItem(\"settings/authorName\", authorName);\n    setAuthorName(authorName);\n  }, []);\n\n  const _setAuthorEmail = useCallback((authorEmail: string) => {\n    localStorage.setItem(\"settings/authorEmail\", authorEmail);\n    setAuthorEmail(authorEmail);\n  }, []);\n\n  const _setTheme = useCallback((themeName: string) => {\n    themeManager.selectTheme(themeName);\n    localStorage.setItem(\"settings/theme\", themeManager.selectedTheme.name);\n    setTheme(themeManager.selectedTheme);\n  }, []);\n\n  const _setKeyMap = useCallback((keyMap: KeyMap) => {\n    localStorage.setItem(\"settings/keyMap\", keyMap);\n    setKeyMap(keyMap);\n  }, []);\n\n  useEffect(() => {\n    const themeName = localStorage.getItem(\"settings/theme\") as ThemeName;\n    if (themeName) {\n      _setTheme(themeName);\n    }\n  }, [_setTheme]);\n\n  return {\n    language,\n    setLanguage: _setLanguage,\n    editorCursorColor,\n    setEditorCursorColor: _setEditorCursorColor,\n    defaultEditorMode,\n    setDefaultEditorMode: _setDefaultEditorMode,\n    authorName,\n    setAuthorName: _setAuthorName,\n    authorEmail,\n    setAuthorEmail: _setAuthorEmail,\n    theme,\n    setTheme: _setTheme,\n    keyMap,\n    setKeyMap: _setKeyMap,\n  };\n}\n\nexport const SettingsContainer = createContainer(useSettingsContainer);\n","import {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Box,\n  Button,\n  Checkbox,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  FormControlLabel,\n  IconButton,\n  InputAdornment,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { useTheme } from \"@material-ui/core/styles\";\nimport { ChevronDown, Eye, EyeOff, FolderOpen } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  canCancel: boolean;\n  notebookName?: string;\n  gitURL?: string;\n  gitBranch?: string;\n  hideOpeningLocal?: boolean;\n}\n\nexport default function AddNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(true);\n  const [gitURL, setGitURL] = useState<string>(props.gitURL || \"\");\n  const [gitBranch, setGitBranch] = useState<string>(props.gitBranch || \"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [\n    rememberCredentialsChecked,\n    setRememberCredentialsChecked,\n  ] = useState<boolean>(false);\n  const [showUsername, setShowUsername] = useState<boolean>(true);\n  const [showPassword, setShowPassword] = useState<boolean>(false);\n  const { t } = useTranslation();\n  const theme = useTheme();\n\n  const close = useCallback(() => {\n    setNotebookName(\"\");\n    setGitURL(\"\");\n    setGitBranch(\"\");\n    setGitUsername(\"\");\n    setGitPassword(\"\");\n    setExpanded(false);\n    props.onClose();\n  }, [props]);\n\n  const addNotebook = useCallback(async () => {\n    try {\n      if (gitURL.trim().length) {\n        new Noty({\n          type: \"info\",\n          text: t(\"info/downloading-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n      close();\n      await crossnoteContainer.addNotebook(\n        notebookName,\n        gitURL.trim(),\n        gitBranch.trim() || \"master\",\n        gitUsername,\n        gitPassword,\n        rememberCredentialsChecked,\n        gitCorsProxy,\n      );\n    } catch (error) {\n      new Noty({\n        type: \"error\",\n        text: error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      close();\n    }\n  }, [\n    props,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    rememberCredentialsChecked,\n    gitCorsProxy,\n    close,\n    t,\n  ]);\n\n  useEffect(() => {\n    const i = props.gitURL.lastIndexOf(\"/\");\n    const name = props.gitURL.slice(i + 1).replace(/\\.git/, \"\");\n\n    setNotebookName(props.notebookName || name);\n    setGitURL(props.gitURL);\n    setGitBranch(props.gitBranch);\n    setExpanded(true);\n  }, [props.gitURL, props.gitBranch, props.notebookName]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isAddingNotebook) {\n          props.onClose();\n        }\n      }}\n    >\n      <DialogTitle>{t(\"general/add-a-notebook\")}</DialogTitle>\n      <DialogContent>\n        {!props.hideOpeningLocal && (\n          <Box>\n            <Button\n              style={{\n                margin: `${theme.spacing(2)}px auto`,\n                padding: `${theme.spacing(2)}px 0`,\n                width: \"100%\",\n              }}\n              color={\"primary\"}\n              variant={\"outlined\"}\n              startIcon={<FolderOpen></FolderOpen>}\n              size={\"small\"}\n              onClick={() => {\n                crossnoteContainer.openLocalNotebook();\n                props.onClose();\n              }}\n              disabled={!(\"showDirectoryPicker\" in window)}\n            >\n              {\"showDirectoryPicker\" in window\n                ? t(\"general/open-a-local-folder\")\n                : t(\"general/your-browser-doesnt-support-to-open-local-folder\")}\n            </Button>\n            <Box style={{ position: \"relative\" }}>\n              <Typography\n                variant={\"subtitle1\"}\n                style={{\n                  position: \"absolute\",\n                  top: \"-14px\",\n                  left: \"50%\",\n                  transform: \"translateX(-50%)\",\n                }}\n              >\n                {t(\"widget/crossnote.auth/Or\")}\n              </Typography>\n              <Divider\n                style={{\n                  margin: `${theme.spacing(3)}px auto`,\n                  width: \"100%\",\n                }}\n              ></Divider>\n            </Box>\n          </Box>\n        )}\n        <Typography variant={\"caption\"}>\n          {\"* \" + t(\"add-notebook-dialog/disclaimer\")}\n        </Typography>\n        <br></br>\n        <br></br>\n        {/*\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        */}\n        <Accordion\n          elevation={2}\n          expanded={expanded}\n          onChange={() => setExpanded(!expanded)}\n        >\n          <AccordionSummary expandIcon={<ChevronDown></ChevronDown>}>\n            <Typography>{`${t(\"general/clone-a-git-repository\")}`}</Typography>\n          </AccordionSummary>\n          <AccordionDetails>\n            <Box>\n              <TextField\n                label={t(\"general/url\")}\n                placeholder={\"https://github.com/0xGG/crossnote.git\"}\n                fullWidth={true}\n                value={gitURL}\n                onChange={(event) => setGitURL(event.target.value)}\n              ></TextField>\n              <TextField\n                label={t(\"general/branch\")}\n                placeholder={\"master\"}\n                fullWidth={true}\n                value={gitBranch}\n                onChange={(event) => setGitBranch(event.target.value)}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Username\")} (${t(\n                  \"general/optional\",\n                )})`}\n                type={showUsername ? \"text\" : \"password\"}\n                fullWidth={true}\n                value={gitUsername}\n                onChange={(event) => setGitUsername(event.target.value)}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position={\"end\"}>\n                      <IconButton\n                        aria-label=\"toggle username visibility\"\n                        onClick={() => setShowUsername(!showUsername)}\n                      >\n                        {\" \"}\n                        {showUsername ? <Eye></Eye> : <EyeOff></EyeOff>}{\" \"}\n                      </IconButton>\n                    </InputAdornment>\n                  ),\n                }}\n              ></TextField>\n              <TextField\n                label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                placeholder={`${t(\"general/Password\")} (${t(\n                  \"general/optional\",\n                )})`}\n                type={showPassword ? \"text\" : \"password\"}\n                fullWidth={true}\n                value={gitPassword}\n                onChange={(event) => setGitPassword(event.target.value)}\n                InputProps={{\n                  endAdornment: (\n                    <InputAdornment position={\"end\"}>\n                      <IconButton\n                        aria-label=\"toggle password visibility\"\n                        onClick={() => setShowPassword(!showPassword)}\n                      >\n                        {\" \"}\n                        {showPassword ? <Eye></Eye> : <EyeOff></EyeOff>}{\" \"}\n                      </IconButton>\n                    </InputAdornment>\n                  ),\n                }}\n              ></TextField>\n              <FormControlLabel\n                control={\n                  <Checkbox\n                    checked={rememberCredentialsChecked}\n                    onChange={() =>\n                      setRememberCredentialsChecked(!rememberCredentialsChecked)\n                    }\n                    value={rememberCredentialsChecked}\n                  />\n                }\n                label={\n                  <Typography>\n                    {t(\"general/remember-username-and-password\") +\n                      \" \" +\n                      (rememberCredentialsChecked\n                        ? `(${t(\"general/stored-locally\")})`\n                        : \"\")}\n                  </Typography>\n                }\n              />\n              <TextField\n                label={t(\"general/cors-proxy\")}\n                placeholder={\"https://crossnote.app/cors/\"}\n                fullWidth={true}\n                value={gitCorsProxy}\n                onChange={(event) => setGitCorsProxy(event.target.value)}\n              ></TextField>\n              <Link\n                href={\n                  \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                }\n                target={\"_blank\"}\n              >\n                {t(\"general/why-cors-proxy\")}\n              </Link>\n            </Box>\n          </AccordionDetails>\n        </Accordion>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={addNotebook}\n          disabled={crossnoteContainer.isAddingNotebook}\n        >\n          {crossnoteContainer.isAddingNotebook\n            ? `${t(\"general/adding\")}...`\n            : t(\"general/add\")}\n        </Button>\n        {props.canCancel && (\n          <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n        )}\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import Noty from \"noty\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { createContainer } from \"unstated-next\";\nimport {\n  NotebookFieldsFragment,\n  User,\n  useSetUserInfoMutation,\n  useViewerQuery,\n} from \"../generated/graphql\";\nimport { SettingsContainer } from \"./settings\";\n\ninterface InitialState {}\n\nfunction useCloudContainer(initialState: InitialState) {\n  const { t } = useTranslation();\n\n  const [authDialogOpen, setAuthDialogOpen] = useState<boolean>(false);\n  const [loggedIn, setLoggedIn] = useState<boolean>(false);\n  const [viewer, setViewer] = useState<User>(null);\n  const [resViewer, executeViewerQuery] = useViewerQuery({\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [resSetUserInfo, executeSetUserInfoMutation] = useSetUserInfoMutation();\n  const [token, setToken] = useState<string>(\n    localStorage.getItem(\"token\") || \"\",\n  );\n  const [selectedNotebook, setSelectedNotebook] = useState<\n    NotebookFieldsFragment\n  >(null);\n  const [displayNotebookPreview, setDisplayNotebookPreview] = useState<boolean>(\n    false,\n  );\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const refetchViewer = useCallback(() => {\n    if (token) {\n      executeViewerQuery({\n        requestPolicy: \"network-only\",\n        pollInterval: 60 * 1000, // Refetch the viewer every 60 seconds for checking notifications\n      });\n    }\n  }, [executeViewerQuery, token]);\n\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    window.location.reload();\n  };\n\n  const setUserInfo = useCallback(\n    ({\n      name = \"\",\n      cover = \"\",\n      avatar = \"\",\n      language = \"en-US\",\n      editorCursorColor = \"rgba(74, 144, 226, 1)\",\n    }) => {\n      executeSetUserInfoMutation({\n        cover,\n        name,\n        avatar,\n        bio: \"\",\n        language,\n        location: \"\",\n        editorCursorColor,\n      });\n    },\n    [executeSetUserInfoMutation],\n  );\n\n  const reduceNotificationsCountByOne = useCallback(() => {\n    if (viewer) {\n      viewer.notifications.totalCount = Math.max(\n        0,\n        viewer.notifications.totalCount - 1,\n      );\n      setViewer(Object.assign({}, viewer) as User);\n    }\n  }, [viewer]);\n\n  const clearNotificationsCount = useCallback(() => {\n    viewer.notifications.totalCount = 0;\n    setViewer(Object.assign({}, viewer) as User);\n  }, [viewer]);\n\n  useEffect(() => {\n    if (resViewer.fetching) {\n    } else if (resViewer.error) {\n      /*\n      // Don't display error message here\n      // because the application might be offline now\n      new Noty({\n        type: \"error\",\n        text: resViewer.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n      */\n      // logout(); // <= Cause mobile device login failure.\n    } else if (resViewer.data && resViewer.data.viewer) {\n      const viewer = resViewer.data.viewer as User;\n      setViewer(viewer);\n    }\n  }, [resViewer]);\n\n  useEffect(() => {\n    if (viewer) {\n      setLoggedIn(true);\n      if (!loggedIn) {\n        // NOTE: Stop syncing properties below from the cloud\n        // settingsContainer.setLanguage(viewer.language);\n        // settingsContainer.setAuthorName(viewer.name);\n        // settingsContainer.setAuthorEmail(viewer.email);\n        // settingsContainer.setEditorCursorColor(viewer.editorCursorColor);\n      }\n    }\n  }, [loggedIn, viewer]);\n\n  useEffect(() => {\n    if (token && refetchViewer) {\n      refetchViewer();\n    }\n  }, [token, refetchViewer]);\n\n  useEffect(() => {\n    if (resSetUserInfo.fetching) {\n    } else if (resSetUserInfo.error) {\n      new Noty({\n        type: \"error\",\n        text: resSetUserInfo.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (resSetUserInfo.data && resSetUserInfo.data.setUserInfo) {\n      setViewer(resSetUserInfo.data.setUserInfo as User);\n      new Noty({\n        type: \"success\",\n        text: t(\"general/profile-updated\"),\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    }\n  }, [\n    resSetUserInfo,\n    /*\n    t // TODO: Will cause repeated run\n    */\n  ]);\n\n  return {\n    loggedIn,\n    logout,\n    authDialogOpen,\n    setAuthDialogOpen,\n    viewer,\n    refetchViewer,\n    resSetUserInfo,\n    setUserInfo,\n    reduceNotificationsCountByOne,\n    clearNotificationsCount,\n    selectedNotebook,\n    setSelectedNotebook,\n    displayNotebookPreview,\n    setDisplayNotebookPreview,\n  };\n}\n\nexport const CloudContainer = createContainer(useCloudContainer);\n","import {\n  Avatar,\n  Box,\n  Button,\n  Chip,\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  Divider,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { Github } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport {\n  useResetPasswordMutation,\n  useSendEmailVerificationCodeMutation,\n  useSignInMutation,\n  useSignUpMutation,\n} from \"../generated/graphql\";\nimport { browserHistory } from \"../utilities/history\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    form: {\n      position: \"relative\",\n      width: \"400px\",\n      // height: \"360px\",\n      maxWidth: \"90%\",\n      margin: \"0 auto\",\n      padding: \"24px 12px\",\n      display: \"flex\",\n      flexDirection: \"column\",\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      gridArea: \"avatar\",\n      cursor: \"pointer\",\n      marginLeft: theme.spacing(1),\n      marginRight: theme.spacing(1),\n    },\n    header: {\n      marginBottom: \"24px\",\n    },\n    username: {\n      marginBottom: \"24px\",\n    },\n    email: {\n      marginBottom: \"24px\",\n    },\n    password: {\n      marginBottom: \"24px\",\n    },\n    authBtn: {\n      marginBottom: \"16px\",\n    },\n    switchLink: {\n      \"marginTop\": \"16px\",\n      \"&:hover\": {\n        cursor: \"pointer\",\n      },\n    },\n    errorMessage: {\n      color: \"#f44336\",\n    },\n  }),\n);\n\nenum Stage {\n  Signin,\n  Signup,\n  ForgotPassword,\n}\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n}\nexport function AuthDialog(props: Props) {\n  const classes = useStyles(props);\n  const [stage, setStage] = useState<Stage>(Stage.Signin);\n  const [username, setUsername] = useState<string>(\"\");\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [passwordConfirmation, setPasswordConfirmation] = useState<string>(\"\");\n  const [errorMessage, setErrorMessage] = useState<string>(\"\");\n  const [verificationCode, setVerificationCode] = useState<string>(\"\");\n  const cloudContainer = CloudContainer.useContainer();\n\n  const [resSignIn, executeSignInMutation] = useSignInMutation();\n  const [resSignUp, executeSignUpMutation] = useSignUpMutation();\n  const [\n    resSendEmailVerificationCode,\n    executeSendEmailVerificationCodeMutation,\n  ] = useSendEmailVerificationCodeMutation();\n  const [\n    resResetPassword,\n    executeResetPasswordMutation,\n  ] = useResetPasswordMutation();\n\n  const { t } = useTranslation();\n  const [loggedIn, setLoggedIn] = useState<boolean>(cloudContainer.loggedIn);\n\n  const signin = useCallback(() => {\n    executeSignInMutation({\n      email: email.trim(),\n      password,\n    });\n  }, [email, password, executeSignInMutation]);\n\n  const signup = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeSignUpMutation({\n        username: username.trim(),\n        email: email.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    username,\n    email,\n    password,\n    passwordConfirmation,\n    t,\n    executeSignUpMutation,\n  ]);\n\n  const sendEmailVerificationCode = useCallback(() => {\n    if (email.trim().length > 0) {\n      executeSendEmailVerificationCodeMutation({\n        email: email.trim(),\n      });\n    }\n  }, [email, executeSendEmailVerificationCodeMutation]);\n\n  const resetPassword = useCallback(() => {\n    if (password === passwordConfirmation) {\n      executeResetPasswordMutation({\n        email: email.trim(),\n        verificationCode: verificationCode.trim(),\n        password,\n      });\n    } else {\n      setErrorMessage(t(\"widget/crossnote.auth/password-mismatch\"));\n    }\n  }, [\n    email,\n    password,\n    passwordConfirmation,\n    executeResetPasswordMutation,\n    verificationCode,\n    t,\n  ]);\n\n  const close = useCallback(() => {\n    setStage(Stage.Signin);\n    setErrorMessage(\"\");\n    props.onClose();\n  }, [props]);\n\n  useEffect(() => {\n    if (resSignIn.error) {\n      setErrorMessage(\n        resSignIn.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignIn.data && resSignIn.data.signIn) {\n      localStorage.setItem(\"token\", resSignIn.data.signIn.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignIn]);\n\n  useEffect(() => {\n    if (resSignUp.error) {\n      setErrorMessage(\n        resSignUp.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resSignUp.data && resSignUp.data.signUp) {\n      localStorage.setItem(\"token\", resSignUp.data.signUp.token);\n      browserHistory.replace(\"/\");\n      window.location.reload();\n    }\n  }, [resSignUp]);\n\n  useEffect(() => {\n    if (resSendEmailVerificationCode.error) {\n      setErrorMessage(\n        resSendEmailVerificationCode.error.message\n          .replace(/\\[GraphQL\\]/, \"\")\n          .trim(),\n      );\n    } else if (resSendEmailVerificationCode.data) {\n      if (!resSendEmailVerificationCode.data.sendEmailVerificationCode) {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_send_code\"));\n      } else {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/verification_code_sent\") + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      }\n    }\n  }, [resSendEmailVerificationCode, email, t]);\n\n  useEffect(() => {\n    if (resResetPassword.error) {\n      setErrorMessage(\n        resResetPassword.error.message.replace(/\\[GraphQL\\]/, \"\").trim(),\n      );\n    } else if (resResetPassword.data) {\n      if (resResetPassword.data.resetPassword) {\n        new Noty({\n          type: \"success\",\n          text: t(\"widget/crossnote.auth/password_reset\") + \" \" + email,\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n        setTimeout(() => {\n          window.location.reload();\n        }, 4000);\n      } else {\n        setErrorMessage(t(\"widget/crossnote.auth/failed_to_reset_password\"));\n      }\n    }\n  }, [resResetPassword, email, t]);\n\n  useEffect(() => {\n    setLoggedIn(cloudContainer.loggedIn);\n  }, [cloudContainer.loggedIn]);\n\n  if (cloudContainer.loggedIn) {\n    return (\n      <Dialog open={props.open} onClose={close}>\n        <DialogContent>\n          <Box\n            style={{\n              display: \"flex\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Box\n              style={{\n                display: \"flex\",\n                flexDirection: \"row\",\n                alignItems: \"center\",\n              }}\n            >\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {t(\"widget/crossnote.auth/hello\")}\n              </Typography>\n              <Avatar\n                className={clsx(classes.avatar)}\n                src={\n                  cloudContainer.viewer.avatar ||\n                  \"data:image/png;base64,\" +\n                    new Identicon(\n                      sha256(cloudContainer.viewer.username),\n                      80,\n                    ).toString()\n                }\n              ></Avatar>\n              <Typography variant=\"body1\" style={{ marginBottom: \"0\" }}>\n                {\"  \" + cloudContainer.viewer.username}!\n              </Typography>\n            </Box>\n            <Button\n              variant={\"outlined\"}\n              color={\"secondary\"}\n              onClick={() => {\n                cloudContainer.logout();\n              }}\n              style={{ marginLeft: \"8px\" }}\n            >\n              {t(\"settings/log-out\")}\n            </Button>\n          </Box>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  return (\n    <Dialog open={props.open} onClose={close}>\n      <DialogTitle>{t(\"widget/crossnote.auth/welcome\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        {stage === Stage.Signup ? (\n          <TextField\n            className={clsx(classes.email)}\n            label={t(\"general/Username\")}\n            variant=\"outlined\"\n            value={username}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setUsername(event.target.value);\n            }}\n          ></TextField>\n        ) : null}\n        <TextField\n          className={clsx(classes.email)}\n          label={t(\"general/Email\")}\n          variant=\"outlined\"\n          value={email}\n          fullWidth={true}\n          onChange={(event) => {\n            setErrorMessage(\"\");\n            setEmail(event.target.value);\n          }}\n          onClick={(event) => {\n            event.currentTarget.focus();\n          }}\n        ></TextField>\n        {stage === Stage.ForgotPassword && email.trim().length > 0 ? (\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"space-evenly\",\n            }}\n          >\n            <TextField\n              className={clsx(classes.password)}\n              label={t(\"widget/crossnote.auth/enter-the-verification-code\")}\n              variant=\"outlined\"\n              value={verificationCode}\n              fullWidth={true}\n              onChange={(event) => {\n                setErrorMessage(\"\");\n                setVerificationCode(event.target.value);\n              }}\n            ></TextField>\n            <Button\n              variant={\"outlined\"}\n              color={\"primary\"}\n              style={{ marginBottom: \"24px\" }}\n              onClick={() => sendEmailVerificationCode()}\n              disabled={resSendEmailVerificationCode.fetching}\n            >\n              {resSendEmailVerificationCode.fetching\n                ? t(\"general/sending\")\n                : t(\"widget/crossnote.auth/get-code\")}\n            </Button>\n          </Box>\n        ) : null}\n        {(stage === Stage.Signin ||\n          stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/Password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={password}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPassword(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                if (stage === Stage.Signin) {\n                  signin();\n                } /* else {\n              signup();\n            }*/\n              }\n            }}\n          ></TextField>\n        )}\n        {(stage === Stage.Signup ||\n          (stage === Stage.ForgotPassword &&\n            verificationCode.trim().length > 0)) && (\n          <TextField\n            className={clsx(classes.password)}\n            label={t(\"general/confirm-password\")}\n            variant=\"outlined\"\n            type=\"password\"\n            value={passwordConfirmation}\n            fullWidth={true}\n            onChange={(event) => {\n              setErrorMessage(\"\");\n              setPasswordConfirmation(event.target.value);\n            }}\n            onKeyDown={(event) => {\n              if (event.which === 13) {\n                signup();\n              }\n            }}\n          ></TextField>\n        )}\n        {stage === Stage.Signin ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signin()}\n              disabled={resSignIn.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-in\")}\n            </Button>\n            <Typography style={{ textAlign: \"center\" }}>\n              {t(\"widget/crossnote.auth/Or\")}\n            </Typography>\n            <Chip\n              label={t(\"widget/crossnote.auth/sign-in-with-github-account\")}\n              icon={<Github></Github>}\n              style={{ marginBottom: \"16px\", marginTop: \"16px\", width: \"100%\" }}\n              onClick={() => startGitHubOAuth()}\n            ></Chip>\n            <Divider></Divider>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signup)}\n            >\n              {t(\"widget/crossnote.auth/doesnt-have-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : stage === Stage.Signup ? (\n          <>\n            <Button\n              className={clsx(classes.authBtn)}\n              variant=\"contained\"\n              color=\"primary\"\n              onClick={() => signup()}\n              disabled={resSignUp.fetching}\n              fullWidth={true}\n            >\n              {t(\"general/sign-up\")}\n            </Button>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.Signin)}\n            >\n              {t(\"widget/crossnote.auth/already-have-an-account\")}\n            </Link>\n            <br></br>\n            <Link\n              className={clsx(classes.switchLink)}\n              onClick={() => setStage(Stage.ForgotPassword)}\n            >\n              {t(\"widget/crossnote.auth/forgot_password\")}\n            </Link>\n          </>\n        ) : (\n          verificationCode.length > 0 && (\n            <>\n              <Button\n                className={clsx(classes.authBtn)}\n                variant=\"contained\"\n                color=\"primary\"\n                onClick={() => resetPassword()}\n                disabled={resResetPassword.fetching}\n                fullWidth={true}\n              >\n                {t(\"widget/crossnote.auth/reset-password\")}\n              </Button>\n              <Link\n                className={clsx(classes.switchLink)}\n                onClick={() => setStage(Stage.Signin)}\n              >\n                {t(\"widget/crossnote.auth/already-have-an-account\")}\n              </Link>\n            </>\n          )\n        )}\n        {errorMessage.length ? (\n          <Typography className={clsx(classes.errorMessage)}>\n            {errorMessage}\n          </Typography>\n        ) : null}\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import {\n  Dialog,\n  DialogContent,\n  DialogTitle,\n  List,\n  ListItem,\n  ListItemText,\n  Typography,\n} from \"@material-ui/core\";\nimport useInterval from \"@use-it/interval\";\nimport { ChevronDown, Translate } from \"mdi-material-ui\";\nimport React, { useCallback, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\n\ninterface Props {}\nexport default function LanguageSelectorDialog(props: Props) {\n  const { t } = useTranslation();\n  // const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const languages = [\"en-US\", \"zh-CN\", \"zh-TW\", \"ja-JP\"];\n  // const fullScreen = useMediaQuery(theme.breakpoints.down(\"xs\"));\n\n  const [open, setOpen] = useState<boolean>(\n    crossnoteContainer.notebooks.length <= 1 &&\n      !localStorage.getItem(\"settings/language\"),\n  );\n  const [titleLanguage, setTitleLanguage] = useState<string>(languages[0]);\n\n  const chooseLanguage = useCallback((language: string) => {\n    settingsContainer.setLanguage(language);\n    setOpen(false);\n  }, []);\n\n  useInterval(() => {\n    let index = languages.findIndex((x) => x === titleLanguage);\n    index = index + 1;\n    if (index >= languages.length) {\n      index = 0;\n    }\n    setTitleLanguage(languages[index]);\n  }, 5000);\n\n  return (\n    <Dialog\n      open={open}\n      fullWidth={true}\n      style={{ zIndex: 2000 }}\n      onClose={() => chooseLanguage(\"en-US\")}\n    >\n      <DialogTitle style={{ textAlign: \"center\" }}>\n        {\" \" + t(\"widget/crossnote.auth/welcome\", { lng: titleLanguage })}\n      </DialogTitle>\n      <DialogContent>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <Translate style={{ marginRight: \"8px\" }}></Translate>\n          {t(\"language-selector-dialog/subtitle\", { lng: titleLanguage })}\n        </Typography>\n        <Typography\n          variant={\"body2\"}\n          style={{\n            fontSize: \"0.75rem\",\n            marginBottom: \"6px\",\n            textAlign: \"center\",\n          }}\n        >\n          <ChevronDown></ChevronDown>\n        </Typography>\n        <List>\n          <ListItem button onClick={() => chooseLanguage(\"en-US\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>English</ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-CN\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              \n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"zh-TW\")}>\n            <ListItemText style={{ textAlign: \"center\" }}>\n              \n            </ListItemText>\n          </ListItem>\n          <ListItem button onClick={() => chooseLanguage(\"ja-JP\")}>\n            <ListItemText style={{ textAlign: \"center\" }}></ListItemText>\n          </ListItem>\n        </List>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import { Box, Hidden, IconButton, Typography } from \"@material-ui/core\";\nimport { Menu as MenuIcon } from \"mdi-material-ui\";\nimport React from \"react\";\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport function PrivacyPolicy(props: Props) {\n  return (\n    <Box style={{ padding: \"16px\" }} className={\"preview\"}>\n      <Box\n        style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\" }}\n      >\n        <Hidden smUp implementation=\"css\">\n          <IconButton onClick={props.toggleDrawer}>\n            <MenuIcon></MenuIcon>\n          </IconButton>\n        </Hidden>\n        <Typography variant={\"h2\"}>Privacy Policy</Typography>\n      </Box>\n      <p>\n        shd101wyy built the Crossnote app as an Open Source app. This SERVICE is\n        provided by shd101wyy at no cost and is intended for use as is.\n      </p>\n      <p>\n        This page is used to inform visitors regarding my policies with the\n        collection, use, and disclosure of Personal Information if anyone\n        decided to use my Service.\n      </p>\n      <p>\n        If you choose to use my Service, then you agree to the collection and\n        use of information in relation to this policy. The Personal Information\n        that I collect is used for providing and improving the Service. I will\n        not use or share your information with anyone except as described in\n        this Privacy Policy.\n      </p>\n      <p>\n        The terms used in this Privacy Policy have the same meanings as in our\n        Terms and Conditions, which is accessible at Crossnote unless otherwise\n        defined in this Privacy Policy.\n      </p>\n      <p>\n        <strong>Information Collection and Use</strong>\n      </p>\n      <p>\n        For a better experience, while using our Service, I may require you to\n        provide us with certain personally identifiable information. The\n        information that I request will be retained on your device and is not\n        collected by me in any way.\n      </p>\n      <p>\n        <strong>Log Data</strong>\n      </p>\n      <p>\n        I want to inform you that whenever you use my Service, in a case of an\n        error in the app I collect data and information (through third party\n        products) on your phone called Log Data. This Log Data may include\n        information such as your device Internet Protocol (IP) address, device\n        name, operating system version, the configuration of the app when\n        utilizing my Service, the time and date of your use of the Service, and\n        other statistics.\n      </p>\n      <p>\n        <strong>Cookies</strong>\n      </p>\n      <p>\n        Cookies are files with a small amount of data that are commonly used as\n        anonymous unique identifiers. These are sent to your browser from the\n        websites that you visit and are stored on your device's internal memory.\n      </p>\n      <p>\n        This Service does not use these cookies explicitly. However, the app\n        may use third party code and libraries that use cookies to collect\n        information and improve their services. You have the option to either\n        accept or refuse these cookies and know when a cookie is being sent to\n        your device. If you choose to refuse our cookies, you may not be able to\n        use some portions of this Service.\n      </p>\n      <p>\n        <strong>Service Providers</strong>\n      </p>\n      <p>\n        I may employ third-party companies and individuals due to the following\n        reasons:\n      </p>\n      <ul>\n        <li>To facilitate our Service;</li>{\" \"}\n        <li>To provide the Service on our behalf;</li>{\" \"}\n        <li>To perform Service-related services; or</li>{\" \"}\n        <li>To assist us in analyzing how our Service is used.</li>\n      </ul>\n      <p>\n        I want to inform users of this Service that these third parties have\n        access to your Personal Information. The reason is to perform the tasks\n        assigned to them on our behalf. However, they are obligated not to\n        disclose or use the information for any other purpose.\n      </p>\n      <p>\n        <strong>Security</strong>\n      </p>\n      <p>\n        I value your trust in providing us your Personal Information, thus we\n        are striving to use commercially acceptable means of protecting it. But\n        remember that no method of transmission over the internet, or method of\n        electronic storage is 100% secure and reliable, and I cannot guarantee\n        its absolute security.\n      </p>\n      <p>\n        <strong>Links to Other Sites</strong>\n      </p>\n      <p>\n        This Service may contain links to other sites. If you click on a\n        third-party link, you will be directed to that site. Note that these\n        external sites are not operated by me. Therefore, I strongly advise you\n        to review the Privacy Policy of these websites. I have no control over\n        and assume no responsibility for the content, privacy policies, or\n        practices of any third-party sites or services.\n      </p>\n      <p>\n        <strong>Children's Privacy</strong>\n      </p>\n      <p>\n        These Services do not address anyone under the age of 13. I do not\n        knowingly collect personally identifiable information from children\n        under 13. In the case I discover that a child under 13 has provided me\n        with personal information, I immediately delete this from our servers.\n        If you are a parent or guardian and you are aware that your child has\n        provided us with personal information, please contact me so that I will\n        be able to do necessary actions.\n      </p>\n      <p>\n        <strong>Changes to This Privacy Policy</strong>\n      </p>\n      <p>\n        I may update our Privacy Policy from time to time. Thus, you are advised\n        to review this page periodically for any changes. I will notify you of\n        any changes by posting the new Privacy Policy on this page.\n      </p>\n      <p>This policy is effective as of 2020-05-03</p>{\" \"}\n      <p>\n        <strong>Contact Us</strong>\n      </p>\n      <p>\n        If you have any questions or suggestions about my Privacy Policy, do not\n        hesitate to contact me at shd101wyy@gmail.com.\n      </p>\n      <p>\n        This privacy policy page was created at{\" \"}\n        <a href=\"https://privacypolicytemplate.net\" target=\"_blank\">\n          privacypolicytemplate.net\n        </a>{\" \"}\n        and modified/generated by{\" \"}\n        <a\n          href=\"https://app-privacy-policy-generator.firebaseapp.com/\"\n          target=\"_blank\"\n        >\n          App Privacy Policy Generator\n        </a>\n      </p>\n    </Box>\n  );\n}\n","import hash from \"object-hash\";\nimport { basename } from \"path\";\nimport { Notebook } from \"./notebook\";\nexport interface GraphViewNode {\n  id: string;\n  label: string;\n}\n\nexport interface GraphViewLink {\n  source: string;\n  target: string;\n}\n\nexport interface GraphViewData {\n  hash: string;\n  nodes: GraphViewNode[];\n  links: GraphViewLink[];\n}\n\nexport function constructGraphView(notebook: Notebook): GraphViewData {\n  const nodes: GraphViewNode[] = [];\n  const links: GraphViewLink[] = [];\n\n  const addedNodes: { [key: string]: boolean } = {};\n  const addNode = (filePath: string) => {\n    if (filePath in addedNodes) {\n      return;\n    }\n    const note = notebook.notes[filePath];\n    if (note) {\n      nodes.push({\n        id: filePath,\n        label: note.title,\n      });\n    } else {\n      const lastIndex = filePath.lastIndexOf(\".\");\n      let label = filePath;\n      if (lastIndex > 0) {\n        label = filePath.slice(0, lastIndex);\n      }\n      nodes.push({\n        id: filePath,\n        label: basename(label),\n      });\n    }\n    addedNodes[filePath] = true;\n  };\n\n  for (const filePath in notebook.referenceMap.map) {\n    addNode(filePath);\n    for (const referredByFilePath in notebook.referenceMap.map[filePath]) {\n      addNode(referredByFilePath);\n      links.push({\n        source: referredByFilePath,\n        target: filePath,\n      });\n    }\n  }\n\n  return {\n    hash: hash({ nodes, links }),\n    nodes,\n    links,\n  };\n}\n","import { debounce } from \"@0xgg/echomd\";\nimport { Box, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport * as d3 from \"d3\";\nimport { TabNode } from \"flexlayout-react\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  ChangedNoteFilePathEventData,\n  CreatedNoteEventData,\n  DeletedNotebookEventData,\n  DeletedNoteEventData,\n  EventType,\n  FocusedOnNoteEventData,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData,\n} from \"../lib/event\";\nimport {\n  constructGraphView,\n  GraphViewData,\n  GraphViewLink,\n  GraphViewNode,\n} from \"../lib/graphView\";\nimport { Notebook } from \"../lib/notebook\";\nimport { TabNodeConfig } from \"../lib/tabNode\";\n\nconst bottomPanelHeight = 20;\nconst defaultFillColor = `#aaa`;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    graphViewPanel: {\n      width: \"100%\",\n      height: \"100%\",\n      /*\n      \"& .tooltip\": {\n        position: \"absolute\",\n        width: \"200px\",\n        backgroundColor: fade(theme.palette.grey[700], 0.9),\n        borderRadius: theme.shape.borderRadius,\n        color: theme.palette.common.white,\n        fontFamily: theme.typography.fontFamily,\n        padding: \"4px 8px\",\n        fontSize: theme.typography.pxToRem(10),\n        lineHeight: `${round(14 / 10)}em`,\n        maxWidth: 300,\n        wordWrap: \"break-word\",\n        fontWeight: theme.typography.fontWeightMedium,\n      },\n      */\n    },\n    graphView: {\n      \"position\": \"relative\",\n      \"height\": `calc(100% - ${bottomPanelHeight}px)`,\n      \"display\": \"block\",\n      \"& .nodes\": {\n        zIndex: 10,\n      },\n      \"& .nodes > circle\": {\n        cursor: \"pointer\",\n        zIndex: 10,\n      },\n      \"& .arrows\": {\n        zIndex: 5,\n        pointerEvents: \"none\",\n      },\n      \"& .arrows > circle\": {\n        zIndex: 5,\n        pointerEvents: \"none\",\n      },\n    },\n    bottomPanel: {\n      position: \"absolute\",\n      bottom: \"0\",\n      width: \"100%\",\n      padding: theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      maxHeight: `${bottomPanelHeight}px`,\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.getContrastText(theme.palette.primary.main),\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n  tabNode: TabNode;\n}\n\nexport default function GraphView(props: Props) {\n  const classes = useStyles();\n  const [graphViewData, setGraphViewData] = useState<GraphViewData>({\n    hash: \"\",\n    nodes: [],\n    links: [],\n  });\n  const graphView = useRef<HTMLDivElement>(null);\n  const [\n    hoveredGraphViewNode,\n    setHoveredGraphViewNode,\n  ] = useState<GraphViewNode>(null);\n  const [focusedNoteFilePath, setFocusedNoteFilePath] = useState<string>(null);\n  const [tabNodeVisible, setTabNodeVisible] = useState<boolean>(false);\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const theme = useTheme();\n  const isMounted = useRef<boolean>(false);\n\n  // Graph related variables\n  const [graphLayout, setGraphLayout] = useState<\n    d3.Simulation<d3.SimulationNodeDatum, undefined>\n  >(null);\n  const [svg, setSVG] = useState<\n    d3.Selection<SVGSVGElement, unknown, HTMLDivElement, undefined>\n  >(null);\n  const [container, setContainer] = useState<\n    d3.Selection<SVGGElement, unknown, SVGSVGElement, undefined>\n  >(null);\n  const [link, setLink] = useState<\n    d3.Selection<SVGLineElement, GraphViewLink, SVGGElement, unknown>\n  >(null);\n  const [node, setNode] = useState<\n    d3.Selection<SVGCircleElement, GraphViewNode, SVGGElement, unknown>\n  >(null);\n  const [text, setText] = useState<\n    d3.Selection<SVGTextElement, GraphViewNode, SVGGElement, unknown>\n  >(null);\n\n  const neigh = useCallback(\n    (n1: GraphViewNode, n2: GraphViewNode) => {\n      if (!props.notebook) {\n        return false;\n      } else {\n        return props.notebook.referenceMap.hasRelation(n1.id, n2.id);\n      }\n    },\n    [props.notebook],\n  );\n\n  const removeArrows = useCallback(() => {\n    if (svg) {\n      svg.selectAll(\".arrows\").remove();\n    }\n  }, [svg]);\n\n  const drawArrowPath = useCallback(\n    (d: GraphViewNode) => {\n      if (!container) {\n        return;\n      }\n      removeArrows();\n      const arrow = container\n        .append(\"g\")\n        .attr(\"class\", \"arrows\")\n        .selectAll(\"g\")\n        .data(graphViewData.links)\n        .enter()\n        .filter(function (l) {\n          return (\n            ((l.source as any).id === d.id || (l.target as any).id === d.id) &&\n            (l.source as any).id !== (l.target as any).id\n          );\n        })\n        .append(\"circle\")\n        .style(\"fill\", theme.palette.primary.light)\n        .attr(\"r\", 2);\n\n      const repeat = () => {\n        if (!arrow) {\n          return;\n        }\n        arrow\n          .attr(\"cx\", function (l: any) {\n            return (l.source as any).x;\n          })\n          .attr(\"cy\", function (l: any) {\n            return (l.source as any).y;\n          })\n          .transition()\n          .duration(1500)\n          .ease(d3.easeLinear)\n          .attr(\"cx\", function (l: any) {\n            return (l.target as any).x;\n          })\n          .attr(\"cy\", function (l: any) {\n            return (l.target as any).y;\n          })\n          .on(\"end\", repeat);\n      };\n      repeat();\n    },\n    [container, graphViewData.links, removeArrows, theme.palette.primary.light],\n  );\n\n  const focus = useCallback(\n    (event: any, d: GraphViewNode) => {\n      if (!node || !link) {\n        return;\n      }\n      node\n        .filter(function (o) {\n          return o.id === d.id || neigh(o, d);\n        })\n        .style(\"fill\", function (o) {\n          return o.id === d.id\n            ? theme.palette.primary.main\n            : neigh(o, d)\n            ? theme.palette.primary.light\n            : defaultFillColor;\n        });\n      link.style(\"stroke\", function (o) {\n        return (o.source as any).id === d.id || (o.target as any).id === d.id\n          ? theme.palette.primary.light\n          : defaultFillColor;\n      });\n      drawArrowPath(d);\n      setHoveredGraphViewNode(d);\n    },\n    [\n      node,\n      link,\n      drawArrowPath,\n      neigh,\n      theme.palette.primary.main,\n      theme.palette.primary.light,\n    ],\n  );\n\n  const unfocus = useCallback(() => {\n    if (!node || !link) {\n      return;\n    }\n    node.style(\"fill\", defaultFillColor);\n    link.style(\"stroke\", defaultFillColor);\n    removeArrows();\n    setHoveredGraphViewNode(null);\n  }, [node, link, removeArrows]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (\n      !graphView ||\n      !graphLayout ||\n      !graphView.current ||\n      !props.tabNode ||\n      !tabNodeVisible\n    ) {\n      return;\n    }\n    const resize = () => {\n      const width = graphView.current.offsetWidth;\n      const height = graphView.current.offsetHeight;\n      d3.select(graphView.current)\n        .selectChild()\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n      graphLayout\n        .force(\"center\", d3.forceCenter(width / 2, height / 2))\n        .force(\"x\", d3.forceX(width / 2).strength(1))\n        .force(\"y\", d3.forceY(height / 2).strength(1));\n    };\n    const debouncedResize = debounce(resize, 1000);\n    window.addEventListener(\"resize\", debouncedResize);\n    props.tabNode.setEventListener(\"resize\", debouncedResize);\n    resize();\n\n    return () => {\n      window.removeEventListener(\"resize\", debouncedResize);\n      props.tabNode.removeEventListener(\"resize\");\n    };\n  }, [graphView, graphLayout, props.tabNode, tabNodeVisible]);\n\n  // Visibility\n  useEffect(() => {\n    if (!props.tabNode) {\n      return;\n    }\n    const tabNodeConfig: TabNodeConfig = props.tabNode.getConfig();\n    if (\n      tabNodeConfig.component !== \"Graph\" ||\n      tabNodeConfig.notebookPath !== props.notebook.dir\n    ) {\n      return;\n    }\n\n    setTabNodeVisible(props.tabNode.isVisible());\n    props.tabNode.setEventListener(\"visibility\", function (params) {\n      // hack: need to wait for props.tabNode.isVisible() === params.visible to setState\n      setTimeout(() => {\n        if (isMounted.current) {\n          setTabNodeVisible(params.visible);\n        }\n      }, 1000);\n    });\n    return () => {\n      props.tabNode.removeEventListener(\"visibility\");\n    };\n  }, [props.tabNode, props.notebook.dir]);\n\n  // Emitter\n  useEffect(() => {\n    if (!graphView || !props.notebook || !tabNodeVisible || !props.tabNode) {\n      return;\n    }\n\n    const refreshGraphViewData = () => {\n      // TODO: Improve the diff\n      const newGraphViewData = constructGraphView(props.notebook);\n      if (newGraphViewData.hash !== graphViewData.hash) {\n        setGraphViewData(newGraphViewData);\n      }\n    };\n\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const createdNoteCallback = (data: CreatedNoteEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const changedNoteFilePathCallback = (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const performedGitOperationCallback = (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (data.notebookPath === props.notebook.dir) {\n        refreshGraphViewData();\n      }\n    };\n    const deletedNotebookCallback = (data: DeletedNotebookEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        crossnoteContainer.closeTabNode(props.tabNode.getId());\n      }\n    };\n\n    const focusedOnNoteCallback = (data: FocusedOnNoteEventData) => {\n      if (data.notebookPath === props.notebook.dir) {\n        setFocusedNoteFilePath(data.noteFilePath);\n      }\n    };\n\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.CreatedNote, createdNoteCallback);\n    globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n    globalEmitter.on(\n      EventType.ChangedNoteFilePath,\n      changedNoteFilePathCallback,\n    );\n    globalEmitter.on(\n      EventType.PerformedGitOperation,\n      performedGitOperationCallback,\n    );\n    globalEmitter.on(EventType.DeletedNotebook, deletedNotebookCallback);\n    globalEmitter.on(EventType.FocusedOnNote, focusedOnNoteCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.CreatedNote, createdNoteCallback);\n      globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.off(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.off(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n      globalEmitter.off(EventType.DeletedNotebook, deletedNotebookCallback);\n      globalEmitter.off(EventType.FocusedOnNote, focusedOnNoteCallback);\n    };\n  }, [\n    crossnoteContainer.closeTabNode,\n    graphViewData.hash,\n    props.notebook,\n    props.tabNode,\n    tabNodeVisible,\n  ]);\n\n  useEffect(() => {\n    if (!tabNodeVisible) {\n      return;\n    }\n\n    props.notebook\n      .refreshNotesIfNotLoaded({ dir: \"./\", includeSubdirectories: true })\n      .then(() => {\n        const data = constructGraphView(props.notebook);\n        setGraphViewData(data);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }, [props.notebook, tabNodeVisible]);\n\n  useEffect(() => {\n    if (!graphView || !graphView.current || !graphViewData) {\n      return;\n    }\n\n    const svg = d3\n      .select(graphView.current)\n      .append(\"svg\")\n      .attr(\"width\", graphView.current.offsetWidth)\n      .attr(\"height\", graphView.current.offsetHeight);\n    setSVG(svg);\n\n    const container = svg.append(\"g\");\n    setContainer(container);\n\n    const zoomHandler = d3\n      .zoom()\n      .scaleExtent([0.1, 4])\n      .on(\"zoom\", function (event: any) {\n        container.attr(\"transform\", event.transform);\n      });\n    zoomHandler(svg as any);\n\n    const link = container\n      .append(\"g\")\n      .attr(\"class\", \"links\")\n      .selectAll(\"line\")\n      .data(graphViewData.links)\n      .enter()\n      .append(\"line\")\n      .style(\"stroke\", defaultFillColor)\n      .attr(\"stroke-width\", \"0.5px\");\n    setLink(link);\n\n    const node = container\n      .append(\"g\")\n      .attr(\"class\", \"nodes\")\n      .selectAll(\"g\")\n      .data(graphViewData.nodes)\n      .enter()\n      .append(\"circle\")\n      .attr(\"r\", 8)\n      .style(\"fill\", defaultFillColor);\n    setNode(node);\n\n    const text = container\n      .append(\"g\")\n      .attr(\"class\", \"labelNodes\")\n      .selectAll(\"text\")\n      .data(graphViewData.nodes)\n      .enter()\n      .append(\"text\")\n      .text((d) => d.label)\n      .style(\"fill\", theme.palette.text.primary)\n      .style(\"font-family\", \"Arial\")\n      .style(\"font-size\", 12)\n      .style(\"pointer-events\", \"none\");\n    setText(text);\n\n    console.log(\"simulated\");\n    return () => {\n      console.log(\"destroyed\");\n      svg.remove();\n      setSVG(null);\n      setContainer(null);\n      setNode(null);\n      setLink(null);\n      setText(null);\n    };\n  }, [\n    graphViewData,\n    graphView,\n    props.notebook,\n    theme.palette.text,\n    theme.palette.primary,\n    crossnoteContainer.openNoteAtPath,\n  ]);\n\n  useEffect(() => {\n    if (!svg || !container || !link || !node || !text) {\n      return;\n    }\n    /*\n    // Define the div for the tooltip\n    const tooltip = d3\n      .select(graphView.current)\n      .append(\"div\")\n      .attr(\"class\", \"tooltip\")\n      .style(\"opacity\", 0);\n      */\n\n    const fixna = (x: number) => {\n      if (isFinite(x)) return x;\n      return 0;\n    };\n\n    const dragstarted = function (event: any, d: any) {\n      event.sourceEvent.stopPropagation();\n      if (!d.active) graphLayout.alphaTarget(0.3).restart();\n\n      // @ts-ignore\n      d3.select(this).attr(\"stroke\", \"black\");\n    };\n\n    const dragged = function (event: any, d: any) {\n      d.x = event.x;\n      d.y = event.y;\n      // @ts-ignore\n      d3.select(this as SVGCircleElement)\n        .raise()\n        .attr(\"transform\", (d: any) => \"translate(\" + [d.x, d.y] + \")\");\n    };\n\n    const dragended = function (event: any, d: any) {\n      if (!d.active) graphLayout.alphaTarget(0);\n\n      // @ts-ignore\n      d3.select(this).attr(\"stroke\", null);\n    };\n\n    const updateLink = (link: any) => {\n      link\n        .attr(\"x1\", function (d: any) {\n          return fixna(d.source.x);\n        })\n        .attr(\"y1\", function (d: any) {\n          return fixna(d.source.y);\n        })\n        .attr(\"x2\", function (d: any) {\n          return fixna(d.target.x);\n        })\n        .attr(\"y2\", function (d: any) {\n          return fixna(d.target.y);\n        });\n    };\n\n    const updateNode = (node: any) => {\n      node.attr(\"transform\", function (d: any) {\n        return \"translate(\" + fixna(d.x) + \",\" + fixna(d.y) + \")\";\n      });\n    };\n\n    const ticked = () => {\n      // console.log(\"ticked\");\n      node.call(updateNode);\n      link.call(updateLink);\n      text.call(updateNode);\n    };\n\n    const width = graphView.current.offsetWidth;\n    const height = graphView.current.offsetHeight;\n    const graphLayout = d3\n      .forceSimulation(graphViewData.nodes as any)\n      .force(\"charge\", d3.forceManyBody().strength(-3000))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2))\n      .force(\"x\", d3.forceX(width / 2).strength(1))\n      .force(\"y\", d3.forceY(height / 2).strength(1))\n      .force(\n        \"link\",\n        d3\n          .forceLink(graphViewData.links)\n          .id(function (d) {\n            return (d as GraphViewNode).id;\n          })\n          .distance(100)\n          .strength(1),\n      )\n      .on(\"tick\", ticked);\n    setGraphLayout(graphLayout);\n\n    node.on(\"mouseover\", focus).on(\"mouseout\", unfocus);\n    const drag = d3\n      .drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n    drag(node as any);\n\n    node.on(\"click\", (event: any, d: GraphViewNode) => {\n      crossnoteContainer.openNoteAtPath(props.notebook, d.id);\n    });\n  }, [\n    svg,\n    container,\n    link,\n    node,\n    text,\n    crossnoteContainer.openNoteAtPath,\n    graphViewData.links,\n    graphViewData.nodes,\n    focus,\n    unfocus,\n    props.notebook,\n  ]);\n\n  useEffect(() => {\n    if (focusedNoteFilePath) {\n      const d = graphViewData.nodes.find((n) => n.id === focusedNoteFilePath);\n      if (d) {\n        unfocus();\n        focus(null, d);\n      }\n    }\n  }, [focusedNoteFilePath, unfocus, focus, graphViewData.nodes]);\n\n  return (\n    <Box className={clsx(classes.graphViewPanel)}>\n      <div className={clsx(classes.graphView)} ref={graphView}></div>\n      {graphViewData && (\n        <Box className={clsx(classes.bottomPanel, \"editor-bottom-panel\")}>\n          <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n            {props.notebook.name +\n              (hoveredGraphViewNode ? \": \" + hoveredGraphViewNode.id : \"\")}\n          </Typography>\n          <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n            {`${graphViewData.nodes.length} ${t(\"graph-view/node\")}, ${\n              graphViewData.links.length\n            } ${t(\"graph-view/link\")} `}\n          </Typography>\n        </Box>\n      )}\n    </Box>\n  );\n}\n","import { Box, CircularProgress, Typography } from \"@material-ui/core\";\nimport { useTranslation } from \"react-i18next\";\n\nexport function Loading() {\n  const { t } = useTranslation();\n\n  return (\n    <Box style={{ width: \"100%\", height: \"100%\" }}>\n      <Box\n        style={{\n          textAlign: \"center\",\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          top: \"36%\",\n          position: \"relative\",\n        }}\n      >\n        <CircularProgress></CircularProgress>\n        <Typography color={\"textPrimary\"} style={{ marginLeft: \"24px\" }}>\n          {t(\"general/loading\")}\n        </Typography>\n      </Box>\n    </Box>\n  );\n}\n","export class FloatWin {\n  private el: HTMLElement;\n  public closeBtn: HTMLElement;\n  public visible: boolean;\n\n  constructor(win: HTMLElement) {\n    if (!win) {\n      return;\n    }\n\n    /** @type {HTMLDivElement} */\n    const titlebar = win.querySelector(\".float-win-title\") as HTMLElement;\n    titlebar.addEventListener(\n      \"selectstart\",\n      function () {\n        return false;\n      },\n      false,\n    );\n\n    /** @type {HTMLButtonElement} */\n    const closeBtn = win.querySelector(\".float-win-close\") as HTMLElement;\n    if (closeBtn) {\n      closeBtn.addEventListener(\n        \"click\",\n        () => {\n          this.hide();\n        },\n        false,\n      );\n      win.addEventListener(\n        \"keyup\",\n        (ev) => {\n          if (ev.keyCode === 27) this.hide(); // ESC\n        },\n        false,\n      );\n    }\n\n    let boxX: number,\n      boxY: number,\n      mouseX: number,\n      mouseY: number,\n      offsetX: number,\n      offsetY: number;\n\n    titlebar.addEventListener(\n      \"mousedown\",\n      function (e) {\n        if (e.target === closeBtn) return;\n\n        boxX = win.offsetLeft;\n        boxY = win.offsetTop;\n        mouseX = getMouseXY(e).x;\n        mouseY = getMouseXY(e).y;\n        offsetX = mouseX - boxX;\n        offsetY = mouseY - boxY;\n\n        document.addEventListener(\"mousemove\", move, false);\n        document.addEventListener(\"mouseup\", up, false);\n      },\n      false,\n    );\n\n    function move(e: any) {\n      var x = getMouseXY(e).x - offsetX;\n      var y = getMouseXY(e).y - offsetY;\n      var width = document.documentElement.clientWidth - titlebar.offsetWidth;\n      var height =\n        document.documentElement.clientHeight - titlebar.offsetHeight;\n\n      x = Math.min(Math.max(0, x), width);\n      y = Math.min(Math.max(0, y), height);\n\n      win.style.left = x + \"px\";\n      win.style.top = y + \"px\";\n    }\n\n    function up(e: any) {\n      document.removeEventListener(\"mousemove\", move, false);\n      document.removeEventListener(\"mouseup\", up, false);\n    }\n\n    function getMouseXY(e: any) {\n      var x = 0,\n        y = 0;\n      e = e || window.event;\n      if (e.pageX) {\n        x = e.pageX;\n        y = e.pageY;\n      } else {\n        x = e.clientX + document.body.scrollLeft - document.body.clientLeft;\n        y = e.clientY + document.body.scrollTop - document.body.clientTop;\n      }\n      return {\n        x: x,\n        y: y,\n      };\n    }\n\n    this.el = win;\n    this.closeBtn = closeBtn;\n    this.visible = !/float-win-hidden/.test(win.className);\n  }\n\n  public show(moveToCenter?: boolean) {\n    if (this.visible) return;\n    var el = this.el;\n\n    this.visible = true;\n    el.className = this.el.className.replace(/\\s*(float-win-hidden\\s*)+/g, \" \");\n    el.style.display = \"block\";\n\n    if (moveToCenter) {\n      setTimeout(() => {\n        this.moveTo(\n          (window.innerWidth - el.offsetWidth) / 2,\n          (window.innerHeight - el.offsetHeight) / 2,\n        );\n      }, 0);\n    }\n  }\n\n  public hide() {\n    if (!this.visible) return;\n    this.visible = false;\n    this.el.className += \" float-win-hidden\";\n    this.el.style.display = \"none\";\n  }\n\n  public moveTo(x: number, y: number) {\n    var s = this.el.style;\n    s.left = x + \"px\";\n    s.top = y + \"px\";\n  }\n}\n","import { Popover } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport { TabNode } from \"flexlayout-react\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/note\";\nimport { EmojiPicker } from \"./EmojiWrapper\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    secondaryColor: {\n      color: theme.palette.secondary.main,\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  note: Note;\n  anchorElement: Element;\n  onClose: () => void;\n}\n\nexport default function IconPopover(props: Props) {\n  const classes = useStyles(props);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const note = props.note;\n\n  return (\n    <Popover\n      anchorEl={props.anchorElement}\n      keepMounted\n      open={Boolean(props.anchorElement)}\n      onClose={props.onClose}\n    >\n      <EmojiPicker\n        showSkinTones={true}\n        onSelect={(data) => {\n          crossnoteContainer.setNoteIcon(\n            props.tabNode,\n            note.notebookPath,\n            note.filePath,\n            data.colons,\n          );\n          props.onClose();\n        }}\n      ></EmojiPicker>\n    </Popover>\n  );\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  TextField,\n} from \"@material-ui/core\";\nimport { TabNode } from \"flexlayout-react\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/note\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  tabNode: TabNode;\n  note: Note;\n}\n\nexport default function ChangeFilePathDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const note = props.note;\n  const tabNode = props.tabNode;\n  const [inputEl, setInputEl] = useState<HTMLInputElement>(null);\n  const [newFilePath, setNewFilePath] = useState<string>(\n    (note && note.filePath) || \"\",\n  );\n  const { t } = useTranslation();\n\n  const changeFilePath = useCallback(\n    (newFilePath: string) => {\n      if (!note) return;\n      (async () => {\n        newFilePath = newFilePath.replace(/^\\/+/, \"\");\n        if (!newFilePath.endsWith(\".md\")) {\n          newFilePath = newFilePath + \".md\";\n        }\n        if (note.filePath !== newFilePath) {\n          try {\n            await crossnoteContainer.changeNoteFilePath(\n              tabNode,\n              note,\n              newFilePath,\n            );\n          } catch (error) {\n            new Noty({\n              type: \"error\",\n              text: t(\"error/failed-to-change-file-path\"),\n              layout: \"topRight\",\n              theme: \"relax\",\n              timeout: 5000,\n            }).show();\n          }\n        }\n        props.onClose();\n      })();\n    },\n    [note, tabNode, props, t],\n  );\n\n  useEffect(() => {\n    return () => {\n      setInputEl(null);\n    };\n  }, []);\n\n  useEffect(() => {\n    if (note) {\n      setNewFilePath(note.filePath);\n    }\n  }, [note, props.open]);\n\n  useEffect(() => {\n    if (!inputEl) return;\n    inputEl.focus();\n    if (inputEl.setSelectionRange) {\n      const start = inputEl.value.lastIndexOf(\"/\") + 1;\n      let end = inputEl.value.lastIndexOf(\".md\");\n      if (end < 0) {\n        end = inputEl.value.length;\n      }\n      inputEl.setSelectionRange(start, end);\n    }\n  }, [inputEl]);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"general/change-file-path\")}</DialogTitle>\n      <DialogContent style={{ width: \"400px\", maxWidth: \"100%\" }}>\n        <TextField\n          value={newFilePath}\n          autoFocus={true}\n          onChange={(event) => setNewFilePath(event.target.value)}\n          onKeyUp={(event) => {\n            if (event.which === 13) {\n              changeFilePath(newFilePath);\n            }\n          }}\n          inputRef={(input: HTMLInputElement) => {\n            setInputEl(input);\n          }}\n          fullWidth={true}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={() => changeFilePath(newFilePath)}\n        >\n          {t(\"general/Save\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n  DialogTitle,\n} from \"@material-ui/core\";\nimport { TabNode } from \"flexlayout-react\";\nimport React, { useEffect, useRef } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/note\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  tabNode: TabNode;\n  note: Note;\n}\n\nexport function DeleteNoteDialog(props: Props) {\n  const { t } = useTranslation();\n  const isMounted = useRef<boolean>(false);\n  const note = props.note;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  return (\n    <Dialog open={props.open} onClose={props.onClose}>\n      <DialogTitle>{t(\"delete-note-dialog/title\")}</DialogTitle>\n      <DialogContent>\n        <DialogContentText>\n          {t(\"delete-note-dialog/subtitle\")}\n        </DialogContentText>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          style={{ color: \"red\" }}\n          onClick={() => {\n            crossnoteContainer.deleteNote(\n              props.tabNode,\n              note.notebookPath,\n              note.filePath,\n            );\n            if (isMounted.current) {\n              props.onClose();\n            }\n          }}\n        >\n          {t(\"general/Delete\")}\n        </Button>\n        <Button onClick={props.onClose}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  Box,\n  IconButton,\n  List,\n  ListItem,\n  Popover,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TrashCan } from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    menuItemOverride: {\n      \"cursor\": \"default\",\n      \"padding\": `0 0 0 ${theme.spacing(2)}px`,\n      \"&:hover\": {\n        backgroundColor: \"inherit\",\n      },\n    },\n    menuItemTextField: {\n      paddingRight: theme.spacing(2),\n    },\n  }),\n);\ninterface Props {\n  anchorElement: HTMLElement;\n  onClose: () => void;\n  addAlias: (alias: string) => void;\n  deleteAlias: (alias: string) => void;\n  aliases: string[];\n}\nexport function NoteAliasPopover(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [alias, setAlias] = useState<string>(\"\");\n\n  const addAlias = useCallback(\n    (alias: string) => {\n      if (!alias || alias.trim().length === 0) {\n        return;\n      }\n      props.addAlias(alias);\n      setAlias(\"\");\n    },\n    [props],\n  );\n\n  useEffect(() => {\n    setAlias(\"\");\n  }, [props.anchorElement]);\n\n  return (\n    <Popover\n      open={Boolean(props.anchorElement)}\n      anchorEl={props.anchorElement}\n      keepMounted\n      onClose={props.onClose}\n    >\n      <List>\n        <ListItem\n          className={clsx(classes.menuItemOverride, classes.menuItemTextField)}\n        >\n          <TextField\n            placeholder={t(\"general/add-an-alias\")}\n            fullWidth={true}\n            autoFocus={true}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                addAlias(alias);\n              }\n            }}\n            onChange={(event) => setAlias(event.target.value)}\n            value={alias}\n          ></TextField>\n        </ListItem>\n        {props.aliases.length > 0 ? (\n          props.aliases.map((alias) => {\n            return (\n              <ListItem key={alias} className={clsx(classes.menuItemOverride)}>\n                <Box\n                  style={{\n                    display: \"flex\",\n                    flexDirection: \"row\",\n                    alignItems: \"center\",\n                    justifyContent: \"space-between\",\n                    width: \"100%\",\n                  }}\n                >\n                  <Typography>{alias}</Typography>\n                  <IconButton onClick={() => props.deleteAlias(alias)}>\n                    <TrashCan></TrashCan>\n                  </IconButton>\n                </Box>\n              </ListItem>\n            );\n          })\n        ) : (\n          <ListItem className={clsx(classes.menuItemOverride)}>\n            <Typography style={{ margin: \"8px 0\" }}>\n              {t(\"general/no-aliases\")}\n            </Typography>\n          </ListItem>\n        )}\n      </List>\n    </Popover>\n  );\n}\n","import { renderPreview } from \"@0xgg/echomd/preview\";\nimport {\n  Box,\n  Divider,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Popover,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { TabNode } from \"flexlayout-react\";\nimport {\n  ContentCopy,\n  Delete,\n  Pin,\n  PinOutline,\n  Printer,\n  RenameBox,\n  Restore,\n  ShareVariant,\n  Star,\n  StarOutline,\n  TooltipEdit,\n  ViewSplitHorizontal,\n  ViewSplitVertical,\n} from \"mdi-material-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { Note } from \"../lib/note\";\nimport { setTheme } from \"../themes/manager\";\nimport { printPreview } from \"../utilities/preview\";\nimport { copyToClipboard } from \"../utilities/utils\";\nimport ChangeFilePathDialog from \"./ChangeFilePathDialog\";\nimport { DeleteNoteDialog } from \"./DeleteNoteDialog\";\nimport { NoteAliasPopover } from \"./NoteAliasPopover\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    secondaryColor: {\n      color: theme.palette.secondary.main,\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  note: Note;\n  anchorElement: Element;\n  onClose: () => void;\n}\n\nexport default function NotePopover(props: Props) {\n  const classes = useStyles(props);\n  const note = props.note;\n  const [deleteNoteDialogOpen, setDeleteNoteDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [\n    changeNoteFilePathDialogOpen,\n    setChangeNoteFilePathDialogOpen,\n  ] = useState<boolean>(false);\n  const [needsToPrint, setNeedsToPrint] = useState<boolean>(false);\n  const [shareAnchorEl, setShareAnchorEl] = useState<HTMLElement>(null);\n  const [noteAliasAnchorEl, setNoteAliasAnchorEl] = useState<HTMLElement>(null);\n  const [aliases, setAliases] = useState<string[]>(note.config.aliases);\n  const theme = useTheme();\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const notebook = crossnoteContainer.getNotebookAtPath(note.notebookPath);\n  const isLocal = notebook && notebook.isLocal;\n\n  // Print preview\n  useEffect(() => {\n    if (!note || !needsToPrint) {\n      return;\n    }\n\n    const tempPreviewElement = document.createElement(\"div\");\n    tempPreviewElement.classList.add(\"preview\");\n    tempPreviewElement.style.zIndex = \"999999\";\n    document.body.appendChild(tempPreviewElement);\n\n    const bannerElement = document.createElement(\"div\");\n    bannerElement.style.position = \"fixed\";\n    bannerElement.style.width = \"100%\";\n    bannerElement.style.height = \"100%\";\n    bannerElement.style.top = \"0\";\n    bannerElement.style.left = \"0\";\n    bannerElement.style.textAlign = \"center\";\n    bannerElement.style.backgroundColor = theme.palette.background.default;\n    bannerElement.style.color = theme.palette.text.primary;\n    bannerElement.style.zIndex = \"9999\";\n    bannerElement.innerHTML = `<p>${t(\"general/please-wait\")}</p>`;\n\n    const currentTheme = settingsContainer.theme.name; // editor.getOption(\"theme\") as ThemeName;\n    setTheme({\n      editor: null,\n      themeName: \"light\",\n    });\n    const printDone = () => {\n      tempPreviewElement.remove();\n      setTheme({\n        editor: null,\n        themeName: currentTheme,\n      });\n      setNeedsToPrint(false);\n    };\n    crossnoteContainer\n      .getNote(note.notebookPath, note.filePath)\n      .then((note) => {\n        const previewIsPresentation = !!note.markdown.match(/^<!--\\s*slide/im);\n        renderPreview(tempPreviewElement, note.markdown, previewIsPresentation)\n          .then(() => {\n            printPreview(tempPreviewElement, bannerElement)\n              .then(() => {\n                printDone();\n              })\n              .catch(() => {\n                printDone();\n              });\n          })\n          .catch(() => {\n            printDone();\n          });\n      })\n      .catch(() => {\n        printDone();\n      });\n  }, [\n    needsToPrint,\n    note,\n    settingsContainer.theme.name,\n    t,\n    theme.palette.background.default,\n    theme.palette.text.primary,\n  ]);\n\n  return (\n    <React.Fragment>\n      <Popover\n        anchorEl={props.anchorElement}\n        keepMounted\n        open={Boolean(props.anchorElement)}\n        onClose={props.onClose}\n      >\n        <List>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.togglePin(\n                props.tabNode,\n                note.notebookPath,\n                note.filePath,\n              );\n              props.onClose();\n            }}\n          >\n            <ListItemIcon\n              className={clsx(note.config.pinned && classes.secondaryColor)}\n            >\n              {note.config.pinned ? <Pin></Pin> : <PinOutline></PinOutline>}\n            </ListItemIcon>\n            <ListItemText\n              primary={\n                note.config.pinned\n                  ? t(\"general/unpin-the-note\")\n                  : t(\"general/pin-the-note\")\n              }\n            ></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.toggleFavorite(\n                props.tabNode,\n                note.notebookPath,\n                note.filePath,\n              );\n              props.onClose();\n            }}\n          >\n            <ListItemIcon\n              className={clsx(note.config.favorited && classes.secondaryColor)}\n            >\n              {note.config.favorited ? (\n                <Star></Star>\n              ) : (\n                <StarOutline></StarOutline>\n              )}\n            </ListItemIcon>\n            <ListItemText\n              primary={\n                note.config.favorited\n                  ? t(\"general/remove-from-quick-access\")\n                  : t(\"general/add-to-quick-access\")\n              }\n            ></ListItemText>\n          </ListItem>\n          <Divider></Divider>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.splitNoteVertically(note);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <ViewSplitVertical></ViewSplitVertical>\n            </ListItemIcon>\n            <ListItemText>{t(\"editor/split-vertically\")}</ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.splitNoteHorizontally(note, props.tabNode);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <ViewSplitHorizontal></ViewSplitHorizontal>\n            </ListItemIcon>\n            <ListItemText>{t(\"editor/split-horizontally\")}</ListItemText>\n          </ListItem>\n          <Divider></Divider>\n          <ListItem\n            button\n            onClick={() => {\n              setChangeNoteFilePathDialogOpen(true);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <RenameBox></RenameBox>\n            </ListItemIcon>\n            <ListItemText\n              primary={t(\"general/change-file-path\")}\n            ></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={(event) => setNoteAliasAnchorEl(event.currentTarget)}\n          >\n            <ListItemIcon>\n              <TooltipEdit></TooltipEdit>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/edit-note-alias\")}></ListItemText>\n          </ListItem>\n          <ListItem\n            button\n            onClick={() => {\n              setDeleteNoteDialogOpen(true);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <Delete></Delete>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Delete\")}></ListItemText>\n          </ListItem>\n          {!isLocal && (\n            <ListItem\n              button\n              onClick={() => {\n                crossnoteContainer.checkoutNote(note);\n                props.onClose();\n              }}\n            >\n              <ListItemIcon>\n                <Restore></Restore>\n              </ListItemIcon>\n              <ListItemText\n                primary={t(\"general/restore-checkout\")}\n              ></ListItemText>\n            </ListItem>\n          )}\n          <Divider></Divider>\n          {!isLocal && notebook && notebook.gitURL && (\n            <ListItem\n              button\n              onClick={(event) => setShareAnchorEl(event.currentTarget)}\n            >\n              <ListItemIcon>\n                <ShareVariant></ShareVariant>\n              </ListItemIcon>\n              <ListItemText primary={t(\"general/Share\")}></ListItemText>\n            </ListItem>\n          )}\n          <ListItem\n            button\n            onClick={() => {\n              setNeedsToPrint(true);\n              props.onClose();\n            }}\n          >\n            <ListItemIcon>\n              <Printer></Printer>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Print\")}></ListItemText>\n          </ListItem>\n        </List>\n      </Popover>\n      <DeleteNoteDialog\n        open={deleteNoteDialogOpen}\n        onClose={() => {\n          setDeleteNoteDialogOpen(false);\n        }}\n        tabNode={props.tabNode}\n        note={note}\n      ></DeleteNoteDialog>\n      <ChangeFilePathDialog\n        open={changeNoteFilePathDialogOpen}\n        onClose={() => {\n          setChangeNoteFilePathDialogOpen(false);\n        }}\n        tabNode={props.tabNode}\n        note={note}\n      ></ChangeFilePathDialog>\n      <NoteAliasPopover\n        anchorElement={noteAliasAnchorEl}\n        onClose={() => {\n          setNoteAliasAnchorEl(null);\n        }}\n        addAlias={(alias) => {\n          crossnoteContainer\n            .addNoteAlias(\n              props.tabNode,\n              note.notebookPath,\n              note.filePath,\n              alias,\n            )\n            .then((aliases) => setAliases(aliases));\n        }}\n        deleteAlias={(alias) => {\n          crossnoteContainer\n            .deleteNoteAlias(\n              props.tabNode,\n              note.notebookPath,\n              note.filePath,\n              alias,\n            )\n            .then((aliases) => setAliases(aliases));\n        }}\n        aliases={aliases}\n      ></NoteAliasPopover>\n      <Popover\n        open={Boolean(shareAnchorEl)}\n        anchorEl={shareAnchorEl}\n        keepMounted\n        onClose={() => setShareAnchorEl(null)}\n      >\n        <Box style={{ padding: theme.spacing(1) }}>\n          <Typography variant={\"subtitle2\"}>\n            {t(\"editor/note-control/shareable-link\")}\n          </Typography>\n          <Box className={clsx(classes.row)}>\n            <Tooltip\n              title={t(\"editor/note-control/copy-to-clipboard\")}\n              onClick={() => {\n                copyToClipboard(\n                  notebook.gitURL\n                    ? `${window.location.origin}/?repo=${encodeURIComponent(\n                        notebook.gitURL,\n                      )}&branch=${encodeURIComponent(\n                        notebook.gitBranch || \"master\",\n                      )}&filePath=${encodeURIComponent(note.filePath)}`\n                    : `${window.location.origin}/?notebookID=${\n                        notebook._id\n                      }&filePath=${encodeURIComponent(note.filePath)}`,\n                );\n              }}\n            >\n              <IconButton>\n                <ContentCopy></ContentCopy>\n              </IconButton>\n            </Tooltip>\n            <TextField\n              onChange={(event) => event.preventDefault()}\n              value={\n                notebook.gitURL\n                  ? `${window.location.origin}${\n                      window.location.origin.match(/0xgg\\./i)\n                        ? \"/crossnote\"\n                        : \"/\"\n                    }?repo=${encodeURIComponent(\n                      notebook.gitURL,\n                    )}&branch=${encodeURIComponent(\n                      notebook.gitBranch || \"master\",\n                    )}&filePath=${encodeURIComponent(note.filePath)}`\n                  : `${window.location.origin}/?notebookID=${\n                      notebook._id\n                    }&filePath=${encodeURIComponent(note.filePath)}`\n              }\n              inputRef={(input: HTMLInputElement) => {\n                if (input) {\n                  input.focus();\n                  if (input.setSelectionRange) {\n                    input.setSelectionRange(0, input.value.length);\n                  }\n                }\n              }}\n            ></TextField>\n          </Box>\n        </Box>\n      </Popover>\n    </React.Fragment>\n  );\n}\n","export enum OrderBy {\n  CreatedAt = \"CreatedAt\",\n  ModifiedAt = \"ModifiedAt\",\n  Title = \"Title\",\n}\n\nexport enum OrderDirection {\n  ASC = \"ASC\",\n  DESC = \"DESC\",\n}\n","import { Box, Chip, IconButton, Tooltip, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { formatRelative } from \"date-fns\";\nimport { formatDistanceStrict } from \"date-fns/esm\";\nimport { TabNode } from \"flexlayout-react\";\nimport { DotsVertical, Pin } from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { languageCodeToDateFNSLocale } from \"../i18n/i18n\";\nimport {\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n} from \"../lib/event\";\nimport { getNoteIcon, Note } from \"../lib/note\";\nimport { Reference } from \"../lib/reference\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport { generateSummaryFromMarkdown, Summary } from \"../utilities/note\";\nimport { Emoji } from \"./EmojiWrapper\";\nimport NotePopover from \"./NotePopover\";\n\nexport const NoteCardMargin = 4;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    noteCard: {\n      maxWidth: \"100%\",\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"flex-start\",\n      padding: theme.spacing(2, 0.5, 0),\n      textAlign: \"left\",\n      // backgroundColor: theme.palette.background.paper,\n      margin: `${NoteCardMargin}px auto`,\n      [theme.breakpoints.down(\"sm\")]: {\n        marginLeft: 0,\n        marginRight: 0,\n      },\n    },\n    selected: {\n      borderLeft: `4px solid ${theme.palette.primary.main}`,\n    },\n    unselected: {\n      borderLeft: `4px solid rgba(0, 0, 0, 0)`,\n    },\n    leftPanel: {\n      width: \"48px\",\n      paddingLeft: theme.spacing(0.5),\n    },\n    duration: {\n      color: theme.palette.text.secondary,\n    },\n    rightPanel: {\n      width: \"calc(100% - 48px)\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n    },\n    header: {\n      \"color\": theme.palette.text.primary,\n      \"marginBottom\": theme.spacing(1),\n      \"wordBreak\": \"break-all\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.08),\n        cursor: \"pointer\",\n      },\n      \"flex\": 1,\n      \"display\": \"flex\",\n      \"alignItems\": \"center\",\n    },\n    summary: {\n      \"color\": theme.palette.text.secondary,\n      \"marginBottom\": theme.spacing(1),\n      \"paddingRight\": theme.spacing(2),\n      \"display\": \"-webkit-box\",\n      \"lineHeight\": \"1.3rem !important\",\n      \"textOverflow\": \"ellipsis !important\",\n      \"overflow\": \"hidden !important\",\n      \"maxWidth\": \"100%\",\n      \"maxHeight\": \"2.6rem\", // lineHeight x -website-line-clamp\n      \"-webkit-line-clamp\": 2,\n      \"-webkit-box-orient\": \"vertical\",\n      \"wordBreak\": \"break-all\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.08),\n        cursor: \"pointer\",\n      },\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n      color: theme.palette.text.primary,\n    },\n    images: {\n      display: \"flex\",\n      width: \"100%\",\n      overflow: \"hidden\",\n      position: \"relative\",\n      marginBottom: theme.spacing(1),\n    },\n    imagesWrapper: {\n      display: \"flex\",\n      alignItems: \"center\",\n      flexDirection: \"row\",\n    },\n    image: {\n      width: \"128px\",\n      height: \"80px\",\n      marginRight: theme.spacing(1),\n      position: \"relative\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      display: \"block\",\n      borderRadius: \"6px\",\n    },\n    pin: {\n      color: theme.palette.secondary.main,\n      marginTop: theme.spacing(1),\n    },\n    markdownPreview: {\n      \"width\": \"calc(100% - 32px)\",\n      \"&:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.08),\n        cursor: \"pointer\",\n      },\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  note: Note;\n  referredNote?: Note;\n}\n\nexport default function NoteCard(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const [header, setHeader] = useState<string>(\"\");\n  const [summary, setSummary] = useState<Summary>(null);\n  const [images, setImages] = useState<string[]>([]);\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n  const [popoverElement, setPopoverElement] = useState<Element>(null);\n  const [note, setNote] = useState<Note>(props.note);\n  const [references, setReferences] = useState<Reference[]>([]);\n  const { t } = useTranslation();\n  const duration = formatDistanceStrict(note.config.modifiedAt, Date.now())\n    .replace(/\\sseconds?/, \"s\")\n    .replace(/\\sminutes?/, \"m\")\n    .replace(/\\shours?/, \"h\")\n    .replace(/\\sdays?/, \"d\")\n    .replace(/\\sweeks?/, \"w\")\n    .replace(/\\smonths?/, \"mo\")\n    .replace(/\\syears?/, \"y\");\n\n  const openNote = useCallback(() => {\n    if (note) {\n      crossnoteContainer.addTabNode({\n        type: \"tab\",\n        component: \"Note\",\n        config: {\n          component: \"Note\",\n          singleton: false,\n          noteFilePath: note.filePath,\n          notebookPath: note.notebookPath,\n          icon: getNoteIcon(note),\n        },\n        name: note.title,\n      });\n    }\n  }, [note, crossnoteContainer.addTabNode]);\n\n  useEffect(() => {\n    setNote(props.note);\n  }, [props.note]);\n\n  useEffect(() => {\n    if (!note) {\n      return;\n    }\n    const modifiedMarkdownCallback = async (\n      data: ModifiedMarkdownEventData,\n    ) => {\n      if (\n        note.filePath === data.noteFilePath &&\n        note.notebookPath === data.notebookPath\n      ) {\n        const newNote = await crossnoteContainer.getNote(\n          data.notebookPath,\n          data.noteFilePath,\n        );\n        setNote(newNote);\n      }\n    };\n\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    };\n  }, [note]);\n\n  useEffect(() => {\n    if (props.referredNote && note) {\n      const notebook = crossnoteContainer.getNotebookAtPath(note.notebookPath);\n      if (!notebook) {\n        return;\n      }\n      setReferences(\n        notebook.getReferences(props.referredNote.filePath, note.filePath) ||\n          [],\n      );\n    }\n  }, [note, props.referredNote, crossnoteContainer.getNotebookAtPath]);\n\n  useEffect(() => {\n    setHeader(`${note.title}`);\n    generateSummaryFromMarkdown(\n      note.markdown.trim() || t(\"general/this-note-is-empty\"),\n    )\n      .then((summary) => {\n        setSummary(summary);\n\n        // render images\n        const imagePromises = Promise.all(\n          summary.images.map((image) => resolveNoteImageSrc(note, image)),\n        );\n        imagePromises\n          .then((imageSrcs) => {\n            imageSrcs = imageSrcs.filter((x) => x).slice(0, 3);\n            setImages(imageSrcs || []);\n          })\n          .catch((error) => {\n            setImages([]);\n          });\n      })\n      .catch((error) => {});\n  }, [note.markdown, note, crossnoteContainer.crossnote, t]);\n\n  useEffect(() => {\n    crossnoteContainer\n      .getStatus(note.notebookPath, note.filePath)\n      .then((status) => {\n        setGitStatus(status);\n      });\n  }, [note.markdown, note.config.modifiedAt, note]);\n\n  return (\n    <React.Fragment>\n      <Box className={clsx(classes.noteCard, \"note-card\")}>\n        <Box className={clsx(classes.leftPanel)}>\n          <Tooltip\n            title={\n              <>\n                <p>\n                  {t(\"general/created-at\") +\n                    \" \" +\n                    formatRelative(\n                      new Date(note.config.createdAt),\n                      new Date(),\n                      {\n                        locale: languageCodeToDateFNSLocale(\n                          settingsContainer.language,\n                        ),\n                      },\n                    )}\n                </p>\n                <p>\n                  {t(\"general/modified-at\") +\n                    \" \" +\n                    formatRelative(\n                      new Date(note.config.modifiedAt),\n                      new Date(),\n                      {\n                        locale: languageCodeToDateFNSLocale(\n                          settingsContainer.language,\n                        ),\n                      },\n                    )}\n                </p>\n              </>\n            }\n            arrow\n          >\n            <Typography className={clsx(classes.duration)}>\n              {duration}\n            </Typography>\n          </Tooltip>\n\n          {note.config.pinned && <Pin className={clsx(classes.pin)}></Pin>}\n        </Box>\n        <Box className={clsx(classes.rightPanel)}>\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n              justifyContent: \"space-between\",\n            }}\n          >\n            <Box className={clsx(classes.header)} onClick={openNote}>\n              <Emoji emoji={getNoteIcon(note)} size={16}></Emoji>\n              <Typography\n                style={{\n                  fontWeight: \"bold\",\n                  marginBottom: \"0\",\n                  marginLeft: theme.spacing(1),\n                }}\n                variant={\"body1\"}\n              >\n                {header}\n              </Typography>\n            </Box>\n            <Box style={{ display: \"flex\", alignItems: \"center\" }}>\n              {props.referredNote && (\n                <Chip\n                  variant={\"outlined\"}\n                  style={{\n                    marginLeft: theme.spacing(1),\n                    marginRight: theme.spacing(1),\n                  }}\n                  label={`${references.length} ${t(\"general/reference(s)\")}`}\n                  size={\"small\"}\n                ></Chip>\n              )}\n              <IconButton\n                size={\"small\"}\n                style={{\n                  marginLeft: theme.spacing(1),\n                  marginRight: theme.spacing(1),\n                }}\n                onClick={(event) => {\n                  event.preventDefault();\n                  event.stopPropagation();\n                  setPopoverElement(event.currentTarget);\n                }}\n              >\n                <DotsVertical></DotsVertical>\n              </IconButton>\n            </Box>\n          </Box>\n          {summary && summary.summary.trim().length > 0 && (\n            <Typography className={clsx(classes.summary)} onClick={openNote}>\n              {summary && summary.summary.slice(0, 200)}\n            </Typography>\n          )}\n          {images.length > 0 && (\n            <Box className={clsx(classes.images)}>\n              <Box className={clsx(classes.imagesWrapper)}>\n                {images.map((image, offset) => (\n                  <div\n                    key={`${image}-${offset}`}\n                    className={clsx(classes.image)}\n                    style={{\n                      backgroundImage: `url(${image})`,\n                    }}\n                  ></div>\n                ))}\n              </Box>\n            </Box>\n          )}\n          {references.map((reference, offset) => {\n            return (\n              <Box\n                style={{\n                  display: \"flex\",\n                  flexDirection: \"row\",\n                  // marginBottom: theme.spacing(1),\n                }}\n                key={note.filePath + offset}\n              >\n                <Box style={{ width: \"32px\" }}>\n                  <Typography\n                    style={{ fontWeight: \"bold\" }}\n                    color={\"textPrimary\"}\n                  >\n                    {reference.parentToken.map[0] + 1}:\n                  </Typography>\n                </Box>\n                <Box\n                  className={clsx(classes.markdownPreview)}\n                  onClick={() => {\n                    if (note) {\n                      crossnoteContainer.addTabNode({\n                        type: \"tab\",\n                        component: \"Note\",\n                        config: {\n                          component: \"Note\",\n                          singleton: false,\n                          noteFilePath: note.filePath,\n                          notebookPath: note.notebookPath,\n                          reference: Object.assign({}, reference) as Reference,\n                          icon: getNoteIcon(note),\n                        },\n                        name: note.title,\n                      });\n                    }\n                  }}\n                >\n                  {/*\n                  <MarkdownPreview\n                    note={note}\n                    markdown={reference.parentToken.content}\n                  ></MarkdownPreview>\n                  */}\n                  <Typography style={{ color: theme.palette.text.secondary }}>\n                    {reference.parentToken.content}\n                  </Typography>\n                </Box>\n              </Box>\n            );\n          })}\n          <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n            {note.filePath +\n              (gitStatus ? \" - \" + t(`git/status/${gitStatus}`) : \"\")}\n          </Typography>\n        </Box>\n      </Box>\n      <NotePopover\n        tabNode={props.tabNode}\n        note={note}\n        anchorElement={popoverElement}\n        onClose={() => setPopoverElement(null)}\n      ></NotePopover>\n    </React.Fragment>\n  );\n}\n","import { Box, Chip, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport { Skeleton } from \"@material-ui/lab\";\nimport clsx from \"clsx\";\nimport { TabNode } from \"flexlayout-react\";\nimport React, { useCallback, useEffect, useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport LazyLoad from \"react-lazyload\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Note } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport { TabNodeConfig } from \"../lib/tabNode\";\nimport NoteCard, { NoteCardMargin } from \"./NoteCard\";\nconst is = require(\"is_js\");\n\nconst lazyLoadPlaceholderHeight = 92 + 2 * NoteCardMargin;\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesList: {\n      \"position\": \"relative\",\n      // \"flex\": \"1\",\n      // \"overflowY\": \"auto\",\n      \"paddingTop\": theme.spacing(2),\n      \"paddingLeft\": theme.spacing(2),\n      \"paddingRight\": theme.spacing(2),\n      \"paddingBottom\": theme.spacing(12),\n      [theme.breakpoints.down(\"sm\")]: {\n        paddingLeft: theme.spacing(0.5),\n        paddingRight: theme.spacing(0.5),\n      },\n\n      \"& .note-card-sizer\": {\n        // width: `${NoteCardWidth + 2 * NoteCardMargin}px`,\n        maxWidth: \"100%\",\n        /*\n        [theme.breakpoints.down(\"xs\")]: {\n          width: \"100%\",\n        },\n        */\n      },\n    },\n    updatePanel: {\n      padding: theme.spacing(2),\n      textAlign: \"center\",\n      borderBottom: `1px solid ${theme.palette.divider}`,\n      backgroundColor: theme.palette.background.paper,\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  referredNote?: Note;\n  notebook: Notebook;\n  notes: Note[];\n  searchValue: string;\n  scrollElement: HTMLElement;\n}\n\nexport default function Notes(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notes, setNotes] = useState<Note[]>([]);\n\n  // Hack: fix note cards not displaying bug when searchValue is not empty\n  const hack = useCallback(() => {\n    if (props.scrollElement) {\n      const scrollElement = props.scrollElement;\n      const initialHeight = scrollElement.style.height;\n      const initialFlex = scrollElement.style.flex;\n      scrollElement.style.flex = \"initial\";\n      scrollElement.style.height = \"10px\";\n      scrollElement.scrollTop += 1;\n      scrollElement.scrollTop -= 1;\n      scrollElement.style.height = initialHeight;\n      scrollElement.style.flex = initialFlex;\n    }\n  }, [props.scrollElement]);\n\n  useEffect(() => {\n    if (props.tabNode) {\n      const tabNodeConfig: TabNodeConfig = props.tabNode.getConfig();\n      if (\n        (tabNodeConfig.component !== \"Notes\" &&\n          tabNodeConfig.component !== \"Note\") ||\n        tabNodeConfig.notebookPath !== props.notebook.dir\n      ) {\n        return;\n      }\n\n      props.tabNode.setEventListener(\"resize\", hack);\n      hack();\n      return () => {\n        props.tabNode.removeEventListener(\"resize\");\n      };\n    }\n  }, [props.tabNode, props.notebook.dir, hack]);\n\n  useEffect(() => {\n    const newNotes = props.notes;\n    const searchValue = props.searchValue;\n    const pinned: Note[] = [];\n    const unpinned: Note[] = [];\n    newNotes.forEach((note) => {\n      // TODO: Convert to use MiniSearch for searching\n      if (searchValue.trim().length) {\n        const regexp = new RegExp(\n          \"(\" +\n            searchValue\n              .trim()\n              .split(/\\s+/g)\n              .map((s) => s.replace(/[.!@#$%^&*()_+\\-=[\\]]/g, (x) => `\\\\${x}`)) // escape special regexp characters\n              .join(\"|\") +\n            \")\",\n          \"i\",\n        );\n\n        if (note.markdown.match(regexp) || note.filePath.match(regexp)) {\n          if (note.config.pinned) {\n            pinned.push(note);\n          } else {\n            unpinned.push(note);\n          }\n        }\n      } else {\n        if (note.config.pinned) {\n          pinned.push(note);\n        } else {\n          unpinned.push(note);\n        }\n      }\n    });\n\n    const mergedNotes = [...pinned, ...unpinned];\n\n    if (mergedNotes.length !== notes.length) {\n      setNotes(mergedNotes);\n      return;\n    }\n\n    mergedNotes.some((mergedNote, index) => {\n      const note = notes[index];\n      if (mergedNote.filePath !== note.filePath) {\n        setNotes(mergedNotes);\n        return true;\n      }\n      return false;\n    });\n  }, [props.notes, props.searchValue]);\n\n  useEffect(() => {\n    if (props.scrollElement) {\n      window.addEventListener(\"resize\", hack);\n      hack();\n      return () => {\n        window.removeEventListener(\"resize\", hack);\n      };\n    }\n  }, [notes, props.scrollElement]);\n\n  const notesComponent = useMemo(() => {\n    return (notes || []).map((note) => {\n      return (\n        <LazyLoad\n          key={\"lazy-load-note-card-\" + note.filePath}\n          placeholder={\n            <Box\n              style={{\n                maxWidth: \"100%\",\n                margin: `${NoteCardMargin}px auto`,\n                padding: theme.spacing(2, 0.5, 0),\n                height: `${lazyLoadPlaceholderHeight}px`,\n              }}\n              className={\"note-card lazyload-placeholder\"}\n            >\n              <Skeleton />\n              <Skeleton animation={false} />\n              <Skeleton animation=\"wave\" />\n            </Box>\n          }\n          height={lazyLoadPlaceholderHeight}\n          overflow={true}\n          once={true}\n          scrollContainer={props.scrollElement}\n          resize={true}\n        >\n          <NoteCard\n            key={\"note-card-\" + note.filePath}\n            tabNode={props.tabNode}\n            note={note}\n            referredNote={props.referredNote}\n          ></NoteCard>\n        </LazyLoad>\n\n        //   <NoteCard key={\"note-card-\" + note.filePath} note={note}></NoteCard>\n      );\n    });\n  }, [notes, props.referredNote, props.scrollElement, props.tabNode]);\n\n  return (\n    <React.Fragment>\n      <Box style={{ textAlign: \"center\" }}>\n        <Chip\n          size={\"small\"}\n          variant={\"outlined\"}\n          color={\"default\"}\n          label={`${Object.keys(notes).length} ${t(\"profile-card/notes\")}`}\n        ></Chip>\n      </Box>\n      <div className={clsx(classes.notesList)}>\n        {notesComponent}\n        {crossnoteContainer.initialized &&\n          props.notebook.hasLoadedNotes &&\n          notes.length === 0 && (\n            <Typography\n              style={{\n                textAlign: \"center\",\n                marginTop: \"32px\",\n              }}\n              variant={\"body2\"}\n              color={\"textPrimary\"}\n            >\n              {\" \" + t(\"general/no-notes-found\")}\n            </Typography>\n          )}\n      </div>\n    </React.Fragment>\n  );\n}\n","import {\n  Box,\n  CircularProgress,\n  Divider,\n  IconButton,\n  InputBase,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Popover,\n  Tooltip,\n  Typography\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  fade,\n  makeStyles,\n  Theme,\n  useTheme\n} from \"@material-ui/core/styles\";\nimport useInterval from \"@use-it/interval\";\nimport clsx from \"clsx\";\nimport { TabNode } from \"flexlayout-react\";\nimport {\n  FileEditOutline,\n  Magnify,\n  SortAscending,\n  SortDescending,\n  SortVariant\n} from \"mdi-material-ui\";\nimport React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState\n} from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport {\n  ChangedNoteFilePathEventData,\n  CreatedNoteEventData,\n  DeletedNotebookEventData,\n  DeletedNoteEventData,\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData\n} from \"../lib/event\";\nimport { Note, Notes as NotesValue } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport { OrderBy, OrderDirection } from \"../lib/order\";\nimport { TabNodeConfig } from \"../lib/tabNode\";\nimport Notes from \"./Notes\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notesPanel: {\n      backgroundColor: theme.palette.background.paper,\n      width: \"800px\",\n      maxWidth: \"100%\",\n      margin: \"0 auto\",\n    },\n    topPanel: {\n      padding: theme.spacing(0, 1),\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.paper,\n      zIndex: 9,\n    },\n    fixedTopPanel: {\n      position: \"sticky\",\n      top: `0`,\n      width: \"100%\",\n    },\n    row: {\n      display: \"flex\",\n      alignItems: \"center\",\n    },\n    sectionName: {\n      marginLeft: theme.spacing(1),\n    },\n    search: {\n      \"color\": theme.palette.text.secondary,\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": 0, // theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        // marginLeft: theme.spacing(3),\n        // width: \"auto\"\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n      color: theme.palette.text.primary,\n    },\n    inputRoot: {\n      color: \"inherit\",\n      border: \"1px solid #bbb\",\n      borderRadius: \"4px\",\n      width: \"100%\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        // width: 200\n      },\n    },\n    loading: {\n      position: \"absolute\",\n      top: \"40%\",\n      left: \"50%\",\n      transform: \"translateX(-50%)\",\n    },\n    sortSelected: {\n      \"color\": theme.palette.primary.main,\n      \"& svg\": {\n        color: theme.palette.primary.main,\n      },\n    },\n  }),\n);\n\ninterface Props {\n  tabNode: TabNode;\n  notebook: Notebook;\n  note?: Note;\n  initialSearchValue?: string;\n  title?: string;\n}\n\nexport default function NotesPanel(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [sortMenuAnchorEl, setSortMenuAnchorEl] = useState<HTMLElement>(null);\n  const [isCreatingNote, setIsCreatingNote] = useState<boolean>(false);\n  const [orderBy, setOrderBy] = useState<OrderBy>(OrderBy.ModifiedAt);\n  const [orderDirection, setOrderDirection] = useState<OrderDirection>(\n    OrderDirection.DESC,\n  );\n  const [rawNotesMap, setRawNotesMap] = useState<NotesValue>({});\n  const [notes, setNotes] = useState<Note[]>([]);\n  const [needsToRefreshRawNotes, setNeedsToRefreshRawNotes] = useState<boolean>(\n    false,\n  );\n  const theme = useTheme();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [searchValue, setSearchValue] = useState<string>( // Search\n    props.initialSearchValue || \"\",\n  );\n  const [\n    searchValueInputTimeout,\n    setSearchValueInputTimeout,\n  ] = useState<NodeJS.Timeout>(null);\n  const [finalSearchValue, setFinalSearchValue] = useState<string>(\"\");\n  const [fixedTopPanel, setFixedTopPanel] = useState<boolean>(false);\n  const [tabNodeVisible, setTabNodeVisible] = useState<boolean>(false);\n  const container = useRef<HTMLDivElement>(null);\n  const topPanel = useRef<HTMLElement>(null);\n  const isMounted = useRef<boolean>(false);\n\n  const createNewNote = useCallback(() => {\n    setIsCreatingNote(true);\n    let markdown = \"\";\n    if (props.note) {\n      if (props.note.title === props.note.filePath.replace(/\\.md$/, \"\")) {\n        markdown = `[[${props.note.title}]]`;\n      } else {\n        markdown = `[[${props.note.title}|${props.note.filePath}]]`;\n      }\n    }\n    crossnoteContainer\n      .createNewNote(props.notebook, \"\", markdown)\n      .then((note) => {\n        crossnoteContainer.openNoteAtPath(props.notebook, note.filePath);\n        setIsCreatingNote(false);\n      })\n      .catch(() => {\n        setIsCreatingNote(false);\n      });\n  }, [props.notebook, props.note]);\n\n  const onChangeSearchValue = useCallback(\n    (event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) => {\n      const value = event.target.value;\n      setSearchValue(value);\n      if (searchValueInputTimeout) {\n        clearTimeout(searchValueInputTimeout);\n      }\n      const timeout = setTimeout(() => {\n        setFinalSearchValue(value);\n      }, 400);\n      setSearchValueInputTimeout(timeout);\n    },\n    [searchValueInputTimeout],\n  );\n\n  const refreshRawNotes = useCallback(async () => {\n    if (!isMounted.current || !tabNodeVisible) {\n      return;\n    }\n    await props.notebook.refreshNotesIfNotLoaded({\n      dir: \"./\",\n      includeSubdirectories: true,\n    });\n    setRawNotesMap(\n      Object.assign(\n        {},\n        props.note\n          ? await props.notebook.getReferredByNotes(props.note.filePath)\n          : props.notebook.notes,\n      ) as any,\n    );\n  }, [props.notebook, props.note, tabNodeVisible]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    setSearchValue(\"\");\n    setFinalSearchValue(\"\");\n  }, [props.notebook]);\n\n  // Visibility\n  useEffect(() => {\n    if (!props.tabNode) {\n      return;\n    }\n    const tabNodeConfig: TabNodeConfig = props.tabNode.getConfig();\n    if (\n      (tabNodeConfig.component !== \"Notes\" &&\n        tabNodeConfig.component !== \"Note\") ||\n      tabNodeConfig.notebookPath !== props.notebook.dir\n    ) {\n      return;\n    }\n\n    setTabNodeVisible(props.tabNode.isVisible());\n    props.tabNode.setEventListener(\"visibility\", function (params) {\n      // hack: need to wait for props.tabNode.isVisible() === params.visible to setState\n      setTimeout(() => {\n        if (isMounted.current) {\n          setTabNodeVisible(params.visible);\n        }\n      }, 1000);\n    });\n    return () => {\n      props.tabNode.removeEventListener(\"visibility\");\n    };\n  }, [props.tabNode, props.notebook.dir]);\n\n  // Emitter\n  useEffect(() => {\n    if (!globalEmitter || !tabNodeVisible) {\n      return;\n    }\n    const modifiedMarkdownCallback = async (\n      data: ModifiedMarkdownEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        setNeedsToRefreshRawNotes(true);\n      }\n    };\n    const createdNoteCallback = (data: CreatedNoteEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const changedNoteFilePathCallback = (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const performedGitOperationCallback = (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshRawNotes();\n      }\n    };\n    const deletedNotebookCallback = (data: DeletedNotebookEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        crossnoteContainer.closeTabNode(props.tabNode.getId());\n      }\n    };\n\n    // TODO: Delay the modifiedMarkdownCallback\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.CreatedNote, createdNoteCallback);\n    globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n    globalEmitter.on(EventType.DeletedNotebook, deletedNotebookCallback);\n    globalEmitter.on(\n      EventType.ChangedNoteFilePath,\n      changedNoteFilePathCallback,\n    );\n    globalEmitter.on(\n      EventType.PerformedGitOperation,\n      performedGitOperationCallback,\n    );\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.CreatedNote, createdNoteCallback);\n      globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.off(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.off(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n      globalEmitter.off(EventType.DeletedNotebook, deletedNotebookCallback);\n    };\n  }, [\n    refreshRawNotes,\n    props.notebook,\n    props.note,\n    props.tabNode,\n    tabNodeVisible,\n  ]);\n\n  useEffect(() => {\n    if (refreshRawNotes) {\n      refreshRawNotes();\n    }\n  }, [refreshRawNotes, props.note]);\n\n  useEffect(() => {\n    const newNotes = Object.values(rawNotesMap);\n    if (orderBy === OrderBy.ModifiedAt) {\n      if (orderDirection === OrderDirection.DESC) {\n        newNotes.sort(\n          (a, b) =>\n            b.config.modifiedAt.getTime() - a.config.modifiedAt.getTime(),\n        );\n      } else {\n        newNotes.sort(\n          (a, b) =>\n            a.config.modifiedAt.getTime() - b.config.modifiedAt.getTime(),\n        );\n      }\n    } else if (orderBy === OrderBy.CreatedAt) {\n      if (orderDirection === OrderDirection.DESC) {\n        newNotes.sort(\n          (a, b) => b.config.createdAt.getTime() - a.config.createdAt.getTime(),\n        );\n      } else {\n        newNotes.sort(\n          (a, b) => a.config.createdAt.getTime() - b.config.createdAt.getTime(),\n        );\n      }\n    } else if (orderBy === OrderBy.Title) {\n      if (orderDirection === OrderDirection.DESC) {\n        newNotes.sort((a, b) => b.title.localeCompare(a.title));\n      } else {\n        newNotes.sort((a, b) => a.title.localeCompare(b.title));\n      }\n    }\n    setNotes(newNotes);\n  }, [rawNotesMap, orderBy, orderDirection]);\n\n  useEffect(() => {\n    if (!container || !topPanel || !container.current || !topPanel.current) {\n      return;\n    }\n    const containerElement = container.current;\n    const scrollElement = containerElement.parentElement;\n    const scrollEvent = function () {\n      if (scrollElement.scrollTop >= containerElement.offsetTop) {\n        setFixedTopPanel(true);\n      } else {\n        setFixedTopPanel(false);\n      }\n    };\n    scrollEvent();\n    scrollElement.addEventListener(\"scroll\", scrollEvent);\n    return () => {\n      scrollElement.removeEventListener(\"scroll\", scrollEvent);\n    };\n  }, [container, topPanel]);\n\n  useInterval(() => {\n    if (needsToRefreshRawNotes) {\n      refreshRawNotes();\n      setNeedsToRefreshRawNotes(false);\n    }\n  }, 15000);\n\n  const rootComponent = useMemo(() => {\n    return (\n      <div className={clsx(classes.notesPanel, \"notes-panel\")} ref={container}>\n        <Box\n          className={clsx(\n            classes.topPanel,\n            fixedTopPanel ? classes.fixedTopPanel : \"\",\n          )}\n        >\n          {props.title && (\n            <Typography\n              variant={\"h6\"}\n              style={{\n                padding: \"6px 0 7px\",\n                color: theme.palette.text.primary,\n              }}\n            >\n              {props.title}\n            </Typography>\n          )}\n          <Box className={clsx(classes.row)}>\n            <div className={classes.search}>\n              <div className={classes.searchIcon}>\n                <Magnify />\n              </div>\n              <InputBase\n                placeholder={t(\"search/notes\")}\n                classes={{\n                  root: classes.inputRoot,\n                  input: classes.inputInput,\n                }}\n                value={searchValue}\n                inputProps={{ \"aria-label\": \"search\" }}\n                onChange={onChangeSearchValue}\n                autoComplete={\"off\"}\n                autoCorrect={\"off\"}\n              />\n            </div>\n            <IconButton\n              onClick={createNewNote}\n              disabled={!crossnoteContainer.initialized || isCreatingNote}\n            >\n              <Tooltip title={t(\"general/new-note\")}>\n                <FileEditOutline></FileEditOutline>\n              </Tooltip>\n            </IconButton>\n            <IconButton\n              onClick={(event) => setSortMenuAnchorEl(event.currentTarget)}\n            >\n              <SortVariant></SortVariant>\n            </IconButton>\n          </Box>\n        </Box>\n\n        <Popover\n          anchorEl={sortMenuAnchorEl}\n          keepMounted\n          open={Boolean(sortMenuAnchorEl)}\n          onClose={() => setSortMenuAnchorEl(null)}\n        >\n          <List>\n            <ListItem\n              button\n              onClick={() => setOrderBy(OrderBy.ModifiedAt)}\n              className={clsx(\n                orderBy === OrderBy.ModifiedAt && classes.sortSelected,\n              )}\n            >\n              <ListItemText primary={t(\"general/date-modified\")}></ListItemText>\n            </ListItem>\n            <ListItem\n              button\n              onClick={() => setOrderBy(OrderBy.CreatedAt)}\n              className={clsx(\n                orderBy === OrderBy.CreatedAt && classes.sortSelected,\n              )}\n            >\n              <ListItemText primary={t(\"general/date-created\")}></ListItemText>\n            </ListItem>\n            <ListItem\n              button\n              onClick={() => setOrderBy(OrderBy.Title)}\n              className={clsx(\n                orderBy === OrderBy.Title && classes.sortSelected,\n              )}\n            >\n              <ListItemText primary={t(\"general/title\")}></ListItemText>\n            </ListItem>\n            <Divider></Divider>\n            <ListItem\n              button\n              onClick={() => setOrderDirection(OrderDirection.DESC)}\n              className={clsx(\n                orderDirection === OrderDirection.DESC && classes.sortSelected,\n              )}\n            >\n              <ListItemText primary={t(\"general/Desc\")}></ListItemText>\n              <ListItemIcon style={{ marginLeft: \"8px\" }}>\n                <SortDescending></SortDescending>\n              </ListItemIcon>\n            </ListItem>\n            <ListItem\n              button\n              onClick={() => setOrderDirection(OrderDirection.ASC)}\n              className={clsx(\n                orderDirection === OrderDirection.ASC && classes.sortSelected,\n              )}\n            >\n              <ListItemText primary={t(\"general/Asc\")}></ListItemText>\n              <ListItemIcon style={{ marginLeft: \"8px\" }}>\n                <SortAscending></SortAscending>\n              </ListItemIcon>\n            </ListItem>\n          </List>\n        </Popover>\n\n        {props.notebook.hasLoadedNotes ? (\n          <Notes\n            tabNode={props.tabNode}\n            notebook={props.notebook}\n            notes={notes}\n            referredNote={props.note}\n            searchValue={finalSearchValue}\n            scrollElement={\n              container && container.current && container.current.parentElement\n            }\n          ></Notes>\n        ) : (\n          <CircularProgress\n            className={clsx(classes.loading)}\n          ></CircularProgress>\n        )}\n      </div>\n    );\n  }, [\n    props.tabNode,\n    props.note,\n    props.notebook,\n    props.notebook.hasLoadedNotes,\n    notes,\n    searchValue,\n    finalSearchValue,\n  ]);\n\n  if (props.note && !notes.length) {\n    return <Box></Box>;\n  }\n\n  return rootComponent;\n}\n","import { debounce } from \"@0xgg/echomd\";\nimport { EmojiDefinitions } from \"@0xgg/echomd/addon/emoji\";\nimport { renderPreview, renderTwemoji } from \"@0xgg/echomd/preview\";\nimport {\n  Box,\n  Button,\n  ButtonGroup,\n  Card,\n  Divider,\n  IconButton,\n  InputBase,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport {\n  Editor as CodeMirrorEditor,\n  EditorChangeLinkedList,\n  Position as CursorPosition,\n  TextMarker,\n} from \"codemirror\";\nimport { Actions, TabNode } from \"flexlayout-react\";\nimport {\n  Close,\n  CodeTags,\n  DotsVertical,\n  FilePresentationBox,\n  Pencil,\n  TableOfContents,\n} from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport * as path from \"path\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport SplitPane from \"react-split-pane\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { initMathPreview } from \"../editor/views/math-preview\";\nimport { EditorMode } from \"../lib/editorMode\";\nimport {\n  ChangedNoteFilePathEventData,\n  DeletedNotebookEventData,\n  DeletedNoteEventData,\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData,\n} from \"../lib/event\";\nimport { Note } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport { Reference } from \"../lib/reference\";\nimport { TabNodeConfig } from \"../lib/tabNode\";\nimport { setTheme } from \"../themes/manager\";\nimport { resolveNoteImageSrc } from \"../utilities/image\";\nimport {\n  openURL,\n  postprocessPreview as previewPostprocessPreview,\n} from \"../utilities/preview\";\nimport EditImageDialog from \"./EditImageDialog\";\nimport { Emoji } from \"./EmojiWrapper\";\nimport IconPopover from \"./IconPopover\";\nimport { Loading } from \"./Loading\";\nimport NotePopover from \"./NotePopover\";\nimport NotesPanel from \"./NotesPanel\";\nconst EchoMD = require(\"@0xgg/echomd/core\");\n\nconst previewZIndex = 99;\nlet tocPanelWidth = parseInt(localStorage.getItem(\"toc-panel-width\") || \"300\");\nconst tocPanelMinWidth = 150;\nconst tocPanelMaxWidth = 350;\nconst bottomPanelHeight = 20;\n\nconst HMDFold = {\n  image: true,\n  link: true,\n  math: true,\n  html: true, // maybe dangerous\n  emoji: true,\n  widget: true,\n  code: true,\n};\n\ninterface CommandHint {\n  text: string;\n  command: string;\n  description: string;\n  icon?: string;\n  render: (\n    element: HTMLElement,\n    data: CommandHint[],\n    current: CommandHint,\n  ) => void;\n}\n\ninterface EmojiHint {\n  shortName: string;\n  text: string;\n  displayText: string;\n  render: (element: HTMLElement, data: EmojiHint[], current: EmojiHint) => void;\n}\n\nconst codeMirrorSelectCss = {\n  background: `#5091DA !important`,\n  color: `#fff !important`,\n};\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    notePanel: {\n      \"height\": \"100%\",\n      \"overflow\": \"hidden\",\n      \"backgroundColor\": theme.palette.background.paper,\n      \"& .reference-highlight\": {\n        backgroundColor: `${theme.palette.warning.light} !important`,\n      },\n    },\n    topPanel: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      padding: \"4px 0 0\",\n      position: \"relative\",\n      backgroundColor: \"inherit\",\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: \"0\",\n      },\n    },\n    contentPanel: {\n      position: \"relative\",\n      height: `calc(100% - 48px - ${bottomPanelHeight}px)`,\n      display: \"block\",\n    },\n    editorContentPanel: {\n      display: \"block\",\n      overflow: \"auto\",\n      height: \"100%\",\n    },\n    tocPanel: {\n      height: \"100%\",\n      padding: \"0\",\n      overflow: \"auto\",\n      borderLeft: `1px solid ${theme.palette.divider}`,\n      paddingTop: \"32px\",\n    },\n    toc: {\n      \"& .toc-item\": {\n        cursor: \"pointer\",\n        // borderBottom: `1px solid ${theme.palette.divider}`,\n        color: theme.palette.text.primary,\n        padding: \".5em\",\n      },\n      \"& .toc-item:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.06),\n      },\n      \"& .emoji\": {\n        height: \"1rem\",\n        top: \"2px\",\n        position: \"relative\",\n      },\n    },\n    editorWrapper: {\n      \"position\": \"relative\",\n      \"flex\": 1,\n      \"overflow\": \"auto\",\n      \"backgroundColor\": \"inherit\",\n      // \"width\": \"800px\",\n      // \"margin\": \"0 auto\",\n      // \"maxWidth\": \"100%\",\n      \"& .CodeMirror-gutters\": {\n        display: \"none\",\n      },\n      \"& .CodeMirror-code\": {\n        width: \"100%\",\n      },\n      \"& .CodeMirror\": {\n        // width: \"800px\",\n        width: \"100%\",\n        maxWidth: \"100%\",\n        margin: \"0 auto\",\n        height: \"100%\",\n        padding: theme.spacing(0, 1),\n        backgroundColor: `${theme.palette.background.paper} !important`,\n        [theme.breakpoints.down(\"sm\")]: {\n          padding: theme.spacing(1),\n        },\n      },\n      \"& .CodeMirror-vscrollbar\": {\n        // display: \"none !important\",\n      },\n      \"& .CodeMirror-placeholder\": {\n        color: `${theme.palette.text.hint} !important`,\n      },\n      /*\n      CodeMirror selected text css:\n        .CodeMirror-selected { background: red; }\n        .CodeMirror-focused .CodeMirror-selected { background: blue; }\n        .CodeMirror-crosshair { cursor: crosshair; }\n        .CodeMirror-line::selection, .CodeMirror-line > span::selection, .CodeMirror-line > span > span::selection { background: #yellow; }\n        .CodeMirror-line::-moz-selection, .CodeMirror-line > span::-moz-selection, .CodeMirror-line > span > span::-moz-selection { background: #purple; }\n      */\n      \"& .CodeMirror-selected\": codeMirrorSelectCss,\n      \"& .CodeMirror-focused .CodeMirror-selected\": codeMirrorSelectCss,\n      \"& .CodeMirror-line::selection\": codeMirrorSelectCss,\n      \"& .CodeMirror-line > span::selection\": codeMirrorSelectCss,\n      \"& .CodeMirror-line > span > span::selection \": codeMirrorSelectCss,\n      \"& .CodeMirror-line::-moz-selection\": codeMirrorSelectCss,\n      \"& .CodeMirror-line > span::-moz-selection\": codeMirrorSelectCss,\n      \"& .CodeMirror-line > span > span::-moz-selection\": codeMirrorSelectCss,\n      /*\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      */\n\n      \"& .CodeMirror span.emoji\": {\n        height: \"1.2em !important\",\n        width: \"1.2em !important\",\n        top: \".2em !important\",\n        position: \"relative\",\n      },\n    },\n    editor: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundColor: \"inherit\",\n      border: \"none\",\n    },\n    preview: {\n      \"position\": \"relative\",\n      \"left\": \"0\",\n      \"top\": \"0\",\n      // width: \"800px\",\n      \"width\": \"100%\",\n      \"maxWidth\": \"100%\",\n      \"margin\": \"0 auto\",\n      \"height\": \"100%\",\n      \"border\": \"none\",\n      \"overflow\": \"auto !important\",\n      \"padding\": theme.spacing(1, 2),\n      \"zIndex\": previewZIndex,\n      \"backgroundColor\": `${theme.palette.background.paper} !important`,\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n      \"& span.emoji\": {\n        height: \"1.2em !important\",\n        width: \"1.2em !important\",\n        top: \".2em !important\",\n        position: \"relative\",\n      },\n    },\n    tocButtonGroup: {\n      position: \"absolute\",\n      top: \"60px\",\n      right: \"8px\",\n      zIndex: previewZIndex + 1,\n    },\n    presentation: {\n      padding: \"0 !important\",\n    },\n    controlBtn: {\n      padding: theme.spacing(0.5, 0),\n      color: theme.palette.text.secondary,\n    },\n    controlBtnSelected: {\n      color: theme.palette.primary.main,\n    },\n    controlBtnSelectedSecondary: {\n      color: theme.palette.secondary.main,\n    },\n    // math\n    floatWin: {\n      position: \"fixed\",\n      zIndex: 100,\n      background: theme.palette.background.paper,\n      borderRadius: \"5px\",\n      overflow: \"hidden\",\n      minWidth: \"200px\",\n      maxWidth: \"70%\",\n    },\n    floatWinHidden: {\n      display: \"none\",\n    },\n    floatWinTitle: {\n      display: \"flex\",\n      alignItems: \"center\",\n      background: \"#579\",\n      color: \"#eee\",\n    },\n    floatWinContent: {\n      maxHeight: \"80vh\",\n      overflow: \"auto\",\n      padding: \"10px 20px\",\n    },\n    floatWinClose: {\n      color: \"#eee\",\n    },\n    bottomPanel: {\n      position: \"absolute\",\n      bottom: \"0\",\n      width: \"100%\",\n      padding: theme.spacing(0.5, 1),\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      maxHeight: `${bottomPanelHeight}px`,\n      backgroundColor: theme.palette.primary.main,\n      color: theme.palette.getContrastText(theme.palette.primary.main),\n      zIndex: previewZIndex + 1,\n    },\n    filePath: {\n      wordBreak: \"break-all\",\n    },\n    cursorPositionInfo: {\n      // position: \"absolute\",\n      // right: \"16px\",\n      // bottom: \"16px\",\n      zIndex: 150,\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n  noteFilePath: string;\n  tabNode: TabNode;\n  reference?: Reference;\n}\nexport default function NotePanel(props: Props) {\n  const classes = useStyles(props);\n  const tabNode = props.tabNode;\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const { t } = useTranslation();\n  const [noteTitle, setNoteTitle] = useState<string>(\"\");\n  const [note, setNote] = useState<Note>(null);\n  const [noteIcon, setNoteIcon] = useState<string>(\"\");\n  const [editor, setEditor] = useState<CodeMirrorEditor>(null);\n  const [editorMode, setEditorMode] = useState<EditorMode>(\n    settingsContainer.defaultEditorMode,\n  );\n  const tocElement = useRef<HTMLDivElement>(null);\n  const previewElement = useRef<HTMLDivElement>(null);\n  const [previewIsPresentation, setPreviewIsPresentation] = useState<boolean>(\n    false,\n  );\n  const textAreaElement = useRef<HTMLTextAreaElement>(null);\n  const [cursorPosition, setCursorPosition] = useState<CursorPosition>({\n    line: 0,\n    ch: 0,\n  });\n  const mathPreviewElement = useRef<HTMLElement>(null);\n  const [editImageElement, setEditImageElement] = useState<HTMLImageElement>(\n    null,\n  );\n  const [editImageTextMarker, setEditImageTextMarker] = useState<TextMarker>(\n    null,\n  );\n  const [editImageDialogOpen, setEditImageDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [notePopoverElement, setNotePopoverElement] = useState<Element>(null);\n  const [iconPopoverElement, setIconPopoverElement] = useState<Element>(null);\n  const [gitStatus, setGitStatus] = useState<string>(\"\");\n  const [tocEnabled, setTocEnabled] = useState<boolean>(\n    false, // props.tabNode.getTabRect().width >= 500,\n  );\n  const isMounted = useRef<boolean>(false);\n\n  const confirmNoteTitle = useCallback(() => {\n    const finalNoteTitle = noteTitle.trim().replace(/\\//g, \"-\");\n    if (\n      !note ||\n      !finalNoteTitle.length ||\n      note.title.trim() === finalNoteTitle\n    ) {\n      return;\n    }\n\n    crossnoteContainer\n      .changeNoteFilePath(\n        tabNode,\n        note,\n        path.join(path.dirname(note.filePath), `${finalNoteTitle}.md`),\n      )\n      .then((note) => {\n        setNote(note);\n      })\n      .catch((error) => {\n        new Noty({\n          type: \"error\",\n          text: t(\"error/failed-to-change-file-path\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 5000,\n        }).show();\n        setNoteTitle(note.title);\n      });\n  }, [noteTitle, note, tabNode, t]);\n\n  const postprocessPreview = useCallback(\n    (previewElement: HTMLElement) => {\n      previewPostprocessPreview(previewElement, note, (flag) => {\n        setPreviewIsPresentation(flag);\n      });\n    },\n    [note],\n  );\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    if (!note) {\n      return () => {\n        setEditor(null);\n      };\n    } else {\n      if (note.markdown.length === 0) {\n        setEditorMode(EditorMode.EchoMD);\n      }\n    }\n  }, [note]);\n\n  useEffect(() => {\n    if (!note || !crossnoteContainer.layoutModel || !tabNode) {\n      return;\n    }\n    setNoteTitle(note.title);\n    crossnoteContainer.layoutModel.doAction(\n      Actions.renameTab(tabNode.getId(), note.title),\n    );\n  }, [note, crossnoteContainer.layoutModel, tabNode]);\n\n  // Emitter\n  useEffect(() => {\n    if (!globalEmitter || !tabNode || !editor || !note) {\n      return;\n    }\n\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      const updateNoteIcon = () => {\n        const tabNodeConfig: TabNodeConfig = tabNode.getConfig();\n        tabNodeConfig.icon = data.noteConfig.icon;\n        setNoteIcon(data.noteConfig.icon);\n        crossnoteContainer.layoutModel.doAction(\n          Actions.updateNodeAttributes(tabNode.getId(), {\n            config: tabNodeConfig,\n          }),\n        );\n      };\n      if (data.tabId === tabNode.getId()) {\n        return updateNoteIcon();\n      }\n      if (\n        data.notebookPath === note.notebookPath &&\n        data.noteFilePath === note.filePath\n      ) {\n        note.config = data.noteConfig;\n        if (editor.getValue() !== data.markdown) {\n          editor.setValue(data.markdown);\n        }\n        return updateNoteIcon();\n      }\n    };\n\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (\n        data.notebookPath === note.notebookPath &&\n        data.noteFilePath === note.filePath\n      ) {\n        crossnoteContainer.closeTabNode(tabNode.getId());\n      }\n    };\n\n    const changedNoteFilePathCallback = async (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (\n        data.notebookPath === note.notebookPath &&\n        data.oldNoteFilePath === note.filePath\n      ) {\n        const newNote = await crossnoteContainer.getNote(\n          data.notebookPath,\n          data.newNoteFilePath,\n        );\n        setNote(newNote);\n      }\n    };\n\n    const performedGitOperationCallback = async (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (data.notebookPath === note.notebookPath) {\n        const newNote = await crossnoteContainer.getNote(\n          data.notebookPath,\n          note.filePath,\n        );\n        if (newNote) {\n          setNote(newNote);\n          if (editor.getValue() !== newNote.markdown) {\n            editor.setValue(newNote.markdown);\n          }\n        } else {\n          crossnoteContainer.closeTabNode(tabNode.getId());\n        }\n      }\n    };\n\n    const deletedNotebookCallback = (data: DeletedNotebookEventData) => {\n      if (data.notebookPath === note.notebookPath) {\n        crossnoteContainer.closeTabNode(tabNode.getId());\n      }\n    };\n\n    globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n    globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n    globalEmitter.on(\n      EventType.ChangedNoteFilePath,\n      changedNoteFilePathCallback,\n    );\n    globalEmitter.on(\n      EventType.PerformedGitOperation,\n      performedGitOperationCallback,\n    );\n    globalEmitter.on(EventType.DeletedNotebook, deletedNotebookCallback);\n    return () => {\n      globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.off(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.off(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n      globalEmitter.off(EventType.DeletedNotebook, deletedNotebookCallback);\n    };\n  }, [\n    tabNode,\n    editor,\n    note,\n    crossnoteContainer.layoutModel,\n    crossnoteContainer.closeTabNode,\n    crossnoteContainer.getNote,\n  ]);\n\n  // get note\n  useEffect(() => {\n    props.notebook\n      .refreshNotesIfNotLoaded({\n        dir: \"./\",\n        includeSubdirectories: true,\n      })\n      .then((notes) => {\n        setNote(notes[props.noteFilePath]);\n      })\n      .catch((error) => {\n        console.error(error);\n      });\n  }, [props.noteFilePath, props.notebook]);\n\n  // set note icon\n  useEffect(() => {\n    if (note) {\n      setNoteIcon(note.config.icon);\n    }\n  }, [note]);\n\n  // Set editor\n  useEffect(() => {\n    if (textAreaElement.current && !editor && note) {\n      const editor: CodeMirrorEditor = EchoMD.fromTextArea(\n        textAreaElement.current,\n        {\n          mode: {\n            name: \"hypermd\",\n            hashtag: true,\n          },\n          // inputStyle: \"textarea\", // Break mobile device paste functionality\n          hmdFold: HMDFold,\n          keyMap: settingsContainer.keyMap,\n          showCursorWhenSelecting: true,\n          inputStyle: \"contenteditable\",\n          hmdClick: (info: any, cm: CodeMirrorEditor) => {\n            let { text, url } = info;\n            if (info.type === \"link\" || info.type === \"url\") {\n              const footnoteRef = text.match(/\\[[^[\\]]+\\](?:\\[\\])?$/); // bare link, footref or [foot][] . assume no escaping char inside\n              if (!footnoteRef && (info.ctrlKey || info.altKey) && url) {\n                // Hack: Fix a wikilink click bug when clicking text like \"[[haha]].\"\n                if (url.startsWith(\"[[\")) {\n                  url = url.slice(2, url.length);\n                  const i = url.lastIndexOf(\"]]\");\n                  if (i > 0) {\n                    url = url.slice(0, i);\n                  }\n                }\n\n                // just open URL\n                openURL(url, note);\n                return false; // Prevent default click event\n              }\n            }\n          },\n        },\n      );\n      editor.setOption(\"lineNumbers\", false);\n      editor.setOption(\"foldGutter\", false);\n      editor.setValue(note.markdown || \"\");\n      editor.on(\"cursorActivity\", (instance) => {\n        const cursor = instance.getCursor();\n        if (cursor) {\n          setCursorPosition({\n            line: cursor.line,\n            ch: cursor.ch,\n          });\n        }\n      });\n      setEditor(editor);\n\n      if (props.tabNode.getRect()) {\n        setTocEnabled(props.tabNode.getRect().width >= 500);\n      }\n    }\n  }, [textAreaElement, note, editor, props.tabNode, settingsContainer.keyMap]);\n\n  // Save note info to editor\n  useEffect(() => {\n    if (note && editor) {\n      (editor.setOption as any)(\"note\", note);\n    }\n  }, [note, editor]);\n\n  // Math preview\n  useEffect(() => {\n    if (editor && mathPreviewElement) {\n      initMathPreview(editor, mathPreviewElement.current);\n    }\n  }, [editor, mathPreviewElement]);\n\n  // Render Preview\n  useEffect(() => {\n    if (editorMode === EditorMode.Preview && editor && note && previewElement) {\n      try {\n        renderPreview(previewElement.current, editor.getValue());\n        postprocessPreview(previewElement.current);\n        previewElement.current.scrollTop = 0;\n      } catch (error) {\n        previewElement.current.innerText = error;\n      }\n    }\n  }, [editorMode, editor, previewElement, note, postprocessPreview, t]);\n\n  // Check need to highlight reference\n  useEffect(() => {\n    if (props.reference) {\n      if (editorMode === EditorMode.Preview && previewElement.current) {\n        const highlightedElements = previewElement.current.querySelectorAll(\n          \".reference-highlight\",\n        );\n        for (let i = 0; i < highlightedElements.length; i++) {\n          highlightedElements[i].classList.remove(\"reference-highlight\");\n        }\n\n        const element = previewElement.current.querySelector(\n          `#` + props.reference.elementId,\n        );\n        if (element) {\n          element.classList.add(\"reference-highlight\");\n          element.scrollIntoView({\n            behavior: \"auto\",\n            block: \"center\",\n            inline: \"center\",\n          });\n          const removeHighlightClass = () => {\n            element.classList.remove(\"reference-highlight\");\n          };\n          const previewElementCurrent = previewElement.current;\n          previewElementCurrent.addEventListener(\"click\", removeHighlightClass);\n          return () => {\n            previewElementCurrent.removeEventListener(\n              \"click\",\n              removeHighlightClass,\n            );\n          };\n        }\n      } /* else if (editor) { // <= Doesn't work very well\n        const line = (props.reference.parentToken.map || [])[0];\n        console.log(\"refer line: \", line);\n        if (typeof line === \"number\") {\n          const lineText = editor.getLine(line);\n          editor.markText(\n            { line, ch: 0 },\n            { line, ch: lineText.length },\n            {\n              className: \"reference-highlight\",\n              clearOnEnter: true,\n              atomic: true,\n            },\n          );\n        }\n      }*/ else if (\n        editor\n      ) {\n        const lineNo = (props.reference.parentToken.map || [])[0];\n        if (typeof lineNo === \"number\") {\n          editor.setCursor({ line: editor.lastLine(), ch: 0 });\n          setTimeout(function () {\n            editor.setCursor({ line: lineNo, ch: 0 });\n          }, 10);\n        }\n      }\n    }\n  }, [props.reference, editorMode, editor, previewElement]);\n\n  // Toggle editor & preview\n  useEffect(() => {\n    if (!editor || !note) return;\n    if (editorMode === EditorMode.EchoMD) {\n      EchoMD.switchToHyperMD(editor);\n      editor.setOption(\"hmdFold\" as any, HMDFold);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (editorMode === EditorMode.SourceCode) {\n      EchoMD.switchToNormal(editor);\n      editor.getWrapperElement().style.display = \"block\";\n      editor.refresh();\n    } else if (editorMode === EditorMode.Preview) {\n      editor.getWrapperElement().style.display = \"none\";\n    }\n  }, [editorMode, editor, note]);\n\n  // Change markdown\n  useEffect(() => {\n    if (editor && note && tabNode) {\n      const changesHandler = () => {\n        if (editor.getOption(\"readOnly\")) {\n          // This line is necessary for decryption...\n          return;\n        }\n        const markdown = editor.getValue();\n\n        if (markdown === note.markdown) {\n          return;\n        }\n        setTimeout(() => {\n          if (markdown === editor.getValue()) {\n            crossnoteContainer.updateNoteMarkdown(\n              tabNode,\n              note.notebookPath,\n              note.filePath,\n              markdown,\n            );\n          }\n          if (editorMode === EditorMode.Preview && previewElement.current) {\n            try {\n              renderPreview(previewElement.current, editor.getValue());\n              postprocessPreview(previewElement.current);\n              previewElement.current.scrollTop = 0;\n            } catch (error) {\n              previewElement.current.innerText = error;\n            }\n          }\n        }, 300);\n      };\n      editor.on(\"changes\", changesHandler);\n\n      const imageClickedHandler = (args: any) => {\n        const marker: TextMarker = args.marker;\n        const imageElement: HTMLImageElement = args.element;\n        imageElement.setAttribute(\n          \"data-marker-position\",\n          JSON.stringify(marker.find()),\n        );\n        setEditImageElement(imageElement);\n        setEditImageTextMarker(marker);\n        setEditImageDialogOpen(true);\n      };\n      editor.on(\"imageClicked\", imageClickedHandler);\n\n      const loadImage = async (args: any) => {\n        const element = args.element;\n        const imageSrc = element.getAttribute(\"data-src\");\n        element.setAttribute(\"src\", await resolveNoteImageSrc(note, imageSrc));\n      };\n      editor.on(\"imageReadyToLoad\", loadImage);\n\n      return () => {\n        editor.off(\"changes\", changesHandler);\n        editor.off(\"imageClicked\", imageClickedHandler);\n        editor.off(\"imageReadyToLoad\", loadImage);\n      };\n    }\n  }, [editor, note, tabNode, editorMode, previewElement, postprocessPreview]);\n\n  // Command\n  useEffect(() => {\n    if (!editor || !note) return;\n    const onChangeHandler = (\n      instance: CodeMirrorEditor,\n      changeObject: EditorChangeLinkedList,\n    ) => {\n      // Check commands\n      if (changeObject.text.length === 1 && changeObject.text[0] === \"/\") {\n        const aheadStr = editor\n          .getLine(changeObject.from.line)\n          .slice(0, changeObject.from.ch + 1);\n        if (!aheadStr.match(/#[^\\s]+?\\/$/)) {\n          // Not `/` inside a tag\n          editor.showHint({\n            closeOnUnfocus: false,\n            completeSingle: false,\n            hint: () => {\n              const cursor = editor.getCursor();\n              const token = editor.getTokenAt(cursor);\n              const line = cursor.line;\n              const lineStr = editor.getLine(line);\n              const end: number = cursor.ch;\n              let start = token.start;\n              if (lineStr[start] !== \"/\") {\n                start = start - 1;\n              }\n              const currentWord: string = lineStr\n                .slice(start, end)\n                .replace(/^\\//, \"\");\n\n              const render = (\n                element: HTMLElement,\n                data: CommandHint[],\n                cur: CommandHint,\n              ) => {\n                const wrapper = document.createElement(\"div\");\n                wrapper.style.padding = \"6px 0\";\n                wrapper.style.display = \"flex\";\n                wrapper.style.flexDirection = \"row\";\n                wrapper.style.alignItems = \"flex-start\";\n                wrapper.style.maxWidth = \"100%\";\n                wrapper.style.minWidth = \"200px\";\n\n                const leftPanel = document.createElement(\"div\");\n                const iconWrapper = document.createElement(\"div\");\n                iconWrapper.style.padding = \"0 6px\";\n                iconWrapper.style.marginRight = \"6px\";\n                iconWrapper.style.fontSize = \"1rem\";\n\n                const iconElement = document.createElement(\"span\");\n                iconElement.classList.add(\"mdi\");\n                iconElement.classList.add(\n                  cur.icon || \"mdi-help-circle-outline\",\n                );\n                iconWrapper.appendChild(iconElement);\n                leftPanel.appendChild(iconWrapper);\n\n                const rightPanel = document.createElement(\"div\");\n\n                const descriptionElement = document.createElement(\"p\");\n                descriptionElement.innerText = cur.description;\n                descriptionElement.style.margin = \"2px 0\";\n                descriptionElement.style.padding = \"0\";\n\n                const commandElement = document.createElement(\"p\");\n                commandElement.innerText = cur.command;\n                commandElement.style.margin = \"0\";\n                commandElement.style.padding = \"0\";\n                commandElement.style.fontSize = \"0.7rem\";\n\n                rightPanel.appendChild(descriptionElement);\n                rightPanel.appendChild(commandElement);\n\n                wrapper.appendChild(leftPanel);\n                wrapper.appendChild(rightPanel);\n                element.appendChild(wrapper);\n              };\n\n              const commands: CommandHint[] = [\n                {\n                  text: \"# \",\n                  command: \"/h1\",\n                  description: t(\"editor/toolbar/insert-header-1\"),\n                  icon: \"mdi-format-header-1\",\n                  render,\n                },\n                {\n                  text: \"## \",\n                  command: \"/h2\",\n                  description: t(\"editor/toolbar/insert-header-2\"),\n                  icon: \"mdi-format-header-2\",\n                  render,\n                },\n                {\n                  text: \"### \",\n                  command: \"/h3\",\n                  description: t(\"editor/toolbar/insert-header-3\"),\n                  icon: \"mdi-format-header-3\",\n                  render,\n                },\n                {\n                  text: \"#### \",\n                  command: \"/h4\",\n                  description: t(\"editor/toolbar/insert-header-4\"),\n                  icon: \"mdi-format-header-4\",\n                  render,\n                },\n                {\n                  text: \"##### \",\n                  command: \"/h5\",\n                  description: t(\"editor/toolbar/insert-header-5\"),\n                  icon: \"mdi-format-header-5\",\n                  render,\n                },\n                {\n                  text: \"###### \",\n                  command: \"/h6\",\n                  description: t(\"editor/toolbar/insert-header-6\"),\n                  icon: \"mdi-format-header-6\",\n                  render,\n                },\n                {\n                  text: \"> \",\n                  command: \"/blockquote\",\n                  description: t(\"editor/toolbar/insert-blockquote\"),\n                  icon: \"mdi-format-quote-open\",\n                  render,\n                },\n                {\n                  text: \"* \",\n                  command: \"/ul\",\n                  description: t(\"editor/toolbar/insert-unordered-list\"),\n                  icon: \"mdi-format-list-bulleted\",\n                  render,\n                },\n                {\n                  text: \"1. \",\n                  command: \"/ol\",\n                  description: t(\"editor/toolbar/insert-ordered-list\"),\n                  icon: \"mdi-format-list-numbered\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.image -->\\n\",\n                  command: \"/image\",\n                  description: t(\"editor/toolbar/insert-image\"),\n                  icon: \"mdi-image\",\n                  render,\n                },\n                {\n                  text: `|   |   |\n|---|---|\n|   |   |\n`,\n                  command: \"/table\",\n                  description: t(\"editor/toolbar/insert-table\"),\n                  icon: \"mdi-table\",\n                  render,\n                },\n                {\n                  text:\n                    \"<!-- @timer \" +\n                    JSON.stringify({ date: new Date().toString() })\n                      .replace(/^{/, \"\")\n                      .replace(/}$/, \"\") +\n                    \" -->\\n\",\n                  command: \"/timer\",\n                  description: t(\"editor/toolbar/insert-clock\"),\n                  icon: \"mdi-timer\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.audio -->  \\n\",\n                  command: \"/audio\",\n                  description: t(\"editor/toolbar/insert-audio\"),\n                  icon: \"mdi-music\",\n                  render,\n                },\n                //\n                // {\n                //   text: \"<!-- @crossnote.netease_music -->  \\n\",\n                //   displayText: `/netease - ${t(\n                //   \"editor/toolbar/netease-music\",\n                //   )}`,\n                //  },\n                {\n                  text: \"<!-- @crossnote.video -->  \\n\",\n                  command: \"/video\",\n                  description: t(\"editor/toolbar/insert-video\"),\n                  icon: \"mdi-video\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.youtube -->  \\n\",\n                  command: \"/youtube\",\n                  description: t(\"editor/toolbar/insert-youtube\"),\n                  icon: \"mdi-youtube\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.bilibili -->  \\n\",\n                  command: \"/bilibili\",\n                  description: t(\"editor/toolbar/insert-bilibili\"),\n                  icon: \"mdi-television-classic\",\n                  render,\n                },\n                {\n                  text: \"<!-- slide -->  \\n\",\n                  command: \"/slide\",\n                  description: t(\"editor/toolbar/insert-slide\"),\n                  icon: \"mdi-presentation\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.ocr -->  \\n\",\n                  command: \"/ocr\",\n                  description: t(\"editor/toolbar/insert-ocr\"),\n                  icon: \"mdi-ocr\",\n                  render,\n                },\n                {\n                  text:\n                    '<!-- @crossnote.kanban \"v\":2,\"board\":{\"columns\":[]} -->  \\n',\n                  command: \"/kanban\",\n                  description: `${t(\"editor/toolbar/insert-kanban\")} (beta)`,\n                  icon: \"mdi-developer-board\",\n                  render,\n                },\n                // {\n                //   text: \"<!-- @crossnote.abc -->  \\n\",\n                //   displayText: `/abc - ${t(\n                //      \"editor/toolbar/insert-abc-notation\",\n                //    )}`,\n                //  },\n                {\n                  text: \"<!-- @crossnote.github_gist -->  \\n\",\n                  command: \"/github_gist\",\n                  description: t(\"editor/toolbar/insert-github-gist\"),\n                  icon: \"mdi-github\",\n                  render,\n                },\n                {\n                  text: \"<!-- @crossnote.comment -->  \\n\",\n                  command: \"/crossnote.comment\",\n                  description: t(\"editor/toolbar/insert-comment\"),\n                  icon: \"mdi-comment-multiple\",\n                  render,\n                },\n              ];\n              const filtered = commands.filter(\n                (item) =>\n                  (item.command + item.description)\n                    .toLocaleLowerCase()\n                    .indexOf(currentWord.toLowerCase()) >= 0,\n              );\n              return {\n                list: filtered.length ? filtered : commands,\n                from: { line, ch: start },\n                to: { line, ch: end },\n              };\n            },\n          });\n        }\n      }\n\n      // Check emoji\n      if (\n        changeObject.text.length === 1 &&\n        changeObject.text[0].length > 0 &&\n        changeObject.text[0] !== \" \" &&\n        changeObject.text[0] !== \":\" &&\n        changeObject.from.ch > 0 &&\n        editor.getLine(changeObject.from.line)[changeObject.from.ch - 1] === \":\"\n      ) {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = cursor.ch;\n            let start = token.start;\n            let doubleSemiColon = false;\n            if (lineStr[start] !== \":\") {\n              start = start - 1;\n            }\n            if (start > 0 && lineStr[start - 1] === \":\") {\n              start = start - 1;\n              doubleSemiColon = true;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(/^:+/, \"\");\n            const render = (\n              element: HTMLElement,\n              data: EmojiHint[],\n              cur: EmojiHint,\n            ) => {\n              const wrapper = document.createElement(\"div\");\n              wrapper.style.padding = \"6px 0\";\n              wrapper.style.display = \"flex\";\n              wrapper.style.flexDirection = \"row\";\n              wrapper.style.alignItems = \"flex-start\";\n              wrapper.style.justifyContent = \"space-between\";\n              wrapper.style.maxWidth = \"100%\";\n              wrapper.style.minWidth = \"200px\";\n\n              const leftPanel = document.createElement(\"div\");\n              const shortNameWrapper = document.createElement(\"div\");\n              shortNameWrapper.style.padding = \"0 6px\";\n              shortNameWrapper.style.marginRight = \"6px\";\n              shortNameWrapper.style.fontSize = \"0.7rem\";\n              shortNameWrapper.innerText = `:${cur.shortName}:`;\n              leftPanel.appendChild(shortNameWrapper);\n\n              const rightPanel = document.createElement(\"div\");\n              rightPanel.innerText = EmojiDefinitions[cur.shortName];\n              rightPanel.style.padding = \"0 6px\";\n              renderTwemoji(rightPanel);\n\n              wrapper.appendChild(leftPanel);\n              wrapper.appendChild(rightPanel);\n              element.appendChild(wrapper);\n            };\n\n            const commands: EmojiHint[] = [];\n            for (const shortName in EmojiDefinitions) {\n              const emoji = EmojiDefinitions[shortName];\n              commands.push({\n                shortName,\n                text: doubleSemiColon ? `:${shortName}: ` : `${emoji} `,\n                displayText: `:${shortName}: ${emoji}`,\n                render,\n              });\n            }\n            const filtered = commands.filter(\n              (item) =>\n                item.displayText\n                  .toLocaleLowerCase()\n                  .indexOf(currentWord.toLowerCase()) >= 0,\n            );\n            return {\n              list: filtered.length ? filtered : commands,\n              from: { line, ch: start },\n              to: { line, ch: end },\n            };\n          },\n        });\n      }\n\n      // Check tag\n      if (changeObject.text.length === 1 && changeObject.text[0] === \"#\") {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = cursor.ch;\n            let start = token.start;\n            if (lineStr[start] !== \"#\") {\n              start = start - 1;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(/^#/, \"\");\n            const searchResults = props.notebook.search.search(currentWord, {\n              fuzzy: true,\n              filter: (result: any) => {\n                const filePath = path.relative(\n                  path.dirname(path.join(note.notebookPath, note.filePath)),\n                  path.join(note.notebookPath, result[\"filePath\"]),\n                );\n                return result[\"title\"] + \".md\" === filePath;\n              },\n              fields: [\"title\"],\n            });\n            const commands: {\n              text: string;\n              displayText: string;\n            }[] = searchResults.map((searchResult: any) => {\n              const val =\n                \"#\" +\n                searchResult.title +\n                (searchResult.title.match(/\\s/) ? \"#\" : \"\");\n              return {\n                text: val,\n                displayText: val,\n              };\n            });\n            return {\n              list: commands,\n              from: { line, ch: start },\n              to: { line, ch: end },\n            };\n          },\n        });\n      }\n\n      const withinWikiLink = function (line: number, ch: number) {\n        const aheadStr = editor.getLine(changeObject.from.line).slice(0, ch);\n        return aheadStr.lastIndexOf(\"[[\") > aheadStr.lastIndexOf(\"]]\");\n      };\n      // Check Wikilink\n      if (withinWikiLink(changeObject.from.line, changeObject.from.ch)) {\n        editor.showHint({\n          closeOnUnfocus: true,\n          completeSingle: false,\n          hint: () => {\n            const cursor = editor.getCursor();\n            const token = editor.getTokenAt(cursor);\n            const line = cursor.line;\n            const lineStr = editor.getLine(line);\n            const end: number = lineStr.indexOf(\"]]\", cursor.ch);\n            let start = token.start;\n            while (lineStr[start] !== \"[\") {\n              start = start - 1;\n            }\n            const currentWord: string = lineStr\n              .slice(start, end)\n              .replace(/^\\[+/, \"\");\n            const searchResults = props.notebook.search.search(currentWord, {\n              fuzzy: true,\n              fields: [\"title\", \"aliases\", \"filePath\"],\n            });\n            const commands: {\n              text: string;\n              displayText: string;\n            }[] = [];\n            for (let i = 0; i < searchResults.length; i++) {\n              const searchResult = searchResults[i];\n              const filtPath = path.relative(\n                path.dirname(path.join(note.notebookPath, note.filePath)),\n                path.join(note.notebookPath, searchResult.filePath),\n              );\n              const aliases = searchResult.aliases\n                .split(\"|\")\n                .concat(searchResult.title) as string[];\n              const terms = searchResult.terms;\n              aliases.forEach((alias) => {\n                let find = true;\n                for (let i = 0; i < terms.length; i++) {\n                  const lower = alias.toLocaleLowerCase();\n                  if (lower.indexOf(terms[i]) < 0) {\n                    find = false;\n                    break;\n                  }\n                }\n                if (find) {\n                  const val =\n                    alias + \".md\" === filtPath\n                      ? `[[${alias}]]`\n                      : `[[${filtPath}|${alias}]]`;\n                  commands.push({\n                    text: val,\n                    displayText: val,\n                  });\n                }\n              });\n            }\n            return {\n              list: commands,\n              from: { line, ch: start - 1 },\n              to: { line, ch: end + 2 },\n            };\n          },\n        });\n      }\n    };\n    editor.on(\"change\", onChangeHandler);\n    return () => {\n      editor.off(\"change\", onChangeHandler);\n    };\n  }, [editor, note, props.notebook, t]);\n\n  // TOC\n  useEffect(() => {\n    if (!editor || !tocElement || !note || !tocEnabled) {\n      return;\n    }\n\n    // The following code is referred from HymerPD demo/toc.js\n    let lastTOC = \"\";\n    const update = debounce(function () {\n      let newTOC = \"\";\n      editor.eachLine(function (line) {\n        const tmp = /^(#+)\\s+(.+)(?:\\s+\\1)?$/.exec(line.text);\n        if (!tmp) return;\n        const lineNo = (line as any).lineNo();\n        if (!editor.getStateAfter(lineNo).header) return; // double check but is not header\n        const level = tmp[1].length;\n        let title = tmp[2];\n        title = title.replace(/([*_]{1,2}|~~|`+)(.+?)\\1/g, \"$2\"); // em / bold / del / code\n        title = title.replace(\n          /\\\\(?=.)|\\[\\^.+?\\]|\\!\\[((?:[^\\\\\\]]+|\\\\.)+)\\](\\(.+?\\)| ?\\[.+?\\])?/g,\n          \"\",\n        ); // images / escaping slashes / footref\n        title = title.replace(\n          /\\[((?:[^\\\\\\]]+|\\\\.)+)\\](\\(.+?\\)| ?\\[.+?\\])/g,\n          \"$1\",\n        ); // links\n        title = title.replace(/\\[\\[(.+?)\\]\\]/g, \"$1\"); // wikilinks\n        title = title.replace(/&/g, \"&amp;\");\n        title = title.replace(/</g, \"&lt;\");\n        title = title.replace(/:(.+?):/g, ($0, $1) => {\n          if ($1 in EmojiDefinitions) {\n            return EmojiDefinitions[$1];\n          } else {\n            return $0;\n          }\n        });\n        newTOC +=\n          '<div data-line=\"' +\n          lineNo +\n          '\" class=\"toc-item\" style=\"padding-left:' +\n          level +\n          'em\">' +\n          title +\n          \"</div>\";\n      });\n      newTOC =\n        `<div data-line=\"0\" class=\"toc-item\" style=\"padding-left: 1em;\">${note.title}</div>` +\n        newTOC;\n      if (newTOC === lastTOC) return;\n      if (tocElement && tocElement.current) {\n        tocElement.current.innerHTML = lastTOC = newTOC;\n        renderTwemoji(tocElement.current);\n      }\n    }, 300);\n\n    const tocClick = (event: Event) => {\n      event.preventDefault();\n      event.stopPropagation();\n      const t = event.target as HTMLElement;\n      if (!/toc-item/.test(t.className)) return;\n      const lineNo = parseInt(t.getAttribute(\"data-line\"));\n      if (editorMode === EditorMode.Preview) {\n        const anchor = document.querySelector(`[data-line=\"${lineNo}\"]`);\n        if (anchor) {\n          anchor.scrollIntoView();\n        }\n      } else {\n        editor.setCursor({ line: editor.lastLine(), ch: 0 });\n        setTimeout(function () {\n          editor.setCursor({ line: lineNo, ch: 0 });\n        }, 10);\n      }\n    };\n\n    editor.on(\"changes\", update);\n    const tocElementCurrent = tocElement.current;\n    tocElementCurrent.addEventListener(\"click\", tocClick, true);\n    update();\n\n    return () => {\n      editor.off(\"changes\", update);\n      tocElementCurrent.removeEventListener(\"click\", tocClick);\n    };\n  }, [editor, editorMode, previewElement, tocElement, note, tocEnabled]);\n\n  // Git Status\n  useEffect(() => {\n    if (!note || !isMounted.current) {\n      return;\n    }\n    crossnoteContainer\n      .getStatus(note.notebookPath, note.filePath)\n      .then((status) => {\n        setGitStatus(status);\n      });\n  }, [note, crossnoteContainer.getStatus]);\n\n  // Set theme\n  useEffect(() => {\n    if (editor && settingsContainer.theme) {\n      setTheme({\n        editor,\n        themeName: settingsContainer.theme.name,\n      });\n    }\n  }, [settingsContainer.theme, editor]);\n\n  // TabNode becomes visible\n  useEffect(() => {\n    if (!tabNode || !note) {\n      return;\n    }\n    globalEmitter.emit(EventType.FocusedOnNote, {\n      notebookPath: note.notebookPath,\n      noteFilePath: note.filePath,\n    });\n  }, [note, tabNode]);\n  useEffect(() => {\n    if (!tabNode || !note || !globalEmitter) {\n      return;\n    }\n    tabNode.setEventListener(\"visibility\", function (params) {\n      if (params.visible) {\n        globalEmitter.emit(EventType.FocusedOnNote, {\n          notebookPath: note.notebookPath,\n          noteFilePath: note.filePath,\n        });\n      }\n    });\n    return () => {\n      tabNode.removeEventListener(\"visibility\");\n    };\n  }, [tabNode, note]);\n\n  if (!note) {\n    return <Loading></Loading>;\n  }\n\n  return (\n    <Box className={clsx(classes.notePanel)}>\n      <Box\n        className={clsx(classes.topPanel, \"editor-toolbar\")}\n        style={{\n          backgroundColor:\n            settingsContainer.theme.name === \"light\" ? \"#fff\" : \"inherit\",\n        }}\n      >\n        <Box className={clsx(classes.row)} style={{ width: \"100%\" }}>\n          <Box>\n            <IconButton\n              color={\"primary\"}\n              onClick={(event) => setIconPopoverElement(event.currentTarget)}\n            >\n              {<Emoji emoji={noteIcon || \":memo:\"} size={32}></Emoji>}\n            </IconButton>\n          </Box>\n          <InputBase\n            value={noteTitle}\n            style={{\n              fontSize: \"1.5rem\",\n              fontWeight: 400,\n              marginLeft: \"6px\",\n            }}\n            placeholder={t(\"general/title\")}\n            fullWidth={true}\n            onChange={(event) => setNoteTitle(event.currentTarget.value)}\n            onBlur={confirmNoteTitle}\n            onKeyUp={(event) => {\n              if (event.which === 13) {\n                confirmNoteTitle();\n              }\n            }}\n          ></InputBase>\n          <ButtonGroup\n            variant=\"text\"\n            color=\"default\"\n            aria-label=\"editor mode\"\n            size=\"small\"\n          >\n            <Tooltip title={t(\"editor/note-control/preview\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.Preview &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.Preview ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.Preview)}\n              >\n                <FilePresentationBox></FilePresentationBox>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"general/echomd\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.EchoMD &&\n                    classes.controlBtnSelected,\n                )}\n                color={editorMode === EditorMode.EchoMD ? \"primary\" : \"default\"}\n                onClick={() => setEditorMode(EditorMode.EchoMD)}\n              >\n                <Pencil></Pencil>\n              </Button>\n            </Tooltip>\n            <Tooltip title={t(\"editor/note-control/source-code\")}>\n              <Button\n                className={clsx(\n                  classes.controlBtn,\n                  editorMode === EditorMode.SourceCode &&\n                    classes.controlBtnSelected,\n                )}\n                color={\n                  editorMode === EditorMode.SourceCode ? \"primary\" : \"default\"\n                }\n                onClick={() => setEditorMode(EditorMode.SourceCode)}\n              >\n                <CodeTags></CodeTags>\n              </Button>\n            </Tooltip>\n          </ButtonGroup>\n          <ButtonGroup\n            variant=\"text\"\n            color=\"default\"\n            aria-label=\"actions\"\n            size=\"small\"\n          >\n            <Button\n              className={clsx(classes.controlBtn)}\n              onClick={(event) => setNotePopoverElement(event.currentTarget)}\n            >\n              <DotsVertical></DotsVertical>\n            </Button>\n          </ButtonGroup>\n          <ButtonGroup\n            variant=\"text\"\n            color=\"default\"\n            aria-label=\"table of contents\"\n            size=\"small\"\n            className={clsx(classes.tocButtonGroup)}\n          >\n            <Button\n              className={clsx(\n                classes.controlBtn,\n                tocEnabled ? classes.controlBtnSelected : null,\n              )}\n              onClick={() => setTocEnabled(!tocEnabled)}\n            >\n              <TableOfContents></TableOfContents>\n            </Button>\n          </ButtonGroup>\n        </Box>\n        <Divider></Divider>\n      </Box>\n      <Box className={clsx(classes.contentPanel)}>\n        <SplitPane\n          defaultSize={tocPanelWidth}\n          minSize={tocPanelMinWidth}\n          maxSize={tocPanelMaxWidth}\n          primary={\"second\"}\n          pane1Style={{\n            overflow: \"auto\",\n          }}\n          resizerStyle={{\n            display: tocEnabled ? \"block\" : \"none\",\n          }}\n          pane2Style={{\n            display: tocEnabled ? \"block\" : \"none\",\n          }}\n          onDragFinished={(newSize) => {\n            tocPanelWidth = newSize;\n            localStorage.setItem(\"toc-panel-width\", `${tocPanelWidth}`);\n          }}\n        >\n          <Box className={clsx(classes.editorContentPanel)}>\n            <Box className={clsx(classes.editorWrapper)}>\n              <textarea\n                className={clsx(classes.editor, \"editor-textarea\")}\n                placeholder={t(\"editor/placeholder\")}\n                ref={textAreaElement}\n              ></textarea>\n              {editorMode === EditorMode.Preview && editor ? (\n                <div\n                  className={clsx(\n                    classes.preview,\n                    \"preview\",\n                    previewIsPresentation ? classes.presentation : null,\n                  )}\n                  ref={previewElement}\n                ></div>\n              ) : null}\n            </Box>\n            <React.Fragment>\n              <Box style={{ marginTop: \"32px\" }}></Box>\n              <NotesPanel\n                title={t(\"general/References\")}\n                tabNode={props.tabNode}\n                notebook={props.notebook}\n                note={note}\n              ></NotesPanel>\n            </React.Fragment>\n          </Box>\n          <Box\n            className={clsx(classes.tocPanel)}\n            style={{ display: tocEnabled ? \"block\" : \"none\" }}\n          >\n            <div className={clsx(classes.toc)} ref={tocElement}></div>\n          </Box>\n        </SplitPane>\n      </Box>\n      <Box className={clsx(classes.bottomPanel, \"editor-bottom-panel\")}>\n        <Box className={clsx(classes.row)}>\n          <Typography variant={\"caption\"} className={clsx(classes.filePath)}>\n            {props.notebook.name +\n              \": \" +\n              note.filePath +\n              (gitStatus ? \" - \" + t(`git/status/${gitStatus}`) : \"\")}\n          </Typography>\n        </Box>\n        {editorMode !== EditorMode.Preview && (\n          <Box className={clsx(classes.cursorPositionInfo)}>\n            <Typography variant={\"caption\"}>\n              {`${t(\"editor/ln\")} ${cursorPosition.line + 1}, ${t(\n                \"editor/col\",\n              )} ${cursorPosition.ch}`}\n            </Typography>\n          </Box>\n        )}\n      </Box>\n\n      <EditImageDialog\n        open={editImageDialogOpen}\n        onClose={() => setEditImageDialogOpen(false)}\n        editor={editor}\n        imageElement={editImageElement}\n        marker={editImageTextMarker}\n        note={note}\n      ></EditImageDialog>\n\n      <NotePopover\n        tabNode={props.tabNode}\n        note={note}\n        anchorElement={notePopoverElement}\n        onClose={() => setNotePopoverElement(null)}\n      ></NotePopover>\n\n      <IconPopover\n        tabNode={props.tabNode}\n        note={note}\n        anchorElement={iconPopoverElement}\n        onClose={() => setIconPopoverElement(null)}\n      ></IconPopover>\n\n      <Card\n        id=\"math-preview\"\n        className={clsx(classes.floatWin, \"float-win\", \"float-win-hidden\")}\n        ref={mathPreviewElement}\n      >\n        <Box className={clsx(classes.floatWinTitle, \"float-win-title\")}>\n          <IconButton\n            className={clsx(classes.floatWinClose, \"float-win-close\")}\n          >\n            <Close></Close>\n          </IconButton>\n          <Typography>{t(\"general/math-preview\")}</Typography>\n        </Box>\n        <Box\n          className={clsx(classes.floatWinContent, \"float-win-content\")}\n          id=\"math-preview-content\"\n        ></Box>\n      </Card>\n    </Box>\n  );\n}\n","import { FloatWin } from \"./float-win\";\n\nexport function initMathPreview(\n  cm: CodeMirror.Editor,\n  winElement: HTMLElement,\n) {\n  let mathRenderer: any = null;\n  const win = new FloatWin(winElement);\n  var supressed = false;\n\n  win.closeBtn.addEventListener(\n    \"click\",\n    function () {\n      supressed = true; // for current TeX block\n    },\n    false,\n  );\n\n  function updatePreview(expr: string) {\n    if (supressed) return;\n\n    if (!mathRenderer) {\n      // initialize renderer and preview window\n      mathRenderer = (cm as any).hmd.FoldMath.createRenderer(\n        document.getElementById(\"math-preview-content\"),\n        \"display\",\n      );\n      mathRenderer.onChanged = function () {\n        // finished rendering. show the window\n        if (!win.visible) {\n          var cursorPos = cm.charCoords(cm.getCursor(), \"window\");\n          win.moveTo(cursorPos.left, cursorPos.bottom);\n        }\n        win.show();\n      };\n    }\n\n    // console.log(\"[MathPreview] \" + expr);\n\n    if (!mathRenderer.isReady()) return;\n    mathRenderer.startRender(expr);\n  }\n\n  function hidePreview() {\n    // console.log(\"[MathPreview] (exit)\");\n\n    win.hide();\n    supressed = false;\n  }\n\n  cm.setOption(\"hmdFoldMath\" as any, {\n    onPreview: updatePreview,\n    onPreviewEnd: hidePreview,\n  });\n}\n","import Noty from \"noty\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport { createContainer } from \"unstated-next\";\nimport {\n  Notification,\n  PageInfo,\n  useDeleteAllNotificationsMutation,\n  useDeleteNotificationMutation,\n  useNotificationsQuery,\n} from \"../generated/graphql\";\nimport { EmptyPageInfo } from \"../utilities/note\";\n\ninterface InitialState {}\n\nfunction useNotificationsContainer(initialState: InitialState) {\n  const [pageInfo, setPageInfo] = useState<PageInfo>(EmptyPageInfo);\n  const [notifications, setNotifications] = useState<Notification[]>([]);\n  const [needsRefetch, setNeedsRefetch] = useState<boolean>(false);\n  const [resNotifications, executeNotificationsQuery] = useNotificationsQuery({\n    variables: {\n      before: pageInfo.startCursor,\n      after: pageInfo.endCursor,\n      first: 0,\n      last: 20,\n    },\n    requestPolicy: \"network-only\",\n    pause: true,\n  });\n  const [\n    resDeleteNotification,\n    executeDeleteNotificationMutation,\n  ] = useDeleteNotificationMutation();\n  const [\n    resDeleteAllNotifications,\n    executeDeleteAllNotificationsMutation,\n  ] = useDeleteAllNotificationsMutation();\n\n  const fetchMoreNotifications = useCallback(() => {\n    executeNotificationsQuery({\n      requestPolicy: \"network-only\",\n    });\n  }, [executeNotificationsQuery]);\n\n  const deleteNotification = useCallback(\n    (notificationID: string) => {\n      setNotifications((notifications) => {\n        if (\n          pageInfo.hasPreviousPage &&\n          pageInfo.startCursor === notificationID\n        ) {\n          const notification = notifications[1];\n          if (notification) {\n            setPageInfo({\n              startCursor: notification.id,\n              endCursor: pageInfo.endCursor,\n              hasPreviousPage: pageInfo.hasPreviousPage,\n              hasNextPage: pageInfo.hasNextPage,\n            });\n          }\n        }\n        return notifications.filter((n) => n.id !== notificationID);\n      });\n      executeDeleteNotificationMutation({\n        notificationID: notificationID,\n      });\n    },\n    [executeDeleteNotificationMutation, pageInfo],\n  );\n\n  const deleteAllNotifications = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    executeDeleteAllNotificationsMutation();\n  }, [executeDeleteAllNotificationsMutation]);\n\n  const refresh = useCallback(() => {\n    setNotifications([]);\n    setPageInfo(EmptyPageInfo);\n    setNeedsRefetch(true);\n  }, [executeNotificationsQuery]);\n\n  useEffect(() => {\n    if (resNotifications.fetching) {\n    } /*else if (resNotifications.error) {\n      // There might be records that are not found because origin(user) undo the action.\n      new Noty({\n        type: \"error\",\n        text: resNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000\n      }).show();\n    } */ else if (\n      resNotifications.data &&\n      resNotifications.data.viewer.notifications\n    ) {\n      const ns = resNotifications.data.viewer.notifications;\n      const pageInfo = ns.pageInfo;\n      const edges = ns.edges;\n      const newNotifications = (edges || [])\n        .map((edge) => {\n          if (edge) {\n            return edge.node as any;\n          } else {\n            return null;\n          }\n        })\n        .reverse()\n        .filter((x) => x);\n      setNotifications((notifications) =>\n        [...notifications, ...newNotifications].filter(\n          (notification, index, self) =>\n            index === self.findIndex((m) => m.id === notification.id),\n        ),\n      );\n      setPageInfo(pageInfo);\n    }\n  }, [resNotifications]);\n\n  useEffect(() => {\n    if (resDeleteNotification.fetching) {\n    } else if (resDeleteNotification.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteNotification.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteNotification.data &&\n      resDeleteNotification.data.deleteNotification\n    ) {\n    }\n  }, [resDeleteNotification]);\n\n  useEffect(() => {\n    if (resDeleteAllNotifications.fetching) {\n    } else if (resDeleteAllNotifications.error) {\n      new Noty({\n        type: \"error\",\n        text: resDeleteAllNotifications.error.message,\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n    } else if (\n      resDeleteAllNotifications.data &&\n      resDeleteAllNotifications.data.deleteAllNotifications\n    ) {\n      setNotifications([]);\n      setPageInfo(EmptyPageInfo);\n    }\n  }, [resDeleteAllNotifications]);\n\n  useEffect(() => {\n    if (needsRefetch) {\n      fetchMoreNotifications();\n      setNeedsRefetch(false);\n    }\n  }, [needsRefetch, fetchMoreNotifications]);\n\n  return {\n    fetching: resNotifications.fetching,\n    notifications,\n    pageInfo,\n    fetchMoreNotifications,\n    deleteNotification,\n    deleteAllNotifications,\n    refresh,\n  };\n}\n\nexport const NotificationsContainer = createContainer(\n  useNotificationsContainer,\n);\n","import React from \"react\";\nimport { User } from \"../../generated/graphql\";\nimport { Typography, Box, Avatar, Tooltip } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport { formatRelative } from \"date-fns\";\nimport { languageCodeToDateFNSLocale } from \"../../i18n/i18n\";\nimport { SettingsContainer } from \"../../containers/settings\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    avatarPanel: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n      width: \"100%\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    avatar: {\n      borderRadius: \"4px\",\n      width: \"32px\",\n      height: \"32px\",\n      cursor: \"pointer\",\n    },\n    title: {\n      marginLeft: theme.spacing(1),\n    },\n  }),\n);\n\ninterface NotificationAvatarPanelProps {\n  user: User;\n  createdAt: number;\n  title: string;\n}\nexport function NotificationAvatarPanel(props: NotificationAvatarPanelProps) {\n  const classes = useStyles(props);\n  const user = props.user;\n  const createdAt = props.createdAt;\n  const settingsContainer = SettingsContainer.useContainer();\n\n  return (\n    <Box className={clsx(classes.avatarPanel)}>\n      <Box className={clsx(classes.row)}>\n        <Tooltip title={user.username}>\n          <Avatar\n            className={clsx(classes.avatar)}\n            onClick={() => {\n              // browserHistory.push(`/user/${user.username}`);\n            }}\n            variant={\"rounded\"}\n            src={\n              user.avatar ||\n              \"data:image/png;base64,\" +\n                new Identicon(sha256(user.username), 80).toString()\n            }\n          ></Avatar>\n        </Tooltip>\n        <Typography variant={\"body1\"} className={clsx(classes.title)}>\n          {props.title}\n        </Typography>\n      </Box>\n      <Typography variant=\"body2\" color={\"textSecondary\"}>\n        {formatRelative(new Date(createdAt), new Date(), {\n          locale: languageCodeToDateFNSLocale(settingsContainer.language),\n        })}\n      </Typography>\n    </Box>\n  );\n}\n","import { renderPreview } from \"@0xgg/echomd/preview\";\nimport { Box } from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport React, { useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { WidgetTopPanel } from \"../../editor/widgets/widget/WidgetTopPanel\";\nimport { Notification } from \"../../generated/graphql\";\nimport { NotificationAvatarPanel } from \"./NotificationAvatarPanel\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notification: {\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"flex-start\",\n      flexWrap: \"wrap\",\n      width: \"100%\",\n    },\n  }),\n);\n\ninterface Props {\n  notification: Notification;\n}\nexport function CommentWidgetMessagePostingNotification(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const notification = props.notification;\n  const message = (notification as any).event.message;\n  let widget;\n  if (message) {\n    widget = message.widget;\n  }\n  const [previewElement, setPreviewElement] = React.useState<HTMLElement>(null);\n\n  useEffect(() => {\n    if (previewElement) {\n      renderPreview(previewElement, message.markdown);\n    }\n  }, [previewElement, message.markdown]);\n\n  if (!message || !widget) {\n    return null;\n  }\n\n  return (\n    <Box key={notification.id} className={clsx(classes.notification)}>\n      <NotificationAvatarPanel\n        user={notification.origin}\n        createdAt={notification.createdAt}\n        title={t(\"notification/replies-to-you-in\")}\n      ></NotificationAvatarPanel>\n      <WidgetTopPanel widget={widget} isPreview={true}></WidgetTopPanel>\n      <div\n        className={\"preview\"}\n        ref={(element: HTMLElement) => {\n          setPreviewElement(element);\n        }}\n        style={{ backgroundColor: \"inherit\" }}\n      ></div>\n    </Box>\n  );\n}\n","import {\n  Box,\n  Button,\n  Card,\n  Divider,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Close } from \"mdi-material-ui\";\nimport React, { useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { NotificationsContainer } from \"../containers/notifications\";\nimport { NotificationEventType } from \"../generated/graphql\";\nimport { CommentWidgetMessagePostingNotification } from \"./notifications/CommentWidgetMessagePostingNotification\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    notifications: {\n      width: \"100%\",\n      height: \"100%\",\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.default,\n      padding: theme.spacing(2),\n      [theme.breakpoints.down(\"sm\")]: {\n        padding: theme.spacing(1),\n      },\n    },\n    notificationsCard: {\n      margin: theme.spacing(2),\n      [theme.breakpoints.down(\"sm\")]: {\n        marginLeft: \"0\",\n        marginRight: \"0\",\n      },\n    },\n    topBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n      justifyContent: \"space-between\",\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n  }),\n);\n\ninterface Props {}\nexport function Notifications(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const cloudContainer = CloudContainer.useContainer();\n  const notificationsContainer = NotificationsContainer.useContainer();\n\n  /*\n  useEffect(() => {\n    const mainPanel = document.getElementById(\"main-panel\");\n    if (mainPanel) {\n      mainPanel.onscroll = () => {\n        if (mainPanel.scrollTop > mainPanel.offsetHeight / 2) {\n          if (\n            !notificationsContainer.fetching &&\n            notificationsContainer.pageInfo.hasPreviousPage\n          ) {\n            notificationsContainer.fetchMoreNotifications();\n          }\n        }\n      };\n    }\n  }, [notificationsContainer.fetchMoreNotifications, notificationsContainer]);\n  */\n\n  useEffect(\n    () => {\n      notificationsContainer.refresh();\n    },\n    [\n      /*notificationsContainer*/\n    ],\n  );\n\n  return (\n    <Box className={clsx(classes.notifications)}>\n      <Box className={clsx(classes.topBar)}>\n        <Box className={clsx(classes.row)}>\n          <Typography variant={\"h6\"} color={\"textPrimary\"}>\n            {t(\"general/Notifications\")}\n          </Typography>\n        </Box>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={() => {\n            notificationsContainer.deleteAllNotifications();\n            cloudContainer.clearNotificationsCount();\n          }}\n        >\n          {t(\"general/clear-all\")}\n        </Button>\n      </Box>\n      {!notificationsContainer.notifications.length ? (\n        notificationsContainer.fetching ? (\n          <Typography color={\"textPrimary\"}>\n            {t(\"general/loading-notifications\")}\n          </Typography>\n        ) : (\n          <Typography color={\"textPrimary\"}>\n            {t(\"general/no-notifications-found\")}\n          </Typography>\n        )\n      ) : (\n        <>\n          <Card className={clsx(classes.notificationsCard)}>\n            <List dense={true}>\n              {notificationsContainer.notifications.map((notification, idx) => {\n                let notificationComponent = null;\n                /*if (\n                notification.event!.type === NotificationEventType.UserFollowing\n              ) {\n                notificationComponent = (\n                  <UserFollowingNotificationWidget\n                    notification={notification}\n                  ></UserFollowingNotificationWidget>\n                );\n              }*/\n\n                if (\n                  notification.event!.type ===\n                  NotificationEventType.CommentWidgetMessagePosting\n                ) {\n                  notificationComponent = (\n                    <CommentWidgetMessagePostingNotification\n                      notification={notification}\n                      key={notification.id}\n                    ></CommentWidgetMessagePostingNotification>\n                  );\n                } else {\n                  return null;\n                }\n                return (\n                  <React.Fragment key={notification.id}>\n                    <ListItem key={notification.id}>\n                      <ListItemIcon>\n                        <IconButton\n                          onClick={() => {\n                            notificationsContainer.deleteNotification(\n                              notification.id,\n                            );\n                            cloudContainer.reduceNotificationsCountByOne();\n                          }}\n                        >\n                          <Close></Close>\n                        </IconButton>\n                      </ListItemIcon>\n                      {notificationComponent}\n                    </ListItem>\n                    {idx < notificationsContainer.notifications.length - 1 ? (\n                      <Divider key={idx}></Divider>\n                    ) : null}\n                  </React.Fragment>\n                );\n              })}\n            </List>\n          </Card>\n          {notificationsContainer.pageInfo.hasPreviousPage && (\n            <Box style={{ textAlign: \"center\" }}>\n              {\" \"}\n              <Button\n                style={{ margin: \"16px 0 64px\" }}\n                variant={\"outlined\"}\n                color={\"secondary\"}\n                disabled={notificationsContainer.fetching}\n                onClick={() => notificationsContainer.fetchMoreNotifications()}\n              >\n                {t(\"notification/view-more-notifications\")}\n              </Button>\n            </Box>\n          )}\n        </>\n      )}\n    </Box>\n  );\n}\n","export default {\"logMessage\": \"1f45973 Support to toggle username password visibility (#236)\",\"hash\":\"1f45973c34e07ba5adabcde4f16e632b87375b49\"}\n","import {\n  Avatar,\n  Box,\n  Button,\n  Card,\n  Chip,\n  IconButton,\n  Link,\n  MenuItem,\n  Popover,\n  Select,\n  TextField,\n  Tooltip,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  BookEdit,\n  Github,\n  ImagePlus,\n  Keyboard,\n  ThemeLightDark,\n  Translate,\n} from \"mdi-material-ui\";\nimport React, { useEffect, useState } from \"react\";\nimport { SketchPicker } from \"react-color\";\nimport { useTranslation } from \"react-i18next\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport {\n  useGitHubUserQuery,\n  useUnlinkGitHubAccountMutation,\n} from \"../generated/graphql\";\nimport { EditorMode } from \"../lib/editorMode\";\nimport { KeyMap } from \"../lib/keymap\";\nimport { themeManager } from \"../themes/manager\";\nimport { smmsUploadImages } from \"../utilities/image_uploader\";\nimport { startGitHubOAuth } from \"../utilities/utils\";\nimport GitCommit from \"../_git_commit\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    settingsPanel: {\n      height: \"100%\",\n      overflow: \"auto\",\n      backgroundColor: theme.palette.background.default,\n    },\n    settingsCard: {\n      padding: theme.spacing(2),\n      width: \"600px\",\n      maxWidth: \"100%\",\n      position: \"relative\",\n      margin: `${theme.spacing(4)}px auto`,\n      height: \"fit-content\",\n      [theme.breakpoints.down(\"sm\")]: {\n        top: \"0\",\n        margin: \"0 auto\",\n        height: \"100%\",\n        overflow: \"auto\",\n      },\n    },\n    cover: {\n      position: \"relative\",\n      width: \"100%\",\n      height: \"0\",\n      marginTop: theme.spacing(2),\n      paddingTop: \"30%\",\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      backgroundColor: \"#fade79\",\n      [theme.breakpoints.down(\"sm\")]: {\n        paddingTop: \"50%\",\n      },\n    },\n    row: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    loggedInSection: {\n      position: \"relative\",\n      padding: theme.spacing(0, 2),\n      border: `1px solid ${theme.palette.primary.light}`,\n      marginBottom: theme.spacing(4),\n      marginTop: theme.spacing(2),\n      borderRadius: \"4px\",\n    },\n    avatar: {\n      marginTop: theme.spacing(2),\n      width: \"64px\",\n      height: \"64px\",\n      borderRadius: \"4px\",\n    },\n    saveBtn: {\n      marginBottom: theme.spacing(2),\n    },\n    logoutBtn: {\n      position: \"absolute\",\n      top: \"16px\",\n      right: \"16px\",\n    },\n    section: {\n      marginTop: theme.spacing(4),\n    },\n    swatch: {\n      padding: \"4px\",\n      backgroundColor: \"#fff\",\n      borderRadius: \"1px\",\n      boxShadow: \"0 0 0 1px rgba(0,0,0,0.1)\",\n      display: \"inline-block\",\n      cursor: \"pointer\",\n    },\n    color: {\n      width: \"36px\",\n      height: \"18px\",\n      borderRadius: \"2px\",\n    },\n    editorText: {\n      marginLeft: theme.spacing(4),\n    },\n    editorCursor: {\n      borderLeftStyle: \"solid\",\n      borderLeftWidth: \"2px\",\n      padding: \"0\",\n      position: \"relative\",\n    },\n  }),\n);\n\ninterface RGBA {\n  r: number;\n  g: number;\n  b: number;\n  a: number;\n}\n\nfunction getRGBA(inputStr: string = \"\"): RGBA {\n  if (!inputStr || !inputStr.length || !inputStr.match(/^rgba\\(/)) {\n    return {\n      r: 51,\n      g: 51,\n      b: 51,\n      a: 1,\n    };\n  } else {\n    const match = inputStr.match(\n      /^rgba\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)$/,\n    );\n    if (!match) {\n      return {\n        r: 51,\n        g: 51,\n        b: 51,\n        a: 1,\n      };\n    } else {\n      return {\n        r: parseInt(match[1], 10),\n        g: parseInt(match[2], 10),\n        b: parseInt(match[3], 10),\n        a: parseInt(match[4], 10),\n      };\n    }\n  }\n}\n\ninterface Props {}\nexport function Settings(props: Props) {\n  const classes = useStyles(props);\n  const { t } = useTranslation();\n  const [\n    colorPickerAnchorElement,\n    setColorPickerAnchorElement,\n  ] = useState<HTMLElement>(null);\n  const [\n    imageUploaderElement,\n    setImageUploaderElement,\n  ] = useState<HTMLInputElement>(null);\n  const displayColorPicker = Boolean(colorPickerAnchorElement);\n  const settingsContainer = SettingsContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [avatar, setAvatar] = useState<string>(\n    (cloudContainer.viewer && cloudContainer.viewer.avatar) || \"\",\n  );\n  const [uploadingAvatar, setUploadingAvatar] = useState<boolean>(false);\n  const [resGitHubUser] = useGitHubUserQuery();\n  const [\n    resUnlinkGitHubAccount,\n    executeUnlinkGitHubAccount,\n  ] = useUnlinkGitHubAccountMutation();\n\n  function uploadAvatar(\n    event: React.MouseEvent<HTMLButtonElement, MouseEvent>,\n  ) {\n    event.preventDefault();\n    event.stopPropagation();\n    if (!imageUploaderElement) return;\n    imageUploaderElement.onchange = function (event) {\n      const target = event.target as any;\n      const files = target.files || [];\n      new Noty({\n        type: \"info\",\n        text: \"Uploading avatar image\",\n        layout: \"topRight\",\n        theme: \"relax\",\n        timeout: 2000,\n      }).show();\n      smmsUploadImages(files)\n        .then((urls) => {\n          setUploadingAvatar(false);\n          setAvatar(urls[0] || \"\");\n        })\n        .catch((error: any) => {\n          // console.log(error);\n          new Noty({\n            type: \"error\",\n            text: \"Failed to upload image\",\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 2000,\n          }).show();\n          setUploadingAvatar(false);\n        });\n    };\n    setUploadingAvatar(true);\n    imageUploaderElement.click();\n  }\n\n  useEffect(() => {\n    if (cloudContainer.viewer) {\n      setAvatar((avatar) => avatar || cloudContainer.viewer.avatar);\n    }\n  }, [cloudContainer.viewer]);\n\n  useEffect(() => {\n    if (resUnlinkGitHubAccount.data) {\n      window.location.reload();\n    }\n  }, [resUnlinkGitHubAccount]);\n\n  return (\n    <Box className={clsx(classes.settingsPanel)}>\n      <Card className={clsx(classes.settingsCard)}>\n        <Box\n          style={{\n            display: \"flex\",\n            flexDirection: \"row\",\n            alignItems: \"center\",\n          }}\n        >\n          <Typography variant={\"h6\"}>{t(\"general/Settings\")}</Typography>\n        </Box>\n        {cloudContainer.loggedIn ? (\n          <Box className={clsx(classes.loggedInSection)}>\n            <Box className={clsx(classes.section)}>\n              <Box className={clsx(classes.row)}>\n                <img\n                  src=\"/logo.svg\"\n                  style={{ width: \"48px\", height: \"48px\" }}\n                  alt={\"Crossnote\"}\n                ></img>\n                <Typography variant={\"h6\"}>\n                  @{cloudContainer.viewer.username}\n                </Typography>\n              </Box>\n              <Typography>{cloudContainer.viewer.email}</Typography>\n              <Typography variant={\"caption\"}>\n                {t(\"settings/created-cloud-widgets-count\") +\n                  `: ${cloudContainer.viewer.widgetsCount}/`}\n              </Typography>\n            </Box>\n            <Box className={clsx(classes.section)}>\n              <Avatar\n                className={clsx(classes.avatar)}\n                variant={\"rounded\"}\n                src={\n                  avatar ||\n                  \"data:image/png;base64,\" +\n                    new Identicon(\n                      sha256(\n                        cloudContainer.viewer && cloudContainer.viewer.username,\n                      ),\n                      80,\n                    ).toString()\n                }\n              ></Avatar>\n              <Box className={clsx(classes.row)}>\n                <TextField\n                  label={t(\"settings/Avatar\")}\n                  style={{ marginTop: 8 }}\n                  placeholder=\"https://.../xxx.png\"\n                  helperText={t(\"settings/enter-avatar-image-url\")}\n                  fullWidth\n                  margin=\"normal\"\n                  InputLabelProps={{\n                    shrink: true,\n                  }}\n                  value={avatar}\n                  onChange={(event) => setAvatar(event.currentTarget.value)}\n                />\n                <Tooltip title={t(\"settings/upload-image\")}>\n                  <IconButton disabled={uploadingAvatar} onClick={uploadAvatar}>\n                    <ImagePlus></ImagePlus>\n                  </IconButton>\n                </Tooltip>\n              </Box>\n            </Box>\n            <Box\n              className={clsx(classes.section)}\n              style={{ marginBottom: \"16px\" }}\n            >\n              {resGitHubUser.data &&\n              resGitHubUser.data.viewer &&\n              resGitHubUser.data.viewer.githubUser ? (\n                <Chip\n                  color={\"primary\"}\n                  avatar={\n                    <Avatar\n                      src={resGitHubUser.data.viewer.githubUser.avatar}\n                    ></Avatar>\n                  }\n                  label={\n                    t(\"settings/linked-with-github-account\") +\n                    \": \" +\n                    resGitHubUser.data.viewer.githubUser.login\n                  }\n                  onClick={() => {\n                    window.open(\n                      \"https://github.com/\" +\n                        resGitHubUser.data.viewer.githubUser.login,\n                      \"_blank\",\n                    );\n                  }}\n                  disabled={resUnlinkGitHubAccount.fetching}\n                  onDelete={() => {\n                    executeUnlinkGitHubAccount();\n                  }}\n                />\n              ) : (\n                <Chip\n                  color={\"default\"}\n                  disabled={resGitHubUser.fetching}\n                  icon={<Github></Github>}\n                  onClick={() => startGitHubOAuth()}\n                  label={t(\"settings/link-with-github-account\")}\n                ></Chip>\n              )}\n            </Box>\n            <Box className={clsx(classes.section)}>\n              <Button\n                variant={\"contained\"}\n                color={\"primary\"}\n                className={clsx(classes.saveBtn)}\n                onClick={() => {\n                  cloudContainer.setUserInfo({\n                    name: settingsContainer.authorName,\n                    cover: \"\",\n                    avatar,\n                    editorCursorColor: settingsContainer.editorCursorColor,\n                    language: settingsContainer.language,\n                  });\n                }}\n                disabled={cloudContainer.resSetUserInfo.fetching}\n              >\n                {t(\"general/upload-the-profile\")}\n              </Button>\n            </Box>\n            <Button\n              variant={\"outlined\"}\n              color=\"secondary\"\n              className={clsx(classes.logoutBtn)}\n              onClick={() => {\n                cloudContainer.logout();\n              }}\n            >\n              {t(\"settings/log-out\")}\n            </Button>\n          </Box>\n        ) : null}\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n            }}\n          >\n            <Translate style={{ marginRight: \"8px\" }}></Translate>\n            {\"Languages/\"}\n          </Typography>\n          <Select\n            variant={\"standard\"}\n            value={settingsContainer.language}\n            onChange={(event) =>\n              settingsContainer.setLanguage(event.target.value as string)\n            }\n          >\n            <MenuItem value={\"en-US\"}>English</MenuItem>\n            <MenuItem value={\"zh-CN\"}></MenuItem>\n            <MenuItem value={\"zh-TW\"}></MenuItem>\n            <MenuItem value={\"ja-JP\"}></MenuItem>\n          </Select>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <TextField\n            label={t(\"settings/author-name\")}\n            placeholder={t(\"account/Anonymous\")}\n            fullWidth\n            margin=\"normal\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            value={settingsContainer.authorName}\n            onChange={(event) =>\n              settingsContainer.setAuthorName(event.currentTarget.value)\n            }\n            style={{\n              marginTop: \"0\",\n              marginBottom: \"0\",\n            }}\n          ></TextField>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <TextField\n            label={t(\"settings/author-email\")}\n            placeholder={\"anonymous@crossnote.app\"}\n            fullWidth\n            margin=\"normal\"\n            InputLabelProps={{\n              shrink: true,\n            }}\n            value={settingsContainer.authorEmail}\n            onChange={(event) =>\n              settingsContainer.setAuthorEmail(event.currentTarget.value)\n            }\n            style={{\n              marginTop: \"0\",\n              marginBottom: \"0\",\n            }}\n          ></TextField>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n              marginTop: \"16px\",\n            }}\n          >\n            <ThemeLightDark style={{ marginRight: \"8px\" }}></ThemeLightDark>\n            {t(\"settings/theme\")}\n          </Typography>\n          <Select\n            value={settingsContainer.theme.name}\n            onChange={(event) => {\n              settingsContainer.setTheme(event.target.value as string);\n            }}\n          >\n            {themeManager.themes.map((theme) => {\n              return (\n                <MenuItem key={theme.name} value={theme.name}>\n                  {theme.name}\n                </MenuItem>\n              );\n            })}\n          </Select>\n        </Box>\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n              marginTop: \"16px\",\n            }}\n          >\n            {t(\"settings/editor-cursor-color\") + \" (beta)\"}\n          </Typography>\n          <Box\n            style={{\n              display: \"flex\",\n              flexDirection: \"row\",\n              alignItems: \"center\",\n            }}\n          >\n            <Box\n              className={clsx(classes.swatch)}\n              onClick={(event: React.MouseEvent<HTMLElement>) =>\n                setColorPickerAnchorElement(event.currentTarget)\n              }\n            >\n              <Box\n                className={clsx(classes.color)}\n                style={{ backgroundColor: settingsContainer.editorCursorColor }}\n              ></Box>\n            </Box>\n            <div className={clsx(classes.editorText)}>\n              {t(\"settings/hello\")}\n              <span\n                className={clsx(classes.editorCursor)}\n                style={{\n                  borderLeftColor:\n                    settingsContainer.editorCursorColor || \"#4A90E2\",\n                }}\n              ></span>\n              {t(\"settings/world\")}\n            </div>\n          </Box>\n          <Popover\n            open={displayColorPicker}\n            anchorEl={colorPickerAnchorElement}\n            onClose={() => {\n              setColorPickerAnchorElement(null);\n            }}\n            anchorOrigin={{\n              vertical: \"bottom\",\n              horizontal: \"center\",\n            }}\n            transformOrigin={{\n              vertical: \"top\",\n              horizontal: \"center\",\n            }}\n          >\n            <SketchPicker\n              color={getRGBA(settingsContainer.editorCursorColor)}\n              onChange={(color) => {\n                const cursorColor = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`;\n                settingsContainer.setEditorCursorColor(cursorColor);\n              }}\n            ></SketchPicker>\n          </Popover>\n        </Box>\n\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n              marginTop: \"16px\",\n            }}\n          >\n            <BookEdit style={{ marginRight: \"8px\" }}></BookEdit>\n            {t(\"settings/default-editor-mode\")}\n          </Typography>\n          <Select\n            value={settingsContainer.defaultEditorMode}\n            onChange={(event) => {\n              settingsContainer.setDefaultEditorMode(\n                event.target.value as EditorMode,\n              );\n            }}\n          >\n            <MenuItem value={EditorMode.EchoMD}>{t(\"general/echomd\")}</MenuItem>\n            <MenuItem value={EditorMode.Preview}>\n              {t(\"editor/note-control/preview\")}\n            </MenuItem>\n            <MenuItem value={EditorMode.SourceCode}>\n              {t(\"editor/note-control/source-code\")}\n            </MenuItem>\n          </Select>\n        </Box>\n\n        <Box className={clsx(classes.section)}>\n          <Typography\n            variant={\"body2\"}\n            style={{\n              fontSize: \"0.75rem\",\n              marginBottom: \"6px\",\n              marginTop: \"16px\",\n            }}\n          >\n            <Keyboard style={{ marginRight: \"8px\" }}></Keyboard>\n            {t(\"settings/key-map\")}\n          </Typography>\n          <Select\n            value={settingsContainer.keyMap}\n            onChange={(event) => {\n              settingsContainer.setKeyMap(event.target.value as KeyMap);\n            }}\n          >\n            <MenuItem value={KeyMap.DEFAULT}>{t(\"general/Default\")}</MenuItem>\n            <MenuItem value={KeyMap.VIM}>{t(\"general/Vim\")}</MenuItem>\n            <MenuItem value={KeyMap.EMACS}>{t(\"general/Emacs\")}</MenuItem>\n          </Select>\n        </Box>\n        <Box className={clsx(classes.section)} style={{ marginTop: \"32px\" }}>\n          <Link\n            href={\n              \"https://crossnote.app/?repo=https%3A%2F%2Fgithub.com%2F0xGG%2Fwelcome-notebook.git&branch=master&filePath=README.md\"\n            }\n            target={\"_blank\"}\n          >\n            <Typography variant={\"caption\"}>\n              {\" \" + t(\"settings/about-this-project\")}\n            </Typography>\n          </Link>\n          <br></br>\n          <Link\n            href={`https://github.com/0xGG/crossnote/issues`}\n            target={\"_blank\"}\n          >\n            <Typography variant={\"caption\"}>\n              {\" \" + t(\"settings/issues-and-feature-requests\")}\n            </Typography>\n          </Link>\n          <br></br>\n          <Link\n            href={`https://github.com/0xGG/crossnote/commit/${GitCommit.hash}`}\n            target={\"_blank\"}\n          >\n            <Typography variant={\"caption\"}>\n              {\" Build \" + GitCommit.logMessage}\n            </Typography>\n          </Link>\n          <br></br>\n          <Link\n            onClick={(event: any) => {\n              event.preventDefault();\n              crossnoteContainer.addTabNode({\n                type: \"tab\",\n                name: \" Privacy policy\",\n                component: \"Privacy\",\n                id: \"Privacy\",\n                config: {\n                  component: \"Privacy\",\n                  singleton: true,\n                },\n              });\n            }}\n            href=\"\"\n          >\n            <Typography variant={\"caption\"}>{\" Privacy policy\"}</Typography>\n          </Link>\n        </Box>\n        {!cloudContainer.loggedIn && (\n          <Button\n            variant={\"outlined\"}\n            color={\"primary\"}\n            className={clsx(classes.logoutBtn)}\n            onClick={() => cloudContainer.setAuthDialogOpen(true)}\n          >\n            {t(\"general/sign-in\")}\n          </Button>\n        )}\n        <input\n          type=\"file\"\n          multiple\n          style={{ display: \"none\" }}\n          ref={(element: HTMLInputElement) => {\n            setImageUploaderElement(element);\n          }}\n        ></input>\n      </Card>\n    </Box>\n  );\n}\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogContentText,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n  ThemeProvider,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport FlexLayout, { TabNode } from \"flexlayout-react\";\nimport \"flexlayout-react/style/light.css\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { pfs } from \"../lib/fs\";\nimport { TabNodeComponent, TabNodeConfig } from \"../lib/tabNode\";\nimport { PrivacyPolicy } from \"../pages/Privacy\";\nimport { Emoji } from \"./EmojiWrapper\";\nimport GraphView from \"./GraphView\";\nimport { Loading } from \"./Loading\";\nimport NotePanel from \"./NotePanel\";\nimport NotesPanel from \"./NotesPanel\";\nimport { Notifications } from \"./Notifications\";\nimport { Settings } from \"./Settings\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    mainPanel: {\n      \"position\": \"relative\",\n      \"display\": \"flex\",\n      \"flexDirection\": \"row\",\n      \"flexGrow\": 1,\n      \"overflow\": \"auto\",\n      // overright the flexlayout style\n      \"& .flexlayout__tabset\": {\n        \"backgroundColor\": theme.palette.background.paper,\n        \"&::before\": {\n          content: '\"\"',\n          top: \"50%\",\n          left: \"50%\",\n          position: \"absolute\",\n          transform: \"translate(-50%, -50%)\",\n          color: theme.palette.text.hint,\n          fontSize: \"1.6rem\",\n        },\n      },\n      \"& .flexlayout__tabset_tabbar_outer.flexlayout__tabset_tabbar_outer_top\": {\n        backgroundColor: darken(theme.palette.background.default, 0.04),\n        borderColor: theme.palette.divider,\n        border: \"none\",\n      },\n      \"& .flexlayout__tab_button\": {\n        color: theme.palette.text.primary,\n      },\n      \"& .flexlayout__tab_button.flexlayout__tab_button--selected\": {\n        backgroundColor: theme.palette.background.paper,\n      },\n      \"& .flexlayout__tab_button:hover\": {\n        backgroundColor: theme.palette.background.paper,\n      },\n      \"& .flexlayout__splitter\": {\n        backgroundColor: darken(theme.palette.background.default, 0.04),\n      },\n      \"& .flexlayout__tab\": {\n        backgroundColor: theme.palette.background.paper,\n      },\n      \"& .flexlayout__popup_menu_container\": {\n        color: theme.palette.text.primary,\n        backgroundColor: theme.palette.background.paper,\n        borderColor: theme.palette.divider,\n      },\n      \"& .flexlayout__popup_menu_container .flexlayout__popup_menu_item:hover\": {\n        backgroundColor: darken(theme.palette.background.paper, 0.1),\n        cursor: \"pointer\",\n      },\n      \"& .flexlayout__outline_rect\": {\n        borderColor: theme.palette.primary.main,\n      },\n    },\n  }),\n);\n\ninterface Props {\n  toggleDrawer: () => void;\n}\n\nexport function MainPanel(props: Props) {\n  const classes = useStyles();\n  const theme = useTheme();\n  const container = useRef<HTMLDivElement>(null);\n  const [dialogOpen, setDialogOpen] = useState<boolean>(false);\n  const [ready, setReady] = useState<boolean>(false);\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n  const { t } = useTranslation();\n\n  const factory = useCallback(\n    (node: TabNode) => {\n      if (!crossnoteContainer.initialized || !ready) {\n        return <Loading></Loading>;\n      }\n      const config: TabNodeConfig = node.getConfig();\n\n      /*\n      console.log(\n        \"render component: \\n\",\n        `* id: ${node.getId()}\\n`,\n        `* name: ${node.getName()}\\n`,\n        `* config: `,\n        node.getConfig(),\n      );\n      */\n\n      const component: TabNodeComponent = node.getComponent() as TabNodeComponent;\n      let renderElement = <Box></Box>;\n      if (component === \"Settings\") {\n        renderElement = <Settings></Settings>;\n      } else if (component === \"Notes\") {\n        const notebook = crossnoteContainer.getNotebookAtPath(\n          config.notebookPath,\n        );\n        if (notebook) {\n          renderElement = (\n            <NotesPanel\n              tabNode={node}\n              notebook={notebook}\n              title={t(\"general/notes\")}\n            ></NotesPanel>\n          );\n        }\n      } else if (component === \"Privacy\") {\n        renderElement = (\n          <PrivacyPolicy toggleDrawer={props.toggleDrawer}></PrivacyPolicy>\n        );\n      } else if (component === \"Note\") {\n        const notebook = crossnoteContainer.getNotebookAtPath(\n          config.notebookPath,\n        );\n        if (notebook) {\n          renderElement = (\n            <NotePanel\n              notebook={notebook}\n              noteFilePath={config.noteFilePath}\n              tabNode={node}\n              reference={config.reference}\n            ></NotePanel>\n          );\n        }\n      } else if (component === \"Graph\") {\n        const notebook = crossnoteContainer.getNotebookAtPath(\n          config.notebookPath,\n        );\n        if (notebook) {\n          renderElement = (\n            <GraphView notebook={notebook} tabNode={node}></GraphView>\n          );\n        }\n      } else if (component === \"Notifications\") {\n        renderElement = <Notifications></Notifications>;\n      } else {\n        console.error(\"Invalid component: \", component);\n      }\n\n      return (\n        <ThemeProvider theme={settingsContainer.theme.muiTheme}>\n          {renderElement}\n        </ThemeProvider>\n      );\n    },\n    [\n      ready,\n      props.toggleDrawer,\n      t,\n      settingsContainer.theme.muiTheme,\n      crossnoteContainer.initialized,\n      crossnoteContainer.getNotebookAtPath,\n    ],\n  );\n\n  const closeDialog = useCallback(() => {\n    setDialogOpen(false);\n    setReady(true);\n  }, []);\n\n  useEffect(() => {\n    if (crossnoteContainer.layoutModel) {\n      const data = crossnoteContainer.layoutModel.toJson();\n      let hasLocalDirectory = false;\n      const layout = data.layout || {};\n      const children = layout.children || [];\n      for (let i = 0; i < children.length; i++) {\n        const children2 = children[i].children || [];\n        for (let j = 0; j < children2.length; j++) {\n          const child = children2[j];\n          if (child && child.config && child.config.notebookPath) {\n            if (pfs.isPathOfLocalFileSystem(child.config.notebookPath)) {\n              hasLocalDirectory = true;\n              break;\n            }\n          }\n        }\n        if (hasLocalDirectory) {\n          break;\n        }\n      }\n      if (hasLocalDirectory) {\n        setDialogOpen(true);\n      } else {\n        setReady(true);\n      }\n    }\n  }, [container, crossnoteContainer.layoutModel]);\n\n  return (\n    <div className={clsx(classes.mainPanel)} ref={container} id=\"main-panel\">\n      <FlexLayout.Layout\n        model={crossnoteContainer.layoutModel}\n        factory={factory}\n        onModelChange={(model) => {\n          crossnoteContainer.saveCurrentLayoutModel();\n        }}\n        iconFactory={(node) => {\n          const config: TabNodeConfig = node.getConfig();\n          const emoji = config.icon || \":memo:\";\n          return (\n            <Box style={{ marginRight: \"4px\", marginTop: \"4px\" }}>\n              <Emoji size={16} emoji={emoji}></Emoji>\n            </Box>\n          );\n        }}\n      ></FlexLayout.Layout>\n      {/*\n        The dialog here is useful for file system access API requestPermission from user interaction.\n      */}\n      <Dialog\n        open={dialogOpen}\n        onClose={closeDialog}\n        maxWidth={\"sm\"}\n        fullWidth={true}\n      >\n        <DialogContent>\n          <DialogContentText color={\"textPrimary\"}>\n            {t(\"general/welcome-back-to-crossnote\")} \n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={closeDialog} color=\"primary\" autoFocus>\n            {t(\"general/continue\")}\n          </Button>\n        </DialogActions>\n      </Dialog>\n    </div>\n  );\n}\n","import {\n  Accordion,\n  AccordionDetails,\n  AccordionSummary,\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  Input,\n  InputAdornment,\n  Link,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { ChevronDown, Eye, EyeOff } from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useRef, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { Notebook } from \"../lib/notebook\";\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nconst MaxClickDeleteCount = 3;\nexport default function ConfigureNotebookDialog(props: Props) {\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const [notebookName, setNotebookName] = useState<string>(\"\");\n  const [expanded, setExpanded] = useState<boolean>(false);\n  const [gitURL, setGitURL] = useState<string>(\"\");\n  const [gitBranch, setGitBranch] = useState<string>(\"\");\n  const [gitUsername, setGitUsername] = useState<string>(\"\");\n  const [gitPassword, setGitPassword] = useState<string>(\"\");\n  const [gitCorsProxy, setGitCorsProxy] = useState<string>(\n    \"https://crossnote.app/cors/\",\n  );\n  const [showUsername, setShowUsername] = useState<boolean>(false);\n  const [showPassword, setShowPassword] = useState<boolean>(false);\n  const [autoFetchPeriod, setAutoFetchPeriod] = useState<number>(0);\n  const [clickDeleteCount, setClickDeleteCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const [clickHardResetCount, setClickHardResetCount] = useState<number>(\n    MaxClickDeleteCount,\n  );\n  const isMounted = useRef<boolean>(false);\n  const { t } = useTranslation();\n\n  const close = useCallback(() => {\n    setShowUsername(false);\n    setShowPassword(false);\n    props.onClose();\n  }, [props]);\n\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n    setClickHardResetCount(MaxClickDeleteCount);\n  }, [props.open]);\n\n  useEffect(() => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      return;\n    }\n    setNotebookName(notebook.name);\n    setGitURL(notebook.gitURL);\n    setGitBranch(notebook.gitBranch || \"master\");\n    setGitUsername(notebook.gitUsername);\n    setGitPassword(notebook.gitPassword);\n    setGitCorsProxy(notebook.gitCorsProxy);\n    setAutoFetchPeriod(notebook.autoFetchPeriod / 60000);\n    setShowUsername(false);\n    setShowPassword(false);\n  }, [props.notebook]);\n\n  const updateNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    if (!notebook) {\n      close();\n      return;\n    }\n    notebook.name = notebookName.trim();\n    notebook.gitURL = gitURL.trim();\n    notebook.gitBranch = gitBranch.trim();\n    notebook.gitUsername = gitUsername.trim();\n    notebook.gitPassword = gitPassword;\n    notebook.gitCorsProxy = gitCorsProxy.trim();\n    notebook.autoFetchPeriod = Math.max(autoFetchPeriod * 60000, 0);\n    try {\n      await crossnoteContainer.updateNotebook(notebook);\n    } catch (error) {}\n    if (isMounted.current) {\n      close();\n    }\n  }, [\n    props,\n    props.notebook,\n    notebookName,\n    gitURL,\n    gitBranch,\n    gitUsername,\n    gitPassword,\n    gitCorsProxy,\n    autoFetchPeriod,\n    close,\n  ]);\n\n  const deleteNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.deleteNotebook(notebook);\n    } catch (error) {}\n    if (isMounted.current) {\n      close();\n    }\n  }, [props.notebook, props, close]);\n\n  const hardResetNotebook = useCallback(async () => {\n    const notebook = props.notebook;\n    try {\n      await crossnoteContainer.hardResetNotebook(notebook);\n    } catch (error) {}\n    if (isMounted.current) {\n      close();\n    }\n  }, [props.notebook, props, close]);\n\n  useEffect(() => {\n    setClickDeleteCount(MaxClickDeleteCount);\n  }, [props.notebook]);\n\n  return (\n    <Dialog open={props.open} onClose={!clickDeleteCount ? null : close}>\n      <DialogTitle>{t(\"general/configure-the-notebook\")}</DialogTitle>\n      <DialogContent>\n        <TextField\n          label={t(\"general/notebook-name\")}\n          value={notebookName}\n          fullWidth={true}\n          onChange={(event) => {\n            setNotebookName(event.target.value);\n          }}\n          style={{ marginBottom: \"16px\" }}\n          autoComplete={\"off\"}\n          autoCorrect={\"off\"}\n        ></TextField>\n        {!props.notebook.isLocal && (\n          <Accordion\n            elevation={2}\n            expanded={expanded}\n            onChange={() => setExpanded(!expanded)}\n          >\n            <AccordionSummary expandIcon={<ChevronDown></ChevronDown>}>\n              <Typography>{`${t(\"general/git-repository\")} (${t(\n                \"general/optional\",\n              )})`}</Typography>\n            </AccordionSummary>\n            <AccordionDetails>\n              <Box>\n                <TextField\n                  label={t(\"general/url\")}\n                  placeholder={\"https://abc/def.git\"}\n                  disabled={true}\n                  fullWidth={true}\n                  value={gitURL}\n                  onChange={(event) => setGitURL(event.target.value)}\n                ></TextField>\n                <TextField\n                  label={t(\"general/branch\")}\n                  placeholder={\"master\"}\n                  disabled={true}\n                  fullWidth={true}\n                  value={gitBranch}\n                  onChange={(event) => setGitBranch(event.target.value)}\n                ></TextField>\n                <TextField\n                  label={`${t(\"general/Username\")} (${t(\"general/optional\")})`}\n                  placeholder={`${t(\"general/Username\")} (${t(\n                    \"general/optional\",\n                  )})`}\n                  type={showUsername ? \"text\" : \"password\"}\n                  fullWidth={true}\n                  value={gitUsername}\n                  onChange={(event) => setGitUsername(event.target.value)}\n                  InputProps={{\n                    endAdornment: (\n                      <InputAdornment position={\"end\"}>\n                        <IconButton\n                          aria-label=\"toggle username visibility\"\n                          onClick={() => setShowUsername(!showUsername)}\n                        >\n                          {\" \"}\n                          {showUsername ? <Eye></Eye> : <EyeOff></EyeOff>}{\" \"}\n                        </IconButton>\n                      </InputAdornment>\n                    ),\n                  }}\n                ></TextField>\n                <TextField\n                  label={`${t(\"general/Password\")} (${t(\"general/optional\")})`}\n                  placeholder={`${t(\"general/Password\")} (${t(\n                    \"general/optional\",\n                  )})`}\n                  type={showPassword ? \"text\" : \"password\"}\n                  fullWidth={true}\n                  value={gitPassword}\n                  onChange={(event) => setGitPassword(event.target.value)}\n                  InputProps={{\n                    endAdornment: (\n                      <InputAdornment position={\"end\"}>\n                        <IconButton\n                          aria-label=\"toggle password visibility\"\n                          onClick={() => setShowPassword(!showPassword)}\n                        >\n                          {\" \"}\n                          {showPassword ? <Eye></Eye> : <EyeOff></EyeOff>}{\" \"}\n                        </IconButton>\n                      </InputAdornment>\n                    ),\n                  }}\n                ></TextField>\n                <TextField\n                  label={t(\"general/cors-proxy\")}\n                  placeholder={\"https://crossnote.app/cors/\"}\n                  fullWidth={true}\n                  value={gitCorsProxy}\n                  onChange={(event) => setGitCorsProxy(event.target.value)}\n                ></TextField>\n                <Link\n                  href={\n                    \"https://github.com/isomorphic-git/isomorphic-git#cors-support\"\n                  }\n                  target={\"_blank\"}\n                >\n                  {t(\"general/why-cors-proxy\")}\n                </Link>\n                {props.notebook && props.notebook.gitURL ? (\n                  <Box style={{ marginTop: \"16px\" }}>\n                    <Typography>\n                      {t(\"general/check-notebook-updates-periodically\")}\n                    </Typography>\n                    <Input\n                      value={autoFetchPeriod}\n                      onChange={(event) => {\n                        try {\n                          const value = parseFloat(event.target.value || \"0\");\n                          if (!isNaN(value)) {\n                            setAutoFetchPeriod(value);\n                          }\n                        } catch (error) {}\n                      }}\n                      endAdornment={\n                        <InputAdornment position=\"end\">\n                          {t(\"general/minutes\")}\n                        </InputAdornment>\n                      }\n                    ></Input>\n                  </Box>\n                ) : null}\n              </Box>\n            </AccordionDetails>\n          </Accordion>\n        )}\n      </DialogContent>\n      <DialogActions>\n        {crossnoteContainer.notebooks.length > 1 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickDeleteCount}\n            onClick={() => {\n              if (clickDeleteCount === 1) {\n                deleteNotebook();\n                setClickDeleteCount(clickDeleteCount - 1);\n              } else {\n                setClickDeleteCount(clickDeleteCount - 1);\n              }\n            }}\n          >\n            {(props.notebook.isLocal\n              ? t(\"general/close\")\n              : t(\"general/Delete\")) +\n              (clickDeleteCount < MaxClickDeleteCount\n                ? ` ${clickDeleteCount}`\n                : \"\")}\n          </Button>\n        )}\n        {props.notebook && props.notebook.gitURL.length > 0 && (\n          <Button\n            variant={\"contained\"}\n            color={\"secondary\"}\n            disabled={!clickHardResetCount || !clickDeleteCount}\n            onClick={() => {\n              if (clickHardResetCount === 1) {\n                hardResetNotebook();\n                setClickHardResetCount(clickHardResetCount - 1);\n              } else {\n                setClickHardResetCount(clickHardResetCount - 1);\n              }\n            }}\n          >\n            {t(\"general/hard-reset\") +\n              (clickHardResetCount < MaxClickDeleteCount\n                ? ` ${clickHardResetCount}`\n                : \"\")}\n          </Button>\n        )}\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          onClick={updateNotebook}\n          disabled={!clickDeleteCount}\n        >\n          {t(\"general/Save\")}\n        </Button>\n        <Button onClick={close} disabled={!clickDeleteCount}>\n          {t(\"general/cancel\")}\n        </Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import {\n  Box,\n  Button,\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  IconButton,\n  InputAdornment,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { createStyles, makeStyles, Theme } from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport { Eye, EyeOff } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer } from \"../containers/crossnote\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { Notebook } from \"../lib/notebook\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    textField: {\n      marginBottom: theme.spacing(2),\n    },\n  }),\n);\n\ninterface Props {\n  open: boolean;\n  onClose: () => void;\n  notebook: Notebook;\n}\n\nexport default function PushNotebookDialog(props: Props) {\n  const classes = useStyles(props);\n  const notebook = props.notebook;\n  const [gitUsername, setGitUsername] = useState<string>(notebook.gitUsername);\n  const [gitPassword, setGitPassword] = useState<string>(notebook.gitPassword);\n  const [showUsername, setShowUsername] = useState<boolean>(false);\n  const [showPassword, setShowPassword] = useState<boolean>(false);\n  const [commitMessage, setCommitMessage] = useState<string>(\n    \"doc: Updated docs\",\n  );\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  const close = useCallback(() => {\n    setShowUsername(false);\n    setShowPassword(false);\n    props.onClose();\n  }, [props]);\n\n  const pushNotebook = useCallback(() => {\n    crossnoteContainer\n      .pushNotebook({\n        notebook,\n        authorName: settingsContainer.authorEmail,\n        authorEmail: settingsContainer.authorEmail,\n        username: gitUsername,\n        password: gitPassword,\n        message: commitMessage,\n        onAuthFailure: () => {\n          new Noty({\n            type: \"error\",\n            text: t(\"error/authentication-failed\"),\n            layout: \"topRight\",\n            theme: \"relax\",\n            timeout: 5000,\n          }).show();\n        },\n      })\n      .then(() => {\n        close();\n        new Noty({\n          type: \"success\",\n          text: t(\"success/notebook-uploaded\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      })\n      .catch((error: Error) => {\n        console.log(error);\n        close();\n        new Noty({\n          type: \"error\",\n          text: error.message.match(/^error\\//)\n            ? t(error.message)\n            : t(\"error/failed-to-upload-notebook\"),\n          layout: \"topRight\",\n          theme: \"relax\",\n          timeout: 2000,\n        }).show();\n      });\n  }, [\n    settingsContainer.authorName,\n    settingsContainer.authorEmail,\n    gitUsername,\n    gitPassword,\n    notebook,\n    commitMessage,\n    close,\n    t,\n    crossnoteContainer.pushNotebook,\n  ]);\n\n  useEffect(() => {\n    setGitUsername(notebook.gitUsername);\n  }, [notebook.gitUsername, props.open]);\n\n  useEffect(() => {\n    setGitPassword(notebook.gitPassword);\n  }, [notebook.gitPassword, props.open]);\n\n  return (\n    <Dialog\n      open={props.open}\n      onClose={() => {\n        if (!crossnoteContainer.isPushingNotebook) {\n          close();\n        }\n      }}\n    >\n      <DialogTitle>\n        {`${t(\"general/upload-notebook\")} \"${notebook.name}\"`}\n        <Box>\n          <Typography variant={\"caption\"}>\n            {notebook.gitURL + \":\" + notebook.gitBranch}\n          </Typography>\n        </Box>\n      </DialogTitle>\n      <DialogContent>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-name\")}\n          fullWidth={true}\n          value={settingsContainer.authorName}\n          onChange={(event) =>\n            settingsContainer.setAuthorName(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"settings/author-email\")}\n          fullWidth={true}\n          value={settingsContainer.authorEmail}\n          onChange={(event) =>\n            settingsContainer.setAuthorEmail(event.target.value)\n          }\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={t(\"general/commit-message\")}\n          fullWidth={true}\n          value={commitMessage}\n          onChange={(event) => setCommitMessage(event.target.value)}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Username\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Username\",\n          )} (${t(\"general/optional\")})`}\n          type={showUsername ? \"text\" : \"password\"}\n          fullWidth={true}\n          value={gitUsername}\n          onChange={(event) => setGitUsername(event.target.value)}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position={\"end\"}>\n                <IconButton\n                  aria-label=\"toggle username visibility\"\n                  onClick={() => setShowUsername(!showUsername)}\n                >\n                  {\" \"}\n                  {showUsername ? <Eye></Eye> : <EyeOff></EyeOff>}{\" \"}\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        ></TextField>\n        <TextField\n          className={clsx(classes.textField)}\n          label={`${t(\"general/git-repository\")} ${t(\"general/Password\")} (${t(\n            \"general/optional\",\n          )})`}\n          placeholder={`${t(\"general/git-repository\")} ${t(\n            \"general/Password\",\n          )} (${t(\"general/optional\")})`}\n          type={showPassword ? \"text\" : \"password\"}\n          fullWidth={true}\n          value={gitPassword}\n          onChange={(event) => setGitPassword(event.target.value)}\n          InputProps={{\n            endAdornment: (\n              <InputAdornment position={\"end\"}>\n                <IconButton\n                  aria-label=\"toggle password visibility\"\n                  onClick={() => setShowPassword(!showPassword)}\n                >\n                  {\" \"}\n                  {showPassword ? <Eye></Eye> : <EyeOff></EyeOff>}{\" \"}\n                </IconButton>\n              </InputAdornment>\n            ),\n          }}\n        ></TextField>\n      </DialogContent>\n      <DialogActions>\n        <Button\n          variant={\"contained\"}\n          color={\"primary\"}\n          disabled={crossnoteContainer.isPushingNotebook}\n          onClick={pushNotebook}\n        >\n          {crossnoteContainer.isPushingNotebook\n            ? t(\"general/Uploading\")\n            : t(\"general/Upload\")}\n        </Button>\n        <Button onClick={close}>{t(\"general/cancel\")}</Button>\n      </DialogActions>\n    </Dialog>\n  );\n}\n","import { Box, Chip, IconButton, Tooltip, Typography } from \"@material-ui/core\";\nimport {\n  createStyles,\n  darken,\n  makeStyles,\n  Theme,\n} from \"@material-ui/core/styles\";\nimport { TreeItem, TreeView } from \"@material-ui/lab\";\nimport clsx from \"clsx\";\nimport { ChevronDown, ChevronRight } from \"mdi-material-ui\";\nimport Noty from \"noty\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { CrossnoteContainer, HomeSection } from \"../containers/crossnote\";\nimport {\n  ChangedNoteFilePathEventData,\n  DeletedNoteEventData,\n  EventType,\n  globalEmitter,\n  ModifiedMarkdownEventData,\n  PerformedGitOperationEventData,\n} from \"../lib/event\";\nimport { getNoteIcon, Notes } from \"../lib/note\";\nimport { Notebook } from \"../lib/notebook\";\nimport ConfigureNotebookDialog from \"./ConfigureNotebookDialog\";\nimport { Emoji } from \"./EmojiWrapper\";\nimport PushNotebookDialog from \"./PushNotebookDialog\";\n\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    treeItemRoot: {\n      \"paddingLeft\": \"4px\",\n      // color: theme.palette.text.secondary,\n      \"&:focus > $treeItemContent\": {\n        color: theme.palette.text.primary,\n        backgroundColor: darken(theme.palette.background.paper, 0.05),\n      },\n      \"&:focus > $treeItemLabelIcon\": {\n        color: theme.palette.text.primary,\n      },\n    },\n    treeItemContent: {\n      \"cursor\": \"default\",\n      \"color\": theme.palette.text.primary,\n      // paddingLeft: theme.spacing(1),\n      // paddingRight: theme.spacing(1),\n      \"userSelect\": \"none\",\n      \"fontWeight\": theme.typography.fontWeightMedium,\n      \"$treeItemExpanded > &\": {\n        fontWeight: theme.typography.fontWeightRegular,\n      },\n    },\n    treeItemGroup: {\n      \"marginLeft\": 0,\n      \"& $treeItemContent\": {\n        // paddingLeft: theme.spacing(2)\n      },\n    },\n    treeItemExpanded: {},\n    treeItemLabel: {\n      fontWeight: \"inherit\",\n      color: \"inherit\",\n      backgroundColor: \"transparent !important\",\n    },\n    treeItemLabelRoot: {\n      display: \"flex\",\n      alignItems: \"center\",\n      padding: theme.spacing(1, 0),\n    },\n    treeItemLabelIcon: {},\n    treeItemLabelText: {\n      paddingLeft: \"12px\",\n      flexGrow: 1,\n    },\n    disabled: {\n      color: theme.palette.text.disabled,\n    },\n    emojiIcon: {\n      top: \"2px\",\n      position: \"relative\",\n    },\n  }),\n);\n\ninterface Props {\n  notebook: Notebook;\n  onCloseDrawer: () => void;\n}\nexport default function NotebookTreeView(props: Props) {\n  const classes = useStyles();\n  const [expanded, setExpanded] = useState<string[]>([]);\n  const [\n    notebookConfigurationDialogOpen,\n    setNotebookConfigurationDialogOpen,\n  ] = useState<boolean>(false);\n  const [pushNotebookDialogOpen, setPushNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [favoritedNotes, setFavoritedNotes] = useState<Notes>({});\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const { t } = useTranslation();\n\n  const refreshQuickAccessNotes = useCallback((notes: Notes) => {\n    const favoritedNotes: Notes = {};\n    for (let filePath in notes) {\n      const note = notes[filePath];\n      if (note.config.favorited) {\n        favoritedNotes[note.filePath] = note;\n      }\n    }\n    setFavoritedNotes(favoritedNotes);\n  }, []);\n\n  const handleChange = useCallback(\n    (event: React.ChangeEvent<{}>, nodes: string[]) => {\n      event.stopPropagation();\n      const element = event.target as HTMLElement;\n      if (\n        element &&\n        element.tagName &&\n        element.tagName.toUpperCase().match(/^(SVG|PATH|BUTTON)$/)\n      ) {\n        props.notebook\n          .refreshNotesIfNotLoaded({\n            dir: \"./\",\n            includeSubdirectories: true,\n          })\n          .then((notes) => {\n            refreshQuickAccessNotes(notes);\n            globalEmitter.emit(EventType.PerformedGitOperation, {\n              notebookPath: props.notebook.dir,\n            });\n          })\n          .catch((error) => {\n            console.error(error);\n          });\n\n        setExpanded(nodes);\n      }\n    },\n    [props.notebook, refreshQuickAccessNotes],\n  );\n\n  // Emitter\n  useEffect(() => {\n    const modifiedMarkdownCallback = (data: ModifiedMarkdownEventData) => {\n      if (!(data.noteFilePath in props.notebook.notes)) {\n        return;\n      }\n      const isFavorited = data.noteFilePath in favoritedNotes;\n      if (data.noteConfig.favorited !== isFavorited) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      } else if (isFavorited) {\n        const oNote = favoritedNotes[data.noteFilePath];\n        const nNote = props.notebook.notes[data.noteFilePath];\n        if (oNote.config.icon !== nNote.config.icon) {\n          refreshQuickAccessNotes(props.notebook.notes);\n        }\n      }\n      // refreshQuickAccessNotes(props.notebook.notes);\n    };\n    const deletedNoteCallback = (data: DeletedNoteEventData) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      }\n    };\n    const changedNoteFilePathCallback = (\n      data: ChangedNoteFilePathEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      }\n    };\n    const performedGitOperationCallback = (\n      data: PerformedGitOperationEventData,\n    ) => {\n      if (props.notebook.dir === data.notebookPath) {\n        refreshQuickAccessNotes(props.notebook.notes);\n      }\n    };\n\n    if (globalEmitter) {\n      globalEmitter.on(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n      globalEmitter.on(EventType.DeletedNote, deletedNoteCallback);\n      globalEmitter.on(\n        EventType.ChangedNoteFilePath,\n        changedNoteFilePathCallback,\n      );\n      globalEmitter.on(\n        EventType.PerformedGitOperation,\n        performedGitOperationCallback,\n      );\n    }\n\n    return () => {\n      if (globalEmitter) {\n        globalEmitter.off(EventType.ModifiedMarkdown, modifiedMarkdownCallback);\n        globalEmitter.off(EventType.DeletedNote, deletedNoteCallback);\n        globalEmitter.off(\n          EventType.ChangedNoteFilePath,\n          changedNoteFilePathCallback,\n        );\n        globalEmitter.off(\n          EventType.PerformedGitOperation,\n          performedGitOperationCallback,\n        );\n      }\n    };\n  }, [props.notebook, refreshQuickAccessNotes, favoritedNotes]);\n\n  useEffect(() => {\n    if (crossnoteContainer.homeSection !== HomeSection.Notebooks) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.homeSection]);\n\n  useEffect(() => {\n    refreshQuickAccessNotes(props.notebook.notes);\n  }, [props.notebook, refreshQuickAccessNotes]);\n\n  /*\n  useEffect(() => {\n    if (crossnoteContainer.selectedNotebook !== props.notebook) {\n      setExpanded([]);\n    }\n  }, [crossnoteContainer.selectedNotebook, props.notebook]);\n  */\n\n  return (\n    <React.Fragment>\n      <TreeView\n        defaultExpandIcon={\n          <IconButton\n            disableFocusRipple={true}\n            disableRipple={true}\n            size={\"medium\"}\n          >\n            <ChevronRight></ChevronRight>\n          </IconButton>\n        }\n        defaultCollapseIcon={\n          <IconButton\n            disableFocusRipple={true}\n            disableRipple={true}\n            size={\"medium\"}\n          >\n            <ChevronDown></ChevronDown>\n          </IconButton>\n        }\n        defaultEndIcon={<div style={{ width: 24 }} />}\n        expanded={expanded}\n        onNodeToggle={handleChange}\n        style={{ width: \"100%\" }}\n      >\n        <TreeItem\n          nodeId={\"notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                props.notebook\n                  .refreshNotesIfNotLoaded({\n                    dir: \"./\",\n                    includeSubdirectories: true,\n                  })\n                  .then((notes) => {\n                    refreshQuickAccessNotes(notes);\n                    globalEmitter.emit(EventType.PerformedGitOperation, {\n                      notebookPath: props.notebook.dir,\n                    });\n                  })\n                  .catch((error) => {\n                    console.error(error);\n                  });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <Typography\n                color={\"inherit\"}\n                variant={\"body1\"}\n                className={clsx(classes.treeItemLabelText)}\n                style={{ paddingLeft: \"4px\" }}\n              >\n                <span\n                  role=\"img\"\n                  className={clsx(classes.emojiIcon)}\n                  style={{ paddingRight: \"8px\" }}\n                >\n                  {props.notebook.isLocal ? (\n                    <Emoji emoji={\":card_index_dividers:\"} size={16}></Emoji>\n                  ) : props.notebook.localSha === props.notebook.remoteSha ? (\n                    <Emoji emoji={\":cloud:\"} size={16}></Emoji>\n                  ) : (\n                    <Emoji emoji={\":bell:\"} size={16}></Emoji>\n                  )}\n                </span>\n                {props.notebook.name}\n              </Typography>\n            </Box>\n          }\n        >\n          <TreeItem\n            nodeId={\"today-notes\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.openTodayNote(props.notebook);\n                  props.onCloseDrawer();\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span\n                  role=\"img\"\n                  className={clsx(classes.emojiIcon)}\n                  aria-label=\"today-notes\"\n                >\n                  <Emoji emoji={\":calendar:\"} size={16}></Emoji>\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/today\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          <TreeItem\n            nodeId={\"graph-view\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Graph\",\n                    id: \"Graph: \" + props.notebook.dir,\n                    name: t(\"general/graph-view\"),\n                    config: {\n                      component: \"Graph\",\n                      singleton: true,\n                      notebookPath: props.notebook.dir,\n                      icon: \":spider_web:\",\n                    },\n                  });\n                  props.onCloseDrawer();\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span\n                  role=\"img\"\n                  className={clsx(classes.emojiIcon)}\n                  aria-label=\"todo-notes\"\n                >\n                  <Emoji emoji={\":spider_web:\"} size={16}></Emoji>\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/graph-view\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          <TreeItem\n            nodeId={\"all-notes\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Notes\",\n                    id: \"Notes: \" + props.notebook.dir,\n                    name: props.notebook.name,\n                    config: {\n                      component: \"Notes\",\n                      singleton: true,\n                      notebookPath: props.notebook.dir,\n                      icon: \":notebook_with_decorative_cover:\",\n                    },\n                  });\n                  props.onCloseDrawer();\n                }}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span\n                  role=\"img\"\n                  className={clsx(classes.emojiIcon)}\n                  aria-label=\"Notes\"\n                >\n                  <Emoji\n                    emoji={\":notebook_with_decorative_cover:\"}\n                    size={16}\n                  ></Emoji>\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/notes\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          {Object.values(favoritedNotes).map((note) => {\n            return (\n              <TreeItem\n                key={`${note.notebookPath}/${note.filePath}`}\n                nodeId={`${note.notebookPath}/${note.filePath}`}\n                classes={{\n                  root: classes.treeItemRoot,\n                  content: classes.treeItemContent,\n                  expanded: classes.treeItemExpanded,\n                  group: classes.treeItemGroup,\n                  label: classes.treeItemLabel,\n                }}\n                label={\n                  <Box\n                    onClick={() => {\n                      crossnoteContainer.addTabNode({\n                        type: \"tab\",\n                        component: \"Note\",\n                        config: {\n                          component: \"Note\",\n                          singleton: false,\n                          noteFilePath: note.filePath,\n                          notebookPath: props.notebook.dir,\n                          icon: getNoteIcon(note),\n                        },\n                        name: note.title,\n                      });\n                      props.onCloseDrawer();\n                    }}\n                    className={clsx(classes.treeItemLabelRoot)}\n                  >\n                    <span\n                      role=\"img\"\n                      className={clsx(classes.emojiIcon)}\n                      aria-label=\"quick-access\"\n                    >\n                      <Emoji emoji={getNoteIcon(note)} size={16}></Emoji>\n                    </span>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {note.title}\n                    </Typography>\n                    <Chip\n                      size={\"small\"}\n                      variant={\"outlined\"}\n                      style={{ marginRight: \"4px\" }}\n                      label={props.notebook.referenceMap.getReferredByNotesCount(\n                        note.filePath,\n                      )}\n                    ></Chip>\n                  </Box>\n                }\n              ></TreeItem>\n            );\n          })}\n          <TreeItem\n            nodeId={\"settings\"}\n            classes={{\n              root: classes.treeItemRoot,\n              content: classes.treeItemContent,\n              expanded: classes.treeItemExpanded,\n              group: classes.treeItemGroup,\n              label: classes.treeItemLabel,\n            }}\n            label={\n              <Box\n                onClick={() => setNotebookConfigurationDialogOpen(true)}\n                className={clsx(classes.treeItemLabelRoot)}\n              >\n                <span\n                  role=\"img\"\n                  className={clsx(classes.emojiIcon)}\n                  aria-label={t(\"general/Settings\")}\n                >\n                  <Emoji emoji={\":gear:\"} size={16}></Emoji>\n                </span>\n                <Typography className={clsx(classes.treeItemLabelText)}>\n                  {t(\"general/Settings\")}\n                </Typography>\n              </Box>\n            }\n          ></TreeItem>\n          {props.notebook.gitURL && (\n            <TreeItem\n              nodeId={\"upload\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() => setPushNotebookDialogOpen(true)}\n                  className={clsx(classes.treeItemLabelRoot)}\n                >\n                  <span\n                    role=\"img\"\n                    className={clsx(classes.emojiIcon)}\n                    aria-label={t(\"general/Upload\")}\n                  >\n                    <Emoji emoji={\":outbox_tray:\"} size={16}></Emoji>\n                  </span>\n                  <Tooltip title={t(\"general/upload-push\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/Upload\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {props.notebook.isLocal && (\n            <TreeItem\n              nodeId={\"reload\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() =>\n                    crossnoteContainer.refreshNotebook(props.notebook)\n                  }\n                  className={clsx(classes.treeItemLabelRoot)}\n                >\n                  <span\n                    role=\"img\"\n                    className={clsx(classes.emojiIcon)}\n                    aria-label={t(\"general/refresh\")}\n                  >\n                    <Emoji\n                      emoji={\":arrows_counterclockwise:\"}\n                      size={16}\n                    ></Emoji>\n                  </span>\n                  <Tooltip title={t(\"general/refresh\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/refresh\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {props.notebook.gitURL && (\n            <TreeItem\n              nodeId={\"download\"}\n              classes={{\n                root: classes.treeItemRoot,\n                content: classes.treeItemContent,\n                expanded: classes.treeItemExpanded,\n                group: classes.treeItemGroup,\n                label: classes.treeItemLabel,\n              }}\n              label={\n                <Box\n                  onClick={() => {\n                    if (\n                      crossnoteContainer.isPullingNotebook ||\n                      crossnoteContainer.isPushingNotebook\n                    ) {\n                      return;\n                    }\n                    crossnoteContainer\n                      .pullNotebook({\n                        notebook: props.notebook,\n                        onAuthFailure: () => {\n                          new Noty({\n                            type: \"error\",\n                            text: t(\"error/authentication-failed\"),\n                            layout: \"topRight\",\n                            theme: \"relax\",\n                            timeout: 5000,\n                          }).show();\n                        },\n                      })\n                      .then(() => {\n                        new Noty({\n                          type: \"success\",\n                          text: t(\"success/notebook-downloaded\"),\n                          layout: \"topRight\",\n                          theme: \"relax\",\n                          timeout: 2000,\n                        }).show();\n                      })\n                      .catch((error) => {\n                        console.log(error);\n                        new Noty({\n                          type: \"error\",\n                          text: t(\"error/failed-to-download-notebook\"),\n                          layout: \"topRight\",\n                          theme: \"relax\",\n                          timeout: 2000,\n                        }).show();\n                      });\n                  }}\n                  className={clsx(\n                    classes.treeItemLabelRoot,\n                    crossnoteContainer.isPullingNotebook ||\n                      crossnoteContainer.isPushingNotebook\n                      ? classes.disabled\n                      : null,\n                  )}\n                >\n                  <span\n                    role=\"img\"\n                    className={clsx(classes.emojiIcon)}\n                    aria-label={t(\"general/Download\")}\n                  >\n                    <Emoji emoji={\":inbox_tray:\"} size={16}></Emoji>\n                  </span>\n                  <Tooltip title={t(\"general/download-pull\")}>\n                    <Typography className={clsx(classes.treeItemLabelText)}>\n                      {t(\"general/Download\")}\n                    </Typography>\n                  </Tooltip>\n                </Box>\n              }\n            ></TreeItem>\n          )}\n          {/*<TreeItem\n          nodeId={\"conflicted-notes\"}\n          classes={{\n            root: classes.treeItemRoot,\n            content: classes.treeItemContent,\n            expanded: classes.treeItemExpanded,\n            group: classes.treeItemGroup,\n            label: classes.treeItemLabel,\n          }}\n          label={\n            <Box\n              onClick={() => {\n                crossnoteContainer.addTabNode({\n                  type: \"tab\",\n                  component: \"Conflicted\",\n                  id: \"Conflicted: \" + props.notebook.dir,\n                  name: t(\"general/conflicted\"),\n                  config: {\n                    singleton: true,\n                    notebook: props.notebook,\n                  },\n                });\n              }}\n              className={clsx(classes.treeItemLabelRoot)}\n            >\n              <span role=\"img\" aria-label=\"conflicted-notes\">\n                {\"\"}\n              </span>\n              <Typography className={clsx(classes.treeItemLabelText)}>\n                {t(\"general/conflicted\")}\n              </Typography>\n            </Box>\n          }\n        ></TreeItem>\n        */}\n        </TreeItem>\n      </TreeView>\n      <ConfigureNotebookDialog\n        open={notebookConfigurationDialogOpen}\n        onClose={() => setNotebookConfigurationDialogOpen(false)}\n        notebook={props.notebook}\n      ></ConfigureNotebookDialog>\n      <PushNotebookDialog\n        notebook={props.notebook}\n        open={pushNotebookDialogOpen}\n        onClose={() => setPushNotebookDialogOpen(false)}\n      ></PushNotebookDialog>\n    </React.Fragment>\n  );\n}\n","import {\n  Avatar,\n  Badge,\n  Box,\n  CircularProgress,\n  CssBaseline,\n  Divider,\n  Drawer,\n  Fab,\n  Hidden,\n  IconButton,\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemSecondaryAction,\n  ListItemText,\n  Tooltip,\n} from \"@material-ui/core\";\nimport {\n  createStyles,\n  fade,\n  makeStyles,\n  Theme,\n  useTheme,\n} from \"@material-ui/core/styles\";\nimport clsx from \"clsx\";\nimport Identicon from \"identicon.js\";\nimport { sha256 } from \"js-sha256\";\nimport {\n  Bell,\n  Cog as SettingsIcon,\n  Menu,\n  Notebook,\n  PlusCircleOutline,\n} from \"mdi-material-ui\";\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport AddNotebookDialog from \"../components/AddNotebookDialog\";\nimport { AuthDialog } from \"../components/AuthDialog\";\nimport LanguageSelectorDialog from \"../components/LanguageSelectorDialog\";\nimport { MainPanel } from \"../components/MainPanel\";\nimport NotebookTreeView from \"../components/NotebookTreeView\";\nimport { CloudContainer } from \"../containers/cloud\";\nimport { CrossnoteContainer, HomeSection } from \"../containers/crossnote\";\nimport { globalContainers } from \"../containers/global\";\nimport { SettingsContainer } from \"../containers/settings\";\nimport { getNoteIcon } from \"../lib/note\";\nconst is = require(\"is_js\");\n\nconst drawerWidth = 200;\nconst notesPanelWidth = 350;\nconst notesPanelMinWidth = 220;\nconst notesPanelMaxWidth = 400;\nconst useStyles = makeStyles((theme: Theme) =>\n  createStyles({\n    page: {\n      display: \"flex\",\n      width: \"100%\",\n      height: \"100%\",\n    },\n    appBar: {\n      zIndex: theme.zIndex.drawer + 1,\n      boxShadow: \"none\",\n    },\n    toolBar: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      justifyContent: \"space-between\",\n    },\n    search: {\n      \"position\": \"relative\",\n      \"borderRadius\": theme.shape.borderRadius,\n      \"backgroundColor\": fade(theme.palette.common.white, 0.15),\n      \"&:hover\": {\n        backgroundColor: fade(theme.palette.common.white, 0.25),\n      },\n      \"marginRight\": theme.spacing(2),\n      \"marginLeft\": 0,\n      \"width\": \"100%\",\n      [theme.breakpoints.up(\"sm\")]: {\n        marginLeft: theme.spacing(3),\n        width: \"auto\",\n      },\n    },\n    searchIcon: {\n      width: theme.spacing(7),\n      height: \"100%\",\n      position: \"absolute\",\n      pointerEvents: \"none\",\n      display: \"flex\",\n      alignItems: \"center\",\n      justifyContent: \"center\",\n    },\n    inputRoot: {\n      color: \"inherit\",\n    },\n    inputInput: {\n      padding: theme.spacing(1, 1, 1, 7),\n      transition: theme.transitions.create(\"width\"),\n      width: \"100%\",\n      [theme.breakpoints.up(\"md\")]: {\n        width: 200,\n      },\n    },\n    displayNone: {\n      display: \"none\",\n    },\n    drawer: {\n      [theme.breakpoints.up(\"sm\")]: {\n        width: drawerWidth,\n        flexShrink: 0,\n      },\n    },\n    drawerPaper: {\n      width: drawerWidth,\n      backgroundColor: theme.palette.background.default,\n      display: \"flex\",\n      flexDirection: \"column\",\n      justifyContent: \"space-between\",\n      overflow: \"hidden\",\n    },\n    notebooksSection: {\n      overflowY: \"auto\",\n    },\n    controllersSection: {\n      // flex: 1,\n    },\n    listItemIcon: {\n      color: theme.palette.text.secondary,\n    },\n    avatar: {\n      width: \"24px\",\n      height: \"24px\",\n      borderRadius: \"4px\",\n    },\n    selectedSection: {\n      backgroundColor: \"#ccc\",\n    },\n    left: {\n      display: \"flex\",\n      flexDirection: \"row\",\n      alignItems: \"center\",\n    },\n    menuButton: {\n      marginRight: theme.spacing(2),\n      /*\n      [theme.breakpoints.up(\"sm\")]: {\n        display: \"none\"\n      }\n      */\n    },\n    notesPanel: {\n      maxWidth: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"xs\")]: {\n        width: \"100%\",\n      },\n    },\n    editorPanel: {\n      position: \"absolute\",\n      width: \"100%\",\n      height: \"100%\",\n      borderRadius: 0,\n      backgroundColor: theme.palette.background.default,\n      [theme.breakpoints.down(\"md\")]: {\n        // width: `calc(100% - ${notesPanelWidth}px)`,\n        // left: `${notesPanelWidth}px`\n      },\n      [theme.breakpoints.down(\"xs\")]: {\n        display: \"none\",\n        top: \"0\",\n        left: \"0\",\n        width: \"100%\",\n        height: \"100%\",\n      },\n    },\n    toolBarSpace: theme.mixins.toolbar,\n    fab: {\n      position: \"fixed\",\n      bottom: theme.spacing(2),\n      right: theme.spacing(2),\n      zIndex: 999,\n    },\n  }),\n);\n\ninterface QueryParams {\n  notebookID?: string;\n  repo?: string;\n  branch?: string;\n  filePath?: string;\n}\n\ninterface Props {\n  section: HomeSection;\n  queryParams: QueryParams;\n}\n\nexport function Home(props: Props) {\n  const classes = useStyles(props);\n  const theme = useTheme();\n  // const isMobile = useMediaQuery(theme.breakpoints.down(\"xs\"));\n  const [addNotebookDialogOpen, setAddNotebookDialogOpen] = useState<boolean>(\n    false,\n  );\n  const [addNotebookRepo, setAddNotebookRepo] = useState<string>(\"\");\n  const [addNotebookBranch, setAddNotebookBranch] = useState<string>(\"\");\n  const [\n    addNotebookDialogHideOpeningLocal,\n    setAddNotebookDialogHideOpeningLocal,\n  ] = useState<boolean>(false);\n\n  const [drawerOpen, setDrawerOpen] = useState<boolean>(false);\n  const { t } = useTranslation();\n  const crossnoteContainer = CrossnoteContainer.useContainer();\n  const cloudContainer = CloudContainer.useContainer();\n  const settingsContainer = SettingsContainer.useContainer();\n\n  // HACK: Register globalContainers for widgets use\n  globalContainers.cloudContainer = cloudContainer;\n  globalContainers.settingsContainer = settingsContainer;\n  globalContainers.crossnoteContainer = crossnoteContainer;\n\n  const toggleDrawer = useCallback(() => {\n    setDrawerOpen(!drawerOpen);\n  }, [drawerOpen]);\n\n  useEffect(() => {\n    if (!crossnoteContainer.initialized) {\n      return;\n    }\n    if (props.section === HomeSection.Notebooks) {\n      if (props.queryParams) {\n        if (props.queryParams.repo && props.queryParams.branch) {\n          const repo = decodeURIComponent(props.queryParams.repo || \"\");\n          const branch = decodeURIComponent(props.queryParams.branch || \"\");\n          const filePath = decodeURIComponent(props.queryParams.filePath || \"\");\n          const notebook = crossnoteContainer.notebooks.find(\n            (nb) => nb.gitURL === repo && nb.gitBranch === branch,\n          );\n          if (notebook) {\n            notebook\n              .refreshNotesIfNotLoaded({\n                dir: \"./\",\n                includeSubdirectories: true,\n              })\n              .then((notes) => {\n                if (filePath) {\n                  const note = notes[filePath];\n                  if (note) {\n                    crossnoteContainer.addTabNode({\n                      type: \"tab\",\n                      component: \"Note\",\n                      config: {\n                        component: \"Note\",\n\n                        singleton: false,\n                        noteFilePath: note.filePath,\n                        notebookPath: note.notebookPath,\n                        icon: getNoteIcon(note),\n                      },\n                      name: note.title,\n                    });\n                  } else {\n                    //note not found\n                    crossnoteContainer.addTabNode({\n                      type: \"tab\",\n                      component: \"Notes\",\n                      id: \"Notes: \" + notebook.dir,\n                      name: notebook.name,\n                      config: {\n                        component: \"Note\",\n\n                        singleton: true,\n                        notebookPath: notebook.dir,\n                        icon: \":notebook_with_decorative_cover:\",\n                      },\n                    });\n                  }\n                } else {\n                  crossnoteContainer.addTabNode({\n                    type: \"tab\",\n                    component: \"Notes\",\n                    id: \"Notes: \" + notebook.dir,\n                    name: notebook.name,\n                    config: {\n                      component: \"Notes\",\n                      singleton: true,\n                      notebookPath: notebook.dir,\n                      icon: \":notebook_with_decorative_cover:\",\n                    },\n                  });\n                }\n              })\n              .catch((error) => {\n                console.error(error);\n              });\n          } else {\n            // Show dialog\n            setAddNotebookRepo(repo);\n            setAddNotebookBranch(branch);\n            setAddNotebookDialogHideOpeningLocal(true);\n            setAddNotebookDialogOpen(true);\n          }\n        }\n      }\n    }\n  }, [props.section, props.queryParams, crossnoteContainer.initialized]);\n\n  useEffect(() => {\n    crossnoteContainer.setHomeSection(props.section);\n  }, [props.section]);\n\n  const drawer = (\n    <React.Fragment>\n      <Box\n        className={clsx(classes.notebooksSection)}\n        style={{\n          overflowY: crossnoteContainer.initialized ? \"auto\" : \"hidden\",\n        }}\n      >\n        <List disablePadding={true}>\n          <ListItem>\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <Notebook></Notebook>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Notebooks\")}></ListItemText>\n            <ListItemSecondaryAction style={{ right: \"0\" }}>\n              {crossnoteContainer.initialized && (\n                <Tooltip title={t(\"general/add-a-notebook\")}>\n                  <IconButton\n                    className={clsx(classes.listItemIcon)}\n                    onClick={() => {\n                      setAddNotebookDialogHideOpeningLocal(false);\n                      setAddNotebookDialogOpen(true);\n                    }}\n                  >\n                    <PlusCircleOutline></PlusCircleOutline>\n                  </IconButton>\n                </Tooltip>\n              )}\n            </ListItemSecondaryAction>\n          </ListItem>\n        </List>\n        <List disablePadding={true} style={{ marginBottom: theme.spacing(16) }}>\n          {crossnoteContainer.notebooks.map((notebook) => {\n            return (\n              <ListItem\n                disableGutters={true}\n                style={{ padding: \"0\" }}\n                key={notebook._id}\n              >\n                <NotebookTreeView\n                  notebook={notebook}\n                  onCloseDrawer={() => setDrawerOpen(false)}\n                ></NotebookTreeView>\n              </ListItem>\n            );\n          })}\n          {!crossnoteContainer.initialized && (\n            <ListItem>\n              <CircularProgress style={{ margin: \"0 auto\" }}></CircularProgress>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n\n      <Box className={clsx(classes.controllersSection)}>\n        <Divider></Divider>\n        <List disablePadding={true}>\n          {/*\n          <ListItem\n            button\n            onClick={() => {\n              browserHistory.push(`/explore`);\n              setDrawerOpen(false);\n            }}\n            style={{ display: is.online() ? \"flex\" : \"none\" }}\n          >\n            <ListItemIcon className={clsx(classes.listItemIcon)}>\n              <img\n                src=\"/logo.svg\"\n                style={{ width: \"28px\", height: \"28px\" }}\n                alt={\"Crossnote\"}\n              ></img>\n            </ListItemIcon>\n            <ListItemText primary={t(\"general/Explore\")}></ListItemText>\n          </ListItem>\n          */}\n          <ListItem\n            button\n            onClick={() => {\n              crossnoteContainer.addTabNode({\n                type: \"tab\",\n                component: \"Settings\",\n                name: t(\"general/Settings\"),\n                id: \"Settings\",\n                config: {\n                  component: \"Settings\",\n                  singleton: true,\n                  icon: \":gear:\",\n                },\n              });\n              setDrawerOpen(false);\n            }}\n          >\n            {cloudContainer.viewer ? (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <Avatar\n                  className={clsx(classes.avatar)}\n                  variant={\"rounded\"}\n                  src={\n                    cloudContainer.viewer.avatar ||\n                    \"data:image/png;base64,\" +\n                      new Identicon(\n                        sha256(\n                          cloudContainer.viewer &&\n                            cloudContainer.viewer.username,\n                        ),\n                        80,\n                      ).toString()\n                  }\n                ></Avatar>\n              </ListItemIcon>\n            ) : (\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                <SettingsIcon></SettingsIcon>\n              </ListItemIcon>\n            )}\n            <ListItemText primary={t(\"general/Settings\")}></ListItemText>\n          </ListItem>\n          {cloudContainer.loggedIn && (\n            <ListItem\n              button\n              onClick={() => {\n                crossnoteContainer.addTabNode({\n                  type: \"tab\",\n                  component: \"Notifications\",\n                  name: \" \" + t(\"general/Notifications\"),\n                  id: \"Notifications\",\n                  config: {\n                    component: \"Notifications\",\n                    singleton: true,\n                  },\n                });\n                setDrawerOpen(false);\n              }}\n            >\n              <ListItemIcon className={clsx(classes.listItemIcon)}>\n                {cloudContainer.viewer.notifications.totalCount > 0 ? (\n                  <Badge\n                    color={\"secondary\"}\n                    badgeContent={\n                      cloudContainer.viewer.notifications.totalCount || \"\"\n                    }\n                  >\n                    <Bell></Bell>\n                  </Badge>\n                ) : (\n                  <Bell></Bell>\n                )}\n              </ListItemIcon>\n              <ListItemText primary={t(\"general/Notifications\")}></ListItemText>\n            </ListItem>\n          )}\n        </List>\n      </Box>\n    </React.Fragment>\n  );\n\n  return (\n    <Box className={clsx(classes.page)}>\n      <CssBaseline></CssBaseline>\n      <nav className={clsx(classes.drawer, \"drawer\")}>\n        {/* The implementation can be swapped with js to avoid SEO duplication of links. */}\n        <Hidden smUp implementation=\"css\">\n          <Drawer\n            variant=\"temporary\"\n            open={drawerOpen}\n            onClose={toggleDrawer}\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            ModalProps={{\n              keepMounted: true, // Better open performance on mobile.\n            }}\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden xsDown implementation=\"css\">\n          <Drawer\n            classes={{\n              paper: classes.drawerPaper,\n            }}\n            variant=\"permanent\"\n            open\n          >\n            {drawer}\n          </Drawer>\n        </Hidden>\n        <Hidden smUp implementation=\"css\">\n          <Fab\n            color=\"primary\"\n            size=\"small\"\n            onClick={toggleDrawer}\n            className={clsx(classes.fab)}\n          >\n            <Menu></Menu>\n          </Fab>\n        </Hidden>\n      </nav>\n      <MainPanel toggleDrawer={toggleDrawer}></MainPanel>\n      <AddNotebookDialog\n        open={addNotebookDialogOpen}\n        onClose={() => {\n          setAddNotebookDialogOpen(false);\n          setAddNotebookDialogHideOpeningLocal(false);\n        }}\n        canCancel={true}\n        gitURL={addNotebookRepo}\n        gitBranch={addNotebookBranch}\n        hideOpeningLocal={addNotebookDialogHideOpeningLocal}\n      ></AddNotebookDialog>\n      <AuthDialog\n        open={cloudContainer.authDialogOpen}\n        onClose={() => cloudContainer.setAuthDialogOpen(false)}\n      ></AuthDialog>\n      <LanguageSelectorDialog></LanguageSelectorDialog>\n    </Box>\n  );\n}\n","import { ThemeProvider } from \"@material-ui/styles\";\nimport * as qs from \"qs\";\nimport React, { FC, useEffect } from \"react\";\nimport { useTranslation } from \"react-i18next\";\n// @ts-ignore\nimport PWAPrompt from \"react-ios-pwa-prompt\";\nimport { Route, Router, Switch } from \"react-router-dom\";\nimport \"./App.css\";\nimport { GitHubOAuthCallback } from \"./components/GitHubOAuthCallback\";\nimport ServiceWorkerWrapper from \"./components/ServiceWorkerWrapper\";\nimport { HomeSection } from \"./containers/crossnote\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport \"./editor\";\nimport { Home } from \"./pages/Home\";\nimport { browserHistory } from \"./utilities/history\";\nconst is = require(\"is_js\");\n\nconst App: FC = () => {\n  const { t } = useTranslation();\n  const settingsContainer = SettingsContainer.useContainer();\n  useEffect(() => {\n    const handler = (event: any) => {\n      try {\n        event.preventDefault();\n        event.prompt();\n        event.userChoice.then((choiceResult: any) => {\n          console.log(choiceResult);\n          localStorage.removeItem(\"layoutModel\");\n        });\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    window.addEventListener(\"beforeinstallprompt\", handler);\n    return () => {\n      window.removeEventListener(\"beforeinstallprompt\", handler);\n    };\n  }, []);\n  return (\n    <ThemeProvider theme={settingsContainer.theme.muiTheme}>\n      <div className=\"App\">\n        <Router history={browserHistory}>\n          <Switch>\n            {/*\n            <Route\n              path={`/explore`}\n              exact={true}\n              render={(props) => (\n                <Home section={HomeSection.Explore} queryParams={{}}></Home>\n              )}\n            ></Route>\n              */}\n            <Route\n              exact={true}\n              path={`/github_oauth_callback`}\n              render={(props) => (\n                <GitHubOAuthCallback\n                  code={\n                    (qs.parse(props.location.search.replace(/^\\?/, \"\"))[\n                      \"code\"\n                    ] as string) || \"\"\n                  }\n                ></GitHubOAuthCallback>\n              )}\n            ></Route>\n            <Route\n              path={`/`}\n              render={(props) => (\n                <Home\n                  section={HomeSection.Notebooks}\n                  queryParams={qs.parse(\n                    props.location.search.replace(/^\\?/, \"\"),\n                  )}\n                ></Home>\n              )}\n            ></Route>\n          </Switch>\n        </Router>\n        <ServiceWorkerWrapper></ServiceWorkerWrapper>\n        {is.safari() ? (\n          <PWAPrompt\n            copyTitle={t(\"react-ios-pwa-prompt/copy-title\")}\n            copyBody={t(\"react-ios-pwa-prompt/copy-body\")}\n            copyShareButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-share-button-label\",\n            )}\n            copyAddHomeButtonLabel={t(\n              \"react-ios-pwa-prompt/copy-add-home-button-label\",\n            )}\n            copyClosePrompt={t(\"general/cancel\")}\n          ></PWAPrompt>\n        ) : null}\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default App;\n","import \"@mdi/font/css/materialdesignicons.min.css\";\nimport \"noty/lib/noty.css\";\nimport \"noty/lib/themes/relax.css\";\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"typeface-noto-sans-sc\";\nimport \"typeface-roboto\";\nimport { Provider } from \"urql\";\nimport App from \"./App\";\nimport { CloudContainer } from \"./containers/cloud\";\nimport { CrossnoteContainer } from \"./containers/crossnote\";\nimport { NotificationsContainer } from \"./containers/notifications\";\nimport { SettingsContainer } from \"./containers/settings\";\nimport \"./i18n/i18n\";\nimport \"./index.css\";\nimport Crossnote from \"./lib/crossnote\";\nimport \"./lib/fs\";\nimport \"./themes/manager\";\nimport { GraphQLClient } from \"./utilities/client\";\n\n// Hack for GoldenLayout\nwindow[\"React\"] = React;\nwindow[\"ReactDOM\"] = ReactDOM;\n\ntry {\n  const crossnote = new Crossnote();\n  ReactDOM.render(\n    <Provider value={GraphQLClient}>\n      <CrossnoteContainer.Provider\n        initialState={{\n          crossnote: crossnote,\n        }}\n      >\n        <SettingsContainer.Provider initialState={{}}>\n          <CloudContainer.Provider initialState={{}}>\n            <NotificationsContainer.Provider initialState={{}}>\n              <App />\n            </NotificationsContainer.Provider>\n          </CloudContainer.Provider>\n        </SettingsContainer.Provider>\n      </CrossnoteContainer.Provider>\n    </Provider>,\n    document.getElementById(\"root\"),\n  );\n} catch (error) {\n  console.log(error);\n}\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.unregister();\n//// serviceWorker.register();\n","// Local File System API\n\nimport { Stats } from \"fs\";\nimport { randomID } from \"../utilities/utils\";\n\nexport interface ReadFileOptions {\n  encoding?: string;\n}\n\nexport async function verifyPermission(\n  fileHandle: FileSystemHandle,\n  mode?: FileSystemPermissionMode,\n) {\n  const options: FileSystemHandlePermissionDescriptor = {\n    mode,\n  };\n  // Check if permission was already granted. If so, return true.\n  if ((await fileHandle.queryPermission(options)) === \"granted\") {\n    return true;\n  }\n\n  // Request permission. If the user grants permission, return true.\n  if ((await fileHandle.requestPermission(options)) === \"granted\") {\n    return true;\n  }\n  // The user didn't grant permission, so return false.\n  return false;\n}\n\nexport default class LocalFileSystem {\n  private directoryHandleMap: { [key: string]: FileSystemDirectoryHandle } = {};\n  private _prefix: string;\n\n  constructor() {\n    // this._prefix = randomID(); // cause the caching error of the layout model\n    this._prefix = \"lfs\";\n  }\n\n  public async attachLocalDirectory(\n    rootDir: string,\n    directoryHandle: FileSystemDirectoryHandle,\n  ): Promise<string> {\n    if (!rootDir) {\n      rootDir = randomID();\n    }\n    if (!rootDir.startsWith(\"/\")) {\n      rootDir = \"/\" + rootDir;\n    }\n    if (!rootDir.startsWith(`/${this._prefix}`)) {\n      rootDir = `/${this._prefix}` + rootDir;\n    }\n    if (!rootDir.endsWith(\"/\")) {\n      rootDir += \"/\";\n    }\n    this.directoryHandleMap[rootDir] = directoryHandle;\n    return rootDir;\n  }\n\n  public isPathOfLocalFileSystem(path: string) {\n    return path.startsWith(\"/\" + this._prefix);\n  }\n\n  public async helper(\n    path: string,\n    mode: FileSystemPermissionMode = \"readwrite\",\n  ): Promise<[FileSystemDirectoryHandle, string[]]> {\n    const pathArr = path.replace(/\\/+$/, \"\").split(\"/\");\n    const rootDir = \"/\" + pathArr[1] + \"/\" + pathArr[2] + \"/\";\n    const directoryHandle = this.directoryHandleMap[rootDir];\n    await verifyPermission(directoryHandle, mode);\n    return [directoryHandle, pathArr.slice(3, pathArr.length)];\n  }\n\n  public async readFile(\n    path: string,\n    opts: ReadFileOptions = { encoding: \"\" },\n  ): Promise<string | Uint8Array> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      const file = await (\n        await directoryHandle.getFileHandle(pathArr[i])\n      ).getFile();\n      if (opts.encoding && opts.encoding.match(/^utf-?8$/i)) {\n        return file.text();\n      } else {\n        return new Uint8Array(await file.arrayBuffer());\n      }\n    }\n  }\n\n  public async writeFile(path: string, data: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i], {\n          create: true,\n        });\n      }\n      const fileHandle = await directoryHandle.getFileHandle(pathArr[i], {\n        create: true,\n      });\n      const writable = await fileHandle.createWritable();\n      await writable.write(data);\n      await writable.close();\n    }\n  }\n\n  public async readdir(path: string): Promise<string[]> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      const names = [];\n      for await (const entry of directoryHandle.values()) {\n        names.push(entry.name);\n      }\n      return names;\n    }\n  }\n\n  public async unlink(path: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      return await directoryHandle.removeEntry(pathArr[i], { recursive: true });\n    }\n  }\n\n  public async stats(path: string): Promise<Stats> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      let fHandle: FileSystemFileHandle = null;\n      let dHandle: FileSystemDirectoryHandle = null;\n      try {\n        dHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      } catch (error) {\n        try {\n          fHandle = await directoryHandle.getFileHandle(pathArr[i]);\n        } catch (error) {\n          throw error;\n        }\n      }\n      const stats: any = {\n        isDirectory: () => {\n          return !!dHandle;\n        },\n        isFile: () => {\n          return !!fHandle;\n        },\n        ctimeMs: fHandle ? (await fHandle.getFile()).lastModified : Date.now(),\n        mtimeMs: fHandle ? (await fHandle.getFile()).lastModified : Date.now(),\n      };\n      return stats;\n    }\n  }\n\n  public async mkdir(path: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      for (let i = 0; i < pathArr.length; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i], {\n          create: true,\n        });\n      }\n    }\n  }\n\n  public async exists(path: string): Promise<boolean> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"read\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        try {\n          directoryHandle = await directoryHandle.getDirectoryHandle(\n            pathArr[i],\n          );\n        } catch (error) {\n          return false;\n        }\n      }\n      try {\n        await directoryHandle.getFileHandle(pathArr[i]);\n        return true;\n      } catch (error) {\n        try {\n          await directoryHandle.getDirectoryHandle(pathArr[i]);\n          return true;\n        } catch (error) {\n          return false;\n        }\n      }\n    }\n  }\n\n  public async rmdir(path: string): Promise<void> {\n    let [directoryHandle, pathArr] = await this.helper(path, \"readwrite\");\n    if (!directoryHandle) {\n      throw new Error(`${path} is not valid`);\n    } else {\n      let i = 0;\n      for (; i < pathArr.length - 1; i++) {\n        directoryHandle = await directoryHandle.getDirectoryHandle(pathArr[i]);\n      }\n      return await directoryHandle.removeEntry(pathArr[i], { recursive: true });\n    }\n  }\n\n  public mkdirp = this.mkdir;\n\n  /**\n   * Assuming rename only file but not path\n   * @param oldPath\n   * @param newPath\n   */\n  public async rename(oldPath: string, newPath: string): Promise<void> {\n    const data = await this.readFile(oldPath, { encoding: \"utf-8\" }); // Could be buggy for binary file\n    await this.writeFile(newPath, data as any);\n    await this.unlink(oldPath);\n  }\n}\n","// @ts-ignore\nimport LightningFS from \"@isomorphic-git/lightning-fs\";\nimport { Stats } from \"fs\";\nimport * as path from \"path\";\nimport { randomID } from \"../utilities/utils\";\nimport LocalFileSystem, { ReadFileOptions } from \"./localFileSystem\";\n\ninterface AttachLocalDirectory {\n  id: string;\n  directoryHandle: FileSystemDirectoryHandle;\n}\n\nclass FileSystem {\n  private fs: any;\n  private lfs: LocalFileSystem;\n\n  public readFile: (\n    path: string,\n    opts?: ReadFileOptions,\n  ) => Promise<string | Uint8Array>;\n  public writeFile: (path: string, data: string) => Promise<void>;\n  public readdir: (path: string) => Promise<string[]>;\n  public unlink: (path: string) => Promise<void>;\n  public stats: (path: string) => Promise<Stats>;\n  public mkdir: (path: string) => Promise<void>;\n  public exists: (path: string) => Promise<boolean>;\n  public rename: (oldPath: string, newPath: string) => Promise<void>;\n  public rmdir: (path: string) => Promise<void>;\n  public mkdirp: (path: string) => Promise<void>;\n\n  constructor(fs: any) {\n    this.fs = fs;\n    this.lfs = new LocalFileSystem();\n    this.setUpFSMethods();\n  }\n\n  public async attachLocalDirectory({\n    id = randomID(),\n    directoryHandle,\n  }: AttachLocalDirectory) {\n    return await this.lfs.attachLocalDirectory(id, directoryHandle);\n  }\n\n  public async requestPermission(\n    path: string,\n    mode: FileSystemPermissionMode = \"readwrite\",\n  ) {\n    await this.lfs.helper(path, mode);\n  }\n\n  public isPathOfLocalFileSystem(path: string) {\n    return this.lfs.isPathOfLocalFileSystem(path);\n  }\n\n  private setUpFSMethods() {\n    this.readFile = (path: string, opts?: any) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.readFile(path, opts);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.readFile(path, opts, (error: Error, data: string) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve(data);\n            }\n          });\n        });\n      }\n    };\n    this.writeFile = (path: string, data: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.writeFile(path, data);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.writeFile(\n            path,\n            data,\n            { encoding: \"utf8\" },\n            (error: Error) => {\n              if (error) {\n                return reject(error);\n              } else {\n                return resolve();\n              }\n            },\n          );\n        });\n      }\n    };\n    this.readdir = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.readdir(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.readdir(path, (error: Error, files: string[]) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve(files);\n            }\n          });\n        });\n      }\n    };\n    this.unlink = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.unlink(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.unlink(path, (error: Error) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve();\n            }\n          });\n        });\n      }\n    };\n    this.stats = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.stats(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.stat(path, (error: Error, stats: Stats) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve(stats);\n            }\n          });\n        });\n      }\n    };\n    this.mkdir = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.mkdir(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.mkdir(path, \"0777\", (error: Error) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve();\n            }\n          });\n        });\n      }\n    };\n    this.exists = (path: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(path)) {\n        return this.lfs.exists(path);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.stat(path, (error: Error, stats: Stats) => {\n            if (error) {\n              return resolve(false);\n            } else {\n              return resolve(true);\n            }\n          });\n        });\n      }\n    };\n    const rename = async (oldPath: string, newPath: string): Promise<void> => {\n      const stats = await this.stats(oldPath);\n      if (stats.isDirectory()) {\n        await this.mkdirp(newPath);\n      } else {\n        await this.mkdirp(path.dirname(newPath));\n      }\n\n      if (this.lfs.isPathOfLocalFileSystem(newPath)) {\n        return this.lfs.rename(oldPath, newPath);\n      } else {\n        return new Promise((resolve, reject) => {\n          this.fs.rename(oldPath, newPath, (error: Error) => {\n            if (error) {\n              return reject(error);\n            } else {\n              return resolve();\n            }\n          });\n        });\n      }\n    };\n    this.rename = async (oldPath: string, newPath: string) => {\n      const oldPathStat = await this.stats(oldPath);\n      let newPathStat: Stats;\n      if (await this.exists(newPath)) {\n        newPathStat = await this.stats(newPath);\n      } else {\n        newPathStat = null;\n      }\n      if (\n        oldPathStat.isDirectory() ||\n        (newPathStat && newPathStat.isDirectory())\n      ) {\n        const files = await this.readdir(oldPath);\n        // const promises = []; // <= It seems to cause bug if run parallel\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const filePath = path.resolve(oldPath, file);\n          const stats = await this.stats(filePath);\n          if (stats.isDirectory()) {\n            await this.rename(filePath, path.resolve(newPath, file));\n          } else {\n            await rename(filePath, path.resolve(newPath, file));\n          }\n        }\n        // await Promise.all(promises);\n        await this.rmdir(oldPath);\n      } else {\n        await rename(oldPath, newPath);\n      }\n    };\n    const rmdir = (path: string): Promise<void> => {\n      return new Promise((resolve, reject) => {\n        this.fs.rmdir(path, (error: Error) => {\n          if (error) {\n            return reject(error);\n          } else {\n            return resolve();\n          }\n        });\n      });\n    };\n    // Remove the directory recursively\n    this.rmdir = async (dirPath: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(dirPath)) {\n        return this.lfs.rmdir(dirPath);\n      } else {\n        const files = await this.readdir(dirPath);\n        const promises = [];\n        for (let i = 0; i < files.length; i++) {\n          const file = files[i];\n          const filePath = path.resolve(dirPath, file);\n          const stats = await this.stats(filePath);\n          if (stats.isDirectory()) {\n            promises.push(this.rmdir(filePath));\n          } else {\n            promises.push(this.unlink(filePath));\n          }\n        }\n        await Promise.all(promises);\n        await rmdir(dirPath);\n      }\n    };\n\n    this.mkdirp = async (dirPath: string) => {\n      if (this.lfs.isPathOfLocalFileSystem(dirPath)) {\n        return this.lfs.mkdir(dirPath);\n      } else {\n        if (await this.exists(dirPath)) {\n          return;\n        } else {\n          await this.mkdirp(path.dirname(dirPath));\n          await this.mkdir(dirPath);\n        }\n      }\n    };\n  }\n}\n\nexport const fs = new LightningFS(\"fs\");\nexport const pfs = new FileSystem(fs);\n(window as any)[\"pfs\"] = pfs;\n","// const loadLanguages = require(\"prismjs/components/\");\n// loadLanguages([\"python\"]);\n\nexport const TagStopRegExp = /[@#,.!$%^&*()[\\]-_+=~`<>?\\\\]/g;\nexport function getTags(markdown: string): string[] {\n  const tags = new Set(\n    markdown.match(\n      /(#([^#]+?)#[\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\])|(#[^\\s@#,.!$%^&*()[\\]-_+=~`<>?\\\\]+)/g,\n    ) || [],\n  );\n  return Array.from(tags).map(\n    (tag) => tag.replace(TagStopRegExp, \"\").trim(), // Don't remove \\s here\n  );\n}\n\nexport function sanitizeTag(tagName: string): string {\n  let tag = tagName.trim() || \"\";\n  return tag\n    .replace(/\\s+/g, \" \")\n    .replace(TagStopRegExp, \"\")\n    .split(\"/\")\n    .map((t) => t.trim())\n    .filter((x) => x.length > 0)\n    .join(\"/\");\n}\n\nexport function sanitizeNoteTitle(noteTitle: string): string {\n  return sanitizeTag(noteTitle);\n}\n\nexport interface MatterOutput {\n  data: any;\n  content: string;\n}\n\nexport function matter(markdown: string): MatterOutput {\n  let endFrontMatterOffset = 0;\n  let frontMatter = {};\n  if (\n    markdown.startsWith(\"---\") &&\n    /* tslint:disable-next-line:no-conditional-assignment */\n    (endFrontMatterOffset = markdown.indexOf(\"\\n---\")) > 0\n  ) {\n    const frontMatterString = markdown.slice(3, endFrontMatterOffset);\n    try {\n      frontMatter = (window as any)[\"YAML\"].parse(frontMatterString);\n    } catch (error) {}\n    markdown = markdown\n      .slice(endFrontMatterOffset + 4)\n      .replace(/^[ \\t]*\\n/, \"\");\n  }\n  return {\n    data: frontMatter,\n    content: markdown,\n  };\n}\n\nexport function matterStringify(markdown: string, frontMatter: any) {\n  frontMatter = frontMatter || {};\n  const yamlStr = (window as any)[\"YAML\"].stringify(frontMatter).trim();\n  if (yamlStr === \"{}\" || !yamlStr) {\n    return markdown;\n  } else {\n    return `---\n${yamlStr}\n---\n${markdown}`;\n  }\n}\n","import Token from \"markdown-it/lib/token\";\n\nexport interface Reference {\n  /**\n   * The id of the referenced element\n   */\n  elementId: string;\n  parentToken: Token;\n  token: Token;\n  text: string;\n  link: string;\n}\n\nexport class ReferenceMap {\n  public map: { [key: string]: { [key: string]: Reference[] } };\n  constructor() {\n    this.map = {};\n  }\n\n  public addReference(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n    reference?: Reference,\n  ) {\n    if (noteFilePath === referredByNoteFilePath && !reference) {\n      if (!(noteFilePath in this.map)) {\n        this.map[noteFilePath] = {\n          [referredByNoteFilePath]: [],\n        };\n      }\n      return;\n    }\n    if (!reference) {\n      return;\n    }\n    if (noteFilePath in this.map) {\n      const mentionedBys = this.map[noteFilePath];\n      if (referredByNoteFilePath in mentionedBys) {\n        mentionedBys[referredByNoteFilePath].push(reference);\n      } else {\n        mentionedBys[referredByNoteFilePath] = [reference];\n      }\n    } else {\n      this.map[noteFilePath] = {\n        [referredByNoteFilePath]: [reference],\n      };\n    }\n  }\n\n  public deleteReferences(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n  ) {\n    if (noteFilePath === referredByNoteFilePath) {\n      delete this.map[noteFilePath];\n      return;\n    }\n    if (noteFilePath in this.map) {\n      if (referredByNoteFilePath in this.map[noteFilePath]) {\n        delete this.map[noteFilePath][referredByNoteFilePath];\n        if (Object.keys(this.map[noteFilePath]).length === 0) {\n          delete this.map[noteFilePath];\n        }\n      }\n    }\n  }\n\n  public hasRelation(filePath1: string, filePath2: string) {\n    return (\n      (filePath1 in this.map && filePath2 in this.map[filePath1]) ||\n      (filePath2 in this.map && filePath1 in this.map[filePath2]) ||\n      filePath1 === filePath2\n    );\n  }\n\n  public getReferences(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n  ): Reference[] {\n    if (noteFilePath in this.map) {\n      if (referredByNoteFilePath in this.map[noteFilePath]) {\n        return this.map[noteFilePath][referredByNoteFilePath];\n      }\n    }\n    return [];\n  }\n\n  public noteHasReferences(filePath: string): boolean {\n    return filePath in this.map;\n  }\n\n  public getReferredByNotesCount(noteFilePath: string): number {\n    if (noteFilePath in this.map) {\n      let length = Object.keys(this.map[noteFilePath]).length;\n      if (noteFilePath in this.map[noteFilePath]) {\n        length -= 1;\n      }\n      return length;\n    } else {\n      return 0;\n    }\n  }\n}\n","import { uslug } from \"@0xgg/echomd/preview/heading-id-generator\";\nimport MiniSearch, { SearchOptions, SearchResult } from \"minisearch\";\n\nexport interface SearchDoc {\n  id: string;\n  title: string;\n  filePath: string;\n  aliases: string[];\n}\n\nexport default class Search {\n  public miniSearch: MiniSearch<SearchDoc>;\n\n  /**\n   * filePath -> SearchDoc\n   */\n  private _cache: { [key: string]: SearchDoc };\n  constructor() {\n    this.miniSearch = new MiniSearch<SearchDoc>({\n      fields: [\"title\", \"aliases\", \"filePath\"],\n      storeFields: [\"title\", \"aliases\", \"filePath\"],\n      extractField: (document, fieldName) => {\n        if (fieldName === \"aliases\") {\n          return document[\"aliases\"].join(\"|\");\n        } else {\n          return (document as any)[fieldName];\n        }\n      },\n      tokenize: (string) => {\n        return uslug(string, \" \").match(/([^\\x00-\\x7F]|\\w+)/g) || [];\n      },\n    });\n    this._cache = {};\n  }\n\n  add(filePath: string, title: string, aliases: string[] = []) {\n    if (!(filePath in this._cache)) {\n      const searchDoc = {\n        id: filePath + \"#\" + title,\n        filePath,\n        title,\n        aliases,\n      };\n      this.miniSearch.add(searchDoc);\n      this._cache[filePath] = searchDoc;\n    } else {\n      return;\n    }\n  }\n\n  remove(filePath: string) {\n    if (filePath in this._cache) {\n      const doc = this._cache[filePath];\n      if (doc) {\n        this.miniSearch.remove(doc);\n      }\n      delete this._cache[filePath];\n    }\n  }\n\n  search(queryString: string, options?: SearchOptions): SearchResult[] {\n    return this.miniSearch.search(queryString, options);\n  }\n\n  addAlias(filePath: string, alias: string) {\n    const searchDoc = this._cache[filePath];\n    if (!searchDoc) {\n      return;\n    }\n    this.remove(filePath);\n    this.add(filePath, searchDoc.title, searchDoc.aliases.concat(alias));\n  }\n\n  deleteAlias(filePath: string, alias: string) {\n    const searchDoc = this._cache[filePath];\n    if (!searchDoc) {\n      return;\n    }\n    this.remove(filePath);\n    this.add(\n      filePath,\n      searchDoc.title,\n      searchDoc.aliases.filter((a) => a !== alias),\n    );\n  }\n}\n","import { md } from \"@0xgg/echomd/preview\";\nimport { Mutex } from \"async-mutex\";\nimport * as git from \"isomorphic-git\";\nimport Token from \"markdown-it/lib/token\";\nimport * as path from \"path\";\n// import { isFileAnImage } from \"../utilities/image\";\nimport { matter, matterStringify } from \"../utilities/markdown\";\nimport { fs, pfs } from \"./fs\";\nimport { Mentions, Note, NoteConfig, Notes } from \"./note\";\nimport { Reference, ReferenceMap } from \"./reference\";\nimport Search from \"./search\";\n\n/**\n * Change \"createdAt\" to \"created\", and \"modifiedAt\" to \"modified\"\n * @param noteConfig\n */\nfunction formatNoteConfig(noteConfig: NoteConfig) {\n  const newObject: any = Object.assign({}, noteConfig);\n\n  newObject[\"created\"] = noteConfig.createdAt;\n  delete newObject[\"createdAt\"];\n\n  newObject[\"modified\"] = noteConfig.modifiedAt;\n  delete newObject[\"modifiedAt\"];\n\n  return newObject;\n}\n\ninterface RefreshNotesArgs {\n  dir: string;\n  includeSubdirectories?: boolean;\n  refreshRelations?: boolean;\n}\n\nexport class Notebook {\n  // basic info\n  public _id: string;\n  public dir: string;\n  public name: string;\n\n  // git\n  public gitURL: string;\n  public gitBranch: string;\n  public gitCorsProxy?: string;\n  public gitUsername?: string;\n  public gitPassword?: string;\n  public autoFetchPeriod: number; // in milliseconds\n  public fetchedAt: Date;\n  public remoteSha: string;\n  public localSha: string;\n\n  /**\n   * @param key: file path\n   */\n  public notes: Notes;\n\n  public isLocal: boolean;\n\n  private refreshNotesIfNotLoadedMutex: Mutex;\n  public hasLoadedNotes: boolean;\n\n  public referenceMap: ReferenceMap;\n\n  public search: Search;\n\n  constructor() {\n    this.notes = {};\n    this.isLocal = false;\n    this.hasLoadedNotes = false;\n    this.referenceMap = new ReferenceMap();\n    this.refreshNotesIfNotLoadedMutex = new Mutex();\n  }\n\n  public initSearch() {\n    this.search = new Search();\n  }\n\n  public noteHasReferences(filePath: string): boolean {\n    return this.referenceMap.noteHasReferences(filePath);\n  }\n\n  public async getReferredByNotes(filePath: string): Promise<Notes> {\n    if (filePath in this.referenceMap.map) {\n      const map = this.referenceMap.map[filePath];\n      const notes: Notes = {};\n      for (let rFilePath in map) {\n        if (rFilePath === filePath) {\n          // Don't include self\n          continue;\n        }\n        const note = await this.getNote(rFilePath);\n        if (note) {\n          notes[rFilePath] = note;\n        }\n      }\n      return notes;\n    } else {\n      return {};\n    }\n  }\n\n  public getReferences(\n    noteFilePath: string,\n    referredByNoteFilePath: string,\n  ): Reference[] {\n    return this.referenceMap.getReferences(\n      noteFilePath,\n      referredByNoteFilePath,\n    );\n  }\n\n  async processNoteMentionsAndMentionedBy(filePath: string) {\n    const note = await this.getNote(filePath);\n    if (!note) {\n      return;\n    }\n    // Get mentions\n    const tokens = md.parse(note.markdown, {});\n    const resolveLink = (link: string) => {\n      if (!link.endsWith(\".md\")) {\n        link = link + \".md\";\n      }\n      if (link.startsWith(\"/\")) {\n        return path.relative(this.dir, path.join(this.dir, \".\" + link));\n      } else {\n        return path.relative(\n          this.dir,\n          path.join(path.dirname(path.join(this.dir, note.filePath)), link),\n        );\n      }\n    };\n    const traverse = function (\n      tokens: Token[],\n      parentToken: Token,\n      results: Reference[],\n      level: number,\n    ): Reference[] {\n      for (let i = 0; i < tokens.length; i++) {\n        const token = tokens[i];\n        if (token.type === \"wikilink\") {\n          // TODO: Support normal links\n          const arr = token.content.split(\"|\");\n          const text = (arr.length > 1 ? arr[1] : arr[0]).trim();\n          let link = arr[0].trim();\n          if (link.match(/https?:\\/\\//)) {\n            // TODO: Ignore more protocols\n            continue;\n          }\n          // console.log(\"find link token: \", token, parentToken);\n          results.push({\n            elementId: token.attrGet(\"id\") || \"\",\n            text,\n            link: resolveLink(link),\n            parentToken,\n            token,\n          });\n        } else if (token.type === \"tag\") {\n          const text = token.content.trim();\n          const link = token.content.trim();\n          // console.log(\"find link token: \", token, parentToken);\n          results.push({\n            elementId: token.attrGet(\"id\") || \"\",\n            text,\n            link: resolveLink(link),\n            parentToken,\n            token,\n          });\n        } else if (\n          token.type === \"link_open\" &&\n          tokens[i + 1] &&\n          tokens[i + 1].type === \"text\"\n        ) {\n          if (token.attrs.length && token.attrs[0][0] === \"href\") {\n            const link = decodeURI(token.attrs[0][1]);\n            const text = tokens[i + 1].content.trim();\n            if (\n              link.match(/https?:\\/\\//) ||\n              !text.length ||\n              !link.endsWith(\".md\")\n            ) {\n              // TODO: Ignore more protocols\n              continue;\n            }\n            results.push({\n              elementId: token.attrGet(\"id\") || \"\",\n              text,\n              link: resolveLink(link),\n              parentToken,\n              token,\n            });\n          }\n        } else if (token.children && token.children.length) {\n          traverse(token.children, token, results, level + 1);\n        }\n      }\n      return results;\n    };\n\n    const references = traverse(tokens, null, [], 0);\n    const mentions: Mentions = {};\n    const oldMentions = note.mentions;\n\n    // Remove old references\n    for (let filePath in oldMentions) {\n      this.referenceMap.deleteReferences(filePath, note.filePath);\n    }\n\n    // Handle new references\n    for (let i = 0; i < references.length; i++) {\n      const { link } = references[i];\n      mentions[link] = true;\n      this.referenceMap.addReference(link, note.filePath, references[i]);\n    }\n\n    // Add self to reference map to declare the existence of the file itself\n    this.referenceMap.addReference(note.filePath, note.filePath, null);\n\n    // Update the mentions\n    note.mentions = mentions;\n  }\n\n  public async changeNoteFilePath(\n    oldFilePath: string,\n    newFilePath: string,\n  ): Promise<Note> {\n    newFilePath = newFilePath.replace(/^\\/+/, \"\");\n    if (!newFilePath.endsWith(\".md\")) {\n      newFilePath = newFilePath + \".md\";\n    }\n\n    await this.removeNoteRelations(oldFilePath);\n    this.search.remove(oldFilePath);\n\n    // git related works\n    const newDirPath = path.dirname(path.resolve(this.dir, newFilePath));\n    await pfs.mkdirp(newDirPath);\n\n    // TODO: Check if newFilePath already exists. If so don't overwrite\n    const exists = await pfs.exists(path.resolve(this.dir, newFilePath));\n    if (exists) {\n      throw new Error(\"error/target-file-already-exists\");\n    }\n\n    await pfs.rename(\n      path.resolve(this.dir, oldFilePath),\n      path.resolve(this.dir, newFilePath),\n    );\n    if (!this.isLocal) {\n      await git.remove({\n        fs: fs,\n        dir: this.dir,\n        filepath: oldFilePath,\n      });\n      await git.add({\n        fs: fs,\n        dir: this.dir,\n        filepath: newFilePath,\n      });\n    }\n\n    return await this.getNote(newFilePath, true);\n  }\n\n  public async checkoutNote(note: Note): Promise<Note> {\n    try {\n      await git.checkout({\n        fs: fs,\n        dir: this.dir,\n        // ref: \"HEAD\"\n        // ref: note.notebook.gitBranch,\n        filepaths: [note.filePath],\n        force: true,\n      });\n      if (await pfs.exists(path.resolve(this.dir, note.filePath))) {\n        await git.add({\n          // .remove is wrong\n          fs: fs,\n          dir: this.dir,\n          filepath: note.filePath,\n        });\n      }\n      return await this.getNote(note.filePath, true);\n    } catch (error) {\n      return null;\n    }\n  }\n\n  public async getNote(\n    filePath: string,\n    refreshNoteRelations = false,\n  ): Promise<Note> {\n    if (!refreshNoteRelations && filePath in this.notes) {\n      return this.notes[filePath];\n    }\n    const absFilePath = path.resolve(this.dir, filePath);\n    let stats;\n    try {\n      stats = await pfs.stats(absFilePath);\n    } catch (error) {\n      return null;\n    }\n    if (stats.isFile() && filePath.endsWith(\".md\")) {\n      let markdown = (await pfs.readFile(absFilePath, {\n        encoding: \"utf8\",\n      })) as string;\n\n      // Read the noteConfig, which is like <!-- note {...} --> at the end of the markdown file\n      let noteConfig: NoteConfig = {\n        createdAt: new Date(stats.ctimeMs),\n        modifiedAt: new Date(stats.mtimeMs),\n        aliases: [],\n      };\n\n      try {\n        const data = matter(markdown);\n        const frontMatter: any = Object.assign({}, data.data);\n\n        // New note config design in beta 3\n        if (data.data[\"created\"]) {\n          noteConfig.createdAt = new Date(data.data[\"created\"]);\n          delete frontMatter[\"created\"];\n        }\n        if (data.data[\"modified\"]) {\n          noteConfig.modifiedAt = new Date(data.data[\"modified\"]);\n          delete frontMatter[\"modified\"];\n        }\n        if (data.data[\"pinned\"]) {\n          noteConfig.pinned = data.data[\"pinned\"];\n          delete frontMatter[\"pinned\"];\n        }\n        if (data.data[\"favorited\"]) {\n          noteConfig.favorited = data.data[\"favorited\"];\n          delete frontMatter[\"favorited\"];\n        }\n        if (data.data[\"icon\"]) {\n          noteConfig.icon = data.data[\"icon\"];\n          delete frontMatter[\"icon\"];\n        }\n        if (data.data[\"aliases\"]) {\n          const aliases = data.data[\"aliases\"] || [];\n          if (typeof aliases === \"string\") {\n            noteConfig.aliases = aliases.split(\",\").map((x) => x.trim());\n          } else {\n            noteConfig.aliases = aliases;\n          }\n          delete frontMatter[\"aliases\"];\n        }\n\n        // markdown = matter.stringify(data.content, frontMatter); // <= NOTE: I think gray-matter has bug. Although I delete \"note\" section from front-matter, it still includes it.\n        markdown = matterStringify(data.content, frontMatter);\n      } catch (error) {\n        // Do nothing\n        markdown =\n          \"Please fix front-matter. ( Don't forget to delete this line)\\n\\n\" +\n          markdown;\n      }\n\n      let oldMentions = {};\n      const oldNote = this.notes[filePath];\n      if (oldNote) {\n        oldMentions = oldNote.mentions;\n      }\n\n      // Create note\n      const note: Note = {\n        notebookPath: this.dir,\n        filePath: path.relative(this.dir, absFilePath),\n        title: path.basename(absFilePath).replace(/\\.md$/, \"\"),\n        markdown,\n        config: noteConfig,\n        mentions: oldMentions,\n      };\n\n      if (refreshNoteRelations) {\n        this.notes[note.filePath] = note;\n        this.search.add(note.filePath, note.title, note.config.aliases);\n        await this.processNoteMentionsAndMentionedBy(note.filePath);\n      }\n\n      return note;\n    } else {\n      return null;\n    }\n  }\n\n  public async refreshNotesIfNotLoaded({\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: RefreshNotesArgs): Promise<Notes> {\n    await this.refreshNotesIfNotLoadedMutex.runExclusive(async () => {\n      if (!this.hasLoadedNotes) {\n        await this.refreshNotes({\n          dir,\n          includeSubdirectories,\n          refreshRelations: true,\n        });\n        this.hasLoadedNotes = true;\n      }\n    });\n    return this.notes;\n  }\n\n  public async refreshNotes({\n    dir = \"./\",\n    includeSubdirectories = false,\n    refreshRelations = true,\n  }: RefreshNotesArgs): Promise<Notes> {\n    if (refreshRelations) {\n      this.notes = {};\n      this.referenceMap = new ReferenceMap();\n      this.initSearch();\n    }\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(this.dir, dir));\n    } catch (error) {\n      console.error(error);\n      files = [];\n    }\n    const refreshNotesPromises = [];\n\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n\n      // ignore several directories\n      if (file.match(/^(node_modules|\\.git)$/)) {\n        continue;\n      }\n\n      const absFilePath = path.resolve(this.dir, dir, file);\n      const note = await this.getNote(path.relative(this.dir, absFilePath));\n      if (note) {\n        this.notes[note.filePath] = note;\n        this.search.add(note.filePath, note.title, note.config.aliases);\n      }\n\n      let stats;\n      try {\n        stats = await pfs.stats(absFilePath);\n      } catch (error) {\n        console.error(error);\n      }\n      if (stats && stats.isDirectory() && includeSubdirectories) {\n        refreshNotesPromises.push(\n          this.refreshNotes({\n            dir: path.relative(this.dir, absFilePath),\n            includeSubdirectories,\n            refreshRelations: false,\n          }),\n        );\n      }\n    }\n    await Promise.all(refreshNotesPromises);\n\n    if (refreshRelations) {\n      for (let filePath in this.notes) {\n        await this.processNoteMentionsAndMentionedBy(filePath);\n      }\n    }\n\n    return this.notes;\n  }\n\n  public async writeNote(\n    filePath: string,\n    markdown: string,\n    noteConfig: NoteConfig,\n  ): Promise<Note> {\n    noteConfig.modifiedAt = new Date();\n    const oMarkdown = markdown;\n    try {\n      const data = matter(markdown);\n      if (data.data[\"note\"] && data.data[\"note\"] instanceof Object) {\n        noteConfig = Object.assign({}, noteConfig, data.data[\"note\"] || {});\n      }\n      const frontMatter = Object.assign(\n        data.data || {},\n        formatNoteConfig(noteConfig),\n      );\n      delete frontMatter[\"note\"];\n      const aliases = frontMatter[\"aliases\"];\n      if (!aliases || !aliases.length) {\n        delete frontMatter[\"aliases\"];\n      }\n      markdown = data.content;\n      markdown = matterStringify(markdown, frontMatter);\n    } catch (error) {\n      markdown = matterStringify(markdown, formatNoteConfig(noteConfig));\n    }\n\n    await pfs.writeFile(path.resolve(this.dir, filePath), markdown);\n    if (!this.isLocal) {\n      await git.add({\n        fs: fs,\n        dir: this.dir,\n        filepath: filePath,\n      });\n    }\n\n    const note = await this.getNote(filePath, true);\n    note.markdown = oMarkdown;\n    return note;\n  }\n\n  public async removeNoteRelations(filePath: string) {\n    const note = await this.getNote(filePath);\n    if (!note) {\n      return;\n    }\n    const mentions = note.mentions;\n    for (let filePath in mentions) {\n      this.referenceMap.deleteReferences(filePath, note.filePath);\n    }\n    delete this.notes[note.filePath];\n  }\n\n  public async deleteNote(filePath: string) {\n    if (await pfs.exists(path.resolve(this.dir, filePath))) {\n      await pfs.unlink(path.resolve(this.dir, filePath));\n      if (!this.isLocal) {\n        await git.remove({\n          fs: fs,\n          dir: this.dir,\n          filepath: filePath,\n        });\n      }\n      await this.removeNoteRelations(filePath);\n      this.search.remove(filePath);\n    }\n  }\n\n  public async duplicateNote(filePath: string) {\n    const oldNote = await this.getNote(filePath);\n    if (!oldNote) return;\n    const noteConfig = oldNote.config;\n    noteConfig.createdAt = new Date();\n    noteConfig.modifiedAt = new Date();\n    const newFilePath = filePath.replace(/\\.md$/, \".copy.md\");\n    await this.writeNote(newFilePath, oldNote.markdown, noteConfig);\n    return await this.getNote(newFilePath, true);\n  }\n}\n\nexport interface NotebookConfig {\n  repository: string;\n  branch: string;\n  author: string;\n  contributors: string[];\n}\n","// @ts-ignore\nimport diff3Merge from \"diff3\";\nimport * as git from \"isomorphic-git\";\nimport http from \"isomorphic-git/http/web\";\nimport * as path from \"path\";\nimport PouchDB from \"pouchdb\";\nimport PouchdbFind from \"pouchdb-find\";\nimport { randomID } from \"../utilities/utils\";\nimport { fs, pfs } from \"./fs\";\nimport { Notebook } from \"./notebook\";\n\n/*\nexport interface Attachment {\n  notebook: Notebook;\n  filePath: string;\n  content: string;\n  createdAt: Date;\n  modifiedAt: Date;\n}\n*/\n\ninterface CloneNotebookArgs {\n  name?: string;\n  corsProxy?: string;\n  gitURL: string;\n  branch?: string;\n  depth?: number;\n  username?: string;\n  password?: string;\n  rememberCredentials?: boolean;\n  directoryHandle?: FileSystemDirectoryHandle;\n}\n\n// type ListAttachmentsArgs = ListNotesArgs;\n\nexport interface PushNotebookArgs {\n  notebook: Notebook;\n  authorName?: string;\n  authorEmail?: string;\n  username?: string;\n  password?: string;\n  message?: string;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport interface PullNotebookArgs {\n  notebook: Notebook;\n  onProgress?: (progress: git.GitProgressEvent) => void;\n  onMessage?: (message: string) => void;\n  onAuthFailure?: (url: string) => void;\n  onAuthSuccess?: (url: string) => void;\n}\n\nexport type FetchNotebookArgs = PullNotebookArgs;\n\ninterface PullNotebookResult {\n  numConflicts: number;\n  cache: Cache;\n}\n\ntype Cache = {\n  [key: string]: {\n    status: string;\n    markdown: string;\n  };\n};\n\ninterface NotebookDBEntry {\n  // basic info\n  _id: string;\n  dir: string;\n  name: string;\n\n  // git\n  gitURL: string;\n  gitBranch: string;\n  gitCorsProxy?: string;\n  gitUsername?: string;\n  gitPassword?: string;\n  autoFetchPeriod: number; // in milliseconds\n  fetchedAt: Date;\n  remoteSha: string;\n  localSha: string;\n  directoryHandle?: FileSystemDirectoryHandle;\n}\n\nexport function convertNotebookToNotebookDBEntry(\n  notebook: Notebook,\n  directoryHandle: FileSystemDirectoryHandle,\n): NotebookDBEntry {\n  return {\n    _id: notebook._id,\n    dir: notebook.dir,\n    name: notebook.name,\n    gitURL: notebook.gitURL,\n    gitBranch: notebook.gitBranch,\n    gitCorsProxy: notebook.gitCorsProxy,\n    gitUsername: notebook.gitUsername,\n    gitPassword: notebook.gitPassword,\n    autoFetchPeriod: notebook.autoFetchPeriod,\n    fetchedAt: notebook.fetchedAt,\n    remoteSha: notebook.remoteSha,\n    localSha: notebook.localSha,\n    directoryHandle: directoryHandle,\n  };\n}\n\nexport default class Crossnote {\n  private notebookDB: PouchDB.Database<NotebookDBEntry>;\n\n  constructor() {\n    PouchDB.plugin(PouchdbFind);\n    this.notebookDB = new PouchDB(\"notebooks\");\n    this.notebookDB.createIndex({\n      index: {\n        fields: [\"gitURL\"],\n      },\n    });\n  }\n\n  public async addNotebook({\n    name = \"\",\n    corsProxy = \"\",\n    gitURL = \"\",\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 3,\n    rememberCredentials = false,\n    directoryHandle = null,\n  }: CloneNotebookArgs) {\n    if (gitURL) {\n      return await this.cloneNotebook({\n        name,\n        corsProxy,\n        gitURL,\n        branch,\n        username,\n        password,\n        depth,\n        rememberCredentials,\n      });\n    } else {\n      const _id = randomID();\n      let dir = `/notebooks/${_id}`;\n      if (directoryHandle) {\n        dir = (\n          await pfs.attachLocalDirectory({ id: _id, directoryHandle })\n        ).replace(/\\/+$/, \"\");\n      }\n\n      const notebook = new Notebook();\n      notebook._id = _id;\n      notebook.dir = dir;\n      notebook.name = directoryHandle\n        ? directoryHandle.name.trim()\n        : name.trim() || \"Unnamed\";\n      notebook.gitURL = gitURL.trim();\n      notebook.gitBranch = branch.trim() || \"master\";\n      notebook.gitCorsProxy = corsProxy.trim();\n      notebook.gitUsername = rememberCredentials ? username.trim() : \"\";\n      notebook.gitPassword = rememberCredentials ? password : \"\";\n      notebook.autoFetchPeriod = 0;\n      notebook.fetchedAt = new Date();\n      notebook.remoteSha = \"\";\n      notebook.localSha = \"\";\n\n      if (directoryHandle) {\n        notebook.isLocal = true;\n      }\n\n      if (!(await pfs.exists(\"/notebooks\"))) {\n        await pfs.mkdir(\"/notebooks\");\n      }\n      if (!directoryHandle && !(await pfs.exists(dir))) {\n        await pfs.mkdir(dir);\n      }\n\n      if (!directoryHandle) {\n        await git.init({\n          fs: fs,\n          dir,\n        });\n      }\n\n      // Save to DB\n      try {\n        await this.notebookDB.put(\n          convertNotebookToNotebookDBEntry(notebook, directoryHandle),\n        );\n      } catch (error) {\n        console.error(\"failed to save to database\");\n        // Failed to save to DB\n        if (!directoryHandle) {\n          await pfs.rmdir(dir);\n        }\n      }\n\n      return notebook;\n    }\n  }\n\n  public async cloneNotebook({\n    name = \"\",\n    corsProxy,\n    gitURL,\n    branch = \"master\",\n    username = \"\",\n    password = \"\",\n    depth = 10,\n    rememberCredentials = false,\n  }: CloneNotebookArgs): Promise<Notebook> {\n    if (!gitURL.match(/^https?:\\/\\//)) {\n      throw new Error(\"error/invalid-git-url-prefix\");\n    }\n\n    // Check if gitURL exists\n    /*\n    let exists = false;\n    try {\n      const notebooks = await this.notebookDB.find({\n        selector: {\n          gitURL: { $eq: gitURL }\n        }\n      });\n      if (notebooks.docs && notebooks.docs.length) {\n        exists = true;\n      }\n    } catch (error) {\n      exists = false;\n    }\n\n    if (exists) {\n      throw new Error(\"error/repository-already-cloned\");\n    }*/\n\n    const _id = randomID();\n    const dir = `/notebooks/${_id}`;\n\n    await git.clone({\n      fs: fs,\n      http,\n      dir,\n      corsProxy,\n      url: gitURL,\n      ref: branch.trim() || \"master\",\n      depth: depth,\n      singleBranch: true,\n      onAuth: (url, auth) => {\n        return {\n          username,\n          password,\n        };\n      },\n    });\n\n    const sha = await this.getGitSHA(\n      dir,\n      `origin/${branch.trim() || \"master\"}`,\n    );\n\n    const notebook: Notebook = new Notebook();\n    notebook._id = _id;\n    notebook.dir = dir;\n    notebook.name = name || this.getDefaultNotebookNameFromGitURL(gitURL);\n    notebook.gitURL = gitURL;\n    notebook.gitBranch = branch.trim() || \"master\";\n    notebook.gitCorsProxy = corsProxy;\n    notebook.gitUsername = rememberCredentials ? username : \"\";\n    notebook.gitPassword = rememberCredentials ? password : \"\";\n    notebook.autoFetchPeriod = 3600000; // 60 minutes\n    notebook.fetchedAt = new Date();\n    notebook.localSha = sha;\n    notebook.remoteSha = sha;\n\n    // Save to DB\n    try {\n      await this.notebookDB.put(convertNotebookToNotebookDBEntry(notebook, null));\n    } catch (error) {\n      // Failed to save to DB\n      await pfs.rmdir(dir);\n    }\n\n    return notebook;\n  }\n\n  public async exportNotebookToJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async importNotebookFromJSON(notebook: Notebook): Promise<string> {\n    return \"\";\n  }\n\n  public async deleteNotebook(notebookID: string) {\n    const notebook = await this.notebookDB.get(notebookID);\n    if (!notebook.directoryHandle) {\n      await pfs.rmdir(notebook.dir);\n    }\n    await this.notebookDB.remove(notebook);\n  }\n  public async updateNotebook(notebook: Notebook) {\n    const nb = await this.notebookDB.get(notebook._id);\n    nb.dir = notebook.dir;\n    nb.name = notebook.name;\n    nb.gitURL = notebook.gitURL;\n    nb.gitBranch = notebook.gitBranch;\n    nb.gitCorsProxy = notebook.gitCorsProxy;\n    nb.gitUsername = notebook.gitUsername;\n    nb.gitPassword = notebook.gitPassword;\n    nb.autoFetchPeriod = notebook.autoFetchPeriod;\n    nb.fetchedAt = notebook.fetchedAt;\n    nb.remoteSha = notebook.remoteSha;\n    nb.localSha = notebook.localSha;\n    await this.notebookDB.put(nb, { force: true });\n  }\n\n  public async renameDirectory(\n    notebook: Notebook,\n    oldDirName: string,\n    newDirName: string,\n  ) {\n    await pfs.rename(\n      path.resolve(notebook.dir, oldDirName),\n      path.resolve(notebook.dir, newDirName),\n    );\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: oldDirName,\n    });\n    await git.add({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: newDirName || \".\",\n    });\n  }\n\n  public async deleteDirectory(notebook: Notebook, dirName: string) {\n    await pfs.rmdir(path.resolve(notebook.dir, dirName));\n    await git.remove({\n      fs: fs,\n      dir: notebook.dir,\n      filepath: dirName,\n    });\n  }\n\n  private async generateChangesCache(notebook: Notebook): Promise<Cache> {\n    const cache: Cache = {};\n    const createCache = async (stagedFiles: string[]) => {\n      for (let i = 0; i < stagedFiles.length; i++) {\n        if (stagedFiles[i] in cache) {\n          continue;\n        }\n        const status = await git.status({\n          fs: fs,\n          dir: notebook.dir,\n          filepath: stagedFiles[i],\n        });\n        if (status.match(/^\\*?(modified|added)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: (await pfs.readFile(\n              path.resolve(notebook.dir, stagedFiles[i]),\n              { encoding: \"utf8\" },\n            )) as string,\n          };\n        } else if (status.match(/^\\*?(deleted)/)) {\n          cache[stagedFiles[i]] = {\n            status,\n            markdown: \"\",\n          };\n        }\n      }\n    };\n\n    await createCache(\n      // Check previous staged file for `delete` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n        ref: \"HEAD\",\n      }),\n    );\n\n    await createCache(\n      // Check current staged file for `add` status\n      await git.listFiles({\n        fs: fs,\n        dir: notebook.dir,\n      }),\n    );\n\n    return cache;\n  }\n\n  public async pushNotebook({\n    notebook,\n    authorName = \"crossnote\",\n    authorEmail = \"anonymous@crossnote.com\",\n    username,\n    password,\n    message = \"doc: Updated docs\",\n    onProgress,\n    onMessage,\n    onAuthFailure,\n    onAuthSuccess,\n  }: PushNotebookArgs): Promise<null | git.PushResult> {\n    // Pull notebook first\n    const pullNotebookResult = await this.pullNotebook({\n      notebook,\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    if (pullNotebookResult.numConflicts > 0) {\n      throw new Error(\"error/please-resolve-conflicts\");\n    }\n\n    const localSha = notebook.localSha;\n\n    const sha = await git.commit({\n      fs: fs,\n      dir: notebook.dir,\n      author: {\n        name: authorName,\n        email: authorEmail,\n      },\n      message,\n    });\n\n    const restoreSHA = async () => {\n      const gitBranch = notebook.gitBranch || \"master\";\n      // Perform a soft reset\n      await pfs.writeFile(\n        path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n        localSha,\n      );\n    };\n\n    // console.log(sha);\n    const pushResult = await git.push({\n      fs: fs,\n      http,\n      onAuth: (url, auth) => {\n        return {\n          username: username, // || notebook.gitUsername,\n          password: password, // || notebook.gitPassword\n        };\n      },\n      onProgress: (progress) => {\n        if (onProgress) {\n          onProgress(progress);\n        }\n      },\n      onMessage: (message) => {\n        if (onMessage) {\n          onMessage(message);\n        }\n      },\n      onAuthFailure: (url, auth) => {\n        if (onAuthFailure) {\n          onAuthFailure(url);\n        }\n        restoreSHA();\n      },\n      onAuthSuccess: (url, auth) => {\n        if (onAuthSuccess) {\n          onAuthSuccess(url);\n        }\n      },\n      url: notebook.gitURL,\n      dir: notebook.dir,\n      ref: notebook.gitBranch,\n      corsProxy: notebook.gitCorsProxy,\n    });\n\n    // console.log(\"pushResult: \", pushResult);\n\n    if (pushResult.error) {\n      restoreSHA();\n    }\n\n    if (pushResult.ok) {\n      // Update notebook\n      notebook.fetchedAt = new Date();\n      notebook.localSha = sha;\n      notebook.remoteSha = sha;\n      await this.updateNotebook(notebook);\n    }\n    return pushResult;\n  }\n\n  public async getGitSHA(dir: string, ref: string = \"master\"): Promise<string> {\n    try {\n      let logs = await git.log({\n        fs: fs,\n        dir: dir,\n        ref: ref,\n        depth: 5,\n      });\n      if (logs.length > 0) {\n        return (logs && logs[0]).oid;\n      } else {\n        return \"\";\n      }\n    } catch (error) {\n      return \"\";\n    }\n  }\n\n  public async hardResetNotebook(notebook: Notebook, sha: string) {\n    await pfs.writeFile(\n      path.resolve(notebook.dir, `.git/refs/heads/${notebook.gitBranch}`),\n      sha,\n    );\n    await pfs.unlink(path.resolve(notebook.dir, `.git/index`));\n    await git.checkout({\n      dir: notebook.dir,\n      fs: fs,\n      ref: notebook.gitBranch || \"master\",\n    });\n  }\n\n  private async restoreFilesFromCache(\n    cache: Cache,\n    notebook: Notebook,\n  ): Promise<number> {\n    let numConflicts = 0;\n    // console.log(\"same\");\n    for (const filePath in cache) {\n      if (cache[filePath].status === \"deleted\") {\n        await notebook.deleteNote(filePath);\n        continue;\n      }\n      const markdown = cache[filePath].markdown;\n      const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n      await pfs.mkdirp(dirname);\n      await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n      await git.add({\n        fs: fs,\n        dir: notebook.dir,\n        filepath: filePath,\n      });\n      if (this.markdownHasConflicts(markdown)) {\n        numConflicts += 1;\n      }\n    }\n    return numConflicts;\n  }\n\n  public async pullNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: PullNotebookArgs): Promise<PullNotebookResult> {\n    // Stop using git.pull as merge will cause error\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      corsProxy: notebook.gitCorsProxy,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // NOTE: Seems like diff3 not working as I expected. Therefore I might create my own type of diff\n    const cache: {\n      [key: string]: {\n        status: string;\n        markdown: string;\n      };\n    } = await this.generateChangesCache(notebook);\n    const localSha = notebook.localSha;\n\n    // Save cache in case of system crash\n    localStorage.setItem(\n      `pending/pull/${notebook._id}`,\n      JSON.stringify({\n        cache,\n        localSha,\n      }),\n    );\n\n    // Perform a hard reset\n    const remoteSha = result.fetchHead;\n    await this.hardResetNotebook(notebook, remoteSha);\n\n    let numConflicts = 0;\n    if (localSha === remoteSha) {\n      // Restore from cache\n      numConflicts = await this.restoreFilesFromCache(cache, notebook);\n    } else {\n      // Check conflicted notes\n      // console.log(\"check conflicted\");\n      const LINEBREAKS = /^.*(\\r?\\n|$)/gm;\n      const markerSize = 7;\n      const ourName = \"ours\";\n      const theirName = \"theirs\";\n      // const baseName = \"base\";\n      for (const filePath in cache) {\n        const ourContent = cache[filePath].markdown;\n        if (await pfs.exists(path.resolve(notebook.dir, filePath))) {\n          let baseContent: string = \"\";\n          let theirContent: string = \"\";\n          try {\n            const baseContentBlobResult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: localSha,\n              filepath: filePath,\n            });\n            baseContent = Buffer.from(baseContentBlobResult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          try {\n            const theirContentBlobTresult = await git.readBlob({\n              fs: fs,\n              dir: notebook.dir,\n              oid: remoteSha,\n              filepath: filePath,\n            });\n            theirContent = Buffer.from(theirContentBlobTresult.blob).toString(\n              \"utf8\",\n            );\n          } catch (error) {}\n          // console.log(\"ourContent: \", ourContent);\n          // console.log(\"theirContent: \", theirContent);\n          // console.log(\"baseContent: \", baseContent);\n\n          // TODO: clean front-matter\n\n          // Refered from https://github.com/isomorphic-git/isomorphic-git/blob/4e66704d05042624bbc78b85ee5110d5ee7ec3e2/src/utils/mergeFile.js\n          const ours = ourContent.match(LINEBREAKS);\n          const base = baseContent.match(LINEBREAKS);\n          const theirs = theirContent.match(LINEBREAKS);\n\n          // Here we let the diff3 library do the heavy lifting.\n          const result = diff3Merge(ours, base, theirs);\n\n          // Here we note whether there are conflicts and format the results\n          let mergedText = \"\";\n          let hasConflict = false;\n          for (const item of result) {\n            if (item.ok) {\n              mergedText += item.ok.join(\"\");\n            }\n            if (item.conflict) {\n              hasConflict = true;\n              mergedText += `\\\\<${\"<\".repeat(markerSize - 1)} ${ourName}\\n`;\n              mergedText += item.conflict.a.join(\"\") + \"\\n\";\n              // if (format === \"diff3\") {\n              //mergedText += `\\\\|${\"|\".repeat(markerSize - 1)} ${baseName}\\n`;\n              //mergedText += item.conflict.o.join(\"\");\n              // }\n              mergedText += `\\\\=${\"=\".repeat(markerSize - 1)}\\n`;\n              mergedText += item.conflict.b.join(\"\") + \"\\n\";\n              mergedText += `\\\\>${\">\".repeat(markerSize - 1)} ${theirName}\\n`;\n            }\n          }\n          if (hasConflict) {\n            numConflicts += 1;\n          }\n\n          // console.log(\"mergedText: \", mergedText);\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), mergedText);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        } else {\n          const markdown = cache[filePath].markdown;\n          const dirname = path.dirname(path.resolve(notebook.dir, filePath));\n          await pfs.mkdirp(dirname);\n          await pfs.writeFile(path.resolve(notebook.dir, filePath), markdown);\n          await git.add({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: filePath,\n          });\n        }\n      }\n    }\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = remoteSha;\n    notebook.remoteSha = remoteSha;\n    await this.updateNotebook(notebook);\n\n    localStorage.removeItem(`pending/pull/${notebook._id}`);\n\n    return {\n      numConflicts,\n      cache,\n    };\n  }\n\n  public async fetchNotebook({\n    notebook,\n    onProgress,\n    onAuthFailure,\n    onAuthSuccess,\n    onMessage,\n  }: FetchNotebookArgs): Promise<boolean> {\n    const localSha = notebook.localSha;\n    const result = await git.fetch({\n      fs: fs,\n      http,\n      dir: notebook.dir,\n      singleBranch: true,\n      tags: false,\n      depth: 1,\n      corsProxy: notebook.gitCorsProxy,\n      url: notebook.gitURL,\n      ref: notebook.gitBranch || \"master\",\n      onAuth: (url, auth) => {\n        return {\n          username: notebook.gitUsername,\n          password: notebook.gitPassword,\n        };\n      },\n      onProgress,\n      onAuthFailure,\n      onAuthSuccess,\n      onMessage,\n    });\n\n    // Update notebook\n    notebook.fetchedAt = new Date();\n    notebook.localSha = localSha;\n    notebook.remoteSha = result.fetchHead;\n    await this.updateNotebook(notebook);\n\n    return localSha !== result.fetchHead;\n  }\n\n  public markdownHasConflicts(markdown: string): boolean {\n    const m1 = markdown.match(/^\\\\<+\\s/gm);\n    const m2 = markdown.match(/^\\\\=+\\s/gm);\n    const m3 = markdown.match(/^\\\\>+\\s/gm);\n    return m1 && m1.length > 0 && m2 && m2.length > 0 && m3 && m3.length > 0;\n  }\n\n  public async listNotebooks(): Promise<Notebook[]> {\n    const notebookEntries = (\n      await this.notebookDB.find({\n        selector: {\n          gitURL: { $gt: null },\n        },\n      })\n    ).docs;\n    const notebooks: Notebook[] = [];\n    for (let i = 0; i < notebookEntries.length; i++) {\n      const n = notebookEntries[i];\n      const notebook = new Notebook();\n      notebook._id = n._id;\n      notebook.dir = n.dir;\n      notebook.name = n.name;\n      notebook.gitURL = n.gitURL;\n      notebook.gitBranch = n.gitBranch;\n      notebook.gitCorsProxy = n.gitCorsProxy;\n      notebook.gitUsername = n.gitUsername;\n      notebook.gitPassword = n.gitPassword;\n      notebook.autoFetchPeriod = n.autoFetchPeriod;\n      notebook.fetchedAt = n.fetchedAt;\n      notebook.remoteSha = n.remoteSha;\n      notebook.localSha = n.localSha;\n\n      if (n.directoryHandle) {\n        // local notebook\n        const dir = (\n          await pfs.attachLocalDirectory({\n            id: n._id,\n            directoryHandle: n.directoryHandle,\n          })\n        ).replace(/\\/+$/, \"\");\n        notebook.dir = dir;\n        notebook.isLocal = true;\n      }\n\n      notebooks.push(notebook);\n    }\n\n    const promises = notebooks.map((notebook, i) => {\n      return (async (i: number) => {\n        const notebook = notebooks[i];\n        notebook.fetchedAt = new Date(notebook.fetchedAt || 0);\n        if (notebook.gitURL.trim().length <= 0) {\n          // no remote set\n          return;\n        }\n        if (typeof notebook.autoFetchPeriod === \"undefined\") {\n          notebook.autoFetchPeriod = 3600000; // 60 minutes\n        }\n        if (typeof notebook.localSha === \"undefined\") {\n          notebook.localSha = await this.getGitSHA(\n            notebook.dir,\n            `origin/${notebook.gitBranch}`,\n          );\n        }\n        if (typeof notebook.remoteSha === \"undefined\") {\n          notebook.remoteSha = notebook.localSha;\n        }\n        const gitBranch = notebook.gitBranch || \"master\";\n        const sha = notebook.localSha || \"\";\n        try {\n          // Perform a soft reset\n          await pfs.writeFile(\n            path.resolve(notebook.dir, `.git/refs/heads/${gitBranch}`),\n            sha,\n          );\n\n          // Restore cached files from failed `git` pull event\n          const pendingPull = localStorage.getItem(\n            `pending/pull/${notebook._id}`,\n          );\n          if (pendingPull) {\n            try {\n              await this.restoreFilesFromCache(\n                JSON.parse(pendingPull).cache,\n                notebook,\n              );\n            } catch (error) {}\n            localStorage.removeItem(`pending/pull/${notebook._id}`);\n          }\n\n          const status = await git.status({\n            fs: fs,\n            dir: notebook.dir,\n            filepath: \".\",\n          });\n\n          // check: absent, deleted, undeleted\n          if (status.match(/(absent|deleted)/) || pendingPull) {\n            // NOTE: Seems like there is a bug somewhere that caused all files to become *undeleted\n            // So we run git.add again.\n            await git.add({\n              fs: fs,\n              dir: notebook.dir,\n              filepath: \".\",\n            });\n          }\n        } catch (error) {\n          notebooks[i] = null;\n        }\n      })(i);\n    });\n\n    await Promise.all(promises);\n\n    return notebooks\n      .filter((nb) => nb)\n      .sort((x, y) => x.name.localeCompare(y.name));\n  }\n\n  /*\n  public async listAttachments({\n    notebook,\n    dir = \"./\",\n    includeSubdirectories = false,\n  }: ListAttachmentsArgs): Promise<Attachment[]> {\n    let attachments: Attachment[] = [];\n    let files: string[] = [];\n    try {\n      files = await pfs.readdir(path.resolve(notebook.dir, dir));\n    } catch (error) {\n      files = [];\n    }\n    const listAttachmentsPromises = [];\n    for (let i = 0; i < files.length; i++) {\n      const file = files[i];\n      const absFilePath = path.resolve(notebook.dir, dir, file);\n      const stats = await pfs.stats(absFilePath);\n      if (\n        stats.isFile() &&\n        !absFilePath.endsWith(\".md\") &&\n        isFileAnImage(file) // TODO: We only support images for now. Supports other types of files in the future\n      ) {\n        const attachment: Attachment = {\n          notebook,\n          filePath: path.relative(notebook.dir, absFilePath),\n          content: isBinarySync(file)\n            ? \"\"\n            : ((await pfs.readFile(absFilePath, {\n                encoding: \"utf8\",\n              })) as string),\n          createdAt: new Date(stats.ctimeMs),\n          modifiedAt: new Date(stats.mtimeMs),\n        };\n        attachments.push(attachment);\n        if (isBinarySync(file)) {\n        } else {\n        }\n      }\n\n      if (stats.isDirectory() && file !== \".git\" && includeSubdirectories) {\n        listAttachmentsPromises.push(\n          this.listAttachments({\n            notebook,\n            dir: path.relative(notebook.dir, absFilePath),\n            includeSubdirectories,\n          }),\n        );\n      }\n    }\n\n    const res = await Promise.all(listAttachmentsPromises);\n    res.forEach((r) => {\n      attachments = attachments.concat(r);\n    });\n\n    return attachments;\n  }\n  */\n\n  private getDefaultNotebookNameFromGitURL(gitURL: string) {\n    const i = gitURL.lastIndexOf(\"/\");\n    return gitURL.slice(i + 1).replace(/\\.git/, \"\");\n  }\n\n  public async getStatus(notebookPath: string, filePath: string) {\n    return await git.status({\n      fs: fs,\n      dir: notebookPath,\n      filepath: filePath,\n    });\n  }\n}\n","import { PeerJSOption } from \"peerjs\";\nimport moment from \"moment\";\n\nexport function waitForTimeout(timeout: number): Promise<void> {\n  return new Promise((resolve, reject) => {\n    return setTimeout(() => {\n      return resolve();\n    }, timeout);\n  });\n}\n\nexport const UUIDNil = \"00000000-0000-0000-0000-000000000000\";\n\nexport const OneDay = 1000 * 60 * 60 * 24;\n\nexport function getGraphQLEndpoint() {\n  if (process.env.NODE_ENV === \"production\") {\n    return `https://crossnote.app/api/graphql`;\n  } else {\n    return `http://${window.location.hostname}:9999/graphql`;\n  }\n}\n\nexport function getPeerJSEndpoint(): PeerJSOption {\n  if (process.env.NODE_ENV === \"production\") {\n    return {\n      host: `crossnote.app`,\n      path: \"/peer\",\n      secure: true,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  } else {\n    return {\n      host: window.location.hostname,\n      port: 9000,\n      path: \"/peer\",\n      secure: false,\n      // config: { iceServers: [{ url: \"stun:stun.l.google.com:19302\" }] }\n    };\n  }\n}\n\nexport function getGitHubOAuthClientID() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"3dd81bb2c212b7749761\";\n  } else {\n    return \"c7477b9aa512785936e0\";\n  }\n}\n\nexport function getGitHubOAuthCallbackURL() {\n  if (process.env.NODE_ENV === \"production\") {\n    return \"https://crossnote.app/github_oauth_callback\";\n  } else {\n    return `http://${window.location.host}/github_oauth_callback`;\n  }\n}\n\nexport function startGitHubOAuth() {\n  window.open(\n    `https://github.com/login/oauth/authorize?client_id=${getGitHubOAuthClientID()}&redirect_uri=${encodeURIComponent(\n      getGitHubOAuthCallbackURL(),\n    )}`,\n    \"_self\",\n  );\n}\n\nexport const graphqlFetchContext = {\n  fetchOptions: {\n    headers: {\n      Authorization: `Bearer ${localStorage.getItem(\"token\")}`,\n    },\n  },\n};\nexport function formatDate(dateString: string) {\n  if (!dateString) return \"\";\n  const date = new Date(dateString);\n  const diff = Date.now() - date.getTime();\n  const passedTime = Math.abs(diff);\n\n  if (passedTime <= 1000 * 60 * 60 * 24) {\n    // within 24h\n    if (passedTime <= 1000 * 60 * 60) {\n      // within 1 hour\n      return (\n        (diff < 0 ? \"future \" : \"\") + Math.ceil(passedTime / (1000 * 60)) + \"m\"\n      );\n    } else {\n      return (\n        (diff < 0 ? \"future \" : \"\") +\n        Math.floor(passedTime / (1000 * 60 * 60)) +\n        \"h\"\n      );\n    }\n  } else {\n    const monthNamesShort = [\n      \"Jan\",\n      \"Feb\",\n      \"Mar\",\n      \"Apr\",\n      \"May\",\n      \"Jun\",\n      \"Jul\",\n      \"Aug\",\n      \"Sep\",\n      \"Oct\",\n      \"Nov\",\n      \"Dec\",\n    ];\n    return (\n      monthNamesShort[date.getMonth()] +\n      \" \" +\n      date.getDate() +\n      \" \" +\n      date.getFullYear()\n    );\n  }\n}\n\n// https://stackoverflow.com/questions/400212/how-do-i-copy-to-the-clipboard-in-javascript\nexport function copyToClipboard(text: string) {\n  if (\"clipboardData\" in window && (window as any).clipboardData.setData) {\n    // Internet Explorer-specific code path to prevent textarea being shown while dialog is visible.\n    return (window as any).setData(\"Text\", text);\n  } else if (\n    document.queryCommandSupported &&\n    document.queryCommandSupported(\"copy\")\n  ) {\n    var textarea = document.createElement(\"textarea\");\n    textarea.textContent = text;\n    textarea.style.position = \"fixed\"; // Prevent scrolling to bottom of page in Microsoft Edge.\n    document.body.appendChild(textarea);\n    textarea.select();\n    try {\n      return document.execCommand(\"copy\"); // Security exception may be thrown by some browsers.\n    } catch (ex) {\n      console.warn(\"Copy to clipboard failed.\", ex);\n      return false;\n    } finally {\n      document.body.removeChild(textarea);\n    }\n  }\n}\n\nexport function generateUUID() {\n  // Public Domain/MIT\n  var d = new Date().getTime(); //Timestamp\n  var d2 = (performance && performance.now && performance.now() * 1000) || 0; //Time in microseconds since page-load or 0 if unsupported\n  return \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, function (c) {\n    var r = Math.random() * 16; //random number between 0 and 16\n    if (d > 0) {\n      //Use timestamp until depleted\n      r = (d + r) % 16 | 0;\n      d = Math.floor(d / 16);\n    } else {\n      //Use microseconds since page-load if supported\n      r = (d2 + r) % 16 | 0;\n      d2 = Math.floor(d2 / 16);\n    }\n    return (c === \"x\" ? r : (r & 0x3) | 0x8).toString(16);\n  });\n}\n\nexport class RandomColorGenerator {\n  private cache: { [key: string]: string } = {};\n  private hashCode(s: string): number {\n    let n = s.split(\"\").reduce(function (a, b) {\n      a = (a << 5) - a + b.charCodeAt(0);\n      return a & a;\n    }, 0);\n    n = Math.abs(n);\n    const x = \"0.\" + n.toString();\n    return parseFloat(x);\n  }\n  public generateColor(key: string): string {\n    if (key in this.cache) {\n      return this.cache[key];\n    } else {\n      const color =\n        \"#\" +\n        (((1 << 24) * /* Math.random() */ this.hashCode(key)) | 0).toString(16);\n      this.cache[key] = color;\n      return color;\n    }\n  }\n}\n\nexport const randomColorGenerator = new RandomColorGenerator();\n\nexport function randomID() {\n  return Math.random().toString(36).substr(2, 9);\n}\n\nexport function getTodayName() {\n  let today = moment().format(\"YYYY-MM-DD\");\n  const momentFormat = localStorage.getItem(\"settings/moment-format\");\n  if (momentFormat) {\n    try {\n      today = moment().format(momentFormat);\n    } catch (error) {\n      today = moment().format(\"YYYY-MM-DD\");\n    }\n  }\n  return today;\n}\n","import * as path from \"path\";\nimport { NotebookFieldsFragment } from \"../generated/graphql\";\nimport { pfs } from \"../lib/fs\";\nimport { Note } from \"../lib/note\";\n\nexport async function resolveNoteImageSrc(note: Note, imageSrc: string) {\n  if (!note) {\n    return imageSrc;\n  }\n  if (imageSrc.startsWith(\"https://\") || imageSrc.startsWith(\"data:\")) {\n    return imageSrc;\n  } else if (imageSrc.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    return await loadImageAsBase64(note.notebookPath, note.filePath, imageSrc);\n  }\n}\n\nexport function resolveNotebookFilePath(\n  notebook: NotebookFieldsFragment,\n  filePath: string,\n) {\n  if (!notebook) {\n    return filePath;\n  }\n  if (filePath.startsWith(\"https://\") || filePath.startsWith(\"data:\")) {\n    return filePath;\n  } else if (filePath.startsWith(\"http://\")) {\n    return \"\";\n  } else {\n    const { gitURL, gitBranch } = notebook;\n    const gitURLArr = gitURL.replace(\"https://\", \"\").split(\"/\");\n    const gitHost = gitURLArr[0].toLowerCase();\n    const gitOwner = gitURLArr[1];\n    const gitRepo = gitURLArr[2].replace(/\\.git$/, \"\");\n    let outFilePath = \"\";\n    filePath = filePath.replace(/^\\/+/, \"\").replace(/^\\.\\/+/, \"\");\n    if (gitHost === \"github.com\") {\n      outFilePath = `https://github.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitlab.com\") {\n      outFilePath = `https://gitlab.com/${gitOwner}/${gitRepo}/-/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitee.com\") {\n      outFilePath = `https://gitee.com/${gitOwner}/${gitRepo}/raw/${gitBranch}/${filePath}`;\n    } else if (gitHost === \"gitea.com\") {\n      outFilePath = `https://gitea.com/${gitOwner}/${gitRepo}/raw/branch/${gitBranch}/${filePath}`;\n    }\n\n    return outFilePath;\n  }\n}\n\nexport async function loadImageAsBase64(\n  notebookPath: string,\n  noteFilePath: string,\n  imageSrc: string,\n): Promise<string> {\n  let imageFilePath;\n  if (imageSrc.startsWith(\"/\")) {\n    imageFilePath = path.resolve(notebookPath, \".\" + imageSrc);\n  } else {\n    imageFilePath = path.join(\n      notebookPath,\n      path.dirname(noteFilePath),\n      imageSrc,\n    );\n  }\n  if (await pfs.exists(imageFilePath)) {\n    // @ts-ignore\n    const data: Uint8Array = await pfs.readFile(imageFilePath);\n    const base64 = Buffer.from(data.buffer).toString(\"base64\");\n    let imageType = path.extname(imageSrc).slice(1);\n    if (imageType.match(/^svg$/i)) {\n      imageType = \"svg+xml\";\n    } else if (imageType.match(/^jpg$/i)) {\n      imageType = \"jpeg\";\n    }\n    return `data:image/${imageType};base64,${base64}`;\n  } else {\n    return \"\";\n  }\n}\n\nexport function isFileAnImage(fileName: string) {\n  return !!fileName.match(/\\.(jpg|jpeg|png|gif|svg)$/i);\n}\n"],"sourceRoot":""}